{"meta":{"title":"刘先玉","subtitle":"知易行难","description":"Easier said than done","author":"liuxy0551","url":"https://liuxianyu.cn","root":"/"},"pages":[{"title":"你好，我是刘先玉","date":"2019-03-10T00:53:47.000Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"about/index.html","permalink":"https://liuxianyu.cn/about/index.html","excerpt":"","text":"Hello，欢迎来到我的个人小站。 ¶关于个人 目前是一名前端开发工程师，期望在未来几年进行技术沉淀，保证自己的编码能力，在未来的管理岗工作中有所基础。 平时会折腾一些较为新奇的操作，整理一下个人博客，我会尽量将工作（主要）和生活中的点滴记录在这里。 希望在忙碌的工作中，和亲人朋友好好体会生活。 个人邮箱：liuxy0551@qq.com Github：liuxy0551 个人微信：liuxy0551 ¶关于本站 作者：刘先玉（花名：刘易，英文名：Simon）。 本站随笔为原创、引用，图片素材来源原创、网络。 ¶关于友链 如果你有好的博客，我们可以互相友链！请给我发邮件，让好的东西被更多人看到，更好的资源让更多人受益。"},{"title":"achives","date":"2019-03-10T00:54:40.000Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"achives/index.html","permalink":"https://liuxianyu.cn/achives/index.html","excerpt":"","text":""},{"title":"书籍","date":"2019-03-10T21:50:18.000Z","updated":"2019-03-31T17:38:14.000Z","comments":true,"path":"book/index.html","permalink":"https://liuxianyu.cn/book/index.html","excerpt":"","text":"¶世界500强面试题","author":"刘先玉"},{"title":"分类","date":"2019-03-10T00:54:25.000Z","updated":"2019-03-12T10:22:03.000Z","comments":false,"path":"categories/index.html","permalink":"https://liuxianyu.cn/categories/index.html","excerpt":"","text":"","author":"刘先玉"},{"title":"友链","date":"2019-03-11T08:03:27.000Z","updated":"2019-03-16T22:21:04.000Z","comments":true,"path":"links/index.html","permalink":"https://liuxianyu.cn/links/index.html","excerpt":"","text":"","author":"刘先玉"},{"title":"留言板","date":"2019-03-11T08:03:27.000Z","updated":"2019-03-16T22:21:04.000Z","comments":true,"path":"notes/index.html","permalink":"https://liuxianyu.cn/notes/index.html","excerpt":"","text":"¶2019-04-07 当下过的每一秒就是我们有限人生的一部分 不复现也不再来 所以 请把握自己的生命时间 请活得有代入感 得到的都是侥幸 失去的都是人生 ¶2019-04-01 愚人节耶今天，要整蛊嘛哈哈 ¶2019-03-28 今天毕业论文中期答辩结果出来，结果很满意，自己做出的成果就是值得高兴 ¶2019-03-17 吃亏是福，总是会遇到自己不开心的事，可能在他自己看来他自己是对的，所以这个时候退一步海阔天空，没有多大的事，为何计较呢，吃点亏没什么，只要自己无悔就好~~ ¶2019-03-16 work hard，play harder 这里有酒，你有故事嘛，心里话，咱们悄悄的说~~","author":"刘先玉"},{"title":"","date":"2023-12-12T09:23:31.668Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"photos/data.json","permalink":"https://liuxianyu.cn/photos/data.json","excerpt":"","text":"{\"list\":[{\"date\":\"2019-04\",\"arr\":{\"year\":2019,\"month\":4,\"link\":[\"2019-04-03_视频偷拍哈哈.jpg\",\"2019-04-04_清明回家理发.jpg\"],\"text\":[\"视频偷拍哈哈\",\"清明回家理发\"],\"type\":[\"image\",\"image\"]}},{\"date\":\"2019-03\",\"arr\":{\"year\":2019,\"month\":3,\"link\":[\"2019-03-12_131452012.jpg\",\"2019-03-12_13145202.jpg\",\"2019-03-12_13145203.jpg\",\"2019-03-12_13145204.jpg\",\"2019-03-12_131452046.jpg\",\"2019-03-12_13145207.jpg\",\"2019-03-12_13145208.jpg\",\"2019-03-14_13145201.jpg\",\"2019-03-15_穿女票买的衣服自拍.jpg\",\"2019-03-17_老婆在自拍.jpg\",\"2019-03-23_合拍.jpg\",\"2019-03-23_夫子庙1.jpg\",\"2019-03-23_夫子庙灯会.jpg\",\"2019-03-23_玄武湖公园1.jpg\",\"2019-03-23_玄武湖公园2.jpg\",\"2019-03-23_玄武湖公园3.jpg\",\"2019-03-23_玄武湖公园4.jpg\",\"2019-03-23_鸡鸣寺看樱花1.jpg\",\"2019-03-24_新街口试鞋1.jpg\",\"2019-03-24_新街口试鞋2.jpg\",\"2019-03-24_早饭嘿嘿.jpg\",\"2019-03-24_樱花111.jpg\",\"2019-03-24_樱花112.jpg\",\"2019-03-24_樱花113.jpg\",\"2019-03-24_樱花114.jpg\",\"2019-03-24_老婆在许愿1.jpg\",\"2019-03-24_老婆在许愿2.jpg\",\"2019-03-24_老婆在许愿3.jpg\",\"2019-03-24_老婆在许愿4.jpg\",\"2019-03-24_鸡鸣寺自拍.jpg\"],\"text\":[\"131452012\",\"13145202\",\"13145203\",\"13145204\",\"131452046\",\"13145207\",\"13145208\",\"13145201\",\"穿女票买的衣服自拍\",\"老婆在自拍\",\"合拍\",\"夫子庙1\",\"夫子庙灯会\",\"玄武湖公园1\",\"玄武湖公园2\",\"玄武湖公园3\",\"玄武湖公园4\",\"鸡鸣寺看樱花1\",\"新街口试鞋1\",\"新街口试鞋2\",\"早饭嘿嘿\",\"樱花111\",\"樱花112\",\"樱花113\",\"樱花114\",\"老婆在许愿1\",\"老婆在许愿2\",\"老婆在许愿3\",\"老婆在许愿4\",\"鸡鸣寺自拍\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2019-02\",\"arr\":{\"year\":2019,\"month\":2,\"link\":[\"2019-02-03_回老家过年1.jpg\",\"2019-02-03_回老家过年2.jpg\",\"2019-02-05_回老家过年5.jpg\",\"2019-02-05_回老家过年6.jpg\",\"2019-02-05_回老家过年7.jpg\",\"2019-02-05_回老家过年8.jpg\",\"2019-02-14_05.jpg\",\"2019-02-18_1314520.jpg\",\"2019-02-22_见家长01.jpg\",\"2019-02-22_见家长02.jpg\",\"2019-02-22_见家长03.jpg\",\"2019-02-22_见家长06.jpg\",\"2019-02-22_送情人节礼物.jpg\",\"2019-02-23_第一山游玩.jpg\",\"2019-02-23_第一山许愿.jpg\",\"2019-02-23_第一山许愿1.jpg\",\"2019-02-23_过年带女票吃饭1.jpg\",\"2019-02-23_过年带女票吃饭2.jpg\"],\"text\":[\"回老家过年1\",\"回老家过年2\",\"回老家过年5\",\"回老家过年6\",\"回老家过年7\",\"回老家过年8\",\"05\",\"1314520\",\"见家长01\",\"见家长02\",\"见家长03\",\"见家长06\",\"送情人节礼物\",\"第一山游玩\",\"第一山许愿\",\"第一山许愿1\",\"过年带女票吃饭1\",\"过年带女票吃饭2\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2019-01\",\"arr\":{\"year\":2019,\"month\":1,\"link\":[\"2019-01-07_140814.jpg\",\"2019-01-07_150.jpg\",\"2019-01-07_3337.jpg\",\"2019-01-07_4528.jpg\",\"2019-01-07_540.jpg\",\"2019-01-08_老婆.jpg\",\"2019-01-14_女票自拍.jpg\"],\"text\":[\"140814\",\"150\",\"3337\",\"4528\",\"540\",\"老婆\",\"女票自拍\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2018-06\",\"arr\":{\"year\":2018,\"month\":6,\"link\":[\"2018-06-02_南京眼游玩.jpg\"],\"text\":[\"南京眼游玩\"],\"type\":[\"image\"]}},{\"date\":\"2018-03\",\"arr\":{\"year\":2018,\"month\":3,\"link\":[\"2018-03-05_在实验室和兄弟.jpg\"],\"text\":[\"在实验室和兄弟\"],\"type\":[\"image\"]}},{\"date\":\"2017-09\",\"arr\":{\"year\":2017,\"month\":9,\"link\":[\"2017-09-27_足球志愿者1.jpg\",\"2017-09-27_足球志愿者2.jpg\"],\"text\":[\"足球志愿者1\",\"足球志愿者2\"],\"type\":[\"image\",\"image\"]}},{\"date\":\"2017-08\",\"arr\":{\"year\":2017,\"month\":8,\"link\":[\"2017-08-04_01.jpg\",\"2017-08-04_02.jpg\",\"2017-08-04_03.jpg\",\"2017-08-04_04.jpg\",\"2017-08-04_05.jpg\",\"2017-08-04_06.jpg\",\"2017-08-04_07.jpg\",\"2017-08-04_08.jpg\",\"2017-08-04_09.jpg\"],\"text\":[\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2016-05\",\"arr\":{\"year\":2016,\"month\":5,\"link\":[\"2016-05-04_08.jpg\"],\"text\":[\"08\"],\"type\":[\"image\"]}},{\"date\":\"2014-12\",\"arr\":{\"year\":2014,\"month\":12,\"link\":[\"2014-12-22_07.jpg\"],\"text\":[\"07\"],\"type\":[\"image\"]}}]}"},{"title":"摄影","date":"2023-12-12T09:23:31.669Z","updated":"2023-09-21T07:28:56.000Z","comments":false,"path":"photos/index.html","permalink":"https://liuxianyu.cn/photos/index.html","excerpt":"","text":"Photos Videos 图片正在加载中… (function() { var loadScript = function(path) { var $script = document.createElement('script') document.getElementsByTagName('body')[0].appendChild($script) $script.setAttribute('src', path) } setTimeout(function() { loadScript('./ins.js') }, 0) })()"},{"title":"","date":"2023-12-12T09:23:31.670Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"photos/ins.css","permalink":"https://liuxianyu.cn/photos/ins.css","excerpt":"","text":"#post-instagram{ padding: 30px; } figure { margin: 0; } #post-instagram .article-entry{ padding-right: 0; } .instagram{ position: relative; min-height: 500px; } .instagram img { width: 100%; } .posts-expand .post-body img { padding: 0; border : 0; } .instagram .year { font-size: 16px; } .instagram .open-ins{ padding: 10px 0; color: #cdcdcd; } .instagram .open-ins:hover{ color: #657b83; } .instagram .year{ display: inline; } .instagram .thumb { width: 25%; height: 0; padding-bottom: 25%; position: relative; display: inline-block; text-align: center; background: #ededed; outline: 1px solid #ddd; } .instagram .thumb a { position: relative; } .instagram .album h1 em{ font-style: normal; font-size: 14px; margin-left: 10px; } .instagram .album ul{ display: flex; flex-wrap: wrap; clear: both; width: 100%; text-align: left; } .instagram .album li{ list-style: none; display: inline-block; box-sizing: border-box; padding: 0 5px; margin-bottom: -10px; height: 0; width: 25%; position: relative; padding-bottom: 25%; } .instagram .album li:before{ display: none; } .instagram .album div.img-box{ position: absolute; width: 90%; height: 90%; -webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); -moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); } .instagram .album div.img-box img{ width: 100%; height: 100%; position: absolute; z-index: 2; } .instagram .album div.img-box .img-bg{ position: absolute; top: 0; left: 0; bottom: 0px; width: 100%; margin: -5px; padding: 5px; -webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); -moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); -webkit-transition: all 0.15s ease-out 0.1s; -moz-transition: all 0.15s ease-out 0.1s; -o-transition: all 0.15s ease-out 0.1s; transition: all 0.15s ease-out 0.1s; opacity: 0.2; cursor: pointer; display: block; z-index: 3; } .instagram .album div.img-box .icon { font-size: 14px; position: absolute; left: 50%; top: 50%; margin-left: -7px; margin-top: -7px; color: #999; z-index: 1; } .instagram .album div.img-box .img-bg:hover{ opacity: 0; } .photos-btn-wrap { border-bottom: 1px solid #e5e5e5; margin-bottom: 20px; } .photos-btn { font-size: 16px; color: #333; margin-bottom: -4px; padding: 5px 8px 3px; } .photos-btn.active { color: #08c; border: 1px solid #e5e5e5; border-bottom: 5px solid #fff; } @media screen and (max-width:600px) { .instagram .thumb { width: 50%; padding-bottom: 50%; } .instagram .album li { width: 100%; position: relative; padding-bottom: 100%; text-align: center; } .instagram .album div.img-box{ margin: 0; width: 90%; height: 90%; } } /* ====== video ===== */ .video-container { z-index: 1; position: relative; padding-bottom: 56.25%; margin: 0 auto; } .video-container iframe, .video-container object, .video-container embed {z-index: 1;position: absolute;top: 0;left: 7%;width: 85%;height: 85%;box-shadow: 0px 0px 20px 2px #888888;}"},{"title":"","date":"2023-12-12T09:23:31.671Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"photos/photoswipe.css","permalink":"https://liuxianyu.cn/photos/photoswipe.css","excerpt":"","text":"/*! PhotoSwipe main CSS by Dmitry Semenov | photoswipe.com | MIT license */ /* Styles for basic PhotoSwipe functionality (sliding area, open/close transitions) */ /* pswp = photoswipe */ .pswp { display: none; position: absolute; width: 100%; height: 100%; left: 0; top: 0; overflow: hidden; -ms-touch-action: none; touch-action: none; z-index: 1500; -webkit-text-size-adjust: 100%; /* create separate layer, to avoid paint on window.onscroll in webkit/blink */ -webkit-backface-visibility: hidden; outline: none; } .pswp * { -webkit-box-sizing: border-box; box-sizing: border-box; } .pswp img { max-width: none; } /* style is added when JS option showHideOpacity is set to true */ .pswp--animate_opacity { /* 0.001, because opacity:0 doesn't trigger Paint action, which causes lag at start of transition */ opacity: 0.001; will-change: opacity; /* for open/close transition */ -webkit-transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1); transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1); } .pswp--open { display: block; } .pswp--zoom-allowed .pswp__img { /* autoprefixer: off */ cursor: -webkit-zoom-in; cursor: -moz-zoom-in; cursor: zoom-in; } .pswp--zoomed-in .pswp__img { /* autoprefixer: off */ cursor: -webkit-grab; cursor: -moz-grab; cursor: grab; } .pswp--dragging .pswp__img { /* autoprefixer: off */ cursor: -webkit-grabbing; cursor: -moz-grabbing; cursor: grabbing; } /* Background is added as a separate element. As animating opacity is much faster than animating rgba() background-color. */ .pswp__bg { position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: #000; opacity: 0; -webkit-transform: translateZ(0); transform: translateZ(0); -webkit-backface-visibility: hidden; will-change: opacity; } .pswp__scroll-wrap { position: absolute; left: 0; top: 0; width: 100%; height: 100%; overflow: hidden; } .pswp__container, .pswp__zoom-wrap { -ms-touch-action: none; touch-action: none; position: absolute; left: 0; right: 0; top: 0; bottom: 0; } /* Prevent selection and tap highlights */ .pswp__container, .pswp__img { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-tap-highlight-color: transparent; -webkit-touch-callout: none; } .pswp__zoom-wrap { position: absolute; width: 100%; -webkit-transform-origin: left top; -ms-transform-origin: left top; transform-origin: left top; /* for open/close transition */ -webkit-transition: -webkit-transform 333ms cubic-bezier(0.4, 0, 0.22, 1); transition: transform 333ms cubic-bezier(0.4, 0, 0.22, 1); } .pswp__bg { will-change: opacity; /* for open/close transition */ -webkit-transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1); transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1); } .pswp--animated-in .pswp__bg, .pswp--animated-in .pswp__zoom-wrap { -webkit-transition: none; transition: none; } .pswp__container, .pswp__zoom-wrap { -webkit-backface-visibility: hidden; } .pswp__item { position: absolute; left: 0; right: 0; top: 0; bottom: 0; overflow: hidden; } .pswp__img { position: absolute; width: auto; height: auto; top: 0; left: 0; } /* stretched thumbnail or div placeholder element (see below) style is added to avoid flickering in webkit/blink when layers overlap */ .pswp__img--placeholder { -webkit-backface-visibility: hidden; } /* div element that matches size of large image large image loads on top of it */ .pswp__img--placeholder--blank { background: #222; } .pswp--ie .pswp__img { width: 100% !important; height: auto !important; left: 0; top: 0; } /* Error message appears when image is not loaded (JS option errorMsg controls markup) */ .pswp__error-msg { position: absolute; left: 0; top: 50%; width: 100%; text-align: center; font-size: 14px; line-height: 16px; margin-top: -8px; color: #CCC; } .pswp__error-msg a { color: #CCC; text-decoration: underline; }"},{"title":"","date":"2023-12-12T09:23:31.670Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"photos/ins.js","permalink":"https://liuxianyu.cn/photos/ins.js","excerpt":"","text":"/******/ (function(modules) { // webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if (installedModules[moduleId]) /******/ return installedModules[moduleId].exports; /******/ /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ exports: {}, /******/ id: moduleId, /******/ loaded: false /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.loaded = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = \"/dist/\"; /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ function(module, exports, __webpack_require__) { 'use strict'; __webpack_require__(1); var _view = __webpack_require__(2); var _view2 = _interopRequireDefault(_view); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } /** * @name impush-client * @description 这个项目让我发家致富… * @date 2016-12-1 */ var _collection = []; var _count = 0; var searchData; function addMask(elem) { var rect = elem.getBoundingClientRect(); var style = getComputedStyle(elem, null); var mask = document.createElement('i'); mask.className = 'icon-film'; mask.style.color = '#fff'; mask.style.fontSize = '26px'; mask.style.position = 'absolute'; mask.style.right = '10px'; mask.style.bottom = '10px'; mask.style.zIndex = 1; elem.parentNode.appendChild(mask); } var createVideoIncon = function createVideoIncon() { var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]'); for (var i = 0, len = $videoImg.length; i < len; i++) { addMask($videoImg[i]); } }; var render = function render(res) { var ulTmpl = \"\"; for (var j = 0, len2 = res.list.length; j < len2; j++) { var data = res.list[j].arr; var liTmpl = \"\"; for (var i = 0, len = data.link.length; i < len; i++) { var minSrc = 'https://raw.githubusercontent.com/liuxy0551/myblog_album/master/min_photos/' + data.link[i]; var src = 'https://raw.githubusercontent.com/liuxy0551/myblog_album/master/photos/' + data.link[i]; var type = data.type[i]; var target = src + (type === 'video' ? '.mp4' : '.jpg'); src += ''; liTmpl += '\\ \\ \\ \\ ' + data.text[i] + '\\ '; } ulTmpl = ulTmpl + '' + data.year + '年' + data.month + '月\\ ' + liTmpl + '\\ '; } document.querySelector('.instagram').innerHTML = '' + ulTmpl + ''; createVideoIncon(); _view2.default.init(); }; var replacer = function replacer(str) { var arr = str.split(\"/\"); return \"/assets/ins/\" + arr[arr.length - 1]; }; var ctrler = function ctrler(data) { var imgObj = {}; for (var i = 0, len = data.length; i < len; i++) { var y = data[i].y; var m = data[i].m; var src = replacer(data[i].src); var text = data[i].text; var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m); if (imgObj[key]) { imgObj[key].srclist.push(src); imgObj[key].text.push(text); } else { imgObj[key] = { year: y, month: m, srclist: [src], text: [text] }; } } render(imgObj); }; function loadData(success) { if (!searchData) { var xhr = new XMLHttpRequest(); xhr.open('GET', './data.json?t=' + +new Date(), true); xhr.onload = function() { if (this.status >= 200 && this.status < 300) { var res = JSON.parse(this.response); searchData = res; success(searchData); } else { console.error(this.statusText); } }; xhr.onerror = function() { console.error(this.statusText); }; xhr.send(); } else { success(searchData); } } var Ins = { init: function init() { loadData(function(data) { render(data); }); } }; Ins.init(); // export default impush; /***/ }, /* 1 */ /***/ function(module, exports, __webpack_require__) { /* WEBPACK VAR INJECTION */ (function(global) { 'use strict'; var inViewport = __webpack_require__(3); var lazyAttrs = ['data-src']; global.lzld = lazyload(); // Provide libs using getAttribute early to get the good src // and not the fake data-src replaceGetAttribute('Image'); replaceGetAttribute('IFrame'); function registerLazyAttr(attr) { if (indexOf.call(lazyAttrs, attr) === -1) { lazyAttrs.push(attr); } } function lazyload(opts) { opts = merge({ 'offset': 333, 'src': 'data-src', 'container': false }, opts || {}); if (typeof opts.src === 'string') { registerLazyAttr(opts.src); } var elts = []; function show(elt) { var src = findRealSrc(elt); if (src) { elt.src = src; } elt.setAttribute('data-lzled', true); elts[indexOf.call(elts, elt)] = null; } function findRealSrc(elt) { if (typeof opts.src === 'function') { return opts.src(elt); } return elt.getAttribute(opts.src); } function register(elt) { elt.onload = null; elt.removeAttribute('onload'); elt.onerror = null; elt.removeAttribute('onerror'); if (indexOf.call(elts, elt) === -1) { inViewport(elt, opts, show); } } return register; } function replaceGetAttribute(elementName) { var fullname = 'HTML' + elementName + 'Element'; if (fullname in global === false) { return; } var original = global[fullname].prototype.getAttribute; global[fullname].prototype.getAttribute = function(name) { if (name === 'src') { var realSrc; for (var i = 0, max = lazyAttrs.length; i < max; i++) { realSrc = original.call(this, lazyAttrs[i]); if (realSrc) { break; } } return realSrc || original.call(this, name); } // our own lazyloader will go through theses lines // because we use getAttribute(opts.src) return original.call(this, name); }; } function merge(defaults, opts) { for (var name in defaults) { if (opts[name] === undefined) { opts[name] = defaults[name]; } } return opts; } // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html function indexOf(value) { for (var i = this.length; i-- && this[i] !== value;) {} return i; } module.exports = lazyload; // export default impush; /* WEBPACK VAR INJECTION */ }.call(exports, (function() { return this; }()))) /***/ }, /* 2 */ /***/ function(module, exports) { 'use strict'; var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) { // parse slide data (url, title, size ...) from DOM elements // (children of gallerySelector) var parseThumbnailElements = function parseThumbnailElements(el) { el = el.parentNode.parentNode; var thumbElements = el.getElementsByClassName('thumb'), numNodes = thumbElements.length, items = [], figureEl, linkEl, size, type, // video or not target, item; for (var i = 0; i < numNodes; i++) { figureEl = thumbElements[i]; // // include only element nodes if (figureEl.nodeType !== 1) { continue; } linkEl = figureEl.children[0]; // size = linkEl.getAttribute('data-size').split('x'); type = linkEl.getAttribute('data-type'); target = linkEl.getAttribute('data-target'); // create slide object item = { src: linkEl.getAttribute('href'), w: parseInt(size[0], 10), h: parseInt(size[1], 10) }; if (figureEl.children.length > 1) { item.title = figureEl.children[1].innerHTML; } if (linkEl.children.length > 0) { item.msrc = linkEl.children[0].getAttribute('src'); item.type = type; item.target = target; item.html = ''; if (type === 'video') { //item.src = null; } } item.el = figureEl; // save link to element for getThumbBoundsFn items.push(item); } return items; }; // find nearest parent element var closest = function closest(el, fn) { return el && (fn(el) ? el : closest(el.parentNode, fn)); }; // triggers when user clicks on thumbnail var onThumbnailsClick = function onThumbnailsClick(e) { e = e || window.event; e.preventDefault ? e.preventDefault() : e.returnValue = false; var eTarget = e.target || e.srcElement; // find root element of slide var clickedListItem = closest(eTarget, function(el) { return el.tagName && el.tagName.toUpperCase() === 'FIGURE'; }); if (!clickedListItem) { return; } // find index of clicked item by looping through all child nodes // alternatively, you may define index via data- attribute var clickedGallery = clickedListItem.parentNode, // childNodes = clickedListItem.parentNode.childNodes, // numChildNodes = childNodes.length, childNodes = document.getElementsByClassName('thumb'), numChildNodes = childNodes.length, nodeIndex = 0, index; for (var i = 0; i < numChildNodes; i++) { if (childNodes[i].nodeType !== 1) { continue; } if (childNodes[i] === clickedListItem) { index = nodeIndex; break; } nodeIndex++; } if (index >= 0) { // open PhotoSwipe if valid index found openPhotoSwipe(index, clickedGallery); } return false; }; // parse picture index and gallery index from URL (#&pid=1&gid=2) var photoswipeParseHash = function photoswipeParseHash() { var hash = window.location.hash.substring(1), params = {}; if (hash.length < 5) { return params; } var vars = hash.split('&'); for (var i = 0; i < vars.length; i++) { if (!vars[i]) { continue; } var pair = vars[i].split('='); if (pair.length < 2) { continue; } params[pair[0]] = pair[1]; } if (params.gid) { params.gid = parseInt(params.gid, 10); } return params; }; var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) { var pswpElement = document.querySelectorAll('.pswp')[0], gallery, options, items; items = parseThumbnailElements(galleryElement); // define options (if needed) options = { // define gallery index (for URL) galleryUID: galleryElement.getAttribute('data-pswp-uid'), getThumbBoundsFn: function getThumbBoundsFn(index) { // See Options -> getThumbBoundsFn section of documentation for more info var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail pageYScroll = window.pageYOffset || document.documentElement.scrollTop, rect = thumbnail.getBoundingClientRect(); return { x: rect.left, y: rect.top + pageYScroll, w: rect.width }; } }; // PhotoSwipe opened from URL if (fromURL) { if (options.galleryPIDs) { // parse real index when custom PIDs are used // http://photoswipe.com/documentation/faq.html#custom-pid-in-url for (var j = 0; j < items.length; j++) { if (items[j].pid == index) { options.index = j; break; } } } else { // in URL indexes start from 1 options.index = parseInt(index, 10) - 1; } } else { options.index = parseInt(index, 10); } // exit if index not found if (isNaN(options.index)) { return; } if (disableAnimation) { options.showAnimationDuration = 0; } // Pass data to PhotoSwipe and initialize it gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options); gallery.init(); var $tempVideo; var stopVideoHandle = function stopVideoHandle() { if ($tempVideo) { $tempVideo.remove(); $tempVideo = null; } }; var changeHandle = function changeHandle() { var item = gallery.currItem; stopVideoHandle(); if (item.type === 'video') { var $ctn = item.container; var style = $ctn.getElementsByClassName('pswp__img')[0].style; var $video = document.createElement('video'); $video.setAttribute('autoplay', 'autoplay'); $video.setAttribute('controls', 'controls'); $video.setAttribute('src', item.target); $video.style.width = style.width; $video.style.height = style.height; $video.style.position = 'absolute'; $video.style.zIndex = 2; $tempVideo = $video; $ctn.appendChild($video); } }; gallery.listen('initialZoomIn', changeHandle); gallery.listen('afterChange', changeHandle); gallery.listen('initialZoomOut', stopVideoHandle); }; // loop through all gallery elements and bind events var galleryElements = document.querySelectorAll(gallerySelector); for (var i = 0, l = galleryElements.length; i < l; i++) { galleryElements[i].setAttribute('data-pswp-uid', i + 1); galleryElements[i].onclick = onThumbnailsClick; } // Parse URL and open gallery if it contains #&pid=3&gid=1 var hashData = photoswipeParseHash(); if (hashData.pid && hashData.gid) { openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true); } }; var Viewer = function() { function init() { initPhotoSwipeFromDOM('.photos'); } return { init: init }; }(); module.exports = Viewer; /***/ }, /* 3 */ /***/ function(module, exports) { /* WEBPACK VAR INJECTION */ (function(global) { module.exports = inViewport; var instances = []; var supportsMutationObserver = typeof global.MutationObserver === 'function'; function inViewport(elt, params, cb) { var opts = { container: global.document.body, offset: 0 }; if (params === undefined || typeof params === 'function') { cb = params; params = {}; } var container = opts.container = params.container || opts.container; var offset = opts.offset = params.offset || opts.offset; for (var i = 0; i < instances.length; i++) { if (instances[i].container === container) { return instances[i].isInViewport(elt, offset, cb); } } return instances[ instances.push(createInViewport(container)) - 1 ].isInViewport(elt, offset, cb); } function addEvent(el, type, fn) { if (el.attachEvent) { el.attachEvent('on' + type, fn); } else { el.addEventListener(type, fn, false); } } function debounce(func, wait, immediate) { var timeout; return function() { var context = this, args = arguments; var callNow = immediate && !timeout; clearTimeout(timeout); timeout = setTimeout(later, wait); if (callNow) func.apply(context, args); function later() { timeout = null; if (!immediate) func.apply(context, args); } }; } // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708 var contains = function() { if (!global.document) { return true; } return global.document.documentElement.compareDocumentPosition ? function(a, b) { return !!(a.compareDocumentPosition(b) & 16); } : global.document.documentElement.contains ? function(a, b) { return a !== b && (a.contains ? a.contains(b) : false); } : function(a, b) { while (b = b.parentNode) { if (b === a) { return true; } } return false; }; } function createInViewport(container) { var watches = createWatches(); var scrollContainer = container === global.document.body ? global : container; var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15); addEvent(scrollContainer, 'scroll', debouncedCheck); if (scrollContainer === global) { addEvent(global, 'resize', debouncedCheck); } if (supportsMutationObserver) { observeDOM(watches, container, debouncedCheck); } // failsafe check, every 200ms we check for visible images // usecase: a hidden parent containing eleements // when the parent becomes visible, we have no event that the children // became visible setInterval(debouncedCheck, 150); function isInViewport(elt, offset, cb) { if (!cb) { return isVisible(elt, offset); } var remote = createRemote(elt, offset, cb); remote.watch(); return remote; } function createRemote(elt, offset, cb) { function watch() { watches.add(elt, offset, cb); } function dispose() { watches.remove(elt); } return { watch: watch, dispose: dispose }; } function watchInViewport(elt, offset, cb) { if (isVisible(elt, offset)) { watches.remove(elt); cb(elt); } } function isVisible(elt, offset) { if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) { return false; } // Check if the element is visible // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js if (!elt.offsetWidth || !elt.offsetHeight) { return false; } var eltRect = elt.getBoundingClientRect(); var viewport = {}; if (container === global.document.body) { viewport = { top: -offset, left: -offset, right: global.document.documentElement.clientWidth + offset, bottom: global.document.documentElement.clientHeight + offset }; } else { var containerRect = container.getBoundingClientRect(); viewport = { top: containerRect.top - offset, left: containerRect.left - offset, right: containerRect.right + offset, bottom: containerRect.bottom + offset }; } // The element must overlap with the visible part of the viewport var visible = ( (eltRect.right > viewport.left) && (eltRect.left < viewport.right) && (eltRect.bottom > viewport.top) && (eltRect.top < viewport.bottom) ); return visible; } return { container: container, isInViewport: isInViewport }; } function createWatches() { var watches = []; function add(elt, offset, cb) { if (!isWatched(elt)) { watches.push([elt, offset, cb]); } } function remove(elt) { var pos = indexOf(elt); if (pos !== -1) { watches.splice(pos, 1); } } function indexOf(elt) { for (var i = watches.length - 1; i >= 0; i--) { if (watches[i][0] === elt) { return i; } } return -1; } function isWatched(elt) { return indexOf(elt) !== -1; } function checkAll(cb) { return function() { for (var i = watches.length - 1; i >= 0; i--) { cb.apply(this, watches[i]); } }; } return { add: add, remove: remove, isWatched: isWatched, checkAll: checkAll }; } function observeDOM(watches, container, cb) { var observer = new MutationObserver(watch); var filter = Array.prototype.filter; var concat = Array.prototype.concat; observer.observe(container, { childList: true, subtree: true, // changes like style/width/height/display will be catched attributes: true }); function watch(mutations) { // some new DOM nodes where previously watched // we should check their positions if (mutations.some(knownNodes) === true) { setTimeout(cb, 0); } } function knownNodes(mutation) { var nodes = concat.call([], Array.prototype.slice.call(mutation.addedNodes), mutation.target ); return filter.call(nodes, watches.isWatched).length > 0; } } /* WEBPACK VAR INJECTION */ }.call(exports, (function() { return this; }()))) /***/ } /******/ ]);"},{"title":"袋鼠云招聘，长期邮箱","date":"2019-03-10T00:53:47.000Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"recruit/index.html","permalink":"https://liuxianyu.cn/recruit/index.html","excerpt":"","text":"本人目前在袋鼠云担任前端工程师，坐标：杭州 数栈产研部，前端主要是React + ts开发自有的大数据 Web 产品。 公司目前发展势头较好，前端、测试、后端都比较缺人，有兴趣的同学可以找我内推。招聘要求大同小异，各个评级的同学都需要，具体根据面试表现来定。 ¶部门介绍 数栈是袋鼠云旗下云原生—站式数据中台 PaaS，平台覆盖全链路的数据采集、数据分析、数据挖掘、任务运维、数据质量、数据地图、数据模型、数据API开放等场景，充分满足企业建设数据中台过程中的多样复杂需求。 ¶投递简历 若发现感兴趣的职位或者有什么想了解一下的，欢迎发送邮件至 liuxy0551@qq.com 找我交流沟通，请备注“内推-姓名-职位”。 ¶公司地址 浙江省杭州市余杭区仓前街道海智中心8号楼"},{"title":"致谢","date":"2019-03-10T00:53:47.000Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"thank/index.html","permalink":"https://liuxianyu.cn/thank/index.html","excerpt":"","text":"Hello，欢迎来到刘先玉的个人小站。"},{"title":"标签","date":"2019-03-10T00:54:01.000Z","updated":"2019-03-12T10:21:01.000Z","comments":false,"path":"tags/index.html","permalink":"https://liuxianyu.cn/tags/index.html","excerpt":"","text":"","author":"刘先玉"},{"title":"摄影","date":"2019-03-12T17:51:05.000Z","updated":"2019-03-15T11:07:21.000Z","comments":false,"path":"photos/videos.html","permalink":"https://liuxianyu.cn/photos/videos.html","excerpt":"","text":"Photos Videos 我家的小开心 五分钟超强高效复合运动 机器学习实战项目","author":"刘先玉"},{"title":"实验空间站","date":"2019-03-17T12:18:28.000Z","updated":"2019-03-17T12:18:28.000Z","comments":false,"path":"laboratory/index.html","permalink":"https://liuxianyu.cn/laboratory/index.html","excerpt":"","text":"¶这里有酒，你有故事嘛，我在实验室等你 ¶工具盒子 点击工具盒子，很好用的工具罗列 ¶代码训练营 点击代码训练营，训练编程思维 ¶音乐吧 点击音乐吧，带你去听天籁，体验新功能 ¶碎碎念 树洞~~ 待开发 ¶小游戏 待开发~~ ¶资料云 实现云文件上传、浏览、下载，待开发","author":"刘先玉"},{"title":"","date":"2023-12-12T09:23:31.634Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"lib/jquery_lazyload/bower.json","permalink":"https://liuxianyu.cn/lib/jquery_lazyload/bower.json","excerpt":"","text":"{\"name\":\"jquery_lazyload\",\"version\":\"1.9.4\",\"homepage\":\"https://appelsiini.net/projects/lazyload/\",\"authors\":[\"Mika Tuupola \"],\"description\":\"jQuery plugin for lazy loading images\",\"main\":[\"jquery.lazyload.js\",\"jquery.scrollstop.js\"],\"license\":\"MIT\",\"ignore\":[\"**/.*\",\"**/*.min.js\",\"**/*.html\",\"**/*.textile\",\"Gruntfile.js\",\"lazyload.jquery.json\",\"package.json\",\"node_modules\",\"bower_components\",\"test\",\"img\"]}"},{"title":"","date":"2023-12-12T09:23:31.635Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"lib/jquery_lazyload/jquery.lazyload.js","permalink":"https://liuxianyu.cn/lib/jquery_lazyload/jquery.lazyload.js","excerpt":"","text":"/*! * Lazy Load - jQuery plugin for lazy loading images * * Copyright (c) 2007-2015 Mika Tuupola * * Licensed under the MIT license: * http://www.opensource.org/licenses/mit-license.php * * Project home: * http://www.appelsiini.net/projects/lazyload * * Version: 1.9.7 * */ (function($, window, document, undefined) { var $window = $(window); $.fn.lazyload = function(options) { var elements = this; var $container; var settings = { threshold : 0, failure_limit : 0, event : \"scroll\", effect : \"show\", container : window, data_attribute : \"original\", skip_invisible : false, appear : null, load : null, placeholder : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\" }; function update() { var counter = 0; elements.each(function() { var $this = $(this); if (settings.skip_invisible && !$this.is(\":visible\")) { return; } if ($.abovethetop(this, settings) || $.leftofbegin(this, settings)) { /* Nothing. */ } else if (!$.belowthefold(this, settings) && !$.rightoffold(this, settings)) { $this.trigger(\"appear\"); /* if we found an image we'll load, reset the counter */ counter = 0; } else { if (++counter > settings.failure_limit) { return false; } } }); } if(options) { /* Maintain BC for a couple of versions. */ if (undefined !== options.failurelimit) { options.failure_limit = options.failurelimit; delete options.failurelimit; } if (undefined !== options.effectspeed) { options.effect_speed = options.effectspeed; delete options.effectspeed; } $.extend(settings, options); } /* Cache container as jQuery as object. */ $container = (settings.container === undefined || settings.container === window) ? $window : $(settings.container); /* Fire one scroll event per scroll. Not one scroll event per image. */ if (0 === settings.event.indexOf(\"scroll\")) { $container.bind(settings.event, function() { return update(); }); } this.each(function() { var self = this; var $self = $(self); self.loaded = false; /* If no src attribute given use data:uri. */ if ($self.attr(\"src\") === undefined || $self.attr(\"src\") === false) { if ($self.is(\"img\")) { $self.attr(\"src\", settings.placeholder); } } /* When appear is triggered load original image. */ $self.one(\"appear\", function() { if (!this.loaded) { if (settings.appear) { var elements_left = elements.length; settings.appear.call(self, elements_left, settings); } $(\"\") .bind(\"load\", function() { var original = $self.attr(\"data-\" + settings.data_attribute); $self.hide(); if ($self.is(\"img\")) { $self.attr(\"src\", original); } else { $self.css(\"background-image\", \"url('\" + original + \"')\"); } $self[settings.effect](settings.effect_speed); self.loaded = true; /* Remove image from array so it is not looped next time. */ var temp = $.grep(elements, function(element) { return !element.loaded; }); elements = $(temp); if (settings.load) { var elements_left = elements.length; settings.load.call(self, elements_left, settings); } }) .attr(\"src\", $self.attr(\"data-\" + settings.data_attribute)); } }); /* When wanted event is triggered load original image */ /* by triggering appear. */ if (0 !== settings.event.indexOf(\"scroll\")) { $self.bind(settings.event, function() { if (!self.loaded) { $self.trigger(\"appear\"); } }); } }); /* Check if something appears when window is resized. */ $window.bind(\"resize\", function() { update(); }); /* With IOS5 force loading images when navigating with back button. */ /* Non optimal workaround. */ if ((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)) { $window.bind(\"pageshow\", function(event) { if (event.originalEvent && event.originalEvent.persisted) { elements.each(function() { $(this).trigger(\"appear\"); }); } }); } /* Force initial check if images should appear. */ $(document).ready(function() { update(); }); return this; }; /* Convenience methods in jQuery namespace. */ /* Use as $.belowthefold(element, {threshold : 100, container : window}) */ $.belowthefold = function(element, settings) { var fold; if (settings.container === undefined || settings.container === window) { fold = (window.innerHeight ? window.innerHeight : $window.height()) + $window.scrollTop(); } else { fold = $(settings.container).offset().top + $(settings.container).height(); } return fold = $(element).offset().left + settings.threshold + $(element).width(); }; $.inviewport = function(element, settings) { return !$.rightoffold(element, settings) && !$.leftofbegin(element, settings) && !$.belowthefold(element, settings) && !$.abovethetop(element, settings); }; /* Custom selectors for your convenience. */ /* Use as $(\"img:below-the-fold\").something() or */ /* $(\"img\").filter(\":below-the-fold\").something() which is faster */ $.extend($.expr[\":\"], { \"below-the-fold\" : function(a) { return $.belowthefold(a, {threshold : 0}); }, \"above-the-top\" : function(a) { return !$.belowthefold(a, {threshold : 0}); }, \"right-of-screen\": function(a) { return $.rightoffold(a, {threshold : 0}); }, \"left-of-screen\" : function(a) { return !$.rightoffold(a, {threshold : 0}); }, \"in-viewport\" : function(a) { return $.inviewport(a, {threshold : 0}); }, /* Maintain BC for couple of versions. */ \"above-the-fold\" : function(a) { return !$.belowthefold(a, {threshold : 0}); }, \"right-of-fold\" : function(a) { return $.rightoffold(a, {threshold : 0}); }, \"left-of-fold\" : function(a) { return !$.rightoffold(a, {threshold : 0}); } }); })(jQuery, window, document);"},{"title":"","date":"2023-12-12T09:23:31.657Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"photos/default-skin/default-skin.css","permalink":"https://liuxianyu.cn/photos/default-skin/default-skin.css","excerpt":"","text":"/*! PhotoSwipe Default UI CSS by Dmitry Semenov | photoswipe.com | MIT license */ /* Contents: 1. Buttons 2. Share modal and links 3. Index indicator (\"1 of X\" counter) 4. Caption 5. Loading indicator 6. Additional styles (root element, top bar, idle state, hidden state, etc.) */ /* 1. Buttons */ /* css reset */ .pswp__button { width: 44px; height: 44px; position: relative; background: none; cursor: pointer; overflow: visible; -webkit-appearance: none; display: block; border: 0; padding: 0; margin: 0; float: right; opacity: 0.75; -webkit-transition: opacity 0.2s; transition: opacity 0.2s; -webkit-box-shadow: none; box-shadow: none; } .pswp__button:focus, .pswp__button:hover { opacity: 1; } .pswp__button:active { outline: none; opacity: 0.9; } .pswp__button::-moz-focus-inner { padding: 0; border: 0; } /* pswp__ui--over-close class it added when mouse is over element that should close gallery */ .pswp__ui--over-close .pswp__button--close { opacity: 1; } .pswp__button, .pswp__button--arrow--left:before, .pswp__button--arrow--right:before { background: url(default-skin.png) 0 0 no-repeat; background-size: 264px 88px; width: 44px; height: 44px; } @media (-webkit-min-device-pixel-ratio: 1.1), (-webkit-min-device-pixel-ratio: 1.09375), (min-resolution: 105dpi), (min-resolution: 1.1dppx) { /* Serve SVG sprite if browser supports SVG and resolution is more than 105dpi */ .pswp--svg .pswp__button, .pswp--svg .pswp__button--arrow--left:before, .pswp--svg .pswp__button--arrow--right:before { background-image: url(default-skin.svg); } .pswp--svg .pswp__button--arrow--left, .pswp--svg .pswp__button--arrow--right { background: none; } } .pswp__button--close { background-position: 0 -44px; } .pswp__button--share { background-position: -44px -44px; } .pswp__button--fs { display: none; } .pswp--supports-fs .pswp__button--fs { display: block; } .pswp--fs .pswp__button--fs { background-position: -44px 0; } .pswp__button--zoom { display: none; background-position: -88px 0; } .pswp--zoom-allowed .pswp__button--zoom { display: block; } .pswp--zoomed-in .pswp__button--zoom { background-position: -132px 0; } /* no arrows on touch screens */ .pswp--touch .pswp__button--arrow--left, .pswp--touch .pswp__button--arrow--right { visibility: hidden; } /* Arrow buttons hit area (icon is added to :before pseudo-element) */ .pswp__button--arrow--left, .pswp__button--arrow--right { background: none; top: 50%; margin-top: -50px; width: 70px; height: 100px; position: absolute; } .pswp__button--arrow--left { left: 0; } .pswp__button--arrow--right { right: 0; } .pswp__button--arrow--left:before, .pswp__button--arrow--right:before { content: ''; top: 35px; background-color: rgba(0, 0, 0, 0.3); height: 30px; width: 32px; position: absolute; } .pswp__button--arrow--left:before { left: 6px; background-position: -138px -44px; } .pswp__button--arrow--right:before { right: 6px; background-position: -94px -44px; } /* 2. Share modal/popup and links */ .pswp__counter, .pswp__share-modal { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .pswp__share-modal { display: block; background: rgba(0, 0, 0, 0.5); width: 100%; height: 100%; top: 0; left: 0; padding: 10px; position: absolute; z-index: 1600; opacity: 0; -webkit-transition: opacity 0.25s ease-out; transition: opacity 0.25s ease-out; -webkit-backface-visibility: hidden; will-change: opacity; } .pswp__share-modal--hidden { display: none; } .pswp__share-tooltip { z-index: 1620; position: absolute; background: #FFF; top: 56px; border-radius: 2px; display: block; width: auto; right: 44px; -webkit-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25); box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25); -webkit-transform: translateY(6px); -ms-transform: translateY(6px); transform: translateY(6px); -webkit-transition: -webkit-transform 0.25s; transition: transform 0.25s; -webkit-backface-visibility: hidden; will-change: transform; } .pswp__share-tooltip a { display: block; padding: 8px 12px; color: #000; text-decoration: none; font-size: 14px; line-height: 18px; } .pswp__share-tooltip a:hover { text-decoration: none; color: #000; } .pswp__share-tooltip a:first-child { /* round corners on the first/last list item */ border-radius: 2px 2px 0 0; } .pswp__share-tooltip a:last-child { border-radius: 0 0 2px 2px; } .pswp__share-modal--fade-in { opacity: 1; } .pswp__share-modal--fade-in .pswp__share-tooltip { -webkit-transform: translateY(0); -ms-transform: translateY(0); transform: translateY(0); } /* increase size of share links on touch devices */ .pswp--touch .pswp__share-tooltip a { padding: 16px 12px; } a.pswp__share--facebook:before { content: ''; display: block; width: 0; height: 0; position: absolute; top: -12px; right: 15px; border: 6px solid transparent; border-bottom-color: #FFF; -webkit-pointer-events: none; -moz-pointer-events: none; pointer-events: none; } a.pswp__share--facebook:hover { background: #3E5C9A; color: #FFF; } a.pswp__share--facebook:hover:before { border-bottom-color: #3E5C9A; } a.pswp__share--twitter:hover { background: #55ACEE; color: #FFF; } a.pswp__share--pinterest:hover { background: #CCC; color: #CE272D; } a.pswp__share--download:hover { background: #DDD; } /* 3. Index indicator (\"1 of X\" counter) */ .pswp__counter { position: absolute; left: 0; top: 0; height: 44px; font-size: 13px; line-height: 44px; color: #FFF; opacity: 0.75; padding: 0 10px; } /* 4. Caption */ .pswp__caption { position: absolute; left: 0; bottom: 0; width: 100%; min-height: 44px; } .pswp__caption small { font-size: 11px; color: #BBB; } .pswp__caption__center { text-align: left; max-width: 420px; margin: 0 auto; font-size: 13px; padding: 10px; line-height: 20px; color: #CCC; } .pswp__caption--empty { display: none; } /* Fake caption element, used to calculate height of next/prev image */ .pswp__caption--fake { visibility: hidden; } /* 5. Loading indicator (preloader) You can play with it here - http://codepen.io/dimsemenov/pen/yyBWoR */ .pswp__preloader { width: 44px; height: 44px; position: absolute; top: 0; left: 50%; margin-left: -22px; opacity: 0; -webkit-transition: opacity 0.25s ease-out; transition: opacity 0.25s ease-out; will-change: opacity; direction: ltr; } .pswp__preloader__icn { width: 20px; height: 20px; margin: 12px; } .pswp__preloader--active { opacity: 1; } .pswp__preloader--active .pswp__preloader__icn { /* We use .gif in browsers that don't support CSS animation */ background: url(preloader.gif) 0 0 no-repeat; } .pswp--css_animation .pswp__preloader--active { opacity: 1; } .pswp--css_animation .pswp__preloader--active .pswp__preloader__icn { -webkit-animation: clockwise 500ms linear infinite; animation: clockwise 500ms linear infinite; } .pswp--css_animation .pswp__preloader--active .pswp__preloader__donut { -webkit-animation: donut-rotate 1000ms cubic-bezier(0.4, 0, 0.22, 1) infinite; animation: donut-rotate 1000ms cubic-bezier(0.4, 0, 0.22, 1) infinite; } .pswp--css_animation .pswp__preloader__icn { background: none; opacity: 0.75; width: 14px; height: 14px; position: absolute; left: 15px; top: 15px; margin: 0; } .pswp--css_animation .pswp__preloader__cut { /* The idea of animating inner circle is based on Polymer (\"material\") loading indicator by Keanu Lee https://blog.keanulee.com/2014/10/20/the-tale-of-three-spinners.html */ position: relative; width: 7px; height: 14px; overflow: hidden; } .pswp--css_animation .pswp__preloader__donut { -webkit-box-sizing: border-box; box-sizing: border-box; width: 14px; height: 14px; border: 2px solid #FFF; border-radius: 50%; border-left-color: transparent; border-bottom-color: transparent; position: absolute; top: 0; left: 0; background: none; margin: 0; } @media screen and (max-width: 1024px) { .pswp__preloader { position: relative; left: auto; top: auto; margin: 0; float: right; } } @-webkit-keyframes clockwise { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } } @keyframes clockwise { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } } @-webkit-keyframes donut-rotate { 0% { -webkit-transform: rotate(0); transform: rotate(0); } 50% { -webkit-transform: rotate(-140deg); transform: rotate(-140deg); } 100% { -webkit-transform: rotate(0); transform: rotate(0); } } @keyframes donut-rotate { 0% { -webkit-transform: rotate(0); transform: rotate(0); } 50% { -webkit-transform: rotate(-140deg); transform: rotate(-140deg); } 100% { -webkit-transform: rotate(0); transform: rotate(0); } } /* 6. Additional styles */ /* root element of UI */ .pswp__ui { -webkit-font-smoothing: auto; visibility: visible; opacity: 1; z-index: 1550; } /* top black bar with buttons and \"1 of X\" indicator */ .pswp__top-bar { position: absolute; left: 0; top: 0; height: 44px; width: 100%; } .pswp__caption, .pswp__top-bar, .pswp--has_mouse .pswp__button--arrow--left, .pswp--has_mouse .pswp__button--arrow--right { -webkit-backface-visibility: hidden; will-change: opacity; -webkit-transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1); transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1); } /* pswp--has_mouse class is added only when two subsequent mousemove events occur */ .pswp--has_mouse .pswp__button--arrow--left, .pswp--has_mouse .pswp__button--arrow--right { visibility: visible; } .pswp__top-bar, .pswp__caption { background-color: rgba(0, 0, 0, 0.5); } /* pswp__ui--fit class is added when main image \"fits\" between top bar and bottom bar (caption) */ .pswp__ui--fit .pswp__top-bar, .pswp__ui--fit .pswp__caption { background-color: rgba(0, 0, 0, 0.3); } /* pswp__ui--idle class is added when mouse isn't moving for several seconds (JS option timeToIdle) */ .pswp__ui--idle .pswp__top-bar { opacity: 0; } .pswp__ui--idle .pswp__button--arrow--left, .pswp__ui--idle .pswp__button--arrow--right { opacity: 0; } /* pswp__ui--hidden class is added when controls are hidden e.g. when user taps to toggle visibility of controls */ .pswp__ui--hidden .pswp__top-bar, .pswp__ui--hidden .pswp__caption, .pswp__ui--hidden .pswp__button--arrow--left, .pswp__ui--hidden .pswp__button--arrow--right { /* Force paint & create composition layer for controls. */ opacity: 0.001; } /* pswp__ui--one-slide class is added when there is just one item in gallery */ .pswp__ui--one-slide .pswp__button--arrow--left, .pswp__ui--one-slide .pswp__button--arrow--right, .pswp__ui--one-slide .pswp__counter { display: none; } .pswp__element--disabled { display: none !important; } .pswp--minimal--dark .pswp__top-bar { background: none; }"},{"title":"音乐吧","date":"2019-03-17T12:18:28.000Z","updated":"2019-03-17T12:18:28.000Z","comments":true,"path":"laboratory/music/index.html","permalink":"https://liuxianyu.cn/laboratory/music/index.html","excerpt":"","text":"想听什么歌呢，可以在下面留言哦 附带一首周笔畅的笔记：","author":"刘先玉"},{"title":"","date":"2023-12-12T09:23:31.634Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"lib/jquery_lazyload/README.html","permalink":"https://liuxianyu.cn/lib/jquery_lazyload/README.html","excerpt":"","text":"jquery-lazyload for NexT Installation Step 1 → Go to NexT dir Change dir to NexT directory. There must be layout, source, languages and other directories: 123$ cd themes/next$ lsbower.json _config.yml docs gulpfile.coffee languages layout LICENSE.md package.json README.md scripts source test Step 2 → Get module Install module to source/lib directory: 1$ git clone https://github.com/theme-next/theme-next-jquery-lazyload source/lib/jquery_lazyload Step 3 → Set it up Enable module in NexT _config.yml file: 1lazyload: true Update 12$ cd themes/next/source/lib/jquery_lazyload$ git pull"},{"title":"","date":"2023-12-12T09:23:31.636Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"lib/jquery_lazyload/jquery.scrollstop.js","permalink":"https://liuxianyu.cn/lib/jquery_lazyload/jquery.scrollstop.js","excerpt":"","text":"/* http://james.padolsey.com/javascript/special-scroll-events-for-jquery/ */ (function(){ var special = jQuery.event.special, uid1 = \"D\" + (+new Date()), uid2 = \"D\" + (+new Date() + 1); special.scrollstart = { setup: function() { var timer, handler = function(evt) { var _self = this, _args = arguments; if (timer) { clearTimeout(timer); } else { evt.type = \"scrollstart\"; jQuery.event.dispatch.apply(_self, _args); } timer = setTimeout( function(){ timer = null; }, special.scrollstop.latency); }; jQuery(this).bind(\"scroll\", handler).data(uid1, handler); }, teardown: function(){ jQuery(this).unbind( \"scroll\", jQuery(this).data(uid1) ); } }; special.scrollstop = { latency: 300, setup: function() { var timer, handler = function(evt) { var _self = this, _args = arguments; if (timer) { clearTimeout(timer); } timer = setTimeout( function(){ timer = null; evt.type = \"scrollstop\"; jQuery.event.dispatch.apply(_self, _args); }, special.scrollstop.latency); }; jQuery(this).bind(\"scroll\", handler).data(uid2, handler); }, teardown: function() { jQuery(this).unbind( \"scroll\", jQuery(this).data(uid2) ); } }; })();"},{"title":"工具盒子","date":"2019-03-17T12:18:28.000Z","updated":"2019-03-17T12:18:28.000Z","comments":true,"path":"laboratory/toolBox/index.html","permalink":"https://liuxianyu.cn/laboratory/toolBox/index.html","excerpt":"","text":"¶Markdown Markdown在线编辑器 作业部落Markdown typora 分享一个Markdown编辑器typora，简洁高效，操作简单，界面美观，在书写文档的时候有全新的体验。 进一步了解可参考这篇博客初识Typora myscript网站可以手写公式，自动转为LaTeX语法 ¶Picture ¶图床 sm.ms免费图床 这个图床可以长期使用，很nice 路过图床 PicGo+Github图床构建 ¶图标下载 图标下载 icon8图标 视觉中国 ¶Photoshop在线精简版 Photoshop在线精简版 ¶免费抠图工具 免费抠图工具 ¶其他 ¶在线短信接收 在线短信接收 云短信 ¶在线作图ProcessOn 在线作图ProcessOn 支持流程图、思维导图、原型图、UML、网络拓扑图、组织结构图等 ¶VPN分享 FreeVpnToShare","author":"liuxy0551"},{"title":"代码训练营","date":"2019-03-17T12:18:28.000Z","updated":"2019-03-17T12:18:28.000Z","comments":true,"path":"laboratory/trainingCamp/index.html","permalink":"https://liuxianyu.cn/laboratory/trainingCamp/index.html","excerpt":"","text":"","author":"刘先玉"},{"title":"","date":"2023-12-12T09:23:30.827Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"assets/posts/long-press/canvas.js","permalink":"https://liuxianyu.cn/assets/posts/long-press/canvas.js","excerpt":"","text":"/** * >=min && { const img = new Image img.onerror = img.onload = resolve.bind(null, img) img.src = `https://zju123.oss-cn-hangzhou.aliyuncs.com/storage/thumb-icon/${ src }` }) promiseAll.push(p) }) Promise.all(promiseAll).then(imgList => { this.imgList = imgList.filter(d => { return d && d.width > 0 }) if (this.imgList.length === 0) { return 'imgList load all error' } }) } // 计算 icon 的移动轨迹 createRender () { if (this.imgList.length === 0) return null const basicScale = [0.6, 0.9, 1.2][getRandom(0, 2)] const getScale = diffTime => { if (diffTime < this.scaleTime) { return +((diffTime / this.scaleTime).toFixed(2)) * basicScale } else { return basicScale } } const context = this.context // 随机读取一个图片来渲染 const image = this.imgList[getRandom(0, this.imgList.length - 1)] const offset = 30 const basicX = this.width / 2 + getRandom(-offset, offset) const angle = getRandom(4, 8) // icon 左右缓动幅度，随机 let ratio = getRandom(35, 45) * (getRandom(0, 1) ? 1 : -1) // 控制 icon 左右移动的范围区间 const getTranslateX = diffTime => { if (diffTime < this.scaleTime) { // 放大期间，不进行摇摆位移 return basicX } else { return basicX + ratio * Math.sin(angle * (diffTime - this.scaleTime)) } } const getTranslateY = diffTime => { return image.height / 2 + (this.height - image.height / 2) * (1 - diffTime) } const fadeOutStage = getRandom(14, 18) / 100 const getAlpha = diffTime => { let left = 1 - +diffTime if (left > fadeOutStage) { return 1 } else { return 1 - +((fadeOutStage - left) / fadeOutStage).toFixed(2) } } return diffTime => { // 差值满了，即结束了 0 -> 1 if (diffTime >= 1) return true context.save() const scale = getScale(diffTime) const translateX = getTranslateX(diffTime) const translateY = getTranslateY(diffTime) context.translate(translateX, translateY) context.scale(scale, scale) context.globalAlpha = getAlpha(diffTime) context.drawImage( image, -image.width / 2, -image.height / 2, // image.width, // image.height image.width * 1.5, image.height * 1.5 ) context.restore() } } scan () { this.context.clearRect(0, 0, this.width, this.height) this.context.fillStyle = 'transparent' this.context.fillRect(0, 0, 100, 400) let index = 0 let length = this.renderList.length if (length > 0) { requestFrame(this.scan.bind(this)) this.scanning = true } else { this.scanning = false } while (index < length) { const child = this.renderList[index] if (!child || !child.render || child.render.call(null, (Date.now() - child.timestamp) / child.duration)) { // 结束了，删除该动画 this.renderList.splice(index, 1) length-- } else { // continue index++ } } } // 开始添加移动的 icon start () { const render = this.createRender() const duration = getRandom(1800, 2600) // 移动时长区间 this.renderList.push({ render, duration, timestamp: Date.now() }) if (!this.scanning) { this.scanning = true requestFrame(this.scan.bind(this)) } return this } } function requestFrame (cb) { return ( window.requestAnimationFrame || window.webkitRequestAnimationFrame || function (callback) { window.setTimeout(callback, 1000 / 60) } )(cb) } export default ThumbsUpAni"},{"title":"","date":"2023-12-12T09:23:30.842Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"assets/posts/vue-wepy-filter/date.js","permalink":"https://liuxianyu.cn/assets/posts/vue-wepy-filter/date.js","excerpt":"","text":"export default function (date, dateFormat = '%Y-%M-%d %H:%m:%s', useStr = '') { if (date) { if (!(date instanceof Date)) { date = new Date(date.replace('GMT', useStr)) } return date.strftime(dateFormat) } return '' }"},{"title":"","date":"2023-12-12T09:23:30.837Z","updated":"2023-09-21T07:28:56.000Z","comments":true,"path":"assets/posts/vue-mintui-address/pca-code.json","permalink":"https://liuxianyu.cn/assets/posts/vue-mintui-address/pca-code.json","excerpt":"","text":"[{\"children\":[{\"children\":[{\"code\":\"110101\",\"name\":\"东城区\"},{\"code\":\"110102\",\"name\":\"西城区\"},{\"code\":\"110105\",\"name\":\"朝阳区\"},{\"code\":\"110106\",\"name\":\"丰台区\"},{\"code\":\"110107\",\"name\":\"石景山区\"},{\"code\":\"110108\",\"name\":\"海淀区\"},{\"code\":\"110109\",\"name\":\"门头沟区\"},{\"code\":\"110111\",\"name\":\"房山区\"},{\"code\":\"110112\",\"name\":\"通州区\"},{\"code\":\"110113\",\"name\":\"顺义区\"},{\"code\":\"110114\",\"name\":\"昌平区\"},{\"code\":\"110115\",\"name\":\"大兴区\"},{\"code\":\"110116\",\"name\":\"怀柔区\"},{\"code\":\"110117\",\"name\":\"平谷区\"},{\"code\":\"110118\",\"name\":\"密云区\"},{\"code\":\"110119\",\"name\":\"延庆区\"}],\"code\":\"110100\",\"name\":\"市辖区\"}],\"code\":\"110000\",\"name\":\"北京市\"},{\"children\":[{\"children\":[{\"code\":\"120101\",\"name\":\"和平区\"},{\"code\":\"120102\",\"name\":\"河东区\"},{\"code\":\"120103\",\"name\":\"河西区\"},{\"code\":\"120104\",\"name\":\"南开区\"},{\"code\":\"120105\",\"name\":\"河北区\"},{\"code\":\"120106\",\"name\":\"红桥区\"},{\"code\":\"120110\",\"name\":\"东丽区\"},{\"code\":\"120111\",\"name\":\"西青区\"},{\"code\":\"120112\",\"name\":\"津南区\"},{\"code\":\"120113\",\"name\":\"北辰区\"},{\"code\":\"120114\",\"name\":\"武清区\"},{\"code\":\"120115\",\"name\":\"宝坻区\"},{\"code\":\"120116\",\"name\":\"滨海新区\"},{\"code\":\"120117\",\"name\":\"宁河区\"},{\"code\":\"120118\",\"name\":\"静海区\"},{\"code\":\"120119\",\"name\":\"蓟州区\"}],\"code\":\"120100\",\"name\":\"市辖区\"}],\"code\":\"120000\",\"name\":\"天津市\"},{\"children\":[{\"children\":[{\"code\":\"130101\",\"name\":\"市辖区\"},{\"code\":\"130102\",\"name\":\"长安区\"},{\"code\":\"130104\",\"name\":\"桥西区\"},{\"code\":\"130105\",\"name\":\"新华区\"},{\"code\":\"130107\",\"name\":\"井陉矿区\"},{\"code\":\"130108\",\"name\":\"裕华区\"},{\"code\":\"130109\",\"name\":\"藁城区\"},{\"code\":\"130110\",\"name\":\"鹿泉区\"},{\"code\":\"130111\",\"name\":\"栾城区\"},{\"code\":\"130121\",\"name\":\"井陉县\"},{\"code\":\"130123\",\"name\":\"正定县\"},{\"code\":\"130125\",\"name\":\"行唐县\"},{\"code\":\"130126\",\"name\":\"灵寿县\"},{\"code\":\"130127\",\"name\":\"高邑县\"},{\"code\":\"130128\",\"name\":\"深泽县\"},{\"code\":\"130129\",\"name\":\"赞皇县\"},{\"code\":\"130130\",\"name\":\"无极县\"},{\"code\":\"130131\",\"name\":\"平山县\"},{\"code\":\"130132\",\"name\":\"元氏县\"},{\"code\":\"130133\",\"name\":\"赵县\"},{\"code\":\"130183\",\"name\":\"晋州市\"},{\"code\":\"130184\",\"name\":\"新乐市\"}],\"code\":\"130100\",\"name\":\"石家庄市\"},{\"children\":[{\"code\":\"130201\",\"name\":\"市辖区\"},{\"code\":\"130202\",\"name\":\"路南区\"},{\"code\":\"130203\",\"name\":\"路北区\"},{\"code\":\"130204\",\"name\":\"古冶区\"},{\"code\":\"130205\",\"name\":\"开平区\"},{\"code\":\"130207\",\"name\":\"丰南区\"},{\"code\":\"130208\",\"name\":\"丰润区\"},{\"code\":\"130209\",\"name\":\"曹妃甸区\"},{\"code\":\"130223\",\"name\":\"滦县\"},{\"code\":\"130224\",\"name\":\"滦南县\"},{\"code\":\"130225\",\"name\":\"乐亭县\"},{\"code\":\"130227\",\"name\":\"迁西县\"},{\"code\":\"130229\",\"name\":\"玉田县\"},{\"code\":\"130281\",\"name\":\"遵化市\"},{\"code\":\"130283\",\"name\":\"迁安市\"}],\"code\":\"130200\",\"name\":\"唐山市\"},{\"children\":[{\"code\":\"130301\",\"name\":\"市辖区\"},{\"code\":\"130302\",\"name\":\"海港区\"},{\"code\":\"130303\",\"name\":\"山海关区\"},{\"code\":\"130304\",\"name\":\"北戴河区\"},{\"code\":\"130306\",\"name\":\"抚宁区\"},{\"code\":\"130321\",\"name\":\"青龙满族自治县\"},{\"code\":\"130322\",\"name\":\"昌黎县\"},{\"code\":\"130324\",\"name\":\"卢龙县\"}],\"code\":\"130300\",\"name\":\"秦皇岛市\"},{\"children\":[{\"code\":\"130401\",\"name\":\"市辖区\"},{\"code\":\"130402\",\"name\":\"邯山区\"},{\"code\":\"130403\",\"name\":\"丛台区\"},{\"code\":\"130404\",\"name\":\"复兴区\"},{\"code\":\"130406\",\"name\":\"峰峰矿区\"},{\"code\":\"130421\",\"name\":\"邯郸县\"},{\"code\":\"130423\",\"name\":\"临漳县\"},{\"code\":\"130424\",\"name\":\"成安县\"},{\"code\":\"130425\",\"name\":\"大名县\"},{\"code\":\"130426\",\"name\":\"涉县\"},{\"code\":\"130427\",\"name\":\"磁县\"},{\"code\":\"130428\",\"name\":\"肥乡县\"},{\"code\":\"130429\",\"name\":\"永年县\"},{\"code\":\"130430\",\"name\":\"邱县\"},{\"code\":\"130431\",\"name\":\"鸡泽县\"},{\"code\":\"130432\",\"name\":\"广平县\"},{\"code\":\"130433\",\"name\":\"馆陶县\"},{\"code\":\"130434\",\"name\":\"魏县\"},{\"code\":\"130435\",\"name\":\"曲周县\"},{\"code\":\"130481\",\"name\":\"武安市\"}],\"code\":\"130400\",\"name\":\"邯郸市\"},{\"children\":[{\"code\":\"130501\",\"name\":\"市辖区\"},{\"code\":\"130502\",\"name\":\"桥东区\"},{\"code\":\"130503\",\"name\":\"桥西区\"},{\"code\":\"130521\",\"name\":\"邢台县\"},{\"code\":\"130522\",\"name\":\"临城县\"},{\"code\":\"130523\",\"name\":\"内丘县\"},{\"code\":\"130524\",\"name\":\"柏乡县\"},{\"code\":\"130525\",\"name\":\"隆尧县\"},{\"code\":\"130526\",\"name\":\"任县\"},{\"code\":\"130527\",\"name\":\"南和县\"},{\"code\":\"130528\",\"name\":\"宁晋县\"},{\"code\":\"130529\",\"name\":\"巨鹿县\"},{\"code\":\"130530\",\"name\":\"新河县\"},{\"code\":\"130531\",\"name\":\"广宗县\"},{\"code\":\"130532\",\"name\":\"平乡县\"},{\"code\":\"130533\",\"name\":\"威县\"},{\"code\":\"130534\",\"name\":\"清河县\"},{\"code\":\"130535\",\"name\":\"临西县\"},{\"code\":\"130581\",\"name\":\"南宫市\"},{\"code\":\"130582\",\"name\":\"沙河市\"}],\"code\":\"130500\",\"name\":\"邢台市\"},{\"children\":[{\"code\":\"130601\",\"name\":\"市辖区\"},{\"code\":\"130602\",\"name\":\"竞秀区\"},{\"code\":\"130606\",\"name\":\"莲池区\"},{\"code\":\"130607\",\"name\":\"满城区\"},{\"code\":\"130608\",\"name\":\"清苑区\"},{\"code\":\"130609\",\"name\":\"徐水区\"},{\"code\":\"130623\",\"name\":\"涞水县\"},{\"code\":\"130624\",\"name\":\"阜平县\"},{\"code\":\"130626\",\"name\":\"定兴县\"},{\"code\":\"130627\",\"name\":\"唐县\"},{\"code\":\"130628\",\"name\":\"高阳县\"},{\"code\":\"130629\",\"name\":\"容城县\"},{\"code\":\"130630\",\"name\":\"涞源县\"},{\"code\":\"130631\",\"name\":\"望都县\"},{\"code\":\"130632\",\"name\":\"安新县\"},{\"code\":\"130633\",\"name\":\"易县\"},{\"code\":\"130634\",\"name\":\"曲阳县\"},{\"code\":\"130635\",\"name\":\"蠡县\"},{\"code\":\"130636\",\"name\":\"顺平县\"},{\"code\":\"130637\",\"name\":\"博野县\"},{\"code\":\"130638\",\"name\":\"雄县\"},{\"code\":\"130681\",\"name\":\"涿州市\"},{\"code\":\"130683\",\"name\":\"安国市\"},{\"code\":\"130684\",\"name\":\"高碑店市\"}],\"code\":\"130600\",\"name\":\"保定市\"},{\"children\":[{\"code\":\"130701\",\"name\":\"市辖区\"},{\"code\":\"130702\",\"name\":\"桥东区\"},{\"code\":\"130703\",\"name\":\"桥西区\"},{\"code\":\"130705\",\"name\":\"宣化区\"},{\"code\":\"130706\",\"name\":\"下花园区\"},{\"code\":\"130708\",\"name\":\"万全区\"},{\"code\":\"130709\",\"name\":\"崇礼区\"},{\"code\":\"130722\",\"name\":\"张北县\"},{\"code\":\"130723\",\"name\":\"康保县\"},{\"code\":\"130724\",\"name\":\"沽源县\"},{\"code\":\"130725\",\"name\":\"尚义县\"},{\"code\":\"130726\",\"name\":\"蔚县\"},{\"code\":\"130727\",\"name\":\"阳原县\"},{\"code\":\"130728\",\"name\":\"怀安县\"},{\"code\":\"130730\",\"name\":\"怀来县\"},{\"code\":\"130731\",\"name\":\"涿鹿县\"},{\"code\":\"130732\",\"name\":\"赤城县\"}],\"code\":\"130700\",\"name\":\"张家口市\"},{\"children\":[{\"code\":\"130801\",\"name\":\"市辖区\"},{\"code\":\"130802\",\"name\":\"双桥区\"},{\"code\":\"130803\",\"name\":\"双滦区\"},{\"code\":\"130804\",\"name\":\"鹰手营子矿区\"},{\"code\":\"130821\",\"name\":\"承德县\"},{\"code\":\"130822\",\"name\":\"兴隆县\"},{\"code\":\"130823\",\"name\":\"平泉县\"},{\"code\":\"130824\",\"name\":\"滦平县\"},{\"code\":\"130825\",\"name\":\"隆化县\"},{\"code\":\"130826\",\"name\":\"丰宁满族自治县\"},{\"code\":\"130827\",\"name\":\"宽城满族自治县\"},{\"code\":\"130828\",\"name\":\"围场满族蒙古族自治县\"}],\"code\":\"130800\",\"name\":\"承德市\"},{\"children\":[{\"code\":\"130901\",\"name\":\"市辖区\"},{\"code\":\"130902\",\"name\":\"新华区\"},{\"code\":\"130903\",\"name\":\"运河区\"},{\"code\":\"130921\",\"name\":\"沧县\"},{\"code\":\"130922\",\"name\":\"青县\"},{\"code\":\"130923\",\"name\":\"东光县\"},{\"code\":\"130924\",\"name\":\"海兴县\"},{\"code\":\"130925\",\"name\":\"盐山县\"},{\"code\":\"130926\",\"name\":\"肃宁县\"},{\"code\":\"130927\",\"name\":\"南皮县\"},{\"code\":\"130928\",\"name\":\"吴桥县\"},{\"code\":\"130929\",\"name\":\"献县\"},{\"code\":\"130930\",\"name\":\"孟村回族自治县\"},{\"code\":\"130981\",\"name\":\"泊头市\"},{\"code\":\"130982\",\"name\":\"任丘市\"},{\"code\":\"130983\",\"name\":\"黄骅市\"},{\"code\":\"130984\",\"name\":\"河间市\"}],\"code\":\"130900\",\"name\":\"沧州市\"},{\"children\":[{\"code\":\"131001\",\"name\":\"市辖区\"},{\"code\":\"131002\",\"name\":\"安次区\"},{\"code\":\"131003\",\"name\":\"广阳区\"},{\"code\":\"131022\",\"name\":\"固安县\"},{\"code\":\"131023\",\"name\":\"永清县\"},{\"code\":\"131024\",\"name\":\"香河县\"},{\"code\":\"131025\",\"name\":\"大城县\"},{\"code\":\"131026\",\"name\":\"文安县\"},{\"code\":\"131028\",\"name\":\"大厂回族自治县\"},{\"code\":\"131081\",\"name\":\"霸州市\"},{\"code\":\"131082\",\"name\":\"三河市\"}],\"code\":\"131000\",\"name\":\"廊坊市\"},{\"children\":[{\"code\":\"131101\",\"name\":\"市辖区\"},{\"code\":\"131102\",\"name\":\"桃城区\"},{\"code\":\"131103\",\"name\":\"冀州区\"},{\"code\":\"131121\",\"name\":\"枣强县\"},{\"code\":\"131122\",\"name\":\"武邑县\"},{\"code\":\"131123\",\"name\":\"武强县\"},{\"code\":\"131124\",\"name\":\"饶阳县\"},{\"code\":\"131125\",\"name\":\"安平县\"},{\"code\":\"131126\",\"name\":\"故城县\"},{\"code\":\"131127\",\"name\":\"景县\"},{\"code\":\"131128\",\"name\":\"阜城县\"},{\"code\":\"131182\",\"name\":\"深州市\"}],\"code\":\"131100\",\"name\":\"衡水市\"},{\"children\":[{\"code\":\"139001\",\"name\":\"定州市\"},{\"code\":\"139002\",\"name\":\"辛集市\"}],\"code\":\"139000\",\"name\":\"省直辖县级行政区划\"}],\"code\":\"130000\",\"name\":\"河北省\"},{\"children\":[{\"children\":[{\"code\":\"140101\",\"name\":\"市辖区\"},{\"code\":\"140105\",\"name\":\"小店区\"},{\"code\":\"140106\",\"name\":\"迎泽区\"},{\"code\":\"140107\",\"name\":\"杏花岭区\"},{\"code\":\"140108\",\"name\":\"尖草坪区\"},{\"code\":\"140109\",\"name\":\"万柏林区\"},{\"code\":\"140110\",\"name\":\"晋源区\"},{\"code\":\"140121\",\"name\":\"清徐县\"},{\"code\":\"140122\",\"name\":\"阳曲县\"},{\"code\":\"140123\",\"name\":\"娄烦县\"},{\"code\":\"140181\",\"name\":\"古交市\"}],\"code\":\"140100\",\"name\":\"太原市\"},{\"children\":[{\"code\":\"140201\",\"name\":\"市辖区\"},{\"code\":\"140202\",\"name\":\"城区\"},{\"code\":\"140203\",\"name\":\"矿区\"},{\"code\":\"140211\",\"name\":\"南郊区\"},{\"code\":\"140212\",\"name\":\"新荣区\"},{\"code\":\"140221\",\"name\":\"阳高县\"},{\"code\":\"140222\",\"name\":\"天镇县\"},{\"code\":\"140223\",\"name\":\"广灵县\"},{\"code\":\"140224\",\"name\":\"灵丘县\"},{\"code\":\"140225\",\"name\":\"浑源县\"},{\"code\":\"140226\",\"name\":\"左云县\"},{\"code\":\"140227\",\"name\":\"大同县\"}],\"code\":\"140200\",\"name\":\"大同市\"},{\"children\":[{\"code\":\"140301\",\"name\":\"市辖区\"},{\"code\":\"140302\",\"name\":\"城区\"},{\"code\":\"140303\",\"name\":\"矿区\"},{\"code\":\"140311\",\"name\":\"郊区\"},{\"code\":\"140321\",\"name\":\"平定县\"},{\"code\":\"140322\",\"name\":\"盂县\"}],\"code\":\"140300\",\"name\":\"阳泉市\"},{\"children\":[{\"code\":\"140401\",\"name\":\"市辖区\"},{\"code\":\"140402\",\"name\":\"城区\"},{\"code\":\"140411\",\"name\":\"郊区\"},{\"code\":\"140421\",\"name\":\"长治县\"},{\"code\":\"140423\",\"name\":\"襄垣县\"},{\"code\":\"140424\",\"name\":\"屯留县\"},{\"code\":\"140425\",\"name\":\"平顺县\"},{\"code\":\"140426\",\"name\":\"黎城县\"},{\"code\":\"140427\",\"name\":\"壶关县\"},{\"code\":\"140428\",\"name\":\"长子县\"},{\"code\":\"140429\",\"name\":\"武乡县\"},{\"code\":\"140430\",\"name\":\"沁县\"},{\"code\":\"140431\",\"name\":\"沁源县\"},{\"code\":\"140481\",\"name\":\"潞城市\"}],\"code\":\"140400\",\"name\":\"长治市\"},{\"children\":[{\"code\":\"140501\",\"name\":\"市辖区\"},{\"code\":\"140502\",\"name\":\"城区\"},{\"code\":\"140521\",\"name\":\"沁水县\"},{\"code\":\"140522\",\"name\":\"阳城县\"},{\"code\":\"140524\",\"name\":\"陵川县\"},{\"code\":\"140525\",\"name\":\"泽州县\"},{\"code\":\"140581\",\"name\":\"高平市\"}],\"code\":\"140500\",\"name\":\"晋城市\"},{\"children\":[{\"code\":\"140601\",\"name\":\"市辖区\"},{\"code\":\"140602\",\"name\":\"朔城区\"},{\"code\":\"140603\",\"name\":\"平鲁区\"},{\"code\":\"140621\",\"name\":\"山阴县\"},{\"code\":\"140622\",\"name\":\"应县\"},{\"code\":\"140623\",\"name\":\"右玉县\"},{\"code\":\"140624\",\"name\":\"怀仁县\"}],\"code\":\"140600\",\"name\":\"朔州市\"},{\"children\":[{\"code\":\"140701\",\"name\":\"市辖区\"},{\"code\":\"140702\",\"name\":\"榆次区\"},{\"code\":\"140721\",\"name\":\"榆社县\"},{\"code\":\"140722\",\"name\":\"左权县\"},{\"code\":\"140723\",\"name\":\"和顺县\"},{\"code\":\"140724\",\"name\":\"昔阳县\"},{\"code\":\"140725\",\"name\":\"寿阳县\"},{\"code\":\"140726\",\"name\":\"太谷县\"},{\"code\":\"140727\",\"name\":\"祁县\"},{\"code\":\"140728\",\"name\":\"平遥县\"},{\"code\":\"140729\",\"name\":\"灵石县\"},{\"code\":\"140781\",\"name\":\"介休市\"}],\"code\":\"140700\",\"name\":\"晋中市\"},{\"children\":[{\"code\":\"140801\",\"name\":\"市辖区\"},{\"code\":\"140802\",\"name\":\"盐湖区\"},{\"code\":\"140821\",\"name\":\"临猗县\"},{\"code\":\"140822\",\"name\":\"万荣县\"},{\"code\":\"140823\",\"name\":\"闻喜县\"},{\"code\":\"140824\",\"name\":\"稷山县\"},{\"code\":\"140825\",\"name\":\"新绛县\"},{\"code\":\"140826\",\"name\":\"绛县\"},{\"code\":\"140827\",\"name\":\"垣曲县\"},{\"code\":\"140828\",\"name\":\"夏县\"},{\"code\":\"140829\",\"name\":\"平陆县\"},{\"code\":\"140830\",\"name\":\"芮城县\"},{\"code\":\"140881\",\"name\":\"永济市\"},{\"code\":\"140882\",\"name\":\"河津市\"}],\"code\":\"140800\",\"name\":\"运城市\"},{\"children\":[{\"code\":\"140901\",\"name\":\"市辖区\"},{\"code\":\"140902\",\"name\":\"忻府区\"},{\"code\":\"140921\",\"name\":\"定襄县\"},{\"code\":\"140922\",\"name\":\"五台县\"},{\"code\":\"140923\",\"name\":\"代县\"},{\"code\":\"140924\",\"name\":\"繁峙县\"},{\"code\":\"140925\",\"name\":\"宁武县\"},{\"code\":\"140926\",\"name\":\"静乐县\"},{\"code\":\"140927\",\"name\":\"神池县\"},{\"code\":\"140928\",\"name\":\"五寨县\"},{\"code\":\"140929\",\"name\":\"岢岚县\"},{\"code\":\"140930\",\"name\":\"河曲县\"},{\"code\":\"140931\",\"name\":\"保德县\"},{\"code\":\"140932\",\"name\":\"偏关县\"},{\"code\":\"140981\",\"name\":\"原平市\"}],\"code\":\"140900\",\"name\":\"忻州市\"},{\"children\":[{\"code\":\"141001\",\"name\":\"市辖区\"},{\"code\":\"141002\",\"name\":\"尧都区\"},{\"code\":\"141021\",\"name\":\"曲沃县\"},{\"code\":\"141022\",\"name\":\"翼城县\"},{\"code\":\"141023\",\"name\":\"襄汾县\"},{\"code\":\"141024\",\"name\":\"洪洞县\"},{\"code\":\"141025\",\"name\":\"古县\"},{\"code\":\"141026\",\"name\":\"安泽县\"},{\"code\":\"141027\",\"name\":\"浮山县\"},{\"code\":\"141028\",\"name\":\"吉县\"},{\"code\":\"141029\",\"name\":\"乡宁县\"},{\"code\":\"141030\",\"name\":\"大宁县\"},{\"code\":\"141031\",\"name\":\"隰县\"},{\"code\":\"141032\",\"name\":\"永和县\"},{\"code\":\"141033\",\"name\":\"蒲县\"},{\"code\":\"141034\",\"name\":\"汾西县\"},{\"code\":\"141081\",\"name\":\"侯马市\"},{\"code\":\"141082\",\"name\":\"霍州市\"}],\"code\":\"141000\",\"name\":\"临汾市\"},{\"children\":[{\"code\":\"141101\",\"name\":\"市辖区\"},{\"code\":\"141102\",\"name\":\"离石区\"},{\"code\":\"141121\",\"name\":\"文水县\"},{\"code\":\"141122\",\"name\":\"交城县\"},{\"code\":\"141123\",\"name\":\"兴县\"},{\"code\":\"141124\",\"name\":\"临县\"},{\"code\":\"141125\",\"name\":\"柳林县\"},{\"code\":\"141126\",\"name\":\"石楼县\"},{\"code\":\"141127\",\"name\":\"岚县\"},{\"code\":\"141128\",\"name\":\"方山县\"},{\"code\":\"141129\",\"name\":\"中阳县\"},{\"code\":\"141130\",\"name\":\"交口县\"},{\"code\":\"141181\",\"name\":\"孝义市\"},{\"code\":\"141182\",\"name\":\"汾阳市\"}],\"code\":\"141100\",\"name\":\"吕梁市\"}],\"code\":\"140000\",\"name\":\"山西省\"},{\"children\":[{\"children\":[{\"code\":\"150101\",\"name\":\"市辖区\"},{\"code\":\"150102\",\"name\":\"新城区\"},{\"code\":\"150103\",\"name\":\"回民区\"},{\"code\":\"150104\",\"name\":\"玉泉区\"},{\"code\":\"150105\",\"name\":\"赛罕区\"},{\"code\":\"150121\",\"name\":\"土默特左旗\"},{\"code\":\"150122\",\"name\":\"托克托县\"},{\"code\":\"150123\",\"name\":\"和林格尔县\"},{\"code\":\"150124\",\"name\":\"清水河县\"},{\"code\":\"150125\",\"name\":\"武川县\"}],\"code\":\"150100\",\"name\":\"呼和浩特市\"},{\"children\":[{\"code\":\"150201\",\"name\":\"市辖区\"},{\"code\":\"150202\",\"name\":\"东河区\"},{\"code\":\"150203\",\"name\":\"昆都仑区\"},{\"code\":\"150204\",\"name\":\"青山区\"},{\"code\":\"150205\",\"name\":\"石拐区\"},{\"code\":\"150206\",\"name\":\"白云鄂博矿区\"},{\"code\":\"150207\",\"name\":\"九原区\"},{\"code\":\"150221\",\"name\":\"土默特右旗\"},{\"code\":\"150222\",\"name\":\"固阳县\"},{\"code\":\"150223\",\"name\":\"达尔罕茂明安联合旗\"}],\"code\":\"150200\",\"name\":\"包头市\"},{\"children\":[{\"code\":\"150301\",\"name\":\"市辖区\"},{\"code\":\"150302\",\"name\":\"海勃湾区\"},{\"code\":\"150303\",\"name\":\"海南区\"},{\"code\":\"150304\",\"name\":\"乌达区\"}],\"code\":\"150300\",\"name\":\"乌海市\"},{\"children\":[{\"code\":\"150401\",\"name\":\"市辖区\"},{\"code\":\"150402\",\"name\":\"红山区\"},{\"code\":\"150403\",\"name\":\"元宝山区\"},{\"code\":\"150404\",\"name\":\"松山区\"},{\"code\":\"150421\",\"name\":\"阿鲁科尔沁旗\"},{\"code\":\"150422\",\"name\":\"巴林左旗\"},{\"code\":\"150423\",\"name\":\"巴林右旗\"},{\"code\":\"150424\",\"name\":\"林西县\"},{\"code\":\"150425\",\"name\":\"克什克腾旗\"},{\"code\":\"150426\",\"name\":\"翁牛特旗\"},{\"code\":\"150428\",\"name\":\"喀喇沁旗\"},{\"code\":\"150429\",\"name\":\"宁城县\"},{\"code\":\"150430\",\"name\":\"敖汉旗\"}],\"code\":\"150400\",\"name\":\"赤峰市\"},{\"children\":[{\"code\":\"150501\",\"name\":\"市辖区\"},{\"code\":\"150502\",\"name\":\"科尔沁区\"},{\"code\":\"150521\",\"name\":\"科尔沁左翼中旗\"},{\"code\":\"150522\",\"name\":\"科尔沁左翼后旗\"},{\"code\":\"150523\",\"name\":\"开鲁县\"},{\"code\":\"150524\",\"name\":\"库伦旗\"},{\"code\":\"150525\",\"name\":\"奈曼旗\"},{\"code\":\"150526\",\"name\":\"扎鲁特旗\"},{\"code\":\"150581\",\"name\":\"霍林郭勒市\"}],\"code\":\"150500\",\"name\":\"通辽市\"},{\"children\":[{\"code\":\"150601\",\"name\":\"市辖区\"},{\"code\":\"150602\",\"name\":\"东胜区\"},{\"code\":\"150603\",\"name\":\"康巴什区\"},{\"code\":\"150621\",\"name\":\"达拉特旗\"},{\"code\":\"150622\",\"name\":\"准格尔旗\"},{\"code\":\"150623\",\"name\":\"鄂托克前旗\"},{\"code\":\"150624\",\"name\":\"鄂托克旗\"},{\"code\":\"150625\",\"name\":\"杭锦旗\"},{\"code\":\"150626\",\"name\":\"乌审旗\"},{\"code\":\"150627\",\"name\":\"伊金霍洛旗\"}],\"code\":\"150600\",\"name\":\"鄂尔多斯市\"},{\"children\":[{\"code\":\"150701\",\"name\":\"市辖区\"},{\"code\":\"150702\",\"name\":\"海拉尔区\"},{\"code\":\"150703\",\"name\":\"扎赉诺尔区\"},{\"code\":\"150721\",\"name\":\"阿荣旗\"},{\"code\":\"150722\",\"name\":\"莫力达瓦达斡尔族自治旗\"},{\"code\":\"150723\",\"name\":\"鄂伦春自治旗\"},{\"code\":\"150724\",\"name\":\"鄂温克族自治旗\"},{\"code\":\"150725\",\"name\":\"陈巴尔虎旗\"},{\"code\":\"150726\",\"name\":\"新巴尔虎左旗\"},{\"code\":\"150727\",\"name\":\"新巴尔虎右旗\"},{\"code\":\"150781\",\"name\":\"满洲里市\"},{\"code\":\"150782\",\"name\":\"牙克石市\"},{\"code\":\"150783\",\"name\":\"扎兰屯市\"},{\"code\":\"150784\",\"name\":\"额尔古纳市\"},{\"code\":\"150785\",\"name\":\"根河市\"}],\"code\":\"150700\",\"name\":\"呼伦贝尔市\"},{\"children\":[{\"code\":\"150801\",\"name\":\"市辖区\"},{\"code\":\"150802\",\"name\":\"临河区\"},{\"code\":\"150821\",\"name\":\"五原县\"},{\"code\":\"150822\",\"name\":\"磴口县\"},{\"code\":\"150823\",\"name\":\"乌拉特前旗\"},{\"code\":\"150824\",\"name\":\"乌拉特中旗\"},{\"code\":\"150825\",\"name\":\"乌拉特后旗\"},{\"code\":\"150826\",\"name\":\"杭锦后旗\"}],\"code\":\"150800\",\"name\":\"巴彦淖尔市\"},{\"children\":[{\"code\":\"150901\",\"name\":\"市辖区\"},{\"code\":\"150902\",\"name\":\"集宁区\"},{\"code\":\"150921\",\"name\":\"卓资县\"},{\"code\":\"150922\",\"name\":\"化德县\"},{\"code\":\"150923\",\"name\":\"商都县\"},{\"code\":\"150924\",\"name\":\"兴和县\"},{\"code\":\"150925\",\"name\":\"凉城县\"},{\"code\":\"150926\",\"name\":\"察哈尔右翼前旗\"},{\"code\":\"150927\",\"name\":\"察哈尔右翼中旗\"},{\"code\":\"150928\",\"name\":\"察哈尔右翼后旗\"},{\"code\":\"150929\",\"name\":\"四子王旗\"},{\"code\":\"150981\",\"name\":\"丰镇市\"}],\"code\":\"150900\",\"name\":\"乌兰察布市\"},{\"children\":[{\"code\":\"152201\",\"name\":\"乌兰浩特市\"},{\"code\":\"152202\",\"name\":\"阿尔山市\"},{\"code\":\"152221\",\"name\":\"科尔沁右翼前旗\"},{\"code\":\"152222\",\"name\":\"科尔沁右翼中旗\"},{\"code\":\"152223\",\"name\":\"扎赉特旗\"},{\"code\":\"152224\",\"name\":\"突泉县\"}],\"code\":\"152200\",\"name\":\"兴安盟\"},{\"children\":[{\"code\":\"152501\",\"name\":\"二连浩特市\"},{\"code\":\"152502\",\"name\":\"锡林浩特市\"},{\"code\":\"152522\",\"name\":\"阿巴嘎旗\"},{\"code\":\"152523\",\"name\":\"苏尼特左旗\"},{\"code\":\"152524\",\"name\":\"苏尼特右旗\"},{\"code\":\"152525\",\"name\":\"东乌珠穆沁旗\"},{\"code\":\"152526\",\"name\":\"西乌珠穆沁旗\"},{\"code\":\"152527\",\"name\":\"太仆寺旗\"},{\"code\":\"152528\",\"name\":\"镶黄旗\"},{\"code\":\"152529\",\"name\":\"正镶白旗\"},{\"code\":\"152530\",\"name\":\"正蓝旗\"},{\"code\":\"152531\",\"name\":\"多伦县\"}],\"code\":\"152500\",\"name\":\"锡林郭勒盟\"},{\"children\":[{\"code\":\"152921\",\"name\":\"阿拉善左旗\"},{\"code\":\"152922\",\"name\":\"阿拉善右旗\"},{\"code\":\"152923\",\"name\":\"额济纳旗\"}],\"code\":\"152900\",\"name\":\"阿拉善盟\"}],\"code\":\"150000\",\"name\":\"内蒙古自治区\"},{\"children\":[{\"children\":[{\"code\":\"210101\",\"name\":\"市辖区\"},{\"code\":\"210102\",\"name\":\"和平区\"},{\"code\":\"210103\",\"name\":\"沈河区\"},{\"code\":\"210104\",\"name\":\"大东区\"},{\"code\":\"210105\",\"name\":\"皇姑区\"},{\"code\":\"210106\",\"name\":\"铁西区\"},{\"code\":\"210111\",\"name\":\"苏家屯区\"},{\"code\":\"210112\",\"name\":\"浑南区\"},{\"code\":\"210113\",\"name\":\"沈北新区\"},{\"code\":\"210114\",\"name\":\"于洪区\"},{\"code\":\"210115\",\"name\":\"辽中区\"},{\"code\":\"210123\",\"name\":\"康平县\"},{\"code\":\"210124\",\"name\":\"法库县\"},{\"code\":\"210181\",\"name\":\"新民市\"}],\"code\":\"210100\",\"name\":\"沈阳市\"},{\"children\":[{\"code\":\"210201\",\"name\":\"市辖区\"},{\"code\":\"210202\",\"name\":\"中山区\"},{\"code\":\"210203\",\"name\":\"西岗区\"},{\"code\":\"210204\",\"name\":\"沙河口区\"},{\"code\":\"210211\",\"name\":\"甘井子区\"},{\"code\":\"210212\",\"name\":\"旅顺口区\"},{\"code\":\"210213\",\"name\":\"金州区\"},{\"code\":\"210214\",\"name\":\"普兰店区\"},{\"code\":\"210224\",\"name\":\"长海县\"},{\"code\":\"210281\",\"name\":\"瓦房店市\"},{\"code\":\"210283\",\"name\":\"庄河市\"}],\"code\":\"210200\",\"name\":\"大连市\"},{\"children\":[{\"code\":\"210301\",\"name\":\"市辖区\"},{\"code\":\"210302\",\"name\":\"铁东区\"},{\"code\":\"210303\",\"name\":\"铁西区\"},{\"code\":\"210304\",\"name\":\"立山区\"},{\"code\":\"210311\",\"name\":\"千山区\"},{\"code\":\"210321\",\"name\":\"台安县\"},{\"code\":\"210323\",\"name\":\"岫岩满族自治县\"},{\"code\":\"210381\",\"name\":\"海城市\"}],\"code\":\"210300\",\"name\":\"鞍山市\"},{\"children\":[{\"code\":\"210401\",\"name\":\"市辖区\"},{\"code\":\"210402\",\"name\":\"新抚区\"},{\"code\":\"210403\",\"name\":\"东洲区\"},{\"code\":\"210404\",\"name\":\"望花区\"},{\"code\":\"210411\",\"name\":\"顺城区\"},{\"code\":\"210421\",\"name\":\"抚顺县\"},{\"code\":\"210422\",\"name\":\"新宾满族自治县\"},{\"code\":\"210423\",\"name\":\"清原满族自治县\"}],\"code\":\"210400\",\"name\":\"抚顺市\"},{\"children\":[{\"code\":\"210501\",\"name\":\"市辖区\"},{\"code\":\"210502\",\"name\":\"平山区\"},{\"code\":\"210503\",\"name\":\"溪湖区\"},{\"code\":\"210504\",\"name\":\"明山区\"},{\"code\":\"210505\",\"name\":\"南芬区\"},{\"code\":\"210521\",\"name\":\"本溪满族自治县\"},{\"code\":\"210522\",\"name\":\"桓仁满族自治县\"}],\"code\":\"210500\",\"name\":\"本溪市\"},{\"children\":[{\"code\":\"210601\",\"name\":\"市辖区\"},{\"code\":\"210602\",\"name\":\"元宝区\"},{\"code\":\"210603\",\"name\":\"振兴区\"},{\"code\":\"210604\",\"name\":\"振安区\"},{\"code\":\"210624\",\"name\":\"宽甸满族自治县\"},{\"code\":\"210681\",\"name\":\"东港市\"},{\"code\":\"210682\",\"name\":\"凤城市\"}],\"code\":\"210600\",\"name\":\"丹东市\"},{\"children\":[{\"code\":\"210701\",\"name\":\"市辖区\"},{\"code\":\"210702\",\"name\":\"古塔区\"},{\"code\":\"210703\",\"name\":\"凌河区\"},{\"code\":\"210711\",\"name\":\"太和区\"},{\"code\":\"210726\",\"name\":\"黑山县\"},{\"code\":\"210727\",\"name\":\"义县\"},{\"code\":\"210781\",\"name\":\"凌海市\"},{\"code\":\"210782\",\"name\":\"北镇市\"}],\"code\":\"210700\",\"name\":\"锦州市\"},{\"children\":[{\"code\":\"210801\",\"name\":\"市辖区\"},{\"code\":\"210802\",\"name\":\"站前区\"},{\"code\":\"210803\",\"name\":\"西市区\"},{\"code\":\"210804\",\"name\":\"鲅鱼圈区\"},{\"code\":\"210811\",\"name\":\"老边区\"},{\"code\":\"210881\",\"name\":\"盖州市\"},{\"code\":\"210882\",\"name\":\"大石桥市\"}],\"code\":\"210800\",\"name\":\"营口市\"},{\"children\":[{\"code\":\"210901\",\"name\":\"市辖区\"},{\"code\":\"210902\",\"name\":\"海州区\"},{\"code\":\"210903\",\"name\":\"新邱区\"},{\"code\":\"210904\",\"name\":\"太平区\"},{\"code\":\"210905\",\"name\":\"清河门区\"},{\"code\":\"210911\",\"name\":\"细河区\"},{\"code\":\"210921\",\"name\":\"阜新蒙古族自治县\"},{\"code\":\"210922\",\"name\":\"彰武县\"}],\"code\":\"210900\",\"name\":\"阜新市\"},{\"children\":[{\"code\":\"211001\",\"name\":\"市辖区\"},{\"code\":\"211002\",\"name\":\"白塔区\"},{\"code\":\"211003\",\"name\":\"文圣区\"},{\"code\":\"211004\",\"name\":\"宏伟区\"},{\"code\":\"211005\",\"name\":\"弓长岭区\"},{\"code\":\"211011\",\"name\":\"太子河区\"},{\"code\":\"211021\",\"name\":\"辽阳县\"},{\"code\":\"211081\",\"name\":\"灯塔市\"}],\"code\":\"211000\",\"name\":\"辽阳市\"},{\"children\":[{\"code\":\"211101\",\"name\":\"市辖区\"},{\"code\":\"211102\",\"name\":\"双台子区\"},{\"code\":\"211103\",\"name\":\"兴隆台区\"},{\"code\":\"211104\",\"name\":\"大洼区\"},{\"code\":\"211122\",\"name\":\"盘山县\"}],\"code\":\"211100\",\"name\":\"盘锦市\"},{\"children\":[{\"code\":\"211201\",\"name\":\"市辖区\"},{\"code\":\"211202\",\"name\":\"银州区\"},{\"code\":\"211204\",\"name\":\"清河区\"},{\"code\":\"211221\",\"name\":\"铁岭县\"},{\"code\":\"211223\",\"name\":\"西丰县\"},{\"code\":\"211224\",\"name\":\"昌图县\"},{\"code\":\"211281\",\"name\":\"调兵山市\"},{\"code\":\"211282\",\"name\":\"开原市\"}],\"code\":\"211200\",\"name\":\"铁岭市\"},{\"children\":[{\"code\":\"211301\",\"name\":\"市辖区\"},{\"code\":\"211302\",\"name\":\"双塔区\"},{\"code\":\"211303\",\"name\":\"龙城区\"},{\"code\":\"211321\",\"name\":\"朝阳县\"},{\"code\":\"211322\",\"name\":\"建平县\"},{\"code\":\"211324\",\"name\":\"喀喇沁左翼蒙古族自治县\"},{\"code\":\"211381\",\"name\":\"北票市\"},{\"code\":\"211382\",\"name\":\"凌源市\"}],\"code\":\"211300\",\"name\":\"朝阳市\"},{\"children\":[{\"code\":\"211401\",\"name\":\"市辖区\"},{\"code\":\"211402\",\"name\":\"连山区\"},{\"code\":\"211403\",\"name\":\"龙港区\"},{\"code\":\"211404\",\"name\":\"南票区\"},{\"code\":\"211421\",\"name\":\"绥中县\"},{\"code\":\"211422\",\"name\":\"建昌县\"},{\"code\":\"211481\",\"name\":\"兴城市\"}],\"code\":\"211400\",\"name\":\"葫芦岛市\"}],\"code\":\"210000\",\"name\":\"辽宁省\"},{\"children\":[{\"children\":[{\"code\":\"220101\",\"name\":\"市辖区\"},{\"code\":\"220102\",\"name\":\"南关区\"},{\"code\":\"220103\",\"name\":\"宽城区\"},{\"code\":\"220104\",\"name\":\"朝阳区\"},{\"code\":\"220105\",\"name\":\"二道区\"},{\"code\":\"220106\",\"name\":\"绿园区\"},{\"code\":\"220112\",\"name\":\"双阳区\"},{\"code\":\"220113\",\"name\":\"九台区\"},{\"code\":\"220122\",\"name\":\"农安县\"},{\"code\":\"220182\",\"name\":\"榆树市\"},{\"code\":\"220183\",\"name\":\"德惠市\"}],\"code\":\"220100\",\"name\":\"长春市\"},{\"children\":[{\"code\":\"220201\",\"name\":\"市辖区\"},{\"code\":\"220202\",\"name\":\"昌邑区\"},{\"code\":\"220203\",\"name\":\"龙潭区\"},{\"code\":\"220204\",\"name\":\"船营区\"},{\"code\":\"220211\",\"name\":\"丰满区\"},{\"code\":\"220221\",\"name\":\"永吉县\"},{\"code\":\"220281\",\"name\":\"蛟河市\"},{\"code\":\"220282\",\"name\":\"桦甸市\"},{\"code\":\"220283\",\"name\":\"舒兰市\"},{\"code\":\"220284\",\"name\":\"磐石市\"}],\"code\":\"220200\",\"name\":\"吉林市\"},{\"children\":[{\"code\":\"220301\",\"name\":\"市辖区\"},{\"code\":\"220302\",\"name\":\"铁西区\"},{\"code\":\"220303\",\"name\":\"铁东区\"},{\"code\":\"220322\",\"name\":\"梨树县\"},{\"code\":\"220323\",\"name\":\"伊通满族自治县\"},{\"code\":\"220381\",\"name\":\"公主岭市\"},{\"code\":\"220382\",\"name\":\"双辽市\"}],\"code\":\"220300\",\"name\":\"四平市\"},{\"children\":[{\"code\":\"220401\",\"name\":\"市辖区\"},{\"code\":\"220402\",\"name\":\"龙山区\"},{\"code\":\"220403\",\"name\":\"西安区\"},{\"code\":\"220421\",\"name\":\"东丰县\"},{\"code\":\"220422\",\"name\":\"东辽县\"}],\"code\":\"220400\",\"name\":\"辽源市\"},{\"children\":[{\"code\":\"220501\",\"name\":\"市辖区\"},{\"code\":\"220502\",\"name\":\"东昌区\"},{\"code\":\"220503\",\"name\":\"二道江区\"},{\"code\":\"220521\",\"name\":\"通化县\"},{\"code\":\"220523\",\"name\":\"辉南县\"},{\"code\":\"220524\",\"name\":\"柳河县\"},{\"code\":\"220581\",\"name\":\"梅河口市\"},{\"code\":\"220582\",\"name\":\"集安市\"}],\"code\":\"220500\",\"name\":\"通化市\"},{\"children\":[{\"code\":\"220601\",\"name\":\"市辖区\"},{\"code\":\"220602\",\"name\":\"浑江区\"},{\"code\":\"220605\",\"name\":\"江源区\"},{\"code\":\"220621\",\"name\":\"抚松县\"},{\"code\":\"220622\",\"name\":\"靖宇县\"},{\"code\":\"220623\",\"name\":\"长白朝鲜族自治县\"},{\"code\":\"220681\",\"name\":\"临江市\"}],\"code\":\"220600\",\"name\":\"白山市\"},{\"children\":[{\"code\":\"220701\",\"name\":\"市辖区\"},{\"code\":\"220702\",\"name\":\"宁江区\"},{\"code\":\"220721\",\"name\":\"前郭尔罗斯蒙古族自治县\"},{\"code\":\"220722\",\"name\":\"长岭县\"},{\"code\":\"220723\",\"name\":\"乾安县\"},{\"code\":\"220781\",\"name\":\"扶余市\"}],\"code\":\"220700\",\"name\":\"松原市\"},{\"children\":[{\"code\":\"220801\",\"name\":\"市辖区\"},{\"code\":\"220802\",\"name\":\"洮北区\"},{\"code\":\"220821\",\"name\":\"镇赉县\"},{\"code\":\"220822\",\"name\":\"通榆县\"},{\"code\":\"220881\",\"name\":\"洮南市\"},{\"code\":\"220882\",\"name\":\"大安市\"}],\"code\":\"220800\",\"name\":\"白城市\"},{\"children\":[{\"code\":\"222401\",\"name\":\"延吉市\"},{\"code\":\"222402\",\"name\":\"图们市\"},{\"code\":\"222403\",\"name\":\"敦化市\"},{\"code\":\"222404\",\"name\":\"珲春市\"},{\"code\":\"222405\",\"name\":\"龙井市\"},{\"code\":\"222406\",\"name\":\"和龙市\"},{\"code\":\"222424\",\"name\":\"汪清县\"},{\"code\":\"222426\",\"name\":\"安图县\"}],\"code\":\"222400\",\"name\":\"延边朝鲜族自治州\"}],\"code\":\"220000\",\"name\":\"吉林省\"},{\"children\":[{\"children\":[{\"code\":\"230101\",\"name\":\"市辖区\"},{\"code\":\"230102\",\"name\":\"道里区\"},{\"code\":\"230103\",\"name\":\"南岗区\"},{\"code\":\"230104\",\"name\":\"道外区\"},{\"code\":\"230108\",\"name\":\"平房区\"},{\"code\":\"230109\",\"name\":\"松北区\"},{\"code\":\"230110\",\"name\":\"香坊区\"},{\"code\":\"230111\",\"name\":\"呼兰区\"},{\"code\":\"230112\",\"name\":\"阿城区\"},{\"code\":\"230113\",\"name\":\"双城区\"},{\"code\":\"230123\",\"name\":\"依兰县\"},{\"code\":\"230124\",\"name\":\"方正县\"},{\"code\":\"230125\",\"name\":\"宾县\"},{\"code\":\"230126\",\"name\":\"巴彦县\"},{\"code\":\"230127\",\"name\":\"木兰县\"},{\"code\":\"230128\",\"name\":\"通河县\"},{\"code\":\"230129\",\"name\":\"延寿县\"},{\"code\":\"230183\",\"name\":\"尚志市\"},{\"code\":\"230184\",\"name\":\"五常市\"}],\"code\":\"230100\",\"name\":\"哈尔滨市\"},{\"children\":[{\"code\":\"230201\",\"name\":\"市辖区\"},{\"code\":\"230202\",\"name\":\"龙沙区\"},{\"code\":\"230203\",\"name\":\"建华区\"},{\"code\":\"230204\",\"name\":\"铁锋区\"},{\"code\":\"230205\",\"name\":\"昂昂溪区\"},{\"code\":\"230206\",\"name\":\"富拉尔基区\"},{\"code\":\"230207\",\"name\":\"碾子山区\"},{\"code\":\"230208\",\"name\":\"梅里斯达斡尔族区\"},{\"code\":\"230221\",\"name\":\"龙江县\"},{\"code\":\"230223\",\"name\":\"依安县\"},{\"code\":\"230224\",\"name\":\"泰来县\"},{\"code\":\"230225\",\"name\":\"甘南县\"},{\"code\":\"230227\",\"name\":\"富裕县\"},{\"code\":\"230229\",\"name\":\"克山县\"},{\"code\":\"230230\",\"name\":\"克东县\"},{\"code\":\"230231\",\"name\":\"拜泉县\"},{\"code\":\"230281\",\"name\":\"讷河市\"}],\"code\":\"230200\",\"name\":\"齐齐哈尔市\"},{\"children\":[{\"code\":\"230301\",\"name\":\"市辖区\"},{\"code\":\"230302\",\"name\":\"鸡冠区\"},{\"code\":\"230303\",\"name\":\"恒山区\"},{\"code\":\"230304\",\"name\":\"滴道区\"},{\"code\":\"230305\",\"name\":\"梨树区\"},{\"code\":\"230306\",\"name\":\"城子河区\"},{\"code\":\"230307\",\"name\":\"麻山区\"},{\"code\":\"230321\",\"name\":\"鸡东县\"},{\"code\":\"230381\",\"name\":\"虎林市\"},{\"code\":\"230382\",\"name\":\"密山市\"}],\"code\":\"230300\",\"name\":\"鸡西市\"},{\"children\":[{\"code\":\"230401\",\"name\":\"市辖区\"},{\"code\":\"230402\",\"name\":\"向阳区\"},{\"code\":\"230403\",\"name\":\"工农区\"},{\"code\":\"230404\",\"name\":\"南山区\"},{\"code\":\"230405\",\"name\":\"兴安区\"},{\"code\":\"230406\",\"name\":\"东山区\"},{\"code\":\"230407\",\"name\":\"兴山区\"},{\"code\":\"230421\",\"name\":\"萝北县\"},{\"code\":\"230422\",\"name\":\"绥滨县\"}],\"code\":\"230400\",\"name\":\"鹤岗市\"},{\"children\":[{\"code\":\"230501\",\"name\":\"市辖区\"},{\"code\":\"230502\",\"name\":\"尖山区\"},{\"code\":\"230503\",\"name\":\"岭东区\"},{\"code\":\"230505\",\"name\":\"四方台区\"},{\"code\":\"230506\",\"name\":\"宝山区\"},{\"code\":\"230521\",\"name\":\"集贤县\"},{\"code\":\"230522\",\"name\":\"友谊县\"},{\"code\":\"230523\",\"name\":\"宝清县\"},{\"code\":\"230524\",\"name\":\"饶河县\"}],\"code\":\"230500\",\"name\":\"双鸭山市\"},{\"children\":[{\"code\":\"230601\",\"name\":\"市辖区\"},{\"code\":\"230602\",\"name\":\"萨尔图区\"},{\"code\":\"230603\",\"name\":\"龙凤区\"},{\"code\":\"230604\",\"name\":\"让胡路区\"},{\"code\":\"230605\",\"name\":\"红岗区\"},{\"code\":\"230606\",\"name\":\"大同区\"},{\"code\":\"230621\",\"name\":\"肇州县\"},{\"code\":\"230622\",\"name\":\"肇源县\"},{\"code\":\"230623\",\"name\":\"林甸县\"},{\"code\":\"230624\",\"name\":\"杜尔伯特蒙古族自治县\"}],\"code\":\"230600\",\"name\":\"大庆市\"},{\"children\":[{\"code\":\"230701\",\"name\":\"市辖区\"},{\"code\":\"230702\",\"name\":\"伊春区\"},{\"code\":\"230703\",\"name\":\"南岔区\"},{\"code\":\"230704\",\"name\":\"友好区\"},{\"code\":\"230705\",\"name\":\"西林区\"},{\"code\":\"230706\",\"name\":\"翠峦区\"},{\"code\":\"230707\",\"name\":\"新青区\"},{\"code\":\"230708\",\"name\":\"美溪区\"},{\"code\":\"230709\",\"name\":\"金山屯区\"},{\"code\":\"230710\",\"name\":\"五营区\"},{\"code\":\"230711\",\"name\":\"乌马河区\"},{\"code\":\"230712\",\"name\":\"汤旺河区\"},{\"code\":\"230713\",\"name\":\"带岭区\"},{\"code\":\"230714\",\"name\":\"乌伊岭区\"},{\"code\":\"230715\",\"name\":\"红星区\"},{\"code\":\"230716\",\"name\":\"上甘岭区\"},{\"code\":\"230722\",\"name\":\"嘉荫县\"},{\"code\":\"230781\",\"name\":\"铁力市\"}],\"code\":\"230700\",\"name\":\"伊春市\"},{\"children\":[{\"code\":\"230801\",\"name\":\"市辖区\"},{\"code\":\"230803\",\"name\":\"向阳区\"},{\"code\":\"230804\",\"name\":\"前进区\"},{\"code\":\"230805\",\"name\":\"东风区\"},{\"code\":\"230811\",\"name\":\"郊区\"},{\"code\":\"230822\",\"name\":\"桦南县\"},{\"code\":\"230826\",\"name\":\"桦川县\"},{\"code\":\"230828\",\"name\":\"汤原县\"},{\"code\":\"230881\",\"name\":\"同江市\"},{\"code\":\"230882\",\"name\":\"富锦市\"},{\"code\":\"230883\",\"name\":\"抚远市\"}],\"code\":\"230800\",\"name\":\"佳木斯市\"},{\"children\":[{\"code\":\"230901\",\"name\":\"市辖区\"},{\"code\":\"230902\",\"name\":\"新兴区\"},{\"code\":\"230903\",\"name\":\"桃山区\"},{\"code\":\"230904\",\"name\":\"茄子河区\"},{\"code\":\"230921\",\"name\":\"勃利县\"}],\"code\":\"230900\",\"name\":\"七台河市\"},{\"children\":[{\"code\":\"231001\",\"name\":\"市辖区\"},{\"code\":\"231002\",\"name\":\"东安区\"},{\"code\":\"231003\",\"name\":\"阳明区\"},{\"code\":\"231004\",\"name\":\"爱民区\"},{\"code\":\"231005\",\"name\":\"西安区\"},{\"code\":\"231025\",\"name\":\"林口县\"},{\"code\":\"231081\",\"name\":\"绥芬河市\"},{\"code\":\"231083\",\"name\":\"海林市\"},{\"code\":\"231084\",\"name\":\"宁安市\"},{\"code\":\"231085\",\"name\":\"穆棱市\"},{\"code\":\"231086\",\"name\":\"东宁市\"}],\"code\":\"231000\",\"name\":\"牡丹江市\"},{\"children\":[{\"code\":\"231101\",\"name\":\"市辖区\"},{\"code\":\"231102\",\"name\":\"爱辉区\"},{\"code\":\"231121\",\"name\":\"嫩江县\"},{\"code\":\"231123\",\"name\":\"逊克县\"},{\"code\":\"231124\",\"name\":\"孙吴县\"},{\"code\":\"231181\",\"name\":\"北安市\"},{\"code\":\"231182\",\"name\":\"五大连池市\"}],\"code\":\"231100\",\"name\":\"黑河市\"},{\"children\":[{\"code\":\"231201\",\"name\":\"市辖区\"},{\"code\":\"231202\",\"name\":\"北林区\"},{\"code\":\"231221\",\"name\":\"望奎县\"},{\"code\":\"231222\",\"name\":\"兰西县\"},{\"code\":\"231223\",\"name\":\"青冈县\"},{\"code\":\"231224\",\"name\":\"庆安县\"},{\"code\":\"231225\",\"name\":\"明水县\"},{\"code\":\"231226\",\"name\":\"绥棱县\"},{\"code\":\"231281\",\"name\":\"安达市\"},{\"code\":\"231282\",\"name\":\"肇东市\"},{\"code\":\"231283\",\"name\":\"海伦市\"}],\"code\":\"231200\",\"name\":\"绥化市\"},{\"children\":[{\"code\":\"232721\",\"name\":\"呼玛县\"},{\"code\":\"232722\",\"name\":\"塔河县\"},{\"code\":\"232723\",\"name\":\"漠河县\"}],\"code\":\"232700\",\"name\":\"大兴安岭地区\"}],\"code\":\"230000\",\"name\":\"黑龙江省\"},{\"children\":[{\"children\":[{\"code\":\"310101\",\"name\":\"黄浦区\"},{\"code\":\"310104\",\"name\":\"徐汇区\"},{\"code\":\"310105\",\"name\":\"长宁区\"},{\"code\":\"310106\",\"name\":\"静安区\"},{\"code\":\"310107\",\"name\":\"普陀区\"},{\"code\":\"310109\",\"name\":\"虹口区\"},{\"code\":\"310110\",\"name\":\"杨浦区\"},{\"code\":\"310112\",\"name\":\"闵行区\"},{\"code\":\"310113\",\"name\":\"宝山区\"},{\"code\":\"310114\",\"name\":\"嘉定区\"},{\"code\":\"310115\",\"name\":\"浦东新区\"},{\"code\":\"310116\",\"name\":\"金山区\"},{\"code\":\"310117\",\"name\":\"松江区\"},{\"code\":\"310118\",\"name\":\"青浦区\"},{\"code\":\"310120\",\"name\":\"奉贤区\"},{\"code\":\"310151\",\"name\":\"崇明区\"}],\"code\":\"310100\",\"name\":\"市辖区\"}],\"code\":\"310000\",\"name\":\"上海市\"},{\"children\":[{\"children\":[{\"code\":\"320101\",\"name\":\"市辖区\"},{\"code\":\"320102\",\"name\":\"玄武区\"},{\"code\":\"320104\",\"name\":\"秦淮区\"},{\"code\":\"320105\",\"name\":\"建邺区\"},{\"code\":\"320106\",\"name\":\"鼓楼区\"},{\"code\":\"320111\",\"name\":\"浦口区\"},{\"code\":\"320113\",\"name\":\"栖霞区\"},{\"code\":\"320114\",\"name\":\"雨花台区\"},{\"code\":\"320115\",\"name\":\"江宁区\"},{\"code\":\"320116\",\"name\":\"六合区\"},{\"code\":\"320117\",\"name\":\"溧水区\"},{\"code\":\"320118\",\"name\":\"高淳区\"}],\"code\":\"320100\",\"name\":\"南京市\"},{\"children\":[{\"code\":\"320201\",\"name\":\"市辖区\"},{\"code\":\"320205\",\"name\":\"锡山区\"},{\"code\":\"320206\",\"name\":\"惠山区\"},{\"code\":\"320211\",\"name\":\"滨湖区\"},{\"code\":\"320213\",\"name\":\"梁溪区\"},{\"code\":\"320214\",\"name\":\"新吴区\"},{\"code\":\"320281\",\"name\":\"江阴市\"},{\"code\":\"320282\",\"name\":\"宜兴市\"}],\"code\":\"320200\",\"name\":\"无锡市\"},{\"children\":[{\"code\":\"320301\",\"name\":\"市辖区\"},{\"code\":\"320302\",\"name\":\"鼓楼区\"},{\"code\":\"320303\",\"name\":\"云龙区\"},{\"code\":\"320305\",\"name\":\"贾汪区\"},{\"code\":\"320311\",\"name\":\"泉山区\"},{\"code\":\"320312\",\"name\":\"铜山区\"},{\"code\":\"320321\",\"name\":\"丰县\"},{\"code\":\"320322\",\"name\":\"沛县\"},{\"code\":\"320324\",\"name\":\"睢宁县\"},{\"code\":\"320381\",\"name\":\"新沂市\"},{\"code\":\"320382\",\"name\":\"邳州市\"}],\"code\":\"320300\",\"name\":\"徐州市\"},{\"children\":[{\"code\":\"320401\",\"name\":\"市辖区\"},{\"code\":\"320402\",\"name\":\"天宁区\"},{\"code\":\"320404\",\"name\":\"钟楼区\"},{\"code\":\"320411\",\"name\":\"新北区\"},{\"code\":\"320412\",\"name\":\"武进区\"},{\"code\":\"320413\",\"name\":\"金坛区\"},{\"code\":\"320481\",\"name\":\"溧阳市\"}],\"code\":\"320400\",\"name\":\"常州市\"},{\"children\":[{\"code\":\"320501\",\"name\":\"市辖区\"},{\"code\":\"320505\",\"name\":\"虎丘区\"},{\"code\":\"320506\",\"name\":\"吴中区\"},{\"code\":\"320507\",\"name\":\"相城区\"},{\"code\":\"320508\",\"name\":\"姑苏区\"},{\"code\":\"320509\",\"name\":\"吴江区\"},{\"code\":\"320581\",\"name\":\"常熟市\"},{\"code\":\"320582\",\"name\":\"张家港市\"},{\"code\":\"320583\",\"name\":\"昆山市\"},{\"code\":\"320585\",\"name\":\"太仓市\"}],\"code\":\"320500\",\"name\":\"苏州市\"},{\"children\":[{\"code\":\"320601\",\"name\":\"市辖区\"},{\"code\":\"320602\",\"name\":\"崇川区\"},{\"code\":\"320611\",\"name\":\"港闸区\"},{\"code\":\"320612\",\"name\":\"通州区\"},{\"code\":\"320621\",\"name\":\"海安县\"},{\"code\":\"320623\",\"name\":\"如东县\"},{\"code\":\"320681\",\"name\":\"启东市\"},{\"code\":\"320682\",\"name\":\"如皋市\"},{\"code\":\"320684\",\"name\":\"海门市\"}],\"code\":\"320600\",\"name\":\"南通市\"},{\"children\":[{\"code\":\"320701\",\"name\":\"市辖区\"},{\"code\":\"320703\",\"name\":\"连云区\"},{\"code\":\"320706\",\"name\":\"海州区\"},{\"code\":\"320707\",\"name\":\"赣榆区\"},{\"code\":\"320722\",\"name\":\"东海县\"},{\"code\":\"320723\",\"name\":\"灌云县\"},{\"code\":\"320724\",\"name\":\"灌南县\"}],\"code\":\"320700\",\"name\":\"连云港市\"},{\"children\":[{\"code\":\"320801\",\"name\":\"市辖区\"},{\"code\":\"320803\",\"name\":\"淮安区\"},{\"code\":\"320804\",\"name\":\"淮阴区\"},{\"code\":\"320812\",\"name\":\"清江浦区\"},{\"code\":\"320813\",\"name\":\"洪泽区\"},{\"code\":\"320826\",\"name\":\"涟水县\"},{\"code\":\"320830\",\"name\":\"盱眙县\"},{\"code\":\"320831\",\"name\":\"金湖县\"}],\"code\":\"320800\",\"name\":\"淮安市\"},{\"children\":[{\"code\":\"320901\",\"name\":\"市辖区\"},{\"code\":\"320902\",\"name\":\"亭湖区\"},{\"code\":\"320903\",\"name\":\"盐都区\"},{\"code\":\"320904\",\"name\":\"大丰区\"},{\"code\":\"320921\",\"name\":\"响水县\"},{\"code\":\"320922\",\"name\":\"滨海县\"},{\"code\":\"320923\",\"name\":\"阜宁县\"},{\"code\":\"320924\",\"name\":\"射阳县\"},{\"code\":\"320925\",\"name\":\"建湖县\"},{\"code\":\"320981\",\"name\":\"东台市\"}],\"code\":\"320900\",\"name\":\"盐城市\"},{\"children\":[{\"code\":\"321001\",\"name\":\"市辖区\"},{\"code\":\"321002\",\"name\":\"广陵区\"},{\"code\":\"321003\",\"name\":\"邗江区\"},{\"code\":\"321012\",\"name\":\"江都区\"},{\"code\":\"321023\",\"name\":\"宝应县\"},{\"code\":\"321081\",\"name\":\"仪征市\"},{\"code\":\"321084\",\"name\":\"高邮市\"}],\"code\":\"321000\",\"name\":\"扬州市\"},{\"children\":[{\"code\":\"321101\",\"name\":\"市辖区\"},{\"code\":\"321102\",\"name\":\"京口区\"},{\"code\":\"321111\",\"name\":\"润州区\"},{\"code\":\"321112\",\"name\":\"丹徒区\"},{\"code\":\"321181\",\"name\":\"丹阳市\"},{\"code\":\"321182\",\"name\":\"扬中市\"},{\"code\":\"321183\",\"name\":\"句容市\"}],\"code\":\"321100\",\"name\":\"镇江市\"},{\"children\":[{\"code\":\"321201\",\"name\":\"市辖区\"},{\"code\":\"321202\",\"name\":\"海陵区\"},{\"code\":\"321203\",\"name\":\"高港区\"},{\"code\":\"321204\",\"name\":\"姜堰区\"},{\"code\":\"321281\",\"name\":\"兴化市\"},{\"code\":\"321282\",\"name\":\"靖江市\"},{\"code\":\"321283\",\"name\":\"泰兴市\"}],\"code\":\"321200\",\"name\":\"泰州市\"},{\"children\":[{\"code\":\"321301\",\"name\":\"市辖区\"},{\"code\":\"321302\",\"name\":\"宿城区\"},{\"code\":\"321311\",\"name\":\"宿豫区\"},{\"code\":\"321322\",\"name\":\"沭阳县\"},{\"code\":\"321323\",\"name\":\"泗阳县\"},{\"code\":\"321324\",\"name\":\"泗洪县\"}],\"code\":\"321300\",\"name\":\"宿迁市\"}],\"code\":\"320000\",\"name\":\"江苏省\"},{\"children\":[{\"children\":[{\"code\":\"330101\",\"name\":\"市辖区\"},{\"code\":\"330102\",\"name\":\"上城区\"},{\"code\":\"330103\",\"name\":\"下城区\"},{\"code\":\"330104\",\"name\":\"江干区\"},{\"code\":\"330105\",\"name\":\"拱墅区\"},{\"code\":\"330106\",\"name\":\"西湖区\"},{\"code\":\"330108\",\"name\":\"滨江区\"},{\"code\":\"330109\",\"name\":\"萧山区\"},{\"code\":\"330110\",\"name\":\"余杭区\"},{\"code\":\"330111\",\"name\":\"富阳区\"},{\"code\":\"330122\",\"name\":\"桐庐县\"},{\"code\":\"330127\",\"name\":\"淳安县\"},{\"code\":\"330182\",\"name\":\"建德市\"},{\"code\":\"330185\",\"name\":\"临安市\"}],\"code\":\"330100\",\"name\":\"杭州市\"},{\"children\":[{\"code\":\"330201\",\"name\":\"市辖区\"},{\"code\":\"330203\",\"name\":\"海曙区\"},{\"code\":\"330204\",\"name\":\"江东区\"},{\"code\":\"330205\",\"name\":\"江北区\"},{\"code\":\"330206\",\"name\":\"北仑区\"},{\"code\":\"330211\",\"name\":\"镇海区\"},{\"code\":\"330212\",\"name\":\"鄞州区\"},{\"code\":\"330225\",\"name\":\"象山县\"},{\"code\":\"330226\",\"name\":\"宁海县\"},{\"code\":\"330281\",\"name\":\"余姚市\"},{\"code\":\"330282\",\"name\":\"慈溪市\"},{\"code\":\"330283\",\"name\":\"奉化市\"}],\"code\":\"330200\",\"name\":\"宁波市\"},{\"children\":[{\"code\":\"330301\",\"name\":\"市辖区\"},{\"code\":\"330302\",\"name\":\"鹿城区\"},{\"code\":\"330303\",\"name\":\"龙湾区\"},{\"code\":\"330304\",\"name\":\"瓯海区\"},{\"code\":\"330305\",\"name\":\"洞头区\"},{\"code\":\"330324\",\"name\":\"永嘉县\"},{\"code\":\"330326\",\"name\":\"平阳县\"},{\"code\":\"330327\",\"name\":\"苍南县\"},{\"code\":\"330328\",\"name\":\"文成县\"},{\"code\":\"330329\",\"name\":\"泰顺县\"},{\"code\":\"330381\",\"name\":\"瑞安市\"},{\"code\":\"330382\",\"name\":\"乐清市\"}],\"code\":\"330300\",\"name\":\"温州市\"},{\"children\":[{\"code\":\"330401\",\"name\":\"市辖区\"},{\"code\":\"330402\",\"name\":\"南湖区\"},{\"code\":\"330411\",\"name\":\"秀洲区\"},{\"code\":\"330421\",\"name\":\"嘉善县\"},{\"code\":\"330424\",\"name\":\"海盐县\"},{\"code\":\"330481\",\"name\":\"海宁市\"},{\"code\":\"330482\",\"name\":\"平湖市\"},{\"code\":\"330483\",\"name\":\"桐乡市\"}],\"code\":\"330400\",\"name\":\"嘉兴市\"},{\"children\":[{\"code\":\"330501\",\"name\":\"市辖区\"},{\"code\":\"330502\",\"name\":\"吴兴区\"},{\"code\":\"330503\",\"name\":\"南浔区\"},{\"code\":\"330521\",\"name\":\"德清县\"},{\"code\":\"330522\",\"name\":\"长兴县\"},{\"code\":\"330523\",\"name\":\"安吉县\"}],\"code\":\"330500\",\"name\":\"湖州市\"},{\"children\":[{\"code\":\"330601\",\"name\":\"市辖区\"},{\"code\":\"330602\",\"name\":\"越城区\"},{\"code\":\"330603\",\"name\":\"柯桥区\"},{\"code\":\"330604\",\"name\":\"上虞区\"},{\"code\":\"330624\",\"name\":\"新昌县\"},{\"code\":\"330681\",\"name\":\"诸暨市\"},{\"code\":\"330683\",\"name\":\"嵊州市\"}],\"code\":\"330600\",\"name\":\"绍兴市\"},{\"children\":[{\"code\":\"330701\",\"name\":\"市辖区\"},{\"code\":\"330702\",\"name\":\"婺城区\"},{\"code\":\"330703\",\"name\":\"金东区\"},{\"code\":\"330723\",\"name\":\"武义县\"},{\"code\":\"330726\",\"name\":\"浦江县\"},{\"code\":\"330727\",\"name\":\"磐安县\"},{\"code\":\"330781\",\"name\":\"兰溪市\"},{\"code\":\"330782\",\"name\":\"义乌市\"},{\"code\":\"330783\",\"name\":\"东阳市\"},{\"code\":\"330784\",\"name\":\"永康市\"}],\"code\":\"330700\",\"name\":\"金华市\"},{\"children\":[{\"code\":\"330801\",\"name\":\"市辖区\"},{\"code\":\"330802\",\"name\":\"柯城区\"},{\"code\":\"330803\",\"name\":\"衢江区\"},{\"code\":\"330822\",\"name\":\"常山县\"},{\"code\":\"330824\",\"name\":\"开化县\"},{\"code\":\"330825\",\"name\":\"龙游县\"},{\"code\":\"330881\",\"name\":\"江山市\"}],\"code\":\"330800\",\"name\":\"衢州市\"},{\"children\":[{\"code\":\"330901\",\"name\":\"市辖区\"},{\"code\":\"330902\",\"name\":\"定海区\"},{\"code\":\"330903\",\"name\":\"普陀区\"},{\"code\":\"330921\",\"name\":\"岱山县\"},{\"code\":\"330922\",\"name\":\"嵊泗县\"}],\"code\":\"330900\",\"name\":\"舟山市\"},{\"children\":[{\"code\":\"331001\",\"name\":\"市辖区\"},{\"code\":\"331002\",\"name\":\"椒江区\"},{\"code\":\"331003\",\"name\":\"黄岩区\"},{\"code\":\"331004\",\"name\":\"路桥区\"},{\"code\":\"331021\",\"name\":\"玉环县\"},{\"code\":\"331022\",\"name\":\"三门县\"},{\"code\":\"331023\",\"name\":\"天台县\"},{\"code\":\"331024\",\"name\":\"仙居县\"},{\"code\":\"331081\",\"name\":\"温岭市\"},{\"code\":\"331082\",\"name\":\"临海市\"}],\"code\":\"331000\",\"name\":\"台州市\"},{\"children\":[{\"code\":\"331101\",\"name\":\"市辖区\"},{\"code\":\"331102\",\"name\":\"莲都区\"},{\"code\":\"331121\",\"name\":\"青田县\"},{\"code\":\"331122\",\"name\":\"缙云县\"},{\"code\":\"331123\",\"name\":\"遂昌县\"},{\"code\":\"331124\",\"name\":\"松阳县\"},{\"code\":\"331125\",\"name\":\"云和县\"},{\"code\":\"331126\",\"name\":\"庆元县\"},{\"code\":\"331127\",\"name\":\"景宁畲族自治县\"},{\"code\":\"331181\",\"name\":\"龙泉市\"}],\"code\":\"331100\",\"name\":\"丽水市\"}],\"code\":\"330000\",\"name\":\"浙江省\"},{\"children\":[{\"children\":[{\"code\":\"340101\",\"name\":\"市辖区\"},{\"code\":\"340102\",\"name\":\"瑶海区\"},{\"code\":\"340103\",\"name\":\"庐阳区\"},{\"code\":\"340104\",\"name\":\"蜀山区\"},{\"code\":\"340111\",\"name\":\"包河区\"},{\"code\":\"340121\",\"name\":\"长丰县\"},{\"code\":\"340122\",\"name\":\"肥东县\"},{\"code\":\"340123\",\"name\":\"肥西县\"},{\"code\":\"340124\",\"name\":\"庐江县\"},{\"code\":\"340181\",\"name\":\"巢湖市\"}],\"code\":\"340100\",\"name\":\"合肥市\"},{\"children\":[{\"code\":\"340201\",\"name\":\"市辖区\"},{\"code\":\"340202\",\"name\":\"镜湖区\"},{\"code\":\"340203\",\"name\":\"弋江区\"},{\"code\":\"340207\",\"name\":\"鸠江区\"},{\"code\":\"340208\",\"name\":\"三山区\"},{\"code\":\"340221\",\"name\":\"芜湖县\"},{\"code\":\"340222\",\"name\":\"繁昌县\"},{\"code\":\"340223\",\"name\":\"南陵县\"},{\"code\":\"340225\",\"name\":\"无为县\"}],\"code\":\"340200\",\"name\":\"芜湖市\"},{\"children\":[{\"code\":\"340301\",\"name\":\"市辖区\"},{\"code\":\"340302\",\"name\":\"龙子湖区\"},{\"code\":\"340303\",\"name\":\"蚌山区\"},{\"code\":\"340304\",\"name\":\"禹会区\"},{\"code\":\"340311\",\"name\":\"淮上区\"},{\"code\":\"340321\",\"name\":\"怀远县\"},{\"code\":\"340322\",\"name\":\"五河县\"},{\"code\":\"340323\",\"name\":\"固镇县\"}],\"code\":\"340300\",\"name\":\"蚌埠市\"},{\"children\":[{\"code\":\"340401\",\"name\":\"市辖区\"},{\"code\":\"340402\",\"name\":\"大通区\"},{\"code\":\"340403\",\"name\":\"田家庵区\"},{\"code\":\"340404\",\"name\":\"谢家集区\"},{\"code\":\"340405\",\"name\":\"八公山区\"},{\"code\":\"340406\",\"name\":\"潘集区\"},{\"code\":\"340421\",\"name\":\"凤台县\"},{\"code\":\"340422\",\"name\":\"寿县\"}],\"code\":\"340400\",\"name\":\"淮南市\"},{\"children\":[{\"code\":\"340501\",\"name\":\"市辖区\"},{\"code\":\"340503\",\"name\":\"花山区\"},{\"code\":\"340504\",\"name\":\"雨山区\"},{\"code\":\"340506\",\"name\":\"博望区\"},{\"code\":\"340521\",\"name\":\"当涂县\"},{\"code\":\"340522\",\"name\":\"含山县\"},{\"code\":\"340523\",\"name\":\"和县\"}],\"code\":\"340500\",\"name\":\"马鞍山市\"},{\"children\":[{\"code\":\"340601\",\"name\":\"市辖区\"},{\"code\":\"340602\",\"name\":\"杜集区\"},{\"code\":\"340603\",\"name\":\"相山区\"},{\"code\":\"340604\",\"name\":\"烈山区\"},{\"code\":\"340621\",\"name\":\"濉溪县\"}],\"code\":\"340600\",\"name\":\"淮北市\"},{\"children\":[{\"code\":\"340701\",\"name\":\"市辖区\"},{\"code\":\"340705\",\"name\":\"铜官区\"},{\"code\":\"340706\",\"name\":\"义安区\"},{\"code\":\"340711\",\"name\":\"郊区\"},{\"code\":\"340722\",\"name\":\"枞阳县\"}],\"code\":\"340700\",\"name\":\"铜陵市\"},{\"children\":[{\"code\":\"340801\",\"name\":\"市辖区\"},{\"code\":\"340802\",\"name\":\"迎江区\"},{\"code\":\"340803\",\"name\":\"大观区\"},{\"code\":\"340811\",\"name\":\"宜秀区\"},{\"code\":\"340822\",\"name\":\"怀宁县\"},{\"code\":\"340824\",\"name\":\"潜山县\"},{\"code\":\"340825\",\"name\":\"太湖县\"},{\"code\":\"340826\",\"name\":\"宿松县\"},{\"code\":\"340827\",\"name\":\"望江县\"},{\"code\":\"340828\",\"name\":\"岳西县\"},{\"code\":\"340881\",\"name\":\"桐城市\"}],\"code\":\"340800\",\"name\":\"安庆市\"},{\"children\":[{\"code\":\"341001\",\"name\":\"市辖区\"},{\"code\":\"341002\",\"name\":\"屯溪区\"},{\"code\":\"341003\",\"name\":\"黄山区\"},{\"code\":\"341004\",\"name\":\"徽州区\"},{\"code\":\"341021\",\"name\":\"歙县\"},{\"code\":\"341022\",\"name\":\"休宁县\"},{\"code\":\"341023\",\"name\":\"黟县\"},{\"code\":\"341024\",\"name\":\"祁门县\"}],\"code\":\"341000\",\"name\":\"黄山市\"},{\"children\":[{\"code\":\"341101\",\"name\":\"市辖区\"},{\"code\":\"341102\",\"name\":\"琅琊区\"},{\"code\":\"341103\",\"name\":\"南谯区\"},{\"code\":\"341122\",\"name\":\"来安县\"},{\"code\":\"341124\",\"name\":\"全椒县\"},{\"code\":\"341125\",\"name\":\"定远县\"},{\"code\":\"341126\",\"name\":\"凤阳县\"},{\"code\":\"341181\",\"name\":\"天长市\"},{\"code\":\"341182\",\"name\":\"明光市\"}],\"code\":\"341100\",\"name\":\"滁州市\"},{\"children\":[{\"code\":\"341201\",\"name\":\"市辖区\"},{\"code\":\"341202\",\"name\":\"颍州区\"},{\"code\":\"341203\",\"name\":\"颍东区\"},{\"code\":\"341204\",\"name\":\"颍泉区\"},{\"code\":\"341221\",\"name\":\"临泉县\"},{\"code\":\"341222\",\"name\":\"太和县\"},{\"code\":\"341225\",\"name\":\"阜南县\"},{\"code\":\"341226\",\"name\":\"颍上县\"},{\"code\":\"341282\",\"name\":\"界首市\"}],\"code\":\"341200\",\"name\":\"阜阳市\"},{\"children\":[{\"code\":\"341301\",\"name\":\"市辖区\"},{\"code\":\"341302\",\"name\":\"埇桥区\"},{\"code\":\"341321\",\"name\":\"砀山县\"},{\"code\":\"341322\",\"name\":\"萧县\"},{\"code\":\"341323\",\"name\":\"灵璧县\"},{\"code\":\"341324\",\"name\":\"泗县\"}],\"code\":\"341300\",\"name\":\"宿州市\"},{\"children\":[{\"code\":\"341501\",\"name\":\"市辖区\"},{\"code\":\"341502\",\"name\":\"金安区\"},{\"code\":\"341503\",\"name\":\"裕安区\"},{\"code\":\"341504\",\"name\":\"叶集区\"},{\"code\":\"341522\",\"name\":\"霍邱县\"},{\"code\":\"341523\",\"name\":\"舒城县\"},{\"code\":\"341524\",\"name\":\"金寨县\"},{\"code\":\"341525\",\"name\":\"霍山县\"}],\"code\":\"341500\",\"name\":\"六安市\"},{\"children\":[{\"code\":\"341601\",\"name\":\"市辖区\"},{\"code\":\"341602\",\"name\":\"谯城区\"},{\"code\":\"341621\",\"name\":\"涡阳县\"},{\"code\":\"341622\",\"name\":\"蒙城县\"},{\"code\":\"341623\",\"name\":\"利辛县\"}],\"code\":\"341600\",\"name\":\"亳州市\"},{\"children\":[{\"code\":\"341701\",\"name\":\"市辖区\"},{\"code\":\"341702\",\"name\":\"贵池区\"},{\"code\":\"341721\",\"name\":\"东至县\"},{\"code\":\"341722\",\"name\":\"石台县\"},{\"code\":\"341723\",\"name\":\"青阳县\"}],\"code\":\"341700\",\"name\":\"池州市\"},{\"children\":[{\"code\":\"341801\",\"name\":\"市辖区\"},{\"code\":\"341802\",\"name\":\"宣州区\"},{\"code\":\"341821\",\"name\":\"郎溪县\"},{\"code\":\"341822\",\"name\":\"广德县\"},{\"code\":\"341823\",\"name\":\"泾县\"},{\"code\":\"341824\",\"name\":\"绩溪县\"},{\"code\":\"341825\",\"name\":\"旌德县\"},{\"code\":\"341881\",\"name\":\"宁国市\"}],\"code\":\"341800\",\"name\":\"宣城市\"}],\"code\":\"340000\",\"name\":\"安徽省\"},{\"children\":[{\"children\":[{\"code\":\"350101\",\"name\":\"市辖区\"},{\"code\":\"350102\",\"name\":\"鼓楼区\"},{\"code\":\"350103\",\"name\":\"台江区\"},{\"code\":\"350104\",\"name\":\"仓山区\"},{\"code\":\"350105\",\"name\":\"马尾区\"},{\"code\":\"350111\",\"name\":\"晋安区\"},{\"code\":\"350121\",\"name\":\"闽侯县\"},{\"code\":\"350122\",\"name\":\"连江县\"},{\"code\":\"350123\",\"name\":\"罗源县\"},{\"code\":\"350124\",\"name\":\"闽清县\"},{\"code\":\"350125\",\"name\":\"永泰县\"},{\"code\":\"350128\",\"name\":\"平潭县\"},{\"code\":\"350181\",\"name\":\"福清市\"},{\"code\":\"350182\",\"name\":\"长乐市\"}],\"code\":\"350100\",\"name\":\"福州市\"},{\"children\":[{\"code\":\"350201\",\"name\":\"市辖区\"},{\"code\":\"350203\",\"name\":\"思明区\"},{\"code\":\"350205\",\"name\":\"海沧区\"},{\"code\":\"350206\",\"name\":\"湖里区\"},{\"code\":\"350211\",\"name\":\"集美区\"},{\"code\":\"350212\",\"name\":\"同安区\"},{\"code\":\"350213\",\"name\":\"翔安区\"}],\"code\":\"350200\",\"name\":\"厦门市\"},{\"children\":[{\"code\":\"350301\",\"name\":\"市辖区\"},{\"code\":\"350302\",\"name\":\"城厢区\"},{\"code\":\"350303\",\"name\":\"涵江区\"},{\"code\":\"350304\",\"name\":\"荔城区\"},{\"code\":\"350305\",\"name\":\"秀屿区\"},{\"code\":\"350322\",\"name\":\"仙游县\"}],\"code\":\"350300\",\"name\":\"莆田市\"},{\"children\":[{\"code\":\"350401\",\"name\":\"市辖区\"},{\"code\":\"350402\",\"name\":\"梅列区\"},{\"code\":\"350403\",\"name\":\"三元区\"},{\"code\":\"350421\",\"name\":\"明溪县\"},{\"code\":\"350423\",\"name\":\"清流县\"},{\"code\":\"350424\",\"name\":\"宁化县\"},{\"code\":\"350425\",\"name\":\"大田县\"},{\"code\":\"350426\",\"name\":\"尤溪县\"},{\"code\":\"350427\",\"name\":\"沙县\"},{\"code\":\"350428\",\"name\":\"将乐县\"},{\"code\":\"350429\",\"name\":\"泰宁县\"},{\"code\":\"350430\",\"name\":\"建宁县\"},{\"code\":\"350481\",\"name\":\"永安市\"}],\"code\":\"350400\",\"name\":\"三明市\"},{\"children\":[{\"code\":\"350501\",\"name\":\"市辖区\"},{\"code\":\"350502\",\"name\":\"鲤城区\"},{\"code\":\"350503\",\"name\":\"丰泽区\"},{\"code\":\"350504\",\"name\":\"洛江区\"},{\"code\":\"350505\",\"name\":\"泉港区\"},{\"code\":\"350521\",\"name\":\"惠安县\"},{\"code\":\"350524\",\"name\":\"安溪县\"},{\"code\":\"350525\",\"name\":\"永春县\"},{\"code\":\"350526\",\"name\":\"德化县\"},{\"code\":\"350527\",\"name\":\"金门县\"},{\"code\":\"350581\",\"name\":\"石狮市\"},{\"code\":\"350582\",\"name\":\"晋江市\"},{\"code\":\"350583\",\"name\":\"南安市\"}],\"code\":\"350500\",\"name\":\"泉州市\"},{\"children\":[{\"code\":\"350601\",\"name\":\"市辖区\"},{\"code\":\"350602\",\"name\":\"芗城区\"},{\"code\":\"350603\",\"name\":\"龙文区\"},{\"code\":\"350622\",\"name\":\"云霄县\"},{\"code\":\"350623\",\"name\":\"漳浦县\"},{\"code\":\"350624\",\"name\":\"诏安县\"},{\"code\":\"350625\",\"name\":\"长泰县\"},{\"code\":\"350626\",\"name\":\"东山县\"},{\"code\":\"350627\",\"name\":\"南靖县\"},{\"code\":\"350628\",\"name\":\"平和县\"},{\"code\":\"350629\",\"name\":\"华安县\"},{\"code\":\"350681\",\"name\":\"龙海市\"}],\"code\":\"350600\",\"name\":\"漳州市\"},{\"children\":[{\"code\":\"350701\",\"name\":\"市辖区\"},{\"code\":\"350702\",\"name\":\"延平区\"},{\"code\":\"350703\",\"name\":\"建阳区\"},{\"code\":\"350721\",\"name\":\"顺昌县\"},{\"code\":\"350722\",\"name\":\"浦城县\"},{\"code\":\"350723\",\"name\":\"光泽县\"},{\"code\":\"350724\",\"name\":\"松溪县\"},{\"code\":\"350725\",\"name\":\"政和县\"},{\"code\":\"350781\",\"name\":\"邵武市\"},{\"code\":\"350782\",\"name\":\"武夷山市\"},{\"code\":\"350783\",\"name\":\"建瓯市\"}],\"code\":\"350700\",\"name\":\"南平市\"},{\"children\":[{\"code\":\"350801\",\"name\":\"市辖区\"},{\"code\":\"350802\",\"name\":\"新罗区\"},{\"code\":\"350803\",\"name\":\"永定区\"},{\"code\":\"350821\",\"name\":\"长汀县\"},{\"code\":\"350823\",\"name\":\"上杭县\"},{\"code\":\"350824\",\"name\":\"武平县\"},{\"code\":\"350825\",\"name\":\"连城县\"},{\"code\":\"350881\",\"name\":\"漳平市\"}],\"code\":\"350800\",\"name\":\"龙岩市\"},{\"children\":[{\"code\":\"350901\",\"name\":\"市辖区\"},{\"code\":\"350902\",\"name\":\"蕉城区\"},{\"code\":\"350921\",\"name\":\"霞浦县\"},{\"code\":\"350922\",\"name\":\"古田县\"},{\"code\":\"350923\",\"name\":\"屏南县\"},{\"code\":\"350924\",\"name\":\"寿宁县\"},{\"code\":\"350925\",\"name\":\"周宁县\"},{\"code\":\"350926\",\"name\":\"柘荣县\"},{\"code\":\"350981\",\"name\":\"福安市\"},{\"code\":\"350982\",\"name\":\"福鼎市\"}],\"code\":\"350900\",\"name\":\"宁德市\"}],\"code\":\"350000\",\"name\":\"福建省\"},{\"children\":[{\"children\":[{\"code\":\"360101\",\"name\":\"市辖区\"},{\"code\":\"360102\",\"name\":\"东湖区\"},{\"code\":\"360103\",\"name\":\"西湖区\"},{\"code\":\"360104\",\"name\":\"青云谱区\"},{\"code\":\"360105\",\"name\":\"湾里区\"},{\"code\":\"360111\",\"name\":\"青山湖区\"},{\"code\":\"360112\",\"name\":\"新建区\"},{\"code\":\"360121\",\"name\":\"南昌县\"},{\"code\":\"360123\",\"name\":\"安义县\"},{\"code\":\"360124\",\"name\":\"进贤县\"}],\"code\":\"360100\",\"name\":\"南昌市\"},{\"children\":[{\"code\":\"360201\",\"name\":\"市辖区\"},{\"code\":\"360202\",\"name\":\"昌江区\"},{\"code\":\"360203\",\"name\":\"珠山区\"},{\"code\":\"360222\",\"name\":\"浮梁县\"},{\"code\":\"360281\",\"name\":\"乐平市\"}],\"code\":\"360200\",\"name\":\"景德镇市\"},{\"children\":[{\"code\":\"360301\",\"name\":\"市辖区\"},{\"code\":\"360302\",\"name\":\"安源区\"},{\"code\":\"360313\",\"name\":\"湘东区\"},{\"code\":\"360321\",\"name\":\"莲花县\"},{\"code\":\"360322\",\"name\":\"上栗县\"},{\"code\":\"360323\",\"name\":\"芦溪县\"}],\"code\":\"360300\",\"name\":\"萍乡市\"},{\"children\":[{\"code\":\"360401\",\"name\":\"市辖区\"},{\"code\":\"360402\",\"name\":\"濂溪区\"},{\"code\":\"360403\",\"name\":\"浔阳区\"},{\"code\":\"360421\",\"name\":\"九江县\"},{\"code\":\"360423\",\"name\":\"武宁县\"},{\"code\":\"360424\",\"name\":\"修水县\"},{\"code\":\"360425\",\"name\":\"永修县\"},{\"code\":\"360426\",\"name\":\"德安县\"},{\"code\":\"360428\",\"name\":\"都昌县\"},{\"code\":\"360429\",\"name\":\"湖口县\"},{\"code\":\"360430\",\"name\":\"彭泽县\"},{\"code\":\"360481\",\"name\":\"瑞昌市\"},{\"code\":\"360482\",\"name\":\"共青城市\"},{\"code\":\"360483\",\"name\":\"庐山市\"}],\"code\":\"360400\",\"name\":\"九江市\"},{\"children\":[{\"code\":\"360501\",\"name\":\"市辖区\"},{\"code\":\"360502\",\"name\":\"渝水区\"},{\"code\":\"360521\",\"name\":\"分宜县\"}],\"code\":\"360500\",\"name\":\"新余市\"},{\"children\":[{\"code\":\"360601\",\"name\":\"市辖区\"},{\"code\":\"360602\",\"name\":\"月湖区\"},{\"code\":\"360622\",\"name\":\"余江县\"},{\"code\":\"360681\",\"name\":\"贵溪市\"}],\"code\":\"360600\",\"name\":\"鹰潭市\"},{\"children\":[{\"code\":\"360701\",\"name\":\"市辖区\"},{\"code\":\"360702\",\"name\":\"章贡区\"},{\"code\":\"360703\",\"name\":\"南康区\"},{\"code\":\"360721\",\"name\":\"赣县\"},{\"code\":\"360722\",\"name\":\"信丰县\"},{\"code\":\"360723\",\"name\":\"大余县\"},{\"code\":\"360724\",\"name\":\"上犹县\"},{\"code\":\"360725\",\"name\":\"崇义县\"},{\"code\":\"360726\",\"name\":\"安远县\"},{\"code\":\"360727\",\"name\":\"龙南县\"},{\"code\":\"360728\",\"name\":\"定南县\"},{\"code\":\"360729\",\"name\":\"全南县\"},{\"code\":\"360730\",\"name\":\"宁都县\"},{\"code\":\"360731\",\"name\":\"于都县\"},{\"code\":\"360732\",\"name\":\"兴国县\"},{\"code\":\"360733\",\"name\":\"会昌县\"},{\"code\":\"360734\",\"name\":\"寻乌县\"},{\"code\":\"360735\",\"name\":\"石城县\"},{\"code\":\"360781\",\"name\":\"瑞金市\"}],\"code\":\"360700\",\"name\":\"赣州市\"},{\"children\":[{\"code\":\"360801\",\"name\":\"市辖区\"},{\"code\":\"360802\",\"name\":\"吉州区\"},{\"code\":\"360803\",\"name\":\"青原区\"},{\"code\":\"360821\",\"name\":\"吉安县\"},{\"code\":\"360822\",\"name\":\"吉水县\"},{\"code\":\"360823\",\"name\":\"峡江县\"},{\"code\":\"360824\",\"name\":\"新干县\"},{\"code\":\"360825\",\"name\":\"永丰县\"},{\"code\":\"360826\",\"name\":\"泰和县\"},{\"code\":\"360827\",\"name\":\"遂川县\"},{\"code\":\"360828\",\"name\":\"万安县\"},{\"code\":\"360829\",\"name\":\"安福县\"},{\"code\":\"360830\",\"name\":\"永新县\"},{\"code\":\"360881\",\"name\":\"井冈山市\"}],\"code\":\"360800\",\"name\":\"吉安市\"},{\"children\":[{\"code\":\"360901\",\"name\":\"市辖区\"},{\"code\":\"360902\",\"name\":\"袁州区\"},{\"code\":\"360921\",\"name\":\"奉新县\"},{\"code\":\"360922\",\"name\":\"万载县\"},{\"code\":\"360923\",\"name\":\"上高县\"},{\"code\":\"360924\",\"name\":\"宜丰县\"},{\"code\":\"360925\",\"name\":\"靖安县\"},{\"code\":\"360926\",\"name\":\"铜鼓县\"},{\"code\":\"360981\",\"name\":\"丰城市\"},{\"code\":\"360982\",\"name\":\"樟树市\"},{\"code\":\"360983\",\"name\":\"高安市\"}],\"code\":\"360900\",\"name\":\"宜春市\"},{\"children\":[{\"code\":\"361001\",\"name\":\"市辖区\"},{\"code\":\"361002\",\"name\":\"临川区\"},{\"code\":\"361021\",\"name\":\"南城县\"},{\"code\":\"361022\",\"name\":\"黎川县\"},{\"code\":\"361023\",\"name\":\"南丰县\"},{\"code\":\"361024\",\"name\":\"崇仁县\"},{\"code\":\"361025\",\"name\":\"乐安县\"},{\"code\":\"361026\",\"name\":\"宜黄县\"},{\"code\":\"361027\",\"name\":\"金溪县\"},{\"code\":\"361028\",\"name\":\"资溪县\"},{\"code\":\"361029\",\"name\":\"东乡县\"},{\"code\":\"361030\",\"name\":\"广昌县\"}],\"code\":\"361000\",\"name\":\"抚州市\"},{\"children\":[{\"code\":\"361101\",\"name\":\"市辖区\"},{\"code\":\"361102\",\"name\":\"信州区\"},{\"code\":\"361103\",\"name\":\"广丰区\"},{\"code\":\"361121\",\"name\":\"上饶县\"},{\"code\":\"361123\",\"name\":\"玉山县\"},{\"code\":\"361124\",\"name\":\"铅山县\"},{\"code\":\"361125\",\"name\":\"横峰县\"},{\"code\":\"361126\",\"name\":\"弋阳县\"},{\"code\":\"361127\",\"name\":\"余干县\"},{\"code\":\"361128\",\"name\":\"鄱阳县\"},{\"code\":\"361129\",\"name\":\"万年县\"},{\"code\":\"361130\",\"name\":\"婺源县\"},{\"code\":\"361181\",\"name\":\"德兴市\"}],\"code\":\"361100\",\"name\":\"上饶市\"}],\"code\":\"360000\",\"name\":\"江西省\"},{\"children\":[{\"children\":[{\"code\":\"370101\",\"name\":\"市辖区\"},{\"code\":\"370102\",\"name\":\"历下区\"},{\"code\":\"370103\",\"name\":\"市中区\"},{\"code\":\"370104\",\"name\":\"槐荫区\"},{\"code\":\"370105\",\"name\":\"天桥区\"},{\"code\":\"370112\",\"name\":\"历城区\"},{\"code\":\"370113\",\"name\":\"长清区\"},{\"code\":\"370124\",\"name\":\"平阴县\"},{\"code\":\"370125\",\"name\":\"济阳县\"},{\"code\":\"370126\",\"name\":\"商河县\"},{\"code\":\"370181\",\"name\":\"章丘市\"}],\"code\":\"370100\",\"name\":\"济南市\"},{\"children\":[{\"code\":\"370201\",\"name\":\"市辖区\"},{\"code\":\"370202\",\"name\":\"市南区\"},{\"code\":\"370203\",\"name\":\"市北区\"},{\"code\":\"370211\",\"name\":\"黄岛区\"},{\"code\":\"370212\",\"name\":\"崂山区\"},{\"code\":\"370213\",\"name\":\"李沧区\"},{\"code\":\"370214\",\"name\":\"城阳区\"},{\"code\":\"370281\",\"name\":\"胶州市\"},{\"code\":\"370282\",\"name\":\"即墨市\"},{\"code\":\"370283\",\"name\":\"平度市\"},{\"code\":\"370285\",\"name\":\"莱西市\"}],\"code\":\"370200\",\"name\":\"青岛市\"},{\"children\":[{\"code\":\"370301\",\"name\":\"市辖区\"},{\"code\":\"370302\",\"name\":\"淄川区\"},{\"code\":\"370303\",\"name\":\"张店区\"},{\"code\":\"370304\",\"name\":\"博山区\"},{\"code\":\"370305\",\"name\":\"临淄区\"},{\"code\":\"370306\",\"name\":\"周村区\"},{\"code\":\"370321\",\"name\":\"桓台县\"},{\"code\":\"370322\",\"name\":\"高青县\"},{\"code\":\"370323\",\"name\":\"沂源县\"}],\"code\":\"370300\",\"name\":\"淄博市\"},{\"children\":[{\"code\":\"370401\",\"name\":\"市辖区\"},{\"code\":\"370402\",\"name\":\"市中区\"},{\"code\":\"370403\",\"name\":\"薛城区\"},{\"code\":\"370404\",\"name\":\"峄城区\"},{\"code\":\"370405\",\"name\":\"台儿庄区\"},{\"code\":\"370406\",\"name\":\"山亭区\"},{\"code\":\"370481\",\"name\":\"滕州市\"}],\"code\":\"370400\",\"name\":\"枣庄市\"},{\"children\":[{\"code\":\"370501\",\"name\":\"市辖区\"},{\"code\":\"370502\",\"name\":\"东营区\"},{\"code\":\"370503\",\"name\":\"河口区\"},{\"code\":\"370505\",\"name\":\"垦利区\"},{\"code\":\"370522\",\"name\":\"利津县\"},{\"code\":\"370523\",\"name\":\"广饶县\"}],\"code\":\"370500\",\"name\":\"东营市\"},{\"children\":[{\"code\":\"370601\",\"name\":\"市辖区\"},{\"code\":\"370602\",\"name\":\"芝罘区\"},{\"code\":\"370611\",\"name\":\"福山区\"},{\"code\":\"370612\",\"name\":\"牟平区\"},{\"code\":\"370613\",\"name\":\"莱山区\"},{\"code\":\"370634\",\"name\":\"长岛县\"},{\"code\":\"370681\",\"name\":\"龙口市\"},{\"code\":\"370682\",\"name\":\"莱阳市\"},{\"code\":\"370683\",\"name\":\"莱州市\"},{\"code\":\"370684\",\"name\":\"蓬莱市\"},{\"code\":\"370685\",\"name\":\"招远市\"},{\"code\":\"370686\",\"name\":\"栖霞市\"},{\"code\":\"370687\",\"name\":\"海阳市\"}],\"code\":\"370600\",\"name\":\"烟台市\"},{\"children\":[{\"code\":\"370701\",\"name\":\"市辖区\"},{\"code\":\"370702\",\"name\":\"潍城区\"},{\"code\":\"370703\",\"name\":\"寒亭区\"},{\"code\":\"370704\",\"name\":\"坊子区\"},{\"code\":\"370705\",\"name\":\"奎文区\"},{\"code\":\"370724\",\"name\":\"临朐县\"},{\"code\":\"370725\",\"name\":\"昌乐县\"},{\"code\":\"370781\",\"name\":\"青州市\"},{\"code\":\"370782\",\"name\":\"诸城市\"},{\"code\":\"370783\",\"name\":\"寿光市\"},{\"code\":\"370784\",\"name\":\"安丘市\"},{\"code\":\"370785\",\"name\":\"高密市\"},{\"code\":\"370786\",\"name\":\"昌邑市\"}],\"code\":\"370700\",\"name\":\"潍坊市\"},{\"children\":[{\"code\":\"370801\",\"name\":\"市辖区\"},{\"code\":\"370811\",\"name\":\"任城区\"},{\"code\":\"370812\",\"name\":\"兖州区\"},{\"code\":\"370826\",\"name\":\"微山县\"},{\"code\":\"370827\",\"name\":\"鱼台县\"},{\"code\":\"370828\",\"name\":\"金乡县\"},{\"code\":\"370829\",\"name\":\"嘉祥县\"},{\"code\":\"370830\",\"name\":\"汶上县\"},{\"code\":\"370831\",\"name\":\"泗水县\"},{\"code\":\"370832\",\"name\":\"梁山县\"},{\"code\":\"370881\",\"name\":\"曲阜市\"},{\"code\":\"370883\",\"name\":\"邹城市\"}],\"code\":\"370800\",\"name\":\"济宁市\"},{\"children\":[{\"code\":\"370901\",\"name\":\"市辖区\"},{\"code\":\"370902\",\"name\":\"泰山区\"},{\"code\":\"370911\",\"name\":\"岱岳区\"},{\"code\":\"370921\",\"name\":\"宁阳县\"},{\"code\":\"370923\",\"name\":\"东平县\"},{\"code\":\"370982\",\"name\":\"新泰市\"},{\"code\":\"370983\",\"name\":\"肥城市\"}],\"code\":\"370900\",\"name\":\"泰安市\"},{\"children\":[{\"code\":\"371001\",\"name\":\"市辖区\"},{\"code\":\"371002\",\"name\":\"环翠区\"},{\"code\":\"371003\",\"name\":\"文登区\"},{\"code\":\"371082\",\"name\":\"荣成市\"},{\"code\":\"371083\",\"name\":\"乳山市\"}],\"code\":\"371000\",\"name\":\"威海市\"},{\"children\":[{\"code\":\"371101\",\"name\":\"市辖区\"},{\"code\":\"371102\",\"name\":\"东港区\"},{\"code\":\"371103\",\"name\":\"岚山区\"},{\"code\":\"371121\",\"name\":\"五莲县\"},{\"code\":\"371122\",\"name\":\"莒县\"}],\"code\":\"371100\",\"name\":\"日照市\"},{\"children\":[{\"code\":\"371201\",\"name\":\"市辖区\"},{\"code\":\"371202\",\"name\":\"莱城区\"},{\"code\":\"371203\",\"name\":\"钢城区\"}],\"code\":\"371200\",\"name\":\"莱芜市\"},{\"children\":[{\"code\":\"371301\",\"name\":\"市辖区\"},{\"code\":\"371302\",\"name\":\"兰山区\"},{\"code\":\"371311\",\"name\":\"罗庄区\"},{\"code\":\"371312\",\"name\":\"河东区\"},{\"code\":\"371321\",\"name\":\"沂南县\"},{\"code\":\"371322\",\"name\":\"郯城县\"},{\"code\":\"371323\",\"name\":\"沂水县\"},{\"code\":\"371324\",\"name\":\"兰陵县\"},{\"code\":\"371325\",\"name\":\"费县\"},{\"code\":\"371326\",\"name\":\"平邑县\"},{\"code\":\"371327\",\"name\":\"莒南县\"},{\"code\":\"371328\",\"name\":\"蒙阴县\"},{\"code\":\"371329\",\"name\":\"临沭县\"}],\"code\":\"371300\",\"name\":\"临沂市\"},{\"children\":[{\"code\":\"371401\",\"name\":\"市辖区\"},{\"code\":\"371402\",\"name\":\"德城区\"},{\"code\":\"371403\",\"name\":\"陵城区\"},{\"code\":\"371422\",\"name\":\"宁津县\"},{\"code\":\"371423\",\"name\":\"庆云县\"},{\"code\":\"371424\",\"name\":\"临邑县\"},{\"code\":\"371425\",\"name\":\"齐河县\"},{\"code\":\"371426\",\"name\":\"平原县\"},{\"code\":\"371427\",\"name\":\"夏津县\"},{\"code\":\"371428\",\"name\":\"武城县\"},{\"code\":\"371481\",\"name\":\"乐陵市\"},{\"code\":\"371482\",\"name\":\"禹城市\"}],\"code\":\"371400\",\"name\":\"德州市\"},{\"children\":[{\"code\":\"371501\",\"name\":\"市辖区\"},{\"code\":\"371502\",\"name\":\"东昌府区\"},{\"code\":\"371521\",\"name\":\"阳谷县\"},{\"code\":\"371522\",\"name\":\"莘县\"},{\"code\":\"371523\",\"name\":\"茌平县\"},{\"code\":\"371524\",\"name\":\"东阿县\"},{\"code\":\"371525\",\"name\":\"冠县\"},{\"code\":\"371526\",\"name\":\"高唐县\"},{\"code\":\"371581\",\"name\":\"临清市\"}],\"code\":\"371500\",\"name\":\"聊城市\"},{\"children\":[{\"code\":\"371601\",\"name\":\"市辖区\"},{\"code\":\"371602\",\"name\":\"滨城区\"},{\"code\":\"371603\",\"name\":\"沾化区\"},{\"code\":\"371621\",\"name\":\"惠民县\"},{\"code\":\"371622\",\"name\":\"阳信县\"},{\"code\":\"371623\",\"name\":\"无棣县\"},{\"code\":\"371625\",\"name\":\"博兴县\"},{\"code\":\"371626\",\"name\":\"邹平县\"}],\"code\":\"371600\",\"name\":\"滨州市\"},{\"children\":[{\"code\":\"371701\",\"name\":\"市辖区\"},{\"code\":\"371702\",\"name\":\"牡丹区\"},{\"code\":\"371703\",\"name\":\"定陶区\"},{\"code\":\"371721\",\"name\":\"曹县\"},{\"code\":\"371722\",\"name\":\"单县\"},{\"code\":\"371723\",\"name\":\"成武县\"},{\"code\":\"371724\",\"name\":\"巨野县\"},{\"code\":\"371725\",\"name\":\"郓城县\"},{\"code\":\"371726\",\"name\":\"鄄城县\"},{\"code\":\"371728\",\"name\":\"东明县\"}],\"code\":\"371700\",\"name\":\"菏泽市\"}],\"code\":\"370000\",\"name\":\"山东省\"},{\"children\":[{\"children\":[{\"code\":\"410101\",\"name\":\"市辖区\"},{\"code\":\"410102\",\"name\":\"中原区\"},{\"code\":\"410103\",\"name\":\"二七区\"},{\"code\":\"410104\",\"name\":\"管城回族区\"},{\"code\":\"410105\",\"name\":\"金水区\"},{\"code\":\"410106\",\"name\":\"上街区\"},{\"code\":\"410108\",\"name\":\"惠济区\"},{\"code\":\"410122\",\"name\":\"中牟县\"},{\"code\":\"410181\",\"name\":\"巩义市\"},{\"code\":\"410182\",\"name\":\"荥阳市\"},{\"code\":\"410183\",\"name\":\"新密市\"},{\"code\":\"410184\",\"name\":\"新郑市\"},{\"code\":\"410185\",\"name\":\"登封市\"}],\"code\":\"410100\",\"name\":\"郑州市\"},{\"children\":[{\"code\":\"410201\",\"name\":\"市辖区\"},{\"code\":\"410202\",\"name\":\"龙亭区\"},{\"code\":\"410203\",\"name\":\"顺河回族区\"},{\"code\":\"410204\",\"name\":\"鼓楼区\"},{\"code\":\"410205\",\"name\":\"禹王台区\"},{\"code\":\"410211\",\"name\":\"金明区\"},{\"code\":\"410212\",\"name\":\"祥符区\"},{\"code\":\"410221\",\"name\":\"杞县\"},{\"code\":\"410222\",\"name\":\"通许县\"},{\"code\":\"410223\",\"name\":\"尉氏县\"},{\"code\":\"410225\",\"name\":\"兰考县\"}],\"code\":\"410200\",\"name\":\"开封市\"},{\"children\":[{\"code\":\"410301\",\"name\":\"市辖区\"},{\"code\":\"410302\",\"name\":\"老城区\"},{\"code\":\"410303\",\"name\":\"西工区\"},{\"code\":\"410304\",\"name\":\"瀍河回族区\"},{\"code\":\"410305\",\"name\":\"涧西区\"},{\"code\":\"410306\",\"name\":\"吉利区\"},{\"code\":\"410311\",\"name\":\"洛龙区\"},{\"code\":\"410322\",\"name\":\"孟津县\"},{\"code\":\"410323\",\"name\":\"新安县\"},{\"code\":\"410324\",\"name\":\"栾川县\"},{\"code\":\"410325\",\"name\":\"嵩县\"},{\"code\":\"410326\",\"name\":\"汝阳县\"},{\"code\":\"410327\",\"name\":\"宜阳县\"},{\"code\":\"410328\",\"name\":\"洛宁县\"},{\"code\":\"410329\",\"name\":\"伊川县\"},{\"code\":\"410381\",\"name\":\"偃师市\"}],\"code\":\"410300\",\"name\":\"洛阳市\"},{\"children\":[{\"code\":\"410401\",\"name\":\"市辖区\"},{\"code\":\"410402\",\"name\":\"新华区\"},{\"code\":\"410403\",\"name\":\"卫东区\"},{\"code\":\"410404\",\"name\":\"石龙区\"},{\"code\":\"410411\",\"name\":\"湛河区\"},{\"code\":\"410421\",\"name\":\"宝丰县\"},{\"code\":\"410422\",\"name\":\"叶县\"},{\"code\":\"410423\",\"name\":\"鲁山县\"},{\"code\":\"410425\",\"name\":\"郏县\"},{\"code\":\"410481\",\"name\":\"舞钢市\"},{\"code\":\"410482\",\"name\":\"汝州市\"}],\"code\":\"410400\",\"name\":\"平顶山市\"},{\"children\":[{\"code\":\"410501\",\"name\":\"市辖区\"},{\"code\":\"410502\",\"name\":\"文峰区\"},{\"code\":\"410503\",\"name\":\"北关区\"},{\"code\":\"410505\",\"name\":\"殷都区\"},{\"code\":\"410506\",\"name\":\"龙安区\"},{\"code\":\"410522\",\"name\":\"安阳县\"},{\"code\":\"410523\",\"name\":\"汤阴县\"},{\"code\":\"410526\",\"name\":\"滑县\"},{\"code\":\"410527\",\"name\":\"内黄县\"},{\"code\":\"410581\",\"name\":\"林州市\"}],\"code\":\"410500\",\"name\":\"安阳市\"},{\"children\":[{\"code\":\"410601\",\"name\":\"市辖区\"},{\"code\":\"410602\",\"name\":\"鹤山区\"},{\"code\":\"410603\",\"name\":\"山城区\"},{\"code\":\"410611\",\"name\":\"淇滨区\"},{\"code\":\"410621\",\"name\":\"浚县\"},{\"code\":\"410622\",\"name\":\"淇县\"}],\"code\":\"410600\",\"name\":\"鹤壁市\"},{\"children\":[{\"code\":\"410701\",\"name\":\"市辖区\"},{\"code\":\"410702\",\"name\":\"红旗区\"},{\"code\":\"410703\",\"name\":\"卫滨区\"},{\"code\":\"410704\",\"name\":\"凤泉区\"},{\"code\":\"410711\",\"name\":\"牧野区\"},{\"code\":\"410721\",\"name\":\"新乡县\"},{\"code\":\"410724\",\"name\":\"获嘉县\"},{\"code\":\"410725\",\"name\":\"原阳县\"},{\"code\":\"410726\",\"name\":\"延津县\"},{\"code\":\"410727\",\"name\":\"封丘县\"},{\"code\":\"410728\",\"name\":\"长垣县\"},{\"code\":\"410781\",\"name\":\"卫辉市\"},{\"code\":\"410782\",\"name\":\"辉县市\"}],\"code\":\"410700\",\"name\":\"新乡市\"},{\"children\":[{\"code\":\"410801\",\"name\":\"市辖区\"},{\"code\":\"410802\",\"name\":\"解放区\"},{\"code\":\"410803\",\"name\":\"中站区\"},{\"code\":\"410804\",\"name\":\"马村区\"},{\"code\":\"410811\",\"name\":\"山阳区\"},{\"code\":\"410821\",\"name\":\"修武县\"},{\"code\":\"410822\",\"name\":\"博爱县\"},{\"code\":\"410823\",\"name\":\"武陟县\"},{\"code\":\"410825\",\"name\":\"温县\"},{\"code\":\"410882\",\"name\":\"沁阳市\"},{\"code\":\"410883\",\"name\":\"孟州市\"}],\"code\":\"410800\",\"name\":\"焦作市\"},{\"children\":[{\"code\":\"410901\",\"name\":\"市辖区\"},{\"code\":\"410902\",\"name\":\"华龙区\"},{\"code\":\"410922\",\"name\":\"清丰县\"},{\"code\":\"410923\",\"name\":\"南乐县\"},{\"code\":\"410926\",\"name\":\"范县\"},{\"code\":\"410927\",\"name\":\"台前县\"},{\"code\":\"410928\",\"name\":\"濮阳县\"}],\"code\":\"410900\",\"name\":\"濮阳市\"},{\"children\":[{\"code\":\"411001\",\"name\":\"市辖区\"},{\"code\":\"411002\",\"name\":\"魏都区\"},{\"code\":\"411023\",\"name\":\"许昌县\"},{\"code\":\"411024\",\"name\":\"鄢陵县\"},{\"code\":\"411025\",\"name\":\"襄城县\"},{\"code\":\"411081\",\"name\":\"禹州市\"},{\"code\":\"411082\",\"name\":\"长葛市\"}],\"code\":\"411000\",\"name\":\"许昌市\"},{\"children\":[{\"code\":\"411101\",\"name\":\"市辖区\"},{\"code\":\"411102\",\"name\":\"源汇区\"},{\"code\":\"411103\",\"name\":\"郾城区\"},{\"code\":\"411104\",\"name\":\"召陵区\"},{\"code\":\"411121\",\"name\":\"舞阳县\"},{\"code\":\"411122\",\"name\":\"临颍县\"}],\"code\":\"411100\",\"name\":\"漯河市\"},{\"children\":[{\"code\":\"411201\",\"name\":\"市辖区\"},{\"code\":\"411202\",\"name\":\"湖滨区\"},{\"code\":\"411203\",\"name\":\"陕州区\"},{\"code\":\"411221\",\"name\":\"渑池县\"},{\"code\":\"411224\",\"name\":\"卢氏县\"},{\"code\":\"411281\",\"name\":\"义马市\"},{\"code\":\"411282\",\"name\":\"灵宝市\"}],\"code\":\"411200\",\"name\":\"三门峡市\"},{\"children\":[{\"code\":\"411301\",\"name\":\"市辖区\"},{\"code\":\"411302\",\"name\":\"宛城区\"},{\"code\":\"411303\",\"name\":\"卧龙区\"},{\"code\":\"411321\",\"name\":\"南召县\"},{\"code\":\"411322\",\"name\":\"方城县\"},{\"code\":\"411323\",\"name\":\"西峡县\"},{\"code\":\"411324\",\"name\":\"镇平县\"},{\"code\":\"411325\",\"name\":\"内乡县\"},{\"code\":\"411326\",\"name\":\"淅川县\"},{\"code\":\"411327\",\"name\":\"社旗县\"},{\"code\":\"411328\",\"name\":\"唐河县\"},{\"code\":\"411329\",\"name\":\"新野县\"},{\"code\":\"411330\",\"name\":\"桐柏县\"},{\"code\":\"411381\",\"name\":\"邓州市\"}],\"code\":\"411300\",\"name\":\"南阳市\"},{\"children\":[{\"code\":\"411401\",\"name\":\"市辖区\"},{\"code\":\"411402\",\"name\":\"梁园区\"},{\"code\":\"411403\",\"name\":\"睢阳区\"},{\"code\":\"411421\",\"name\":\"民权县\"},{\"code\":\"411422\",\"name\":\"睢县\"},{\"code\":\"411423\",\"name\":\"宁陵县\"},{\"code\":\"411424\",\"name\":\"柘城县\"},{\"code\":\"411425\",\"name\":\"虞城县\"},{\"code\":\"411426\",\"name\":\"夏邑县\"},{\"code\":\"411481\",\"name\":\"永城市\"}],\"code\":\"411400\",\"name\":\"商丘市\"},{\"children\":[{\"code\":\"411501\",\"name\":\"市辖区\"},{\"code\":\"411502\",\"name\":\"浉河区\"},{\"code\":\"411503\",\"name\":\"平桥区\"},{\"code\":\"411521\",\"name\":\"罗山县\"},{\"code\":\"411522\",\"name\":\"光山县\"},{\"code\":\"411523\",\"name\":\"新县\"},{\"code\":\"411524\",\"name\":\"商城县\"},{\"code\":\"411525\",\"name\":\"固始县\"},{\"code\":\"411526\",\"name\":\"潢川县\"},{\"code\":\"411527\",\"name\":\"淮滨县\"},{\"code\":\"411528\",\"name\":\"息县\"}],\"code\":\"411500\",\"name\":\"信阳市\"},{\"children\":[{\"code\":\"411601\",\"name\":\"市辖区\"},{\"code\":\"411602\",\"name\":\"川汇区\"},{\"code\":\"411621\",\"name\":\"扶沟县\"},{\"code\":\"411622\",\"name\":\"西华县\"},{\"code\":\"411623\",\"name\":\"商水县\"},{\"code\":\"411624\",\"name\":\"沈丘县\"},{\"code\":\"411625\",\"name\":\"郸城县\"},{\"code\":\"411626\",\"name\":\"淮阳县\"},{\"code\":\"411627\",\"name\":\"太康县\"},{\"code\":\"411628\",\"name\":\"鹿邑县\"},{\"code\":\"411681\",\"name\":\"项城市\"}],\"code\":\"411600\",\"name\":\"周口市\"},{\"children\":[{\"code\":\"411701\",\"name\":\"市辖区\"},{\"code\":\"411702\",\"name\":\"驿城区\"},{\"code\":\"411721\",\"name\":\"西平县\"},{\"code\":\"411722\",\"name\":\"上蔡县\"},{\"code\":\"411723\",\"name\":\"平舆县\"},{\"code\":\"411724\",\"name\":\"正阳县\"},{\"code\":\"411725\",\"name\":\"确山县\"},{\"code\":\"411726\",\"name\":\"泌阳县\"},{\"code\":\"411727\",\"name\":\"汝南县\"},{\"code\":\"411728\",\"name\":\"遂平县\"},{\"code\":\"411729\",\"name\":\"新蔡县\"}],\"code\":\"411700\",\"name\":\"驻马店市\"},{\"children\":[{\"code\":\"419001\",\"name\":\"济源市\"}],\"code\":\"419000\",\"name\":\"省直辖县级行政区划\"}],\"code\":\"410000\",\"name\":\"河南省\"},{\"children\":[{\"children\":[{\"code\":\"420101\",\"name\":\"市辖区\"},{\"code\":\"420102\",\"name\":\"江岸区\"},{\"code\":\"420103\",\"name\":\"江汉区\"},{\"code\":\"420104\",\"name\":\"硚口区\"},{\"code\":\"420105\",\"name\":\"汉阳区\"},{\"code\":\"420106\",\"name\":\"武昌区\"},{\"code\":\"420107\",\"name\":\"青山区\"},{\"code\":\"420111\",\"name\":\"洪山区\"},{\"code\":\"420112\",\"name\":\"东西湖区\"},{\"code\":\"420113\",\"name\":\"汉南区\"},{\"code\":\"420114\",\"name\":\"蔡甸区\"},{\"code\":\"420115\",\"name\":\"江夏区\"},{\"code\":\"420116\",\"name\":\"黄陂区\"},{\"code\":\"420117\",\"name\":\"新洲区\"}],\"code\":\"420100\",\"name\":\"武汉市\"},{\"children\":[{\"code\":\"420201\",\"name\":\"市辖区\"},{\"code\":\"420202\",\"name\":\"黄石港区\"},{\"code\":\"420203\",\"name\":\"西塞山区\"},{\"code\":\"420204\",\"name\":\"下陆区\"},{\"code\":\"420205\",\"name\":\"铁山区\"},{\"code\":\"420222\",\"name\":\"阳新县\"},{\"code\":\"420281\",\"name\":\"大冶市\"}],\"code\":\"420200\",\"name\":\"黄石市\"},{\"children\":[{\"code\":\"420301\",\"name\":\"市辖区\"},{\"code\":\"420302\",\"name\":\"茅箭区\"},{\"code\":\"420303\",\"name\":\"张湾区\"},{\"code\":\"420304\",\"name\":\"郧阳区\"},{\"code\":\"420322\",\"name\":\"郧西县\"},{\"code\":\"420323\",\"name\":\"竹山县\"},{\"code\":\"420324\",\"name\":\"竹溪县\"},{\"code\":\"420325\",\"name\":\"房县\"},{\"code\":\"420381\",\"name\":\"丹江口市\"}],\"code\":\"420300\",\"name\":\"十堰市\"},{\"children\":[{\"code\":\"420501\",\"name\":\"市辖区\"},{\"code\":\"420502\",\"name\":\"西陵区\"},{\"code\":\"420503\",\"name\":\"伍家岗区\"},{\"code\":\"420504\",\"name\":\"点军区\"},{\"code\":\"420505\",\"name\":\"猇亭区\"},{\"code\":\"420506\",\"name\":\"夷陵区\"},{\"code\":\"420525\",\"name\":\"远安县\"},{\"code\":\"420526\",\"name\":\"兴山县\"},{\"code\":\"420527\",\"name\":\"秭归县\"},{\"code\":\"420528\",\"name\":\"长阳土家族自治县\"},{\"code\":\"420529\",\"name\":\"五峰土家族自治县\"},{\"code\":\"420581\",\"name\":\"宜都市\"},{\"code\":\"420582\",\"name\":\"当阳市\"},{\"code\":\"420583\",\"name\":\"枝江市\"}],\"code\":\"420500\",\"name\":\"宜昌市\"},{\"children\":[{\"code\":\"420601\",\"name\":\"市辖区\"},{\"code\":\"420602\",\"name\":\"襄城区\"},{\"code\":\"420606\",\"name\":\"樊城区\"},{\"code\":\"420607\",\"name\":\"襄州区\"},{\"code\":\"420624\",\"name\":\"南漳县\"},{\"code\":\"420625\",\"name\":\"谷城县\"},{\"code\":\"420626\",\"name\":\"保康县\"},{\"code\":\"420682\",\"name\":\"老河口市\"},{\"code\":\"420683\",\"name\":\"枣阳市\"},{\"code\":\"420684\",\"name\":\"宜城市\"}],\"code\":\"420600\",\"name\":\"襄阳市\"},{\"children\":[{\"code\":\"420701\",\"name\":\"市辖区\"},{\"code\":\"420702\",\"name\":\"梁子湖区\"},{\"code\":\"420703\",\"name\":\"华容区\"},{\"code\":\"420704\",\"name\":\"鄂城区\"}],\"code\":\"420700\",\"name\":\"鄂州市\"},{\"children\":[{\"code\":\"420801\",\"name\":\"市辖区\"},{\"code\":\"420802\",\"name\":\"东宝区\"},{\"code\":\"420804\",\"name\":\"掇刀区\"},{\"code\":\"420821\",\"name\":\"京山县\"},{\"code\":\"420822\",\"name\":\"沙洋县\"},{\"code\":\"420881\",\"name\":\"钟祥市\"}],\"code\":\"420800\",\"name\":\"荆门市\"},{\"children\":[{\"code\":\"420901\",\"name\":\"市辖区\"},{\"code\":\"420902\",\"name\":\"孝南区\"},{\"code\":\"420921\",\"name\":\"孝昌县\"},{\"code\":\"420922\",\"name\":\"大悟县\"},{\"code\":\"420923\",\"name\":\"云梦县\"},{\"code\":\"420981\",\"name\":\"应城市\"},{\"code\":\"420982\",\"name\":\"安陆市\"},{\"code\":\"420984\",\"name\":\"汉川市\"}],\"code\":\"420900\",\"name\":\"孝感市\"},{\"children\":[{\"code\":\"421001\",\"name\":\"市辖区\"},{\"code\":\"421002\",\"name\":\"沙市区\"},{\"code\":\"421003\",\"name\":\"荆州区\"},{\"code\":\"421022\",\"name\":\"公安县\"},{\"code\":\"421023\",\"name\":\"监利县\"},{\"code\":\"421024\",\"name\":\"江陵县\"},{\"code\":\"421081\",\"name\":\"石首市\"},{\"code\":\"421083\",\"name\":\"洪湖市\"},{\"code\":\"421087\",\"name\":\"松滋市\"}],\"code\":\"421000\",\"name\":\"荆州市\"},{\"children\":[{\"code\":\"421101\",\"name\":\"市辖区\"},{\"code\":\"421102\",\"name\":\"黄州区\"},{\"code\":\"421121\",\"name\":\"团风县\"},{\"code\":\"421122\",\"name\":\"红安县\"},{\"code\":\"421123\",\"name\":\"罗田县\"},{\"code\":\"421124\",\"name\":\"英山县\"},{\"code\":\"421125\",\"name\":\"浠水县\"},{\"code\":\"421126\",\"name\":\"蕲春县\"},{\"code\":\"421127\",\"name\":\"黄梅县\"},{\"code\":\"421181\",\"name\":\"麻城市\"},{\"code\":\"421182\",\"name\":\"武穴市\"}],\"code\":\"421100\",\"name\":\"黄冈市\"},{\"children\":[{\"code\":\"421201\",\"name\":\"市辖区\"},{\"code\":\"421202\",\"name\":\"咸安区\"},{\"code\":\"421221\",\"name\":\"嘉鱼县\"},{\"code\":\"421222\",\"name\":\"通城县\"},{\"code\":\"421223\",\"name\":\"崇阳县\"},{\"code\":\"421224\",\"name\":\"通山县\"},{\"code\":\"421281\",\"name\":\"赤壁市\"}],\"code\":\"421200\",\"name\":\"咸宁市\"},{\"children\":[{\"code\":\"421301\",\"name\":\"市辖区\"},{\"code\":\"421303\",\"name\":\"曾都区\"},{\"code\":\"421321\",\"name\":\"随县\"},{\"code\":\"421381\",\"name\":\"广水市\"}],\"code\":\"421300\",\"name\":\"随州市\"},{\"children\":[{\"code\":\"422801\",\"name\":\"恩施市\"},{\"code\":\"422802\",\"name\":\"利川市\"},{\"code\":\"422822\",\"name\":\"建始县\"},{\"code\":\"422823\",\"name\":\"巴东县\"},{\"code\":\"422825\",\"name\":\"宣恩县\"},{\"code\":\"422826\",\"name\":\"咸丰县\"},{\"code\":\"422827\",\"name\":\"来凤县\"},{\"code\":\"422828\",\"name\":\"鹤峰县\"}],\"code\":\"422800\",\"name\":\"恩施土家族苗族自治州\"},{\"children\":[{\"code\":\"429004\",\"name\":\"仙桃市\"},{\"code\":\"429005\",\"name\":\"潜江市\"},{\"code\":\"429006\",\"name\":\"天门市\"},{\"code\":\"429021\",\"name\":\"神农架林区\"}],\"code\":\"429000\",\"name\":\"省直辖县级行政区划\"}],\"code\":\"420000\",\"name\":\"湖北省\"},{\"children\":[{\"children\":[{\"code\":\"430101\",\"name\":\"市辖区\"},{\"code\":\"430102\",\"name\":\"芙蓉区\"},{\"code\":\"430103\",\"name\":\"天心区\"},{\"code\":\"430104\",\"name\":\"岳麓区\"},{\"code\":\"430105\",\"name\":\"开福区\"},{\"code\":\"430111\",\"name\":\"雨花区\"},{\"code\":\"430112\",\"name\":\"望城区\"},{\"code\":\"430121\",\"name\":\"长沙县\"},{\"code\":\"430124\",\"name\":\"宁乡县\"},{\"code\":\"430181\",\"name\":\"浏阳市\"}],\"code\":\"430100\",\"name\":\"长沙市\"},{\"children\":[{\"code\":\"430201\",\"name\":\"市辖区\"},{\"code\":\"430202\",\"name\":\"荷塘区\"},{\"code\":\"430203\",\"name\":\"芦淞区\"},{\"code\":\"430204\",\"name\":\"石峰区\"},{\"code\":\"430211\",\"name\":\"天元区\"},{\"code\":\"430221\",\"name\":\"株洲县\"},{\"code\":\"430223\",\"name\":\"攸县\"},{\"code\":\"430224\",\"name\":\"茶陵县\"},{\"code\":\"430225\",\"name\":\"炎陵县\"},{\"code\":\"430281\",\"name\":\"醴陵市\"}],\"code\":\"430200\",\"name\":\"株洲市\"},{\"children\":[{\"code\":\"430301\",\"name\":\"市辖区\"},{\"code\":\"430302\",\"name\":\"雨湖区\"},{\"code\":\"430304\",\"name\":\"岳塘区\"},{\"code\":\"430321\",\"name\":\"湘潭县\"},{\"code\":\"430381\",\"name\":\"湘乡市\"},{\"code\":\"430382\",\"name\":\"韶山市\"}],\"code\":\"430300\",\"name\":\"湘潭市\"},{\"children\":[{\"code\":\"430401\",\"name\":\"市辖区\"},{\"code\":\"430405\",\"name\":\"珠晖区\"},{\"code\":\"430406\",\"name\":\"雁峰区\"},{\"code\":\"430407\",\"name\":\"石鼓区\"},{\"code\":\"430408\",\"name\":\"蒸湘区\"},{\"code\":\"430412\",\"name\":\"南岳区\"},{\"code\":\"430421\",\"name\":\"衡阳县\"},{\"code\":\"430422\",\"name\":\"衡南县\"},{\"code\":\"430423\",\"name\":\"衡山县\"},{\"code\":\"430424\",\"name\":\"衡东县\"},{\"code\":\"430426\",\"name\":\"祁东县\"},{\"code\":\"430481\",\"name\":\"耒阳市\"},{\"code\":\"430482\",\"name\":\"常宁市\"}],\"code\":\"430400\",\"name\":\"衡阳市\"},{\"children\":[{\"code\":\"430501\",\"name\":\"市辖区\"},{\"code\":\"430502\",\"name\":\"双清区\"},{\"code\":\"430503\",\"name\":\"大祥区\"},{\"code\":\"430511\",\"name\":\"北塔区\"},{\"code\":\"430521\",\"name\":\"邵东县\"},{\"code\":\"430522\",\"name\":\"新邵县\"},{\"code\":\"430523\",\"name\":\"邵阳县\"},{\"code\":\"430524\",\"name\":\"隆回县\"},{\"code\":\"430525\",\"name\":\"洞口县\"},{\"code\":\"430527\",\"name\":\"绥宁县\"},{\"code\":\"430528\",\"name\":\"新宁县\"},{\"code\":\"430529\",\"name\":\"城步苗族自治县\"},{\"code\":\"430581\",\"name\":\"武冈市\"}],\"code\":\"430500\",\"name\":\"邵阳市\"},{\"children\":[{\"code\":\"430601\",\"name\":\"市辖区\"},{\"code\":\"430602\",\"name\":\"岳阳楼区\"},{\"code\":\"430603\",\"name\":\"云溪区\"},{\"code\":\"430611\",\"name\":\"君山区\"},{\"code\":\"430621\",\"name\":\"岳阳县\"},{\"code\":\"430623\",\"name\":\"华容县\"},{\"code\":\"430624\",\"name\":\"湘阴县\"},{\"code\":\"430626\",\"name\":\"平江县\"},{\"code\":\"430681\",\"name\":\"汨罗市\"},{\"code\":\"430682\",\"name\":\"临湘市\"}],\"code\":\"430600\",\"name\":\"岳阳市\"},{\"children\":[{\"code\":\"430701\",\"name\":\"市辖区\"},{\"code\":\"430702\",\"name\":\"武陵区\"},{\"code\":\"430703\",\"name\":\"鼎城区\"},{\"code\":\"430721\",\"name\":\"安乡县\"},{\"code\":\"430722\",\"name\":\"汉寿县\"},{\"code\":\"430723\",\"name\":\"澧县\"},{\"code\":\"430724\",\"name\":\"临澧县\"},{\"code\":\"430725\",\"name\":\"桃源县\"},{\"code\":\"430726\",\"name\":\"石门县\"},{\"code\":\"430781\",\"name\":\"津市市\"}],\"code\":\"430700\",\"name\":\"常德市\"},{\"children\":[{\"code\":\"430801\",\"name\":\"市辖区\"},{\"code\":\"430802\",\"name\":\"永定区\"},{\"code\":\"430811\",\"name\":\"武陵源区\"},{\"code\":\"430821\",\"name\":\"慈利县\"},{\"code\":\"430822\",\"name\":\"桑植县\"}],\"code\":\"430800\",\"name\":\"张家界市\"},{\"children\":[{\"code\":\"430901\",\"name\":\"市辖区\"},{\"code\":\"430902\",\"name\":\"资阳区\"},{\"code\":\"430903\",\"name\":\"赫山区\"},{\"code\":\"430921\",\"name\":\"南县\"},{\"code\":\"430922\",\"name\":\"桃江县\"},{\"code\":\"430923\",\"name\":\"安化县\"},{\"code\":\"430981\",\"name\":\"沅江市\"}],\"code\":\"430900\",\"name\":\"益阳市\"},{\"children\":[{\"code\":\"431001\",\"name\":\"市辖区\"},{\"code\":\"431002\",\"name\":\"北湖区\"},{\"code\":\"431003\",\"name\":\"苏仙区\"},{\"code\":\"431021\",\"name\":\"桂阳县\"},{\"code\":\"431022\",\"name\":\"宜章县\"},{\"code\":\"431023\",\"name\":\"永兴县\"},{\"code\":\"431024\",\"name\":\"嘉禾县\"},{\"code\":\"431025\",\"name\":\"临武县\"},{\"code\":\"431026\",\"name\":\"汝城县\"},{\"code\":\"431027\",\"name\":\"桂东县\"},{\"code\":\"431028\",\"name\":\"安仁县\"},{\"code\":\"431081\",\"name\":\"资兴市\"}],\"code\":\"431000\",\"name\":\"郴州市\"},{\"children\":[{\"code\":\"431101\",\"name\":\"市辖区\"},{\"code\":\"431102\",\"name\":\"零陵区\"},{\"code\":\"431103\",\"name\":\"冷水滩区\"},{\"code\":\"431121\",\"name\":\"祁阳县\"},{\"code\":\"431122\",\"name\":\"东安县\"},{\"code\":\"431123\",\"name\":\"双牌县\"},{\"code\":\"431124\",\"name\":\"道县\"},{\"code\":\"431125\",\"name\":\"江永县\"},{\"code\":\"431126\",\"name\":\"宁远县\"},{\"code\":\"431127\",\"name\":\"蓝山县\"},{\"code\":\"431128\",\"name\":\"新田县\"},{\"code\":\"431129\",\"name\":\"江华瑶族自治县\"}],\"code\":\"431100\",\"name\":\"永州市\"},{\"children\":[{\"code\":\"431201\",\"name\":\"市辖区\"},{\"code\":\"431202\",\"name\":\"鹤城区\"},{\"code\":\"431221\",\"name\":\"中方县\"},{\"code\":\"431222\",\"name\":\"沅陵县\"},{\"code\":\"431223\",\"name\":\"辰溪县\"},{\"code\":\"431224\",\"name\":\"溆浦县\"},{\"code\":\"431225\",\"name\":\"会同县\"},{\"code\":\"431226\",\"name\":\"麻阳苗族自治县\"},{\"code\":\"431227\",\"name\":\"新晃侗族自治县\"},{\"code\":\"431228\",\"name\":\"芷江侗族自治县\"},{\"code\":\"431229\",\"name\":\"靖州苗族侗族自治县\"},{\"code\":\"431230\",\"name\":\"通道侗族自治县\"},{\"code\":\"431281\",\"name\":\"洪江市\"}],\"code\":\"431200\",\"name\":\"怀化市\"},{\"children\":[{\"code\":\"431301\",\"name\":\"市辖区\"},{\"code\":\"431302\",\"name\":\"娄星区\"},{\"code\":\"431321\",\"name\":\"双峰县\"},{\"code\":\"431322\",\"name\":\"新化县\"},{\"code\":\"431381\",\"name\":\"冷水江市\"},{\"code\":\"431382\",\"name\":\"涟源市\"}],\"code\":\"431300\",\"name\":\"娄底市\"},{\"children\":[{\"code\":\"433101\",\"name\":\"吉首市\"},{\"code\":\"433122\",\"name\":\"泸溪县\"},{\"code\":\"433123\",\"name\":\"凤凰县\"},{\"code\":\"433124\",\"name\":\"花垣县\"},{\"code\":\"433125\",\"name\":\"保靖县\"},{\"code\":\"433126\",\"name\":\"古丈县\"},{\"code\":\"433127\",\"name\":\"永顺县\"},{\"code\":\"433130\",\"name\":\"龙山县\"}],\"code\":\"433100\",\"name\":\"湘西土家族苗族自治州\"}],\"code\":\"430000\",\"name\":\"湖南省\"},{\"children\":[{\"children\":[{\"code\":\"440101\",\"name\":\"市辖区\"},{\"code\":\"440103\",\"name\":\"荔湾区\"},{\"code\":\"440104\",\"name\":\"越秀区\"},{\"code\":\"440105\",\"name\":\"海珠区\"},{\"code\":\"440106\",\"name\":\"天河区\"},{\"code\":\"440111\",\"name\":\"白云区\"},{\"code\":\"440112\",\"name\":\"黄埔区\"},{\"code\":\"440113\",\"name\":\"番禺区\"},{\"code\":\"440114\",\"name\":\"花都区\"},{\"code\":\"440115\",\"name\":\"南沙区\"},{\"code\":\"440117\",\"name\":\"从化区\"},{\"code\":\"440118\",\"name\":\"增城区\"}],\"code\":\"440100\",\"name\":\"广州市\"},{\"children\":[{\"code\":\"440201\",\"name\":\"市辖区\"},{\"code\":\"440203\",\"name\":\"武江区\"},{\"code\":\"440204\",\"name\":\"浈江区\"},{\"code\":\"440205\",\"name\":\"曲江区\"},{\"code\":\"440222\",\"name\":\"始兴县\"},{\"code\":\"440224\",\"name\":\"仁化县\"},{\"code\":\"440229\",\"name\":\"翁源县\"},{\"code\":\"440232\",\"name\":\"乳源瑶族自治县\"},{\"code\":\"440233\",\"name\":\"新丰县\"},{\"code\":\"440281\",\"name\":\"乐昌市\"},{\"code\":\"440282\",\"name\":\"南雄市\"}],\"code\":\"440200\",\"name\":\"韶关市\"},{\"children\":[{\"code\":\"440301\",\"name\":\"市辖区\"},{\"code\":\"440303\",\"name\":\"罗湖区\"},{\"code\":\"440304\",\"name\":\"福田区\"},{\"code\":\"440305\",\"name\":\"南山区\"},{\"code\":\"440306\",\"name\":\"宝安区\"},{\"code\":\"440307\",\"name\":\"龙岗区\"},{\"code\":\"440308\",\"name\":\"盐田区\"}],\"code\":\"440300\",\"name\":\"深圳市\"},{\"children\":[{\"code\":\"440401\",\"name\":\"市辖区\"},{\"code\":\"440402\",\"name\":\"香洲区\"},{\"code\":\"440403\",\"name\":\"斗门区\"},{\"code\":\"440404\",\"name\":\"金湾区\"}],\"code\":\"440400\",\"name\":\"珠海市\"},{\"children\":[{\"code\":\"440501\",\"name\":\"市辖区\"},{\"code\":\"440507\",\"name\":\"龙湖区\"},{\"code\":\"440511\",\"name\":\"金平区\"},{\"code\":\"440512\",\"name\":\"濠江区\"},{\"code\":\"440513\",\"name\":\"潮阳区\"},{\"code\":\"440514\",\"name\":\"潮南区\"},{\"code\":\"440515\",\"name\":\"澄海区\"},{\"code\":\"440523\",\"name\":\"南澳县\"}],\"code\":\"440500\",\"name\":\"汕头市\"},{\"children\":[{\"code\":\"440601\",\"name\":\"市辖区\"},{\"code\":\"440604\",\"name\":\"禅城区\"},{\"code\":\"440605\",\"name\":\"南海区\"},{\"code\":\"440606\",\"name\":\"顺德区\"},{\"code\":\"440607\",\"name\":\"三水区\"},{\"code\":\"440608\",\"name\":\"高明区\"}],\"code\":\"440600\",\"name\":\"佛山市\"},{\"children\":[{\"code\":\"440701\",\"name\":\"市辖区\"},{\"code\":\"440703\",\"name\":\"蓬江区\"},{\"code\":\"440704\",\"name\":\"江海区\"},{\"code\":\"440705\",\"name\":\"新会区\"},{\"code\":\"440781\",\"name\":\"台山市\"},{\"code\":\"440783\",\"name\":\"开平市\"},{\"code\":\"440784\",\"name\":\"鹤山市\"},{\"code\":\"440785\",\"name\":\"恩平市\"}],\"code\":\"440700\",\"name\":\"江门市\"},{\"children\":[{\"code\":\"440801\",\"name\":\"市辖区\"},{\"code\":\"440802\",\"name\":\"赤坎区\"},{\"code\":\"440803\",\"name\":\"霞山区\"},{\"code\":\"440804\",\"name\":\"坡头区\"},{\"code\":\"440811\",\"name\":\"麻章区\"},{\"code\":\"440823\",\"name\":\"遂溪县\"},{\"code\":\"440825\",\"name\":\"徐闻县\"},{\"code\":\"440881\",\"name\":\"廉江市\"},{\"code\":\"440882\",\"name\":\"雷州市\"},{\"code\":\"440883\",\"name\":\"吴川市\"}],\"code\":\"440800\",\"name\":\"湛江市\"},{\"children\":[{\"code\":\"440901\",\"name\":\"市辖区\"},{\"code\":\"440902\",\"name\":\"茂南区\"},{\"code\":\"440904\",\"name\":\"电白区\"},{\"code\":\"440981\",\"name\":\"高州市\"},{\"code\":\"440982\",\"name\":\"化州市\"},{\"code\":\"440983\",\"name\":\"信宜市\"}],\"code\":\"440900\",\"name\":\"茂名市\"},{\"children\":[{\"code\":\"441201\",\"name\":\"市辖区\"},{\"code\":\"441202\",\"name\":\"端州区\"},{\"code\":\"441203\",\"name\":\"鼎湖区\"},{\"code\":\"441204\",\"name\":\"高要区\"},{\"code\":\"441223\",\"name\":\"广宁县\"},{\"code\":\"441224\",\"name\":\"怀集县\"},{\"code\":\"441225\",\"name\":\"封开县\"},{\"code\":\"441226\",\"name\":\"德庆县\"},{\"code\":\"441284\",\"name\":\"四会市\"}],\"code\":\"441200\",\"name\":\"肇庆市\"},{\"children\":[{\"code\":\"441301\",\"name\":\"市辖区\"},{\"code\":\"441302\",\"name\":\"惠城区\"},{\"code\":\"441303\",\"name\":\"惠阳区\"},{\"code\":\"441322\",\"name\":\"博罗县\"},{\"code\":\"441323\",\"name\":\"惠东县\"},{\"code\":\"441324\",\"name\":\"龙门县\"}],\"code\":\"441300\",\"name\":\"惠州市\"},{\"children\":[{\"code\":\"441401\",\"name\":\"市辖区\"},{\"code\":\"441402\",\"name\":\"梅江区\"},{\"code\":\"441403\",\"name\":\"梅县区\"},{\"code\":\"441422\",\"name\":\"大埔县\"},{\"code\":\"441423\",\"name\":\"丰顺县\"},{\"code\":\"441424\",\"name\":\"五华县\"},{\"code\":\"441426\",\"name\":\"平远县\"},{\"code\":\"441427\",\"name\":\"蕉岭县\"},{\"code\":\"441481\",\"name\":\"兴宁市\"}],\"code\":\"441400\",\"name\":\"梅州市\"},{\"children\":[{\"code\":\"441501\",\"name\":\"市辖区\"},{\"code\":\"441502\",\"name\":\"城区\"},{\"code\":\"441521\",\"name\":\"海丰县\"},{\"code\":\"441523\",\"name\":\"陆河县\"},{\"code\":\"441581\",\"name\":\"陆丰市\"}],\"code\":\"441500\",\"name\":\"汕尾市\"},{\"children\":[{\"code\":\"441601\",\"name\":\"市辖区\"},{\"code\":\"441602\",\"name\":\"源城区\"},{\"code\":\"441621\",\"name\":\"紫金县\"},{\"code\":\"441622\",\"name\":\"龙川县\"},{\"code\":\"441623\",\"name\":\"连平县\"},{\"code\":\"441624\",\"name\":\"和平县\"},{\"code\":\"441625\",\"name\":\"东源县\"}],\"code\":\"441600\",\"name\":\"河源市\"},{\"children\":[{\"code\":\"441701\",\"name\":\"市辖区\"},{\"code\":\"441702\",\"name\":\"江城区\"},{\"code\":\"441704\",\"name\":\"阳东区\"},{\"code\":\"441721\",\"name\":\"阳西县\"},{\"code\":\"441781\",\"name\":\"阳春市\"}],\"code\":\"441700\",\"name\":\"阳江市\"},{\"children\":[{\"code\":\"441801\",\"name\":\"市辖区\"},{\"code\":\"441802\",\"name\":\"清城区\"},{\"code\":\"441803\",\"name\":\"清新区\"},{\"code\":\"441821\",\"name\":\"佛冈县\"},{\"code\":\"441823\",\"name\":\"阳山县\"},{\"code\":\"441825\",\"name\":\"连山壮族瑶族自治县\"},{\"code\":\"441826\",\"name\":\"连南瑶族自治县\"},{\"code\":\"441881\",\"name\":\"英德市\"},{\"code\":\"441882\",\"name\":\"连州市\"}],\"code\":\"441800\",\"name\":\"清远市\"},{\"children\":[],\"code\":\"441900\",\"name\":\"东莞市\"},{\"children\":[],\"code\":\"442000\",\"name\":\"中山市\"},{\"children\":[{\"code\":\"445101\",\"name\":\"市辖区\"},{\"code\":\"445102\",\"name\":\"湘桥区\"},{\"code\":\"445103\",\"name\":\"潮安区\"},{\"code\":\"445122\",\"name\":\"饶平县\"}],\"code\":\"445100\",\"name\":\"潮州市\"},{\"children\":[{\"code\":\"445201\",\"name\":\"市辖区\"},{\"code\":\"445202\",\"name\":\"榕城区\"},{\"code\":\"445203\",\"name\":\"揭东区\"},{\"code\":\"445222\",\"name\":\"揭西县\"},{\"code\":\"445224\",\"name\":\"惠来县\"},{\"code\":\"445281\",\"name\":\"普宁市\"}],\"code\":\"445200\",\"name\":\"揭阳市\"},{\"children\":[{\"code\":\"445301\",\"name\":\"市辖区\"},{\"code\":\"445302\",\"name\":\"云城区\"},{\"code\":\"445303\",\"name\":\"云安区\"},{\"code\":\"445321\",\"name\":\"新兴县\"},{\"code\":\"445322\",\"name\":\"郁南县\"},{\"code\":\"445381\",\"name\":\"罗定市\"}],\"code\":\"445300\",\"name\":\"云浮市\"}],\"code\":\"440000\",\"name\":\"广东省\"},{\"children\":[{\"children\":[{\"code\":\"450101\",\"name\":\"市辖区\"},{\"code\":\"450102\",\"name\":\"兴宁区\"},{\"code\":\"450103\",\"name\":\"青秀区\"},{\"code\":\"450105\",\"name\":\"江南区\"},{\"code\":\"450107\",\"name\":\"西乡塘区\"},{\"code\":\"450108\",\"name\":\"良庆区\"},{\"code\":\"450109\",\"name\":\"邕宁区\"},{\"code\":\"450110\",\"name\":\"武鸣区\"},{\"code\":\"450123\",\"name\":\"隆安县\"},{\"code\":\"450124\",\"name\":\"马山县\"},{\"code\":\"450125\",\"name\":\"上林县\"},{\"code\":\"450126\",\"name\":\"宾阳县\"},{\"code\":\"450127\",\"name\":\"横县\"}],\"code\":\"450100\",\"name\":\"南宁市\"},{\"children\":[{\"code\":\"450201\",\"name\":\"市辖区\"},{\"code\":\"450202\",\"name\":\"城中区\"},{\"code\":\"450203\",\"name\":\"鱼峰区\"},{\"code\":\"450204\",\"name\":\"柳南区\"},{\"code\":\"450205\",\"name\":\"柳北区\"},{\"code\":\"450206\",\"name\":\"柳江区\"},{\"code\":\"450222\",\"name\":\"柳城县\"},{\"code\":\"450223\",\"name\":\"鹿寨县\"},{\"code\":\"450224\",\"name\":\"融安县\"},{\"code\":\"450225\",\"name\":\"融水苗族自治县\"},{\"code\":\"450226\",\"name\":\"三江侗族自治县\"}],\"code\":\"450200\",\"name\":\"柳州市\"},{\"children\":[{\"code\":\"450301\",\"name\":\"市辖区\"},{\"code\":\"450302\",\"name\":\"秀峰区\"},{\"code\":\"450303\",\"name\":\"叠彩区\"},{\"code\":\"450304\",\"name\":\"象山区\"},{\"code\":\"450305\",\"name\":\"七星区\"},{\"code\":\"450311\",\"name\":\"雁山区\"},{\"code\":\"450312\",\"name\":\"临桂区\"},{\"code\":\"450321\",\"name\":\"阳朔县\"},{\"code\":\"450323\",\"name\":\"灵川县\"},{\"code\":\"450324\",\"name\":\"全州县\"},{\"code\":\"450325\",\"name\":\"兴安县\"},{\"code\":\"450326\",\"name\":\"永福县\"},{\"code\":\"450327\",\"name\":\"灌阳县\"},{\"code\":\"450328\",\"name\":\"龙胜各族自治县\"},{\"code\":\"450329\",\"name\":\"资源县\"},{\"code\":\"450330\",\"name\":\"平乐县\"},{\"code\":\"450331\",\"name\":\"荔浦县\"},{\"code\":\"450332\",\"name\":\"恭城瑶族自治县\"}],\"code\":\"450300\",\"name\":\"桂林市\"},{\"children\":[{\"code\":\"450401\",\"name\":\"市辖区\"},{\"code\":\"450403\",\"name\":\"万秀区\"},{\"code\":\"450405\",\"name\":\"长洲区\"},{\"code\":\"450406\",\"name\":\"龙圩区\"},{\"code\":\"450421\",\"name\":\"苍梧县\"},{\"code\":\"450422\",\"name\":\"藤县\"},{\"code\":\"450423\",\"name\":\"蒙山县\"},{\"code\":\"450481\",\"name\":\"岑溪市\"}],\"code\":\"450400\",\"name\":\"梧州市\"},{\"children\":[{\"code\":\"450501\",\"name\":\"市辖区\"},{\"code\":\"450502\",\"name\":\"海城区\"},{\"code\":\"450503\",\"name\":\"银海区\"},{\"code\":\"450512\",\"name\":\"铁山港区\"},{\"code\":\"450521\",\"name\":\"合浦县\"}],\"code\":\"450500\",\"name\":\"北海市\"},{\"children\":[{\"code\":\"450601\",\"name\":\"市辖区\"},{\"code\":\"450602\",\"name\":\"港口区\"},{\"code\":\"450603\",\"name\":\"防城区\"},{\"code\":\"450621\",\"name\":\"上思县\"},{\"code\":\"450681\",\"name\":\"东兴市\"}],\"code\":\"450600\",\"name\":\"防城港市\"},{\"children\":[{\"code\":\"450701\",\"name\":\"市辖区\"},{\"code\":\"450702\",\"name\":\"钦南区\"},{\"code\":\"450703\",\"name\":\"钦北区\"},{\"code\":\"450721\",\"name\":\"灵山县\"},{\"code\":\"450722\",\"name\":\"浦北县\"}],\"code\":\"450700\",\"name\":\"钦州市\"},{\"children\":[{\"code\":\"450801\",\"name\":\"市辖区\"},{\"code\":\"450802\",\"name\":\"港北区\"},{\"code\":\"450803\",\"name\":\"港南区\"},{\"code\":\"450804\",\"name\":\"覃塘区\"},{\"code\":\"450821\",\"name\":\"平南县\"},{\"code\":\"450881\",\"name\":\"桂平市\"}],\"code\":\"450800\",\"name\":\"贵港市\"},{\"children\":[{\"code\":\"450901\",\"name\":\"市辖区\"},{\"code\":\"450902\",\"name\":\"玉州区\"},{\"code\":\"450903\",\"name\":\"福绵区\"},{\"code\":\"450921\",\"name\":\"容县\"},{\"code\":\"450922\",\"name\":\"陆川县\"},{\"code\":\"450923\",\"name\":\"博白县\"},{\"code\":\"450924\",\"name\":\"兴业县\"},{\"code\":\"450981\",\"name\":\"北流市\"}],\"code\":\"450900\",\"name\":\"玉林市\"},{\"children\":[{\"code\":\"451001\",\"name\":\"市辖区\"},{\"code\":\"451002\",\"name\":\"右江区\"},{\"code\":\"451021\",\"name\":\"田阳县\"},{\"code\":\"451022\",\"name\":\"田东县\"},{\"code\":\"451023\",\"name\":\"平果县\"},{\"code\":\"451024\",\"name\":\"德保县\"},{\"code\":\"451026\",\"name\":\"那坡县\"},{\"code\":\"451027\",\"name\":\"凌云县\"},{\"code\":\"451028\",\"name\":\"乐业县\"},{\"code\":\"451029\",\"name\":\"田林县\"},{\"code\":\"451030\",\"name\":\"西林县\"},{\"code\":\"451031\",\"name\":\"隆林各族自治县\"},{\"code\":\"451081\",\"name\":\"靖西市\"}],\"code\":\"451000\",\"name\":\"百色市\"},{\"children\":[{\"code\":\"451101\",\"name\":\"市辖区\"},{\"code\":\"451102\",\"name\":\"八步区\"},{\"code\":\"451103\",\"name\":\"平桂区\"},{\"code\":\"451121\",\"name\":\"昭平县\"},{\"code\":\"451122\",\"name\":\"钟山县\"},{\"code\":\"451123\",\"name\":\"富川瑶族自治县\"}],\"code\":\"451100\",\"name\":\"贺州市\"},{\"children\":[{\"code\":\"451201\",\"name\":\"市辖区\"},{\"code\":\"451202\",\"name\":\"金城江区\"},{\"code\":\"451221\",\"name\":\"南丹县\"},{\"code\":\"451222\",\"name\":\"天峨县\"},{\"code\":\"451223\",\"name\":\"凤山县\"},{\"code\":\"451224\",\"name\":\"东兰县\"},{\"code\":\"451225\",\"name\":\"罗城仫佬族自治县\"},{\"code\":\"451226\",\"name\":\"环江毛南族自治县\"},{\"code\":\"451227\",\"name\":\"巴马瑶族自治县\"},{\"code\":\"451228\",\"name\":\"都安瑶族自治县\"},{\"code\":\"451229\",\"name\":\"大化瑶族自治县\"},{\"code\":\"451281\",\"name\":\"宜州市\"}],\"code\":\"451200\",\"name\":\"河池市\"},{\"children\":[{\"code\":\"451301\",\"name\":\"市辖区\"},{\"code\":\"451302\",\"name\":\"兴宾区\"},{\"code\":\"451321\",\"name\":\"忻城县\"},{\"code\":\"451322\",\"name\":\"象州县\"},{\"code\":\"451323\",\"name\":\"武宣县\"},{\"code\":\"451324\",\"name\":\"金秀瑶族自治县\"},{\"code\":\"451381\",\"name\":\"合山市\"}],\"code\":\"451300\",\"name\":\"来宾市\"},{\"children\":[{\"code\":\"451401\",\"name\":\"市辖区\"},{\"code\":\"451402\",\"name\":\"江州区\"},{\"code\":\"451421\",\"name\":\"扶绥县\"},{\"code\":\"451422\",\"name\":\"宁明县\"},{\"code\":\"451423\",\"name\":\"龙州县\"},{\"code\":\"451424\",\"name\":\"大新县\"},{\"code\":\"451425\",\"name\":\"天等县\"},{\"code\":\"451481\",\"name\":\"凭祥市\"}],\"code\":\"451400\",\"name\":\"崇左市\"}],\"code\":\"450000\",\"name\":\"广西壮族自治区\"},{\"children\":[{\"children\":[{\"code\":\"460101\",\"name\":\"市辖区\"},{\"code\":\"460105\",\"name\":\"秀英区\"},{\"code\":\"460106\",\"name\":\"龙华区\"},{\"code\":\"460107\",\"name\":\"琼山区\"},{\"code\":\"460108\",\"name\":\"美兰区\"}],\"code\":\"460100\",\"name\":\"海口市\"},{\"children\":[{\"code\":\"460201\",\"name\":\"市辖区\"},{\"code\":\"460202\",\"name\":\"海棠区\"},{\"code\":\"460203\",\"name\":\"吉阳区\"},{\"code\":\"460204\",\"name\":\"天涯区\"},{\"code\":\"460205\",\"name\":\"崖州区\"}],\"code\":\"460200\",\"name\":\"三亚市\"},{\"children\":[],\"code\":\"460300\",\"name\":\"三沙市\"},{\"children\":[],\"code\":\"460400\",\"name\":\"儋州市\"},{\"children\":[{\"code\":\"469001\",\"name\":\"五指山市\"},{\"code\":\"469002\",\"name\":\"琼海市\"},{\"code\":\"469005\",\"name\":\"文昌市\"},{\"code\":\"469006\",\"name\":\"万宁市\"},{\"code\":\"469007\",\"name\":\"东方市\"},{\"code\":\"469021\",\"name\":\"定安县\"},{\"code\":\"469022\",\"name\":\"屯昌县\"},{\"code\":\"469023\",\"name\":\"澄迈县\"},{\"code\":\"469024\",\"name\":\"临高县\"},{\"code\":\"469025\",\"name\":\"白沙黎族自治县\"},{\"code\":\"469026\",\"name\":\"昌江黎族自治县\"},{\"code\":\"469027\",\"name\":\"乐东黎族自治县\"},{\"code\":\"469028\",\"name\":\"陵水黎族自治县\"},{\"code\":\"469029\",\"name\":\"保亭黎族苗族自治县\"},{\"code\":\"469030\",\"name\":\"琼中黎族苗族自治县\"}],\"code\":\"469000\",\"name\":\"省直辖县级行政区划\"}],\"code\":\"460000\",\"name\":\"海南省\"},{\"children\":[{\"children\":[{\"code\":\"500101\",\"name\":\"万州区\"},{\"code\":\"500102\",\"name\":\"涪陵区\"},{\"code\":\"500103\",\"name\":\"渝中区\"},{\"code\":\"500104\",\"name\":\"大渡口区\"},{\"code\":\"500105\",\"name\":\"江北区\"},{\"code\":\"500106\",\"name\":\"沙坪坝区\"},{\"code\":\"500107\",\"name\":\"九龙坡区\"},{\"code\":\"500108\",\"name\":\"南岸区\"},{\"code\":\"500109\",\"name\":\"北碚区\"},{\"code\":\"500110\",\"name\":\"綦江区\"},{\"code\":\"500111\",\"name\":\"大足区\"},{\"code\":\"500112\",\"name\":\"渝北区\"},{\"code\":\"500113\",\"name\":\"巴南区\"},{\"code\":\"500114\",\"name\":\"黔江区\"},{\"code\":\"500115\",\"name\":\"长寿区\"},{\"code\":\"500116\",\"name\":\"江津区\"},{\"code\":\"500117\",\"name\":\"合川区\"},{\"code\":\"500118\",\"name\":\"永川区\"},{\"code\":\"500119\",\"name\":\"南川区\"},{\"code\":\"500120\",\"name\":\"璧山区\"},{\"code\":\"500151\",\"name\":\"铜梁区\"},{\"code\":\"500152\",\"name\":\"潼南区\"},{\"code\":\"500153\",\"name\":\"荣昌区\"},{\"code\":\"500154\",\"name\":\"开州区\"}],\"code\":\"500100\",\"name\":\"市辖区\"},{\"children\":[{\"code\":\"500228\",\"name\":\"梁平县\"},{\"code\":\"500229\",\"name\":\"城口县\"},{\"code\":\"500230\",\"name\":\"丰都县\"},{\"code\":\"500231\",\"name\":\"垫江县\"},{\"code\":\"500232\",\"name\":\"武隆县\"},{\"code\":\"500233\",\"name\":\"忠县\"},{\"code\":\"500235\",\"name\":\"云阳县\"},{\"code\":\"500236\",\"name\":\"奉节县\"},{\"code\":\"500237\",\"name\":\"巫山县\"},{\"code\":\"500238\",\"name\":\"巫溪县\"},{\"code\":\"500240\",\"name\":\"石柱土家族自治县\"},{\"code\":\"500241\",\"name\":\"秀山土家族苗族自治县\"},{\"code\":\"500242\",\"name\":\"酉阳土家族苗族自治县\"},{\"code\":\"500243\",\"name\":\"彭水苗族土家族自治县\"}],\"code\":\"500200\",\"name\":\"县\"}],\"code\":\"500000\",\"name\":\"重庆市\"},{\"children\":[{\"children\":[{\"code\":\"510101\",\"name\":\"市辖区\"},{\"code\":\"510104\",\"name\":\"锦江区\"},{\"code\":\"510105\",\"name\":\"青羊区\"},{\"code\":\"510106\",\"name\":\"金牛区\"},{\"code\":\"510107\",\"name\":\"武侯区\"},{\"code\":\"510108\",\"name\":\"成华区\"},{\"code\":\"510112\",\"name\":\"龙泉驿区\"},{\"code\":\"510113\",\"name\":\"青白江区\"},{\"code\":\"510114\",\"name\":\"新都区\"},{\"code\":\"510115\",\"name\":\"温江区\"},{\"code\":\"510116\",\"name\":\"双流区\"},{\"code\":\"510121\",\"name\":\"金堂县\"},{\"code\":\"510124\",\"name\":\"郫县\"},{\"code\":\"510129\",\"name\":\"大邑县\"},{\"code\":\"510131\",\"name\":\"蒲江县\"},{\"code\":\"510132\",\"name\":\"新津县\"},{\"code\":\"510181\",\"name\":\"都江堰市\"},{\"code\":\"510182\",\"name\":\"彭州市\"},{\"code\":\"510183\",\"name\":\"邛崃市\"},{\"code\":\"510184\",\"name\":\"崇州市\"},{\"code\":\"510185\",\"name\":\"简阳市\"}],\"code\":\"510100\",\"name\":\"成都市\"},{\"children\":[{\"code\":\"510301\",\"name\":\"市辖区\"},{\"code\":\"510302\",\"name\":\"自流井区\"},{\"code\":\"510303\",\"name\":\"贡井区\"},{\"code\":\"510304\",\"name\":\"大安区\"},{\"code\":\"510311\",\"name\":\"沿滩区\"},{\"code\":\"510321\",\"name\":\"荣县\"},{\"code\":\"510322\",\"name\":\"富顺县\"}],\"code\":\"510300\",\"name\":\"自贡市\"},{\"children\":[{\"code\":\"510401\",\"name\":\"市辖区\"},{\"code\":\"510402\",\"name\":\"东区\"},{\"code\":\"510403\",\"name\":\"西区\"},{\"code\":\"510411\",\"name\":\"仁和区\"},{\"code\":\"510421\",\"name\":\"米易县\"},{\"code\":\"510422\",\"name\":\"盐边县\"}],\"code\":\"510400\",\"name\":\"攀枝花市\"},{\"children\":[{\"code\":\"510501\",\"name\":\"市辖区\"},{\"code\":\"510502\",\"name\":\"江阳区\"},{\"code\":\"510503\",\"name\":\"纳溪区\"},{\"code\":\"510504\",\"name\":\"龙马潭区\"},{\"code\":\"510521\",\"name\":\"泸县\"},{\"code\":\"510522\",\"name\":\"合江县\"},{\"code\":\"510524\",\"name\":\"叙永县\"},{\"code\":\"510525\",\"name\":\"古蔺县\"}],\"code\":\"510500\",\"name\":\"泸州市\"},{\"children\":[{\"code\":\"510601\",\"name\":\"市辖区\"},{\"code\":\"510603\",\"name\":\"旌阳区\"},{\"code\":\"510623\",\"name\":\"中江县\"},{\"code\":\"510626\",\"name\":\"罗江县\"},{\"code\":\"510681\",\"name\":\"广汉市\"},{\"code\":\"510682\",\"name\":\"什邡市\"},{\"code\":\"510683\",\"name\":\"绵竹市\"}],\"code\":\"510600\",\"name\":\"德阳市\"},{\"children\":[{\"code\":\"510701\",\"name\":\"市辖区\"},{\"code\":\"510703\",\"name\":\"涪城区\"},{\"code\":\"510704\",\"name\":\"游仙区\"},{\"code\":\"510705\",\"name\":\"安州区\"},{\"code\":\"510722\",\"name\":\"三台县\"},{\"code\":\"510723\",\"name\":\"盐亭县\"},{\"code\":\"510725\",\"name\":\"梓潼县\"},{\"code\":\"510726\",\"name\":\"北川羌族自治县\"},{\"code\":\"510727\",\"name\":\"平武县\"},{\"code\":\"510781\",\"name\":\"江油市\"}],\"code\":\"510700\",\"name\":\"绵阳市\"},{\"children\":[{\"code\":\"510801\",\"name\":\"市辖区\"},{\"code\":\"510802\",\"name\":\"利州区\"},{\"code\":\"510811\",\"name\":\"昭化区\"},{\"code\":\"510812\",\"name\":\"朝天区\"},{\"code\":\"510821\",\"name\":\"旺苍县\"},{\"code\":\"510822\",\"name\":\"青川县\"},{\"code\":\"510823\",\"name\":\"剑阁县\"},{\"code\":\"510824\",\"name\":\"苍溪县\"}],\"code\":\"510800\",\"name\":\"广元市\"},{\"children\":[{\"code\":\"510901\",\"name\":\"市辖区\"},{\"code\":\"510903\",\"name\":\"船山区\"},{\"code\":\"510904\",\"name\":\"安居区\"},{\"code\":\"510921\",\"name\":\"蓬溪县\"},{\"code\":\"510922\",\"name\":\"射洪县\"},{\"code\":\"510923\",\"name\":\"大英县\"}],\"code\":\"510900\",\"name\":\"遂宁市\"},{\"children\":[{\"code\":\"511001\",\"name\":\"市辖区\"},{\"code\":\"511002\",\"name\":\"市中区\"},{\"code\":\"511011\",\"name\":\"东兴区\"},{\"code\":\"511024\",\"name\":\"威远县\"},{\"code\":\"511025\",\"name\":\"资中县\"},{\"code\":\"511028\",\"name\":\"隆昌县\"}],\"code\":\"511000\",\"name\":\"内江市\"},{\"children\":[{\"code\":\"511101\",\"name\":\"市辖区\"},{\"code\":\"511102\",\"name\":\"市中区\"},{\"code\":\"511111\",\"name\":\"沙湾区\"},{\"code\":\"511112\",\"name\":\"五通桥区\"},{\"code\":\"511113\",\"name\":\"金口河区\"},{\"code\":\"511123\",\"name\":\"犍为县\"},{\"code\":\"511124\",\"name\":\"井研县\"},{\"code\":\"511126\",\"name\":\"夹江县\"},{\"code\":\"511129\",\"name\":\"沐川县\"},{\"code\":\"511132\",\"name\":\"峨边彝族自治县\"},{\"code\":\"511133\",\"name\":\"马边彝族自治县\"},{\"code\":\"511181\",\"name\":\"峨眉山市\"}],\"code\":\"511100\",\"name\":\"乐山市\"},{\"children\":[{\"code\":\"511301\",\"name\":\"市辖区\"},{\"code\":\"511302\",\"name\":\"顺庆区\"},{\"code\":\"511303\",\"name\":\"高坪区\"},{\"code\":\"511304\",\"name\":\"嘉陵区\"},{\"code\":\"511321\",\"name\":\"南部县\"},{\"code\":\"511322\",\"name\":\"营山县\"},{\"code\":\"511323\",\"name\":\"蓬安县\"},{\"code\":\"511324\",\"name\":\"仪陇县\"},{\"code\":\"511325\",\"name\":\"西充县\"},{\"code\":\"511381\",\"name\":\"阆中市\"}],\"code\":\"511300\",\"name\":\"南充市\"},{\"children\":[{\"code\":\"511401\",\"name\":\"市辖区\"},{\"code\":\"511402\",\"name\":\"东坡区\"},{\"code\":\"511403\",\"name\":\"彭山区\"},{\"code\":\"511421\",\"name\":\"仁寿县\"},{\"code\":\"511423\",\"name\":\"洪雅县\"},{\"code\":\"511424\",\"name\":\"丹棱县\"},{\"code\":\"511425\",\"name\":\"青神县\"}],\"code\":\"511400\",\"name\":\"眉山市\"},{\"children\":[{\"code\":\"511501\",\"name\":\"市辖区\"},{\"code\":\"511502\",\"name\":\"翠屏区\"},{\"code\":\"511503\",\"name\":\"南溪区\"},{\"code\":\"511521\",\"name\":\"宜宾县\"},{\"code\":\"511523\",\"name\":\"江安县\"},{\"code\":\"511524\",\"name\":\"长宁县\"},{\"code\":\"511525\",\"name\":\"高县\"},{\"code\":\"511526\",\"name\":\"珙县\"},{\"code\":\"511527\",\"name\":\"筠连县\"},{\"code\":\"511528\",\"name\":\"兴文县\"},{\"code\":\"511529\",\"name\":\"屏山县\"}],\"code\":\"511500\",\"name\":\"宜宾市\"},{\"children\":[{\"code\":\"511601\",\"name\":\"市辖区\"},{\"code\":\"511602\",\"name\":\"广安区\"},{\"code\":\"511603\",\"name\":\"前锋区\"},{\"code\":\"511621\",\"name\":\"岳池县\"},{\"code\":\"511622\",\"name\":\"武胜县\"},{\"code\":\"511623\",\"name\":\"邻水县\"},{\"code\":\"511681\",\"name\":\"华蓥市\"}],\"code\":\"511600\",\"name\":\"广安市\"},{\"children\":[{\"code\":\"511701\",\"name\":\"市辖区\"},{\"code\":\"511702\",\"name\":\"通川区\"},{\"code\":\"511703\",\"name\":\"达川区\"},{\"code\":\"511722\",\"name\":\"宣汉县\"},{\"code\":\"511723\",\"name\":\"开江县\"},{\"code\":\"511724\",\"name\":\"大竹县\"},{\"code\":\"511725\",\"name\":\"渠县\"},{\"code\":\"511781\",\"name\":\"万源市\"}],\"code\":\"511700\",\"name\":\"达州市\"},{\"children\":[{\"code\":\"511801\",\"name\":\"市辖区\"},{\"code\":\"511802\",\"name\":\"雨城区\"},{\"code\":\"511803\",\"name\":\"名山区\"},{\"code\":\"511822\",\"name\":\"荥经县\"},{\"code\":\"511823\",\"name\":\"汉源县\"},{\"code\":\"511824\",\"name\":\"石棉县\"},{\"code\":\"511825\",\"name\":\"天全县\"},{\"code\":\"511826\",\"name\":\"芦山县\"},{\"code\":\"511827\",\"name\":\"宝兴县\"}],\"code\":\"511800\",\"name\":\"雅安市\"},{\"children\":[{\"code\":\"511901\",\"name\":\"市辖区\"},{\"code\":\"511902\",\"name\":\"巴州区\"},{\"code\":\"511903\",\"name\":\"恩阳区\"},{\"code\":\"511921\",\"name\":\"通江县\"},{\"code\":\"511922\",\"name\":\"南江县\"},{\"code\":\"511923\",\"name\":\"平昌县\"}],\"code\":\"511900\",\"name\":\"巴中市\"},{\"children\":[{\"code\":\"512001\",\"name\":\"市辖区\"},{\"code\":\"512002\",\"name\":\"雁江区\"},{\"code\":\"512021\",\"name\":\"安岳县\"},{\"code\":\"512022\",\"name\":\"乐至县\"}],\"code\":\"512000\",\"name\":\"资阳市\"},{\"children\":[{\"code\":\"513201\",\"name\":\"马尔康市\"},{\"code\":\"513221\",\"name\":\"汶川县\"},{\"code\":\"513222\",\"name\":\"理县\"},{\"code\":\"513223\",\"name\":\"茂县\"},{\"code\":\"513224\",\"name\":\"松潘县\"},{\"code\":\"513225\",\"name\":\"九寨沟县\"},{\"code\":\"513226\",\"name\":\"金川县\"},{\"code\":\"513227\",\"name\":\"小金县\"},{\"code\":\"513228\",\"name\":\"黑水县\"},{\"code\":\"513230\",\"name\":\"壤塘县\"},{\"code\":\"513231\",\"name\":\"阿坝县\"},{\"code\":\"513232\",\"name\":\"若尔盖县\"},{\"code\":\"513233\",\"name\":\"红原县\"}],\"code\":\"513200\",\"name\":\"阿坝藏族羌族自治州\"},{\"children\":[{\"code\":\"513301\",\"name\":\"康定市\"},{\"code\":\"513322\",\"name\":\"泸定县\"},{\"code\":\"513323\",\"name\":\"丹巴县\"},{\"code\":\"513324\",\"name\":\"九龙县\"},{\"code\":\"513325\",\"name\":\"雅江县\"},{\"code\":\"513326\",\"name\":\"道孚县\"},{\"code\":\"513327\",\"name\":\"炉霍县\"},{\"code\":\"513328\",\"name\":\"甘孜县\"},{\"code\":\"513329\",\"name\":\"新龙县\"},{\"code\":\"513330\",\"name\":\"德格县\"},{\"code\":\"513331\",\"name\":\"白玉县\"},{\"code\":\"513332\",\"name\":\"石渠县\"},{\"code\":\"513333\",\"name\":\"色达县\"},{\"code\":\"513334\",\"name\":\"理塘县\"},{\"code\":\"513335\",\"name\":\"巴塘县\"},{\"code\":\"513336\",\"name\":\"乡城县\"},{\"code\":\"513337\",\"name\":\"稻城县\"},{\"code\":\"513338\",\"name\":\"得荣县\"}],\"code\":\"513300\",\"name\":\"甘孜藏族自治州\"},{\"children\":[{\"code\":\"513401\",\"name\":\"西昌市\"},{\"code\":\"513422\",\"name\":\"木里藏族自治县\"},{\"code\":\"513423\",\"name\":\"盐源县\"},{\"code\":\"513424\",\"name\":\"德昌县\"},{\"code\":\"513425\",\"name\":\"会理县\"},{\"code\":\"513426\",\"name\":\"会东县\"},{\"code\":\"513427\",\"name\":\"宁南县\"},{\"code\":\"513428\",\"name\":\"普格县\"},{\"code\":\"513429\",\"name\":\"布拖县\"},{\"code\":\"513430\",\"name\":\"金阳县\"},{\"code\":\"513431\",\"name\":\"昭觉县\"},{\"code\":\"513432\",\"name\":\"喜德县\"},{\"code\":\"513433\",\"name\":\"冕宁县\"},{\"code\":\"513434\",\"name\":\"越西县\"},{\"code\":\"513435\",\"name\":\"甘洛县\"},{\"code\":\"513436\",\"name\":\"美姑县\"},{\"code\":\"513437\",\"name\":\"雷波县\"}],\"code\":\"513400\",\"name\":\"凉山彝族自治州\"}],\"code\":\"510000\",\"name\":\"四川省\"},{\"children\":[{\"children\":[{\"code\":\"520101\",\"name\":\"市辖区\"},{\"code\":\"520102\",\"name\":\"南明区\"},{\"code\":\"520103\",\"name\":\"云岩区\"},{\"code\":\"520111\",\"name\":\"花溪区\"},{\"code\":\"520112\",\"name\":\"乌当区\"},{\"code\":\"520113\",\"name\":\"白云区\"},{\"code\":\"520115\",\"name\":\"观山湖区\"},{\"code\":\"520121\",\"name\":\"开阳县\"},{\"code\":\"520122\",\"name\":\"息烽县\"},{\"code\":\"520123\",\"name\":\"修文县\"},{\"code\":\"520181\",\"name\":\"清镇市\"}],\"code\":\"520100\",\"name\":\"贵阳市\"},{\"children\":[{\"code\":\"520201\",\"name\":\"钟山区\"},{\"code\":\"520203\",\"name\":\"六枝特区\"},{\"code\":\"520221\",\"name\":\"水城县\"},{\"code\":\"520222\",\"name\":\"盘县\"}],\"code\":\"520200\",\"name\":\"六盘水市\"},{\"children\":[{\"code\":\"520301\",\"name\":\"市辖区\"},{\"code\":\"520302\",\"name\":\"红花岗区\"},{\"code\":\"520303\",\"name\":\"汇川区\"},{\"code\":\"520304\",\"name\":\"播州区\"},{\"code\":\"520322\",\"name\":\"桐梓县\"},{\"code\":\"520323\",\"name\":\"绥阳县\"},{\"code\":\"520324\",\"name\":\"正安县\"},{\"code\":\"520325\",\"name\":\"道真仡佬族苗族自治县\"},{\"code\":\"520326\",\"name\":\"务川仡佬族苗族自治县\"},{\"code\":\"520327\",\"name\":\"凤冈县\"},{\"code\":\"520328\",\"name\":\"湄潭县\"},{\"code\":\"520329\",\"name\":\"余庆县\"},{\"code\":\"520330\",\"name\":\"习水县\"},{\"code\":\"520381\",\"name\":\"赤水市\"},{\"code\":\"520382\",\"name\":\"仁怀市\"}],\"code\":\"520300\",\"name\":\"遵义市\"},{\"children\":[{\"code\":\"520401\",\"name\":\"市辖区\"},{\"code\":\"520402\",\"name\":\"西秀区\"},{\"code\":\"520403\",\"name\":\"平坝区\"},{\"code\":\"520422\",\"name\":\"普定县\"},{\"code\":\"520423\",\"name\":\"镇宁布依族苗族自治县\"},{\"code\":\"520424\",\"name\":\"关岭布依族苗族自治县\"},{\"code\":\"520425\",\"name\":\"紫云苗族布依族自治县\"}],\"code\":\"520400\",\"name\":\"安顺市\"},{\"children\":[{\"code\":\"520501\",\"name\":\"市辖区\"},{\"code\":\"520502\",\"name\":\"七星关区\"},{\"code\":\"520521\",\"name\":\"大方县\"},{\"code\":\"520522\",\"name\":\"黔西县\"},{\"code\":\"520523\",\"name\":\"金沙县\"},{\"code\":\"520524\",\"name\":\"织金县\"},{\"code\":\"520525\",\"name\":\"纳雍县\"},{\"code\":\"520526\",\"name\":\"威宁彝族回族苗族自治县\"},{\"code\":\"520527\",\"name\":\"赫章县\"}],\"code\":\"520500\",\"name\":\"毕节市\"},{\"children\":[{\"code\":\"520601\",\"name\":\"市辖区\"},{\"code\":\"520602\",\"name\":\"碧江区\"},{\"code\":\"520603\",\"name\":\"万山区\"},{\"code\":\"520621\",\"name\":\"江口县\"},{\"code\":\"520622\",\"name\":\"玉屏侗族自治县\"},{\"code\":\"520623\",\"name\":\"石阡县\"},{\"code\":\"520624\",\"name\":\"思南县\"},{\"code\":\"520625\",\"name\":\"印江土家族苗族自治县\"},{\"code\":\"520626\",\"name\":\"德江县\"},{\"code\":\"520627\",\"name\":\"沿河土家族自治县\"},{\"code\":\"520628\",\"name\":\"松桃苗族自治县\"}],\"code\":\"520600\",\"name\":\"铜仁市\"},{\"children\":[{\"code\":\"522301\",\"name\":\"兴义市\"},{\"code\":\"522322\",\"name\":\"兴仁县\"},{\"code\":\"522323\",\"name\":\"普安县\"},{\"code\":\"522324\",\"name\":\"晴隆县\"},{\"code\":\"522325\",\"name\":\"贞丰县\"},{\"code\":\"522326\",\"name\":\"望谟县\"},{\"code\":\"522327\",\"name\":\"册亨县\"},{\"code\":\"522328\",\"name\":\"安龙县\"}],\"code\":\"522300\",\"name\":\"黔西南布依族苗族自治州\"},{\"children\":[{\"code\":\"522601\",\"name\":\"凯里市\"},{\"code\":\"522622\",\"name\":\"黄平县\"},{\"code\":\"522623\",\"name\":\"施秉县\"},{\"code\":\"522624\",\"name\":\"三穗县\"},{\"code\":\"522625\",\"name\":\"镇远县\"},{\"code\":\"522626\",\"name\":\"岑巩县\"},{\"code\":\"522627\",\"name\":\"天柱县\"},{\"code\":\"522628\",\"name\":\"锦屏县\"},{\"code\":\"522629\",\"name\":\"剑河县\"},{\"code\":\"522630\",\"name\":\"台江县\"},{\"code\":\"522631\",\"name\":\"黎平县\"},{\"code\":\"522632\",\"name\":\"榕江县\"},{\"code\":\"522633\",\"name\":\"从江县\"},{\"code\":\"522634\",\"name\":\"雷山县\"},{\"code\":\"522635\",\"name\":\"麻江县\"},{\"code\":\"522636\",\"name\":\"丹寨县\"}],\"code\":\"522600\",\"name\":\"黔东南苗族侗族自治州\"},{\"children\":[{\"code\":\"522701\",\"name\":\"都匀市\"},{\"code\":\"522702\",\"name\":\"福泉市\"},{\"code\":\"522722\",\"name\":\"荔波县\"},{\"code\":\"522723\",\"name\":\"贵定县\"},{\"code\":\"522725\",\"name\":\"瓮安县\"},{\"code\":\"522726\",\"name\":\"独山县\"},{\"code\":\"522727\",\"name\":\"平塘县\"},{\"code\":\"522728\",\"name\":\"罗甸县\"},{\"code\":\"522729\",\"name\":\"长顺县\"},{\"code\":\"522730\",\"name\":\"龙里县\"},{\"code\":\"522731\",\"name\":\"惠水县\"},{\"code\":\"522732\",\"name\":\"三都水族自治县\"}],\"code\":\"522700\",\"name\":\"黔南布依族苗族自治州\"}],\"code\":\"520000\",\"name\":\"贵州省\"},{\"children\":[{\"children\":[{\"code\":\"530101\",\"name\":\"市辖区\"},{\"code\":\"530102\",\"name\":\"五华区\"},{\"code\":\"530103\",\"name\":\"盘龙区\"},{\"code\":\"530111\",\"name\":\"官渡区\"},{\"code\":\"530112\",\"name\":\"西山区\"},{\"code\":\"530113\",\"name\":\"东川区\"},{\"code\":\"530114\",\"name\":\"呈贡区\"},{\"code\":\"530122\",\"name\":\"晋宁县\"},{\"code\":\"530124\",\"name\":\"富民县\"},{\"code\":\"530125\",\"name\":\"宜良县\"},{\"code\":\"530126\",\"name\":\"石林彝族自治县\"},{\"code\":\"530127\",\"name\":\"嵩明县\"},{\"code\":\"530128\",\"name\":\"禄劝彝族苗族自治县\"},{\"code\":\"530129\",\"name\":\"寻甸回族彝族自治县\"},{\"code\":\"530181\",\"name\":\"安宁市\"}],\"code\":\"530100\",\"name\":\"昆明市\"},{\"children\":[{\"code\":\"530301\",\"name\":\"市辖区\"},{\"code\":\"530302\",\"name\":\"麒麟区\"},{\"code\":\"530303\",\"name\":\"沾益区\"},{\"code\":\"530321\",\"name\":\"马龙县\"},{\"code\":\"530322\",\"name\":\"陆良县\"},{\"code\":\"530323\",\"name\":\"师宗县\"},{\"code\":\"530324\",\"name\":\"罗平县\"},{\"code\":\"530325\",\"name\":\"富源县\"},{\"code\":\"530326\",\"name\":\"会泽县\"},{\"code\":\"530381\",\"name\":\"宣威市\"}],\"code\":\"530300\",\"name\":\"曲靖市\"},{\"children\":[{\"code\":\"530401\",\"name\":\"市辖区\"},{\"code\":\"530402\",\"name\":\"红塔区\"},{\"code\":\"530403\",\"name\":\"江川区\"},{\"code\":\"530422\",\"name\":\"澄江县\"},{\"code\":\"530423\",\"name\":\"通海县\"},{\"code\":\"530424\",\"name\":\"华宁县\"},{\"code\":\"530425\",\"name\":\"易门县\"},{\"code\":\"530426\",\"name\":\"峨山彝族自治县\"},{\"code\":\"530427\",\"name\":\"新平彝族傣族自治县\"},{\"code\":\"530428\",\"name\":\"元江哈尼族彝族傣族自治县\"}],\"code\":\"530400\",\"name\":\"玉溪市\"},{\"children\":[{\"code\":\"530501\",\"name\":\"市辖区\"},{\"code\":\"530502\",\"name\":\"隆阳区\"},{\"code\":\"530521\",\"name\":\"施甸县\"},{\"code\":\"530523\",\"name\":\"龙陵县\"},{\"code\":\"530524\",\"name\":\"昌宁县\"},{\"code\":\"530581\",\"name\":\"腾冲市\"}],\"code\":\"530500\",\"name\":\"保山市\"},{\"children\":[{\"code\":\"530601\",\"name\":\"市辖区\"},{\"code\":\"530602\",\"name\":\"昭阳区\"},{\"code\":\"530621\",\"name\":\"鲁甸县\"},{\"code\":\"530622\",\"name\":\"巧家县\"},{\"code\":\"530623\",\"name\":\"盐津县\"},{\"code\":\"530624\",\"name\":\"大关县\"},{\"code\":\"530625\",\"name\":\"永善县\"},{\"code\":\"530626\",\"name\":\"绥江县\"},{\"code\":\"530627\",\"name\":\"镇雄县\"},{\"code\":\"530628\",\"name\":\"彝良县\"},{\"code\":\"530629\",\"name\":\"威信县\"},{\"code\":\"530630\",\"name\":\"水富县\"}],\"code\":\"530600\",\"name\":\"昭通市\"},{\"children\":[{\"code\":\"530701\",\"name\":\"市辖区\"},{\"code\":\"530702\",\"name\":\"古城区\"},{\"code\":\"530721\",\"name\":\"玉龙纳西族自治县\"},{\"code\":\"530722\",\"name\":\"永胜县\"},{\"code\":\"530723\",\"name\":\"华坪县\"},{\"code\":\"530724\",\"name\":\"宁蒗彝族自治县\"}],\"code\":\"530700\",\"name\":\"丽江市\"},{\"children\":[{\"code\":\"530801\",\"name\":\"市辖区\"},{\"code\":\"530802\",\"name\":\"思茅区\"},{\"code\":\"530821\",\"name\":\"宁洱哈尼族彝族自治县\"},{\"code\":\"530822\",\"name\":\"墨江哈尼族自治县\"},{\"code\":\"530823\",\"name\":\"景东彝族自治县\"},{\"code\":\"530824\",\"name\":\"景谷傣族彝族自治县\"},{\"code\":\"530825\",\"name\":\"镇沅彝族哈尼族拉祜族自治县\"},{\"code\":\"530826\",\"name\":\"江城哈尼族彝族自治县\"},{\"code\":\"530827\",\"name\":\"孟连傣族拉祜族佤族自治县\"},{\"code\":\"530828\",\"name\":\"澜沧拉祜族自治县\"},{\"code\":\"530829\",\"name\":\"西盟佤族自治县\"}],\"code\":\"530800\",\"name\":\"普洱市\"},{\"children\":[{\"code\":\"530901\",\"name\":\"市辖区\"},{\"code\":\"530902\",\"name\":\"临翔区\"},{\"code\":\"530921\",\"name\":\"凤庆县\"},{\"code\":\"530922\",\"name\":\"云县\"},{\"code\":\"530923\",\"name\":\"永德县\"},{\"code\":\"530924\",\"name\":\"镇康县\"},{\"code\":\"530925\",\"name\":\"双江拉祜族佤族布朗族傣族自治县\"},{\"code\":\"530926\",\"name\":\"耿马傣族佤族自治县\"},{\"code\":\"530927\",\"name\":\"沧源佤族自治县\"}],\"code\":\"530900\",\"name\":\"临沧市\"},{\"children\":[{\"code\":\"532301\",\"name\":\"楚雄市\"},{\"code\":\"532322\",\"name\":\"双柏县\"},{\"code\":\"532323\",\"name\":\"牟定县\"},{\"code\":\"532324\",\"name\":\"南华县\"},{\"code\":\"532325\",\"name\":\"姚安县\"},{\"code\":\"532326\",\"name\":\"大姚县\"},{\"code\":\"532327\",\"name\":\"永仁县\"},{\"code\":\"532328\",\"name\":\"元谋县\"},{\"code\":\"532329\",\"name\":\"武定县\"},{\"code\":\"532331\",\"name\":\"禄丰县\"}],\"code\":\"532300\",\"name\":\"楚雄彝族自治州\"},{\"children\":[{\"code\":\"532501\",\"name\":\"个旧市\"},{\"code\":\"532502\",\"name\":\"开远市\"},{\"code\":\"532503\",\"name\":\"蒙自市\"},{\"code\":\"532504\",\"name\":\"弥勒市\"},{\"code\":\"532523\",\"name\":\"屏边苗族自治县\"},{\"code\":\"532524\",\"name\":\"建水县\"},{\"code\":\"532525\",\"name\":\"石屏县\"},{\"code\":\"532527\",\"name\":\"泸西县\"},{\"code\":\"532528\",\"name\":\"元阳县\"},{\"code\":\"532529\",\"name\":\"红河县\"},{\"code\":\"532530\",\"name\":\"金平苗族瑶族傣族自治县\"},{\"code\":\"532531\",\"name\":\"绿春县\"},{\"code\":\"532532\",\"name\":\"河口瑶族自治县\"}],\"code\":\"532500\",\"name\":\"红河哈尼族彝族自治州\"},{\"children\":[{\"code\":\"532601\",\"name\":\"文山市\"},{\"code\":\"532622\",\"name\":\"砚山县\"},{\"code\":\"532623\",\"name\":\"西畴县\"},{\"code\":\"532624\",\"name\":\"麻栗坡县\"},{\"code\":\"532625\",\"name\":\"马关县\"},{\"code\":\"532626\",\"name\":\"丘北县\"},{\"code\":\"532627\",\"name\":\"广南县\"},{\"code\":\"532628\",\"name\":\"富宁县\"}],\"code\":\"532600\",\"name\":\"文山壮族苗族自治州\"},{\"children\":[{\"code\":\"532801\",\"name\":\"景洪市\"},{\"code\":\"532822\",\"name\":\"勐海县\"},{\"code\":\"532823\",\"name\":\"勐腊县\"}],\"code\":\"532800\",\"name\":\"西双版纳傣族自治州\"},{\"children\":[{\"code\":\"532901\",\"name\":\"大理市\"},{\"code\":\"532922\",\"name\":\"漾濞彝族自治县\"},{\"code\":\"532923\",\"name\":\"祥云县\"},{\"code\":\"532924\",\"name\":\"宾川县\"},{\"code\":\"532925\",\"name\":\"弥渡县\"},{\"code\":\"532926\",\"name\":\"南涧彝族自治县\"},{\"code\":\"532927\",\"name\":\"巍山彝族回族自治县\"},{\"code\":\"532928\",\"name\":\"永平县\"},{\"code\":\"532929\",\"name\":\"云龙县\"},{\"code\":\"532930\",\"name\":\"洱源县\"},{\"code\":\"532931\",\"name\":\"剑川县\"},{\"code\":\"532932\",\"name\":\"鹤庆县\"}],\"code\":\"532900\",\"name\":\"大理白族自治州\"},{\"children\":[{\"code\":\"533102\",\"name\":\"瑞丽市\"},{\"code\":\"533103\",\"name\":\"芒市\"},{\"code\":\"533122\",\"name\":\"梁河县\"},{\"code\":\"533123\",\"name\":\"盈江县\"},{\"code\":\"533124\",\"name\":\"陇川县\"}],\"code\":\"533100\",\"name\":\"德宏傣族景颇族自治州\"},{\"children\":[{\"code\":\"533301\",\"name\":\"泸水市\"},{\"code\":\"533323\",\"name\":\"福贡县\"},{\"code\":\"533324\",\"name\":\"贡山独龙族怒族自治县\"},{\"code\":\"533325\",\"name\":\"兰坪白族普米族自治县\"}],\"code\":\"533300\",\"name\":\"怒江傈僳族自治州\"},{\"children\":[{\"code\":\"533401\",\"name\":\"香格里拉市\"},{\"code\":\"533422\",\"name\":\"德钦县\"},{\"code\":\"533423\",\"name\":\"维西傈僳族自治县\"}],\"code\":\"533400\",\"name\":\"迪庆藏族自治州\"}],\"code\":\"530000\",\"name\":\"云南省\"},{\"children\":[{\"children\":[{\"code\":\"540101\",\"name\":\"市辖区\"},{\"code\":\"540102\",\"name\":\"城关区\"},{\"code\":\"540103\",\"name\":\"堆龙德庆区\"},{\"code\":\"540121\",\"name\":\"林周县\"},{\"code\":\"540122\",\"name\":\"当雄县\"},{\"code\":\"540123\",\"name\":\"尼木县\"},{\"code\":\"540124\",\"name\":\"曲水县\"},{\"code\":\"540126\",\"name\":\"达孜县\"},{\"code\":\"540127\",\"name\":\"墨竹工卡县\"}],\"code\":\"540100\",\"name\":\"拉萨市\"},{\"children\":[{\"code\":\"540202\",\"name\":\"桑珠孜区\"},{\"code\":\"540221\",\"name\":\"南木林县\"},{\"code\":\"540222\",\"name\":\"江孜县\"},{\"code\":\"540223\",\"name\":\"定日县\"},{\"code\":\"540224\",\"name\":\"萨迦县\"},{\"code\":\"540225\",\"name\":\"拉孜县\"},{\"code\":\"540226\",\"name\":\"昂仁县\"},{\"code\":\"540227\",\"name\":\"谢通门县\"},{\"code\":\"540228\",\"name\":\"白朗县\"},{\"code\":\"540229\",\"name\":\"仁布县\"},{\"code\":\"540230\",\"name\":\"康马县\"},{\"code\":\"540231\",\"name\":\"定结县\"},{\"code\":\"540232\",\"name\":\"仲巴县\"},{\"code\":\"540233\",\"name\":\"亚东县\"},{\"code\":\"540234\",\"name\":\"吉隆县\"},{\"code\":\"540235\",\"name\":\"聂拉木县\"},{\"code\":\"540236\",\"name\":\"萨嘎县\"},{\"code\":\"540237\",\"name\":\"岗巴县\"}],\"code\":\"540200\",\"name\":\"日喀则市\"},{\"children\":[{\"code\":\"540302\",\"name\":\"卡若区\"},{\"code\":\"540321\",\"name\":\"江达县\"},{\"code\":\"540322\",\"name\":\"贡觉县\"},{\"code\":\"540323\",\"name\":\"类乌齐县\"},{\"code\":\"540324\",\"name\":\"丁青县\"},{\"code\":\"540325\",\"name\":\"察雅县\"},{\"code\":\"540326\",\"name\":\"八宿县\"},{\"code\":\"540327\",\"name\":\"左贡县\"},{\"code\":\"540328\",\"name\":\"芒康县\"},{\"code\":\"540329\",\"name\":\"洛隆县\"},{\"code\":\"540330\",\"name\":\"边坝县\"}],\"code\":\"540300\",\"name\":\"昌都市\"},{\"children\":[{\"code\":\"540402\",\"name\":\"巴宜区\"},{\"code\":\"540421\",\"name\":\"工布江达县\"},{\"code\":\"540422\",\"name\":\"米林县\"},{\"code\":\"540423\",\"name\":\"墨脱县\"},{\"code\":\"540424\",\"name\":\"波密县\"},{\"code\":\"540425\",\"name\":\"察隅县\"},{\"code\":\"540426\",\"name\":\"朗县\"}],\"code\":\"540400\",\"name\":\"林芝市\"},{\"children\":[{\"code\":\"540501\",\"name\":\"市辖区\"},{\"code\":\"540502\",\"name\":\"乃东区\"},{\"code\":\"540521\",\"name\":\"扎囊县\"},{\"code\":\"540522\",\"name\":\"贡嘎县\"},{\"code\":\"540523\",\"name\":\"桑日县\"},{\"code\":\"540524\",\"name\":\"琼结县\"},{\"code\":\"540525\",\"name\":\"曲松县\"},{\"code\":\"540526\",\"name\":\"措美县\"},{\"code\":\"540527\",\"name\":\"洛扎县\"},{\"code\":\"540528\",\"name\":\"加查县\"},{\"code\":\"540529\",\"name\":\"隆子县\"},{\"code\":\"540530\",\"name\":\"错那县\"},{\"code\":\"540531\",\"name\":\"浪卡子县\"}],\"code\":\"540500\",\"name\":\"山南市\"},{\"children\":[{\"code\":\"542421\",\"name\":\"那曲县\"},{\"code\":\"542422\",\"name\":\"嘉黎县\"},{\"code\":\"542423\",\"name\":\"比如县\"},{\"code\":\"542424\",\"name\":\"聂荣县\"},{\"code\":\"542425\",\"name\":\"安多县\"},{\"code\":\"542426\",\"name\":\"申扎县\"},{\"code\":\"542427\",\"name\":\"索县\"},{\"code\":\"542428\",\"name\":\"班戈县\"},{\"code\":\"542429\",\"name\":\"巴青县\"},{\"code\":\"542430\",\"name\":\"尼玛县\"},{\"code\":\"542431\",\"name\":\"双湖县\"}],\"code\":\"542400\",\"name\":\"那曲地区\"},{\"children\":[{\"code\":\"542521\",\"name\":\"普兰县\"},{\"code\":\"542522\",\"name\":\"札达县\"},{\"code\":\"542523\",\"name\":\"噶尔县\"},{\"code\":\"542524\",\"name\":\"日土县\"},{\"code\":\"542525\",\"name\":\"革吉县\"},{\"code\":\"542526\",\"name\":\"改则县\"},{\"code\":\"542527\",\"name\":\"措勤县\"}],\"code\":\"542500\",\"name\":\"阿里地区\"}],\"code\":\"540000\",\"name\":\"西藏自治区\"},{\"children\":[{\"children\":[{\"code\":\"610101\",\"name\":\"市辖区\"},{\"code\":\"610102\",\"name\":\"新城区\"},{\"code\":\"610103\",\"name\":\"碑林区\"},{\"code\":\"610104\",\"name\":\"莲湖区\"},{\"code\":\"610111\",\"name\":\"灞桥区\"},{\"code\":\"610112\",\"name\":\"未央区\"},{\"code\":\"610113\",\"name\":\"雁塔区\"},{\"code\":\"610114\",\"name\":\"阎良区\"},{\"code\":\"610115\",\"name\":\"临潼区\"},{\"code\":\"610116\",\"name\":\"长安区\"},{\"code\":\"610117\",\"name\":\"高陵区\"},{\"code\":\"610122\",\"name\":\"蓝田县\"},{\"code\":\"610124\",\"name\":\"周至县\"},{\"code\":\"610125\",\"name\":\"户县\"}],\"code\":\"610100\",\"name\":\"西安市\"},{\"children\":[{\"code\":\"610201\",\"name\":\"市辖区\"},{\"code\":\"610202\",\"name\":\"王益区\"},{\"code\":\"610203\",\"name\":\"印台区\"},{\"code\":\"610204\",\"name\":\"耀州区\"},{\"code\":\"610222\",\"name\":\"宜君县\"}],\"code\":\"610200\",\"name\":\"铜川市\"},{\"children\":[{\"code\":\"610301\",\"name\":\"市辖区\"},{\"code\":\"610302\",\"name\":\"渭滨区\"},{\"code\":\"610303\",\"name\":\"金台区\"},{\"code\":\"610304\",\"name\":\"陈仓区\"},{\"code\":\"610322\",\"name\":\"凤翔县\"},{\"code\":\"610323\",\"name\":\"岐山县\"},{\"code\":\"610324\",\"name\":\"扶风县\"},{\"code\":\"610326\",\"name\":\"眉县\"},{\"code\":\"610327\",\"name\":\"陇县\"},{\"code\":\"610328\",\"name\":\"千阳县\"},{\"code\":\"610329\",\"name\":\"麟游县\"},{\"code\":\"610330\",\"name\":\"凤县\"},{\"code\":\"610331\",\"name\":\"太白县\"}],\"code\":\"610300\",\"name\":\"宝鸡市\"},{\"children\":[{\"code\":\"610401\",\"name\":\"市辖区\"},{\"code\":\"610402\",\"name\":\"秦都区\"},{\"code\":\"610403\",\"name\":\"杨陵区\"},{\"code\":\"610404\",\"name\":\"渭城区\"},{\"code\":\"610422\",\"name\":\"三原县\"},{\"code\":\"610423\",\"name\":\"泾阳县\"},{\"code\":\"610424\",\"name\":\"乾县\"},{\"code\":\"610425\",\"name\":\"礼泉县\"},{\"code\":\"610426\",\"name\":\"永寿县\"},{\"code\":\"610427\",\"name\":\"彬县\"},{\"code\":\"610428\",\"name\":\"长武县\"},{\"code\":\"610429\",\"name\":\"旬邑县\"},{\"code\":\"610430\",\"name\":\"淳化县\"},{\"code\":\"610431\",\"name\":\"武功县\"},{\"code\":\"610481\",\"name\":\"兴平市\"}],\"code\":\"610400\",\"name\":\"咸阳市\"},{\"children\":[{\"code\":\"610501\",\"name\":\"市辖区\"},{\"code\":\"610502\",\"name\":\"临渭区\"},{\"code\":\"610503\",\"name\":\"华州区\"},{\"code\":\"610522\",\"name\":\"潼关县\"},{\"code\":\"610523\",\"name\":\"大荔县\"},{\"code\":\"610524\",\"name\":\"合阳县\"},{\"code\":\"610525\",\"name\":\"澄城县\"},{\"code\":\"610526\",\"name\":\"蒲城县\"},{\"code\":\"610527\",\"name\":\"白水县\"},{\"code\":\"610528\",\"name\":\"富平县\"},{\"code\":\"610581\",\"name\":\"韩城市\"},{\"code\":\"610582\",\"name\":\"华阴市\"}],\"code\":\"610500\",\"name\":\"渭南市\"},{\"children\":[{\"code\":\"610601\",\"name\":\"市辖区\"},{\"code\":\"610602\",\"name\":\"宝塔区\"},{\"code\":\"610603\",\"name\":\"安塞区\"},{\"code\":\"610621\",\"name\":\"延长县\"},{\"code\":\"610622\",\"name\":\"延川县\"},{\"code\":\"610623\",\"name\":\"子长县\"},{\"code\":\"610625\",\"name\":\"志丹县\"},{\"code\":\"610626\",\"name\":\"吴起县\"},{\"code\":\"610627\",\"name\":\"甘泉县\"},{\"code\":\"610628\",\"name\":\"富县\"},{\"code\":\"610629\",\"name\":\"洛川县\"},{\"code\":\"610630\",\"name\":\"宜川县\"},{\"code\":\"610631\",\"name\":\"黄龙县\"},{\"code\":\"610632\",\"name\":\"黄陵县\"}],\"code\":\"610600\",\"name\":\"延安市\"},{\"children\":[{\"code\":\"610701\",\"name\":\"市辖区\"},{\"code\":\"610702\",\"name\":\"汉台区\"},{\"code\":\"610721\",\"name\":\"南郑县\"},{\"code\":\"610722\",\"name\":\"城固县\"},{\"code\":\"610723\",\"name\":\"洋县\"},{\"code\":\"610724\",\"name\":\"西乡县\"},{\"code\":\"610725\",\"name\":\"勉县\"},{\"code\":\"610726\",\"name\":\"宁强县\"},{\"code\":\"610727\",\"name\":\"略阳县\"},{\"code\":\"610728\",\"name\":\"镇巴县\"},{\"code\":\"610729\",\"name\":\"留坝县\"},{\"code\":\"610730\",\"name\":\"佛坪县\"}],\"code\":\"610700\",\"name\":\"汉中市\"},{\"children\":[{\"code\":\"610801\",\"name\":\"市辖区\"},{\"code\":\"610802\",\"name\":\"榆阳区\"},{\"code\":\"610803\",\"name\":\"横山区\"},{\"code\":\"610821\",\"name\":\"神木县\"},{\"code\":\"610822\",\"name\":\"府谷县\"},{\"code\":\"610824\",\"name\":\"靖边县\"},{\"code\":\"610825\",\"name\":\"定边县\"},{\"code\":\"610826\",\"name\":\"绥德县\"},{\"code\":\"610827\",\"name\":\"米脂县\"},{\"code\":\"610828\",\"name\":\"佳县\"},{\"code\":\"610829\",\"name\":\"吴堡县\"},{\"code\":\"610830\",\"name\":\"清涧县\"},{\"code\":\"610831\",\"name\":\"子洲县\"}],\"code\":\"610800\",\"name\":\"榆林市\"},{\"children\":[{\"code\":\"610901\",\"name\":\"市辖区\"},{\"code\":\"610902\",\"name\":\"汉滨区\"},{\"code\":\"610921\",\"name\":\"汉阴县\"},{\"code\":\"610922\",\"name\":\"石泉县\"},{\"code\":\"610923\",\"name\":\"宁陕县\"},{\"code\":\"610924\",\"name\":\"紫阳县\"},{\"code\":\"610925\",\"name\":\"岚皋县\"},{\"code\":\"610926\",\"name\":\"平利县\"},{\"code\":\"610927\",\"name\":\"镇坪县\"},{\"code\":\"610928\",\"name\":\"旬阳县\"},{\"code\":\"610929\",\"name\":\"白河县\"}],\"code\":\"610900\",\"name\":\"安康市\"},{\"children\":[{\"code\":\"611001\",\"name\":\"市辖区\"},{\"code\":\"611002\",\"name\":\"商州区\"},{\"code\":\"611021\",\"name\":\"洛南县\"},{\"code\":\"611022\",\"name\":\"丹凤县\"},{\"code\":\"611023\",\"name\":\"商南县\"},{\"code\":\"611024\",\"name\":\"山阳县\"},{\"code\":\"611025\",\"name\":\"镇安县\"},{\"code\":\"611026\",\"name\":\"柞水县\"}],\"code\":\"611000\",\"name\":\"商洛市\"}],\"code\":\"610000\",\"name\":\"陕西省\"},{\"children\":[{\"children\":[{\"code\":\"620101\",\"name\":\"市辖区\"},{\"code\":\"620102\",\"name\":\"城关区\"},{\"code\":\"620103\",\"name\":\"七里河区\"},{\"code\":\"620104\",\"name\":\"西固区\"},{\"code\":\"620105\",\"name\":\"安宁区\"},{\"code\":\"620111\",\"name\":\"红古区\"},{\"code\":\"620121\",\"name\":\"永登县\"},{\"code\":\"620122\",\"name\":\"皋兰县\"},{\"code\":\"620123\",\"name\":\"榆中县\"}],\"code\":\"620100\",\"name\":\"兰州市\"},{\"children\":[{\"code\":\"620201\",\"name\":\"市辖区\"}],\"code\":\"620200\",\"name\":\"嘉峪关市\"},{\"children\":[{\"code\":\"620301\",\"name\":\"市辖区\"},{\"code\":\"620302\",\"name\":\"金川区\"},{\"code\":\"620321\",\"name\":\"永昌县\"}],\"code\":\"620300\",\"name\":\"金昌市\"},{\"children\":[{\"code\":\"620401\",\"name\":\"市辖区\"},{\"code\":\"620402\",\"name\":\"白银区\"},{\"code\":\"620403\",\"name\":\"平川区\"},{\"code\":\"620421\",\"name\":\"靖远县\"},{\"code\":\"620422\",\"name\":\"会宁县\"},{\"code\":\"620423\",\"name\":\"景泰县\"}],\"code\":\"620400\",\"name\":\"白银市\"},{\"children\":[{\"code\":\"620501\",\"name\":\"市辖区\"},{\"code\":\"620502\",\"name\":\"秦州区\"},{\"code\":\"620503\",\"name\":\"麦积区\"},{\"code\":\"620521\",\"name\":\"清水县\"},{\"code\":\"620522\",\"name\":\"秦安县\"},{\"code\":\"620523\",\"name\":\"甘谷县\"},{\"code\":\"620524\",\"name\":\"武山县\"},{\"code\":\"620525\",\"name\":\"张家川回族自治县\"}],\"code\":\"620500\",\"name\":\"天水市\"},{\"children\":[{\"code\":\"620601\",\"name\":\"市辖区\"},{\"code\":\"620602\",\"name\":\"凉州区\"},{\"code\":\"620621\",\"name\":\"民勤县\"},{\"code\":\"620622\",\"name\":\"古浪县\"},{\"code\":\"620623\",\"name\":\"天祝藏族自治县\"}],\"code\":\"620600\",\"name\":\"武威市\"},{\"children\":[{\"code\":\"620701\",\"name\":\"市辖区\"},{\"code\":\"620702\",\"name\":\"甘州区\"},{\"code\":\"620721\",\"name\":\"肃南裕固族自治县\"},{\"code\":\"620722\",\"name\":\"民乐县\"},{\"code\":\"620723\",\"name\":\"临泽县\"},{\"code\":\"620724\",\"name\":\"高台县\"},{\"code\":\"620725\",\"name\":\"山丹县\"}],\"code\":\"620700\",\"name\":\"张掖市\"},{\"children\":[{\"code\":\"620801\",\"name\":\"市辖区\"},{\"code\":\"620802\",\"name\":\"崆峒区\"},{\"code\":\"620821\",\"name\":\"泾川县\"},{\"code\":\"620822\",\"name\":\"灵台县\"},{\"code\":\"620823\",\"name\":\"崇信县\"},{\"code\":\"620824\",\"name\":\"华亭县\"},{\"code\":\"620825\",\"name\":\"庄浪县\"},{\"code\":\"620826\",\"name\":\"静宁县\"}],\"code\":\"620800\",\"name\":\"平凉市\"},{\"children\":[{\"code\":\"620901\",\"name\":\"市辖区\"},{\"code\":\"620902\",\"name\":\"肃州区\"},{\"code\":\"620921\",\"name\":\"金塔县\"},{\"code\":\"620922\",\"name\":\"瓜州县\"},{\"code\":\"620923\",\"name\":\"肃北蒙古族自治县\"},{\"code\":\"620924\",\"name\":\"阿克塞哈萨克族自治县\"},{\"code\":\"620981\",\"name\":\"玉门市\"},{\"code\":\"620982\",\"name\":\"敦煌市\"}],\"code\":\"620900\",\"name\":\"酒泉市\"},{\"children\":[{\"code\":\"621001\",\"name\":\"市辖区\"},{\"code\":\"621002\",\"name\":\"西峰区\"},{\"code\":\"621021\",\"name\":\"庆城县\"},{\"code\":\"621022\",\"name\":\"环县\"},{\"code\":\"621023\",\"name\":\"华池县\"},{\"code\":\"621024\",\"name\":\"合水县\"},{\"code\":\"621025\",\"name\":\"正宁县\"},{\"code\":\"621026\",\"name\":\"宁县\"},{\"code\":\"621027\",\"name\":\"镇原县\"}],\"code\":\"621000\",\"name\":\"庆阳市\"},{\"children\":[{\"code\":\"621101\",\"name\":\"市辖区\"},{\"code\":\"621102\",\"name\":\"安定区\"},{\"code\":\"621121\",\"name\":\"通渭县\"},{\"code\":\"621122\",\"name\":\"陇西县\"},{\"code\":\"621123\",\"name\":\"渭源县\"},{\"code\":\"621124\",\"name\":\"临洮县\"},{\"code\":\"621125\",\"name\":\"漳县\"},{\"code\":\"621126\",\"name\":\"岷县\"}],\"code\":\"621100\",\"name\":\"定西市\"},{\"children\":[{\"code\":\"621201\",\"name\":\"市辖区\"},{\"code\":\"621202\",\"name\":\"武都区\"},{\"code\":\"621221\",\"name\":\"成县\"},{\"code\":\"621222\",\"name\":\"文县\"},{\"code\":\"621223\",\"name\":\"宕昌县\"},{\"code\":\"621224\",\"name\":\"康县\"},{\"code\":\"621225\",\"name\":\"西和县\"},{\"code\":\"621226\",\"name\":\"礼县\"},{\"code\":\"621227\",\"name\":\"徽县\"},{\"code\":\"621228\",\"name\":\"两当县\"}],\"code\":\"621200\",\"name\":\"陇南市\"},{\"children\":[{\"code\":\"622901\",\"name\":\"临夏市\"},{\"code\":\"622921\",\"name\":\"临夏县\"},{\"code\":\"622922\",\"name\":\"康乐县\"},{\"code\":\"622923\",\"name\":\"永靖县\"},{\"code\":\"622924\",\"name\":\"广河县\"},{\"code\":\"622925\",\"name\":\"和政县\"},{\"code\":\"622926\",\"name\":\"东乡族自治县\"},{\"code\":\"622927\",\"name\":\"积石山保安族东乡族撒拉族自治县\"}],\"code\":\"622900\",\"name\":\"临夏回族自治州\"},{\"children\":[{\"code\":\"623001\",\"name\":\"合作市\"},{\"code\":\"623021\",\"name\":\"临潭县\"},{\"code\":\"623022\",\"name\":\"卓尼县\"},{\"code\":\"623023\",\"name\":\"舟曲县\"},{\"code\":\"623024\",\"name\":\"迭部县\"},{\"code\":\"623025\",\"name\":\"玛曲县\"},{\"code\":\"623026\",\"name\":\"碌曲县\"},{\"code\":\"623027\",\"name\":\"夏河县\"}],\"code\":\"623000\",\"name\":\"甘南藏族自治州\"}],\"code\":\"620000\",\"name\":\"甘肃省\"},{\"children\":[{\"children\":[{\"code\":\"630101\",\"name\":\"市辖区\"},{\"code\":\"630102\",\"name\":\"城东区\"},{\"code\":\"630103\",\"name\":\"城中区\"},{\"code\":\"630104\",\"name\":\"城西区\"},{\"code\":\"630105\",\"name\":\"城北区\"},{\"code\":\"630121\",\"name\":\"大通回族土族自治县\"},{\"code\":\"630122\",\"name\":\"湟中县\"},{\"code\":\"630123\",\"name\":\"湟源县\"}],\"code\":\"630100\",\"name\":\"西宁市\"},{\"children\":[{\"code\":\"630202\",\"name\":\"乐都区\"},{\"code\":\"630203\",\"name\":\"平安区\"},{\"code\":\"630222\",\"name\":\"民和回族土族自治县\"},{\"code\":\"630223\",\"name\":\"互助土族自治县\"},{\"code\":\"630224\",\"name\":\"化隆回族自治县\"},{\"code\":\"630225\",\"name\":\"循化撒拉族自治县\"}],\"code\":\"630200\",\"name\":\"海东市\"},{\"children\":[{\"code\":\"632221\",\"name\":\"门源回族自治县\"},{\"code\":\"632222\",\"name\":\"祁连县\"},{\"code\":\"632223\",\"name\":\"海晏县\"},{\"code\":\"632224\",\"name\":\"刚察县\"}],\"code\":\"632200\",\"name\":\"海北藏族自治州\"},{\"children\":[{\"code\":\"632321\",\"name\":\"同仁县\"},{\"code\":\"632322\",\"name\":\"尖扎县\"},{\"code\":\"632323\",\"name\":\"泽库县\"},{\"code\":\"632324\",\"name\":\"河南蒙古族自治县\"}],\"code\":\"632300\",\"name\":\"黄南藏族自治州\"},{\"children\":[{\"code\":\"632521\",\"name\":\"共和县\"},{\"code\":\"632522\",\"name\":\"同德县\"},{\"code\":\"632523\",\"name\":\"贵德县\"},{\"code\":\"632524\",\"name\":\"兴海县\"},{\"code\":\"632525\",\"name\":\"贵南县\"}],\"code\":\"632500\",\"name\":\"海南藏族自治州\"},{\"children\":[{\"code\":\"632621\",\"name\":\"玛沁县\"},{\"code\":\"632622\",\"name\":\"班玛县\"},{\"code\":\"632623\",\"name\":\"甘德县\"},{\"code\":\"632624\",\"name\":\"达日县\"},{\"code\":\"632625\",\"name\":\"久治县\"},{\"code\":\"632626\",\"name\":\"玛多县\"}],\"code\":\"632600\",\"name\":\"果洛藏族自治州\"},{\"children\":[{\"code\":\"632701\",\"name\":\"玉树市\"},{\"code\":\"632722\",\"name\":\"杂多县\"},{\"code\":\"632723\",\"name\":\"称多县\"},{\"code\":\"632724\",\"name\":\"治多县\"},{\"code\":\"632725\",\"name\":\"囊谦县\"},{\"code\":\"632726\",\"name\":\"曲麻莱县\"}],\"code\":\"632700\",\"name\":\"玉树藏族自治州\"},{\"children\":[{\"code\":\"632801\",\"name\":\"格尔木市\"},{\"code\":\"632802\",\"name\":\"德令哈市\"},{\"code\":\"632821\",\"name\":\"乌兰县\"},{\"code\":\"632822\",\"name\":\"都兰县\"},{\"code\":\"632823\",\"name\":\"天峻县\"}],\"code\":\"632800\",\"name\":\"海西蒙古族藏族自治州\"}],\"code\":\"630000\",\"name\":\"青海省\"},{\"children\":[{\"children\":[{\"code\":\"640101\",\"name\":\"市辖区\"},{\"code\":\"640104\",\"name\":\"兴庆区\"},{\"code\":\"640105\",\"name\":\"西夏区\"},{\"code\":\"640106\",\"name\":\"金凤区\"},{\"code\":\"640121\",\"name\":\"永宁县\"},{\"code\":\"640122\",\"name\":\"贺兰县\"},{\"code\":\"640181\",\"name\":\"灵武市\"}],\"code\":\"640100\",\"name\":\"银川市\"},{\"children\":[{\"code\":\"640201\",\"name\":\"市辖区\"},{\"code\":\"640202\",\"name\":\"大武口区\"},{\"code\":\"640205\",\"name\":\"惠农区\"},{\"code\":\"640221\",\"name\":\"平罗县\"}],\"code\":\"640200\",\"name\":\"石嘴山市\"},{\"children\":[{\"code\":\"640301\",\"name\":\"市辖区\"},{\"code\":\"640302\",\"name\":\"利通区\"},{\"code\":\"640303\",\"name\":\"红寺堡区\"},{\"code\":\"640323\",\"name\":\"盐池县\"},{\"code\":\"640324\",\"name\":\"同心县\"},{\"code\":\"640381\",\"name\":\"青铜峡市\"}],\"code\":\"640300\",\"name\":\"吴忠市\"},{\"children\":[{\"code\":\"640401\",\"name\":\"市辖区\"},{\"code\":\"640402\",\"name\":\"原州区\"},{\"code\":\"640422\",\"name\":\"西吉县\"},{\"code\":\"640423\",\"name\":\"隆德县\"},{\"code\":\"640424\",\"name\":\"泾源县\"},{\"code\":\"640425\",\"name\":\"彭阳县\"}],\"code\":\"640400\",\"name\":\"固原市\"},{\"children\":[{\"code\":\"640501\",\"name\":\"市辖区\"},{\"code\":\"640502\",\"name\":\"沙坡头区\"},{\"code\":\"640521\",\"name\":\"中宁县\"},{\"code\":\"640522\",\"name\":\"海原县\"}],\"code\":\"640500\",\"name\":\"中卫市\"}],\"code\":\"640000\",\"name\":\"宁夏回族自治区\"},{\"children\":[{\"children\":[{\"code\":\"650101\",\"name\":\"市辖区\"},{\"code\":\"650102\",\"name\":\"天山区\"},{\"code\":\"650103\",\"name\":\"沙依巴克区\"},{\"code\":\"650104\",\"name\":\"新市区\"},{\"code\":\"650105\",\"name\":\"水磨沟区\"},{\"code\":\"650106\",\"name\":\"头屯河区\"},{\"code\":\"650107\",\"name\":\"达坂城区\"},{\"code\":\"650109\",\"name\":\"米东区\"},{\"code\":\"650121\",\"name\":\"乌鲁木齐县\"}],\"code\":\"650100\",\"name\":\"乌鲁木齐市\"},{\"children\":[{\"code\":\"650201\",\"name\":\"市辖区\"},{\"code\":\"650202\",\"name\":\"独山子区\"},{\"code\":\"650203\",\"name\":\"克拉玛依区\"},{\"code\":\"650204\",\"name\":\"白碱滩区\"},{\"code\":\"650205\",\"name\":\"乌尔禾区\"}],\"code\":\"650200\",\"name\":\"克拉玛依市\"},{\"children\":[{\"code\":\"650402\",\"name\":\"高昌区\"},{\"code\":\"650421\",\"name\":\"鄯善县\"},{\"code\":\"650422\",\"name\":\"托克逊县\"}],\"code\":\"650400\",\"name\":\"吐鲁番市\"},{\"children\":[{\"code\":\"650502\",\"name\":\"伊州区\"},{\"code\":\"650521\",\"name\":\"巴里坤哈萨克自治县\"},{\"code\":\"650522\",\"name\":\"伊吾县\"}],\"code\":\"650500\",\"name\":\"哈密市\"},{\"children\":[{\"code\":\"652301\",\"name\":\"昌吉市\"},{\"code\":\"652302\",\"name\":\"阜康市\"},{\"code\":\"652323\",\"name\":\"呼图壁县\"},{\"code\":\"652324\",\"name\":\"玛纳斯县\"},{\"code\":\"652325\",\"name\":\"奇台县\"},{\"code\":\"652327\",\"name\":\"吉木萨尔县\"},{\"code\":\"652328\",\"name\":\"木垒哈萨克自治县\"}],\"code\":\"652300\",\"name\":\"昌吉回族自治州\"},{\"children\":[{\"code\":\"652701\",\"name\":\"博乐市\"},{\"code\":\"652702\",\"name\":\"阿拉山口市\"},{\"code\":\"652722\",\"name\":\"精河县\"},{\"code\":\"652723\",\"name\":\"温泉县\"}],\"code\":\"652700\",\"name\":\"博尔塔拉蒙古自治州\"},{\"children\":[{\"code\":\"652801\",\"name\":\"库尔勒市\"},{\"code\":\"652822\",\"name\":\"轮台县\"},{\"code\":\"652823\",\"name\":\"尉犁县\"},{\"code\":\"652824\",\"name\":\"若羌县\"},{\"code\":\"652825\",\"name\":\"且末县\"},{\"code\":\"652826\",\"name\":\"焉耆回族自治县\"},{\"code\":\"652827\",\"name\":\"和静县\"},{\"code\":\"652828\",\"name\":\"和硕县\"},{\"code\":\"652829\",\"name\":\"博湖县\"}],\"code\":\"652800\",\"name\":\"巴音郭楞蒙古自治州\"},{\"children\":[{\"code\":\"652901\",\"name\":\"阿克苏市\"},{\"code\":\"652922\",\"name\":\"温宿县\"},{\"code\":\"652923\",\"name\":\"库车县\"},{\"code\":\"652924\",\"name\":\"沙雅县\"},{\"code\":\"652925\",\"name\":\"新和县\"},{\"code\":\"652926\",\"name\":\"拜城县\"},{\"code\":\"652927\",\"name\":\"乌什县\"},{\"code\":\"652928\",\"name\":\"阿瓦提县\"},{\"code\":\"652929\",\"name\":\"柯坪县\"}],\"code\":\"652900\",\"name\":\"阿克苏地区\"},{\"children\":[{\"code\":\"653001\",\"name\":\"阿图什市\"},{\"code\":\"653022\",\"name\":\"阿克陶县\"},{\"code\":\"653023\",\"name\":\"阿合奇县\"},{\"code\":\"653024\",\"name\":\"乌恰县\"}],\"code\":\"653000\",\"name\":\"克孜勒苏柯尔克孜自治州\"},{\"children\":[{\"code\":\"653101\",\"name\":\"喀什市\"},{\"code\":\"653121\",\"name\":\"疏附县\"},{\"code\":\"653122\",\"name\":\"疏勒县\"},{\"code\":\"653123\",\"name\":\"英吉沙县\"},{\"code\":\"653124\",\"name\":\"泽普县\"},{\"code\":\"653125\",\"name\":\"莎车县\"},{\"code\":\"653126\",\"name\":\"叶城县\"},{\"code\":\"653127\",\"name\":\"麦盖提县\"},{\"code\":\"653128\",\"name\":\"岳普湖县\"},{\"code\":\"653129\",\"name\":\"伽师县\"},{\"code\":\"653130\",\"name\":\"巴楚县\"},{\"code\":\"653131\",\"name\":\"塔什库尔干塔吉克自治县\"}],\"code\":\"653100\",\"name\":\"喀什地区\"},{\"children\":[{\"code\":\"653201\",\"name\":\"和田市\"},{\"code\":\"653221\",\"name\":\"和田县\"},{\"code\":\"653222\",\"name\":\"墨玉县\"},{\"code\":\"653223\",\"name\":\"皮山县\"},{\"code\":\"653224\",\"name\":\"洛浦县\"},{\"code\":\"653225\",\"name\":\"策勒县\"},{\"code\":\"653226\",\"name\":\"于田县\"},{\"code\":\"653227\",\"name\":\"民丰县\"}],\"code\":\"653200\",\"name\":\"和田地区\"},{\"children\":[{\"code\":\"654002\",\"name\":\"伊宁市\"},{\"code\":\"654003\",\"name\":\"奎屯市\"},{\"code\":\"654004\",\"name\":\"霍尔果斯市\"},{\"code\":\"654021\",\"name\":\"伊宁县\"},{\"code\":\"654022\",\"name\":\"察布查尔锡伯自治县\"},{\"code\":\"654023\",\"name\":\"霍城县\"},{\"code\":\"654024\",\"name\":\"巩留县\"},{\"code\":\"654025\",\"name\":\"新源县\"},{\"code\":\"654026\",\"name\":\"昭苏县\"},{\"code\":\"654027\",\"name\":\"特克斯县\"},{\"code\":\"654028\",\"name\":\"尼勒克县\"}],\"code\":\"654000\",\"name\":\"伊犁哈萨克自治州\"},{\"children\":[{\"code\":\"654201\",\"name\":\"塔城市\"},{\"code\":\"654202\",\"name\":\"乌苏市\"},{\"code\":\"654221\",\"name\":\"额敏县\"},{\"code\":\"654223\",\"name\":\"沙湾县\"},{\"code\":\"654224\",\"name\":\"托里县\"},{\"code\":\"654225\",\"name\":\"裕民县\"},{\"code\":\"654226\",\"name\":\"和布克赛尔蒙古自治县\"}],\"code\":\"654200\",\"name\":\"塔城地区\"},{\"children\":[{\"code\":\"654301\",\"name\":\"阿勒泰市\"},{\"code\":\"654321\",\"name\":\"布尔津县\"},{\"code\":\"654322\",\"name\":\"富蕴县\"},{\"code\":\"654323\",\"name\":\"福海县\"},{\"code\":\"654324\",\"name\":\"哈巴河县\"},{\"code\":\"654325\",\"name\":\"青河县\"},{\"code\":\"654326\",\"name\":\"吉木乃县\"}],\"code\":\"654300\",\"name\":\"阿勒泰地区\"},{\"children\":[{\"code\":\"659001\",\"name\":\"石河子市\"},{\"code\":\"659002\",\"name\":\"阿拉尔市\"},{\"code\":\"659003\",\"name\":\"图木舒克市\"},{\"code\":\"659004\",\"name\":\"五家渠市\"},{\"code\":\"659006\",\"name\":\"铁门关市\"}],\"code\":\"659000\",\"name\":\"自治区直辖县级行政区划\"}],\"code\":\"650000\",\"name\":\"新疆维吾尔自治区\"},{\"children\":[{\"children\":[{\"code\":\"710101\",\"name\":\"中正区\"},{\"code\":\"710102\",\"name\":\"大同区\"},{\"code\":\"710103\",\"name\":\"中山区\"},{\"code\":\"710104\",\"name\":\"松山区\"},{\"code\":\"710105\",\"name\":\"大安区\"},{\"code\":\"710106\",\"name\":\"万华区\"},{\"code\":\"710107\",\"name\":\"信义区\"},{\"code\":\"710108\",\"name\":\"士林区\"},{\"code\":\"710109\",\"name\":\"北投区\"},{\"code\":\"710110\",\"name\":\"内湖区\"},{\"code\":\"710111\",\"name\":\"南港区\"},{\"code\":\"710112\",\"name\":\"文山区\"},{\"code\":\"710113\",\"name\":\"其它区\"}],\"code\":\"710100\",\"name\":\"台北市\"},{\"children\":[{\"code\":\"710201\",\"name\":\"新兴区\"},{\"code\":\"710202\",\"name\":\"前金区\"},{\"code\":\"710203\",\"name\":\"芩雅区\"},{\"code\":\"710204\",\"name\":\"盐埕区\"},{\"code\":\"710205\",\"name\":\"鼓山区\"},{\"code\":\"710206\",\"name\":\"旗津区\"},{\"code\":\"710207\",\"name\":\"前镇区\"},{\"code\":\"710208\",\"name\":\"三民区\"},{\"code\":\"710209\",\"name\":\"左营区\"},{\"code\":\"710210\",\"name\":\"楠梓区\"},{\"code\":\"710211\",\"name\":\"小港区\"},{\"code\":\"710212\",\"name\":\"其它区\"}],\"code\":\"710200\",\"name\":\"高雄市\"},{\"children\":[{\"code\":\"710301\",\"name\":\"中西区\"},{\"code\":\"710302\",\"name\":\"东区\"},{\"code\":\"710303\",\"name\":\"南区\"},{\"code\":\"710304\",\"name\":\"北区\"},{\"code\":\"710305\",\"name\":\"安平区\"},{\"code\":\"710306\",\"name\":\"安南区\"},{\"code\":\"710307\",\"name\":\"其它区\"}],\"code\":\"710300\",\"name\":\"台南市\"},{\"children\":[{\"code\":\"710401\",\"name\":\"中区\"},{\"code\":\"710402\",\"name\":\"东区\"},{\"code\":\"710403\",\"name\":\"南区\"},{\"code\":\"710404\",\"name\":\"西区\"},{\"code\":\"710405\",\"name\":\"北区\"},{\"code\":\"710406\",\"name\":\"北屯区\"},{\"code\":\"710407\",\"name\":\"西屯区\"},{\"code\":\"710408\",\"name\":\"南屯区\"},{\"code\":\"710409\",\"name\":\"其它区\"}],\"code\":\"710400\",\"name\":\"台中市\"},{\"children\":[{\"code\":\"710501\",\"name\":\"金城镇\"},{\"code\":\"710502\",\"name\":\"金湖镇\"},{\"code\":\"710503\",\"name\":\"金宁乡\"},{\"code\":\"710504\",\"name\":\"金沙镇\"},{\"code\":\"710505\",\"name\":\"烈屿乡\"},{\"code\":\"710506\",\"name\":\"乌坵乡\"}],\"code\":\"710500\",\"name\":\"金门县\"},{\"children\":[{\"code\":\"710601\",\"name\":\"草屯镇\"},{\"code\":\"710602\",\"name\":\"国姓乡\"},{\"code\":\"710603\",\"name\":\"集集镇\"},{\"code\":\"710604\",\"name\":\"鹿谷乡\"},{\"code\":\"710605\",\"name\":\"名间乡\"},{\"code\":\"710606\",\"name\":\"南投市\"},{\"code\":\"710607\",\"name\":\"埔里镇\"},{\"code\":\"710608\",\"name\":\"仁爱乡\"},{\"code\":\"710609\",\"name\":\"水里乡\"},{\"code\":\"710610\",\"name\":\"信义乡\"},{\"code\":\"710611\",\"name\":\"鱼池乡\"},{\"code\":\"710612\",\"name\":\"中寮乡\"},{\"code\":\"710613\",\"name\":\"竹山镇\"}],\"code\":\"710600\",\"name\":\"南投县\"},{\"children\":[{\"code\":\"710701\",\"name\":\"仁爱区\"},{\"code\":\"710702\",\"name\":\"信义区\"},{\"code\":\"710703\",\"name\":\"中正区\"},{\"code\":\"710704\",\"name\":\"中山区\"},{\"code\":\"710705\",\"name\":\"安乐区\"},{\"code\":\"710706\",\"name\":\"暖暖区\"},{\"code\":\"710707\",\"name\":\"七堵区\"},{\"code\":\"710708\",\"name\":\"其它区\"}],\"code\":\"710700\",\"name\":\"基隆市\"},{\"children\":[{\"code\":\"710801\",\"name\":\"东区\"},{\"code\":\"710802\",\"name\":\"北区\"},{\"code\":\"710803\",\"name\":\"香山区\"},{\"code\":\"710804\",\"name\":\"其它区\"}],\"code\":\"710800\",\"name\":\"新竹市\"},{\"children\":[{\"code\":\"710901\",\"name\":\"东区\"},{\"code\":\"710902\",\"name\":\"西区\"},{\"code\":\"710903\",\"name\":\"其它区\"}],\"code\":\"710900\",\"name\":\"嘉义市\"},{\"children\":[{\"code\":\"711101\",\"name\":\"八里区\"},{\"code\":\"711102\",\"name\":\"板桥区\"},{\"code\":\"711103\",\"name\":\"淡水区\"},{\"code\":\"711104\",\"name\":\"贡寮区\"},{\"code\":\"711105\",\"name\":\"金山区\"},{\"code\":\"711106\",\"name\":\"林口区\"},{\"code\":\"711107\",\"name\":\"芦洲区\"},{\"code\":\"711108\",\"name\":\"坪林区\"},{\"code\":\"711109\",\"name\":\"平溪区\"},{\"code\":\"711110\",\"name\":\"瑞芳区\"},{\"code\":\"711111\",\"name\":\"三峡区\"},{\"code\":\"711112\",\"name\":\"三芝区\"},{\"code\":\"711113\",\"name\":\"三重区\"},{\"code\":\"711114\",\"name\":\"深坑区\"},{\"code\":\"711115\",\"name\":\"石碇区\"},{\"code\":\"711116\",\"name\":\"石门区\"},{\"code\":\"711117\",\"name\":\"树林区\"},{\"code\":\"711118\",\"name\":\"双溪区\"},{\"code\":\"711119\",\"name\":\"泰山区\"},{\"code\":\"711120\",\"name\":\"土城区\"},{\"code\":\"711121\",\"name\":\"万里区\"},{\"code\":\"711122\",\"name\":\"五股区\"},{\"code\":\"711123\",\"name\":\"乌来区\"},{\"code\":\"711124\",\"name\":\"汐止区\"},{\"code\":\"711125\",\"name\":\"新店区\"},{\"code\":\"711126\",\"name\":\"新庄区\"},{\"code\":\"711127\",\"name\":\"莺歌区\"},{\"code\":\"711128\",\"name\":\"永和区\"},{\"code\":\"711129\",\"name\":\"中和区\"}],\"code\":\"711100\",\"name\":\"新北市\"},{\"children\":[{\"code\":\"711201\",\"name\":\"大同乡\"},{\"code\":\"711202\",\"name\":\"钓鱼台\"},{\"code\":\"711203\",\"name\":\"冬山乡\"},{\"code\":\"711204\",\"name\":\"礁溪乡\"},{\"code\":\"711205\",\"name\":\"罗东镇\"},{\"code\":\"711206\",\"name\":\"南澳乡\"},{\"code\":\"711207\",\"name\":\"三星乡\"},{\"code\":\"711208\",\"name\":\"苏澳镇\"},{\"code\":\"711209\",\"name\":\"头城镇\"},{\"code\":\"711210\",\"name\":\"五结乡\"},{\"code\":\"711211\",\"name\":\"宜兰市\"},{\"code\":\"711212\",\"name\":\"员山乡\"},{\"code\":\"711213\",\"name\":\"壮围乡\"}],\"code\":\"711200\",\"name\":\"宜兰县\"},{\"children\":[{\"code\":\"711301\",\"name\":\"宝山乡\"},{\"code\":\"711302\",\"name\":\"北埔乡\"},{\"code\":\"711303\",\"name\":\"峨眉乡\"},{\"code\":\"711304\",\"name\":\"关西镇\"},{\"code\":\"711305\",\"name\":\"横山乡\"},{\"code\":\"711306\",\"name\":\"湖口乡\"},{\"code\":\"711307\",\"name\":\"尖石乡\"},{\"code\":\"711308\",\"name\":\"五峰乡\"},{\"code\":\"711309\",\"name\":\"新丰乡\"},{\"code\":\"711310\",\"name\":\"新埔镇\"},{\"code\":\"711311\",\"name\":\"芎林乡\"},{\"code\":\"711312\",\"name\":\"竹北市\"},{\"code\":\"711313\",\"name\":\"竹东镇\"}],\"code\":\"711300\",\"name\":\"新竹县\"},{\"children\":[{\"code\":\"711401\",\"name\":\"八德市\"},{\"code\":\"711402\",\"name\":\"大溪镇\"},{\"code\":\"711403\",\"name\":\"大园乡\"},{\"code\":\"711404\",\"name\":\"复兴乡\"},{\"code\":\"711405\",\"name\":\"观音乡\"},{\"code\":\"711406\",\"name\":\"龟山乡\"},{\"code\":\"711407\",\"name\":\"龙潭乡\"},{\"code\":\"711408\",\"name\":\"芦竹乡\"},{\"code\":\"711409\",\"name\":\"平镇市\"},{\"code\":\"711410\",\"name\":\"桃园市\"},{\"code\":\"711411\",\"name\":\"新屋乡\"},{\"code\":\"711412\",\"name\":\"杨梅乡\"},{\"code\":\"711413\",\"name\":\"中坜市\"}],\"code\":\"711400\",\"name\":\"桃园县\"},{\"children\":[{\"code\":\"711501\",\"name\":\"大湖乡\"},{\"code\":\"711502\",\"name\":\"公馆乡\"},{\"code\":\"711503\",\"name\":\"后龙镇\"},{\"code\":\"711504\",\"name\":\"苗栗市\"},{\"code\":\"711505\",\"name\":\"南庄乡\"},{\"code\":\"711506\",\"name\":\"三湾乡\"},{\"code\":\"711507\",\"name\":\"三义乡\"},{\"code\":\"711508\",\"name\":\"狮潭乡\"},{\"code\":\"711509\",\"name\":\"泰安乡\"},{\"code\":\"711510\",\"name\":\"铜锣乡\"},{\"code\":\"711511\",\"name\":\"通宵镇\"},{\"code\":\"711512\",\"name\":\"头份镇\"},{\"code\":\"711513\",\"name\":\"头屋乡\"},{\"code\":\"711514\",\"name\":\"西湖乡\"},{\"code\":\"711515\",\"name\":\"苑里镇\"},{\"code\":\"711516\",\"name\":\"造桥乡\"},{\"code\":\"711517\",\"name\":\"竹南镇\"},{\"code\":\"711518\",\"name\":\"卓兰镇\"}],\"code\":\"711500\",\"name\":\"苗栗县\"},{\"children\":[{\"code\":\"711701\",\"name\":\"北斗镇\"},{\"code\":\"711702\",\"name\":\"大城乡\"},{\"code\":\"711703\",\"name\":\"大村乡\"},{\"code\":\"711704\",\"name\":\"二林镇\"},{\"code\":\"711705\",\"name\":\"二水乡\"},{\"code\":\"711706\",\"name\":\"芳苑乡\"},{\"code\":\"711707\",\"name\":\"芬园乡\"},{\"code\":\"711708\",\"name\":\"福兴乡\"},{\"code\":\"711709\",\"name\":\"和美镇\"},{\"code\":\"711710\",\"name\":\"花坛乡\"},{\"code\":\"711711\",\"name\":\"鹿港镇\"},{\"code\":\"711712\",\"name\":\"埤头乡\"},{\"code\":\"711713\",\"name\":\"埔心乡\"},{\"code\":\"711714\",\"name\":\"埔盐乡\"},{\"code\":\"711715\",\"name\":\"社头乡\"},{\"code\":\"711716\",\"name\":\"伸港乡\"},{\"code\":\"711717\",\"name\":\"田尾乡\"},{\"code\":\"711718\",\"name\":\"田中镇\"},{\"code\":\"711719\",\"name\":\"溪湖镇\"},{\"code\":\"711720\",\"name\":\"溪州乡\"},{\"code\":\"711721\",\"name\":\"线西乡\"},{\"code\":\"711722\",\"name\":\"秀水乡\"},{\"code\":\"711723\",\"name\":\"永靖乡\"},{\"code\":\"711724\",\"name\":\"员林镇\"},{\"code\":\"711725\",\"name\":\"彰化市\"},{\"code\":\"711726\",\"name\":\"竹塘乡\"}],\"code\":\"711700\",\"name\":\"彰化县\"},{\"children\":[{\"code\":\"711901\",\"name\":\"阿里山乡\"},{\"code\":\"711902\",\"name\":\"布袋镇\"},{\"code\":\"711903\",\"name\":\"大林镇\"},{\"code\":\"711904\",\"name\":\"大埔乡\"},{\"code\":\"711905\",\"name\":\"东石乡\"},{\"code\":\"711906\",\"name\":\"番路乡\"},{\"code\":\"711907\",\"name\":\"六脚乡\"},{\"code\":\"711908\",\"name\":\"鹿草乡\"},{\"code\":\"711909\",\"name\":\"梅山乡\"},{\"code\":\"711910\",\"name\":\"民雄乡\"},{\"code\":\"711911\",\"name\":\"朴子市\"},{\"code\":\"711912\",\"name\":\"水上乡\"},{\"code\":\"711913\",\"name\":\"太保市\"},{\"code\":\"711914\",\"name\":\"溪口乡\"},{\"code\":\"711915\",\"name\":\"新港乡\"},{\"code\":\"711916\",\"name\":\"义竹乡\"},{\"code\":\"711917\",\"name\":\"中埔乡\"},{\"code\":\"711918\",\"name\":\"竹崎乡\"}],\"code\":\"711900\",\"name\":\"嘉义县\"},{\"children\":[{\"code\":\"712101\",\"name\":\"褒忠乡\"},{\"code\":\"712102\",\"name\":\"北港镇\"},{\"code\":\"712103\",\"name\":\"莿桐乡\"},{\"code\":\"712104\",\"name\":\"大埤乡\"},{\"code\":\"712105\",\"name\":\"东势乡\"},{\"code\":\"712106\",\"name\":\"斗六市\"},{\"code\":\"712107\",\"name\":\"斗南镇\"},{\"code\":\"712108\",\"name\":\"二仑乡\"},{\"code\":\"712109\",\"name\":\"古坑乡\"},{\"code\":\"712110\",\"name\":\"虎尾镇\"},{\"code\":\"712111\",\"name\":\"口湖乡\"},{\"code\":\"712112\",\"name\":\"林内乡\"},{\"code\":\"712113\",\"name\":\"仑背乡\"},{\"code\":\"712114\",\"name\":\"麦寮乡\"},{\"code\":\"712115\",\"name\":\"水林乡\"},{\"code\":\"712116\",\"name\":\"四湖乡\"},{\"code\":\"712117\",\"name\":\"台西乡\"},{\"code\":\"712118\",\"name\":\"土库镇\"},{\"code\":\"712119\",\"name\":\"西螺镇\"},{\"code\":\"712120\",\"name\":\"元长乡\"}],\"code\":\"712100\",\"name\":\"云林县\"},{\"children\":[{\"code\":\"712401\",\"name\":\"屏东市\"},{\"code\":\"712402\",\"name\":\"三地门乡\"},{\"code\":\"712403\",\"name\":\"雾台乡\"},{\"code\":\"712404\",\"name\":\"玛家乡\"},{\"code\":\"712405\",\"name\":\"九如乡\"},{\"code\":\"712406\",\"name\":\"里港乡\"},{\"code\":\"712407\",\"name\":\"高树乡\"},{\"code\":\"712408\",\"name\":\"盐埔乡\"},{\"code\":\"712409\",\"name\":\"长治乡\"},{\"code\":\"712410\",\"name\":\"麟洛乡\"},{\"code\":\"712411\",\"name\":\"竹田乡\"},{\"code\":\"712412\",\"name\":\"内埔乡\"},{\"code\":\"712413\",\"name\":\"万丹乡\"},{\"code\":\"712414\",\"name\":\"潮州镇\"},{\"code\":\"712415\",\"name\":\"泰武乡\"},{\"code\":\"712416\",\"name\":\"来义乡\"},{\"code\":\"712417\",\"name\":\"万峦乡\"},{\"code\":\"712418\",\"name\":\"崁顶乡\"},{\"code\":\"712419\",\"name\":\"新埤乡\"},{\"code\":\"712420\",\"name\":\"南州乡\"},{\"code\":\"712421\",\"name\":\"林边乡\"},{\"code\":\"712422\",\"name\":\"东港镇\"},{\"code\":\"712423\",\"name\":\"琉球乡\"},{\"code\":\"712424\",\"name\":\"佳冬乡\"},{\"code\":\"712425\",\"name\":\"新園乡\"},{\"code\":\"712426\",\"name\":\"枋寮乡\"},{\"code\":\"712427\",\"name\":\"枋山乡\"},{\"code\":\"712428\",\"name\":\"春日乡\"},{\"code\":\"712429\",\"name\":\"狮子乡\"},{\"code\":\"712430\",\"name\":\"车城乡\"},{\"code\":\"712431\",\"name\":\"牡丹乡\"},{\"code\":\"712432\",\"name\":\"恒春镇\"},{\"code\":\"712433\",\"name\":\"满洲乡\"}],\"code\":\"712400\",\"name\":\"屏东县\"},{\"children\":[{\"code\":\"712501\",\"name\":\"台东市\"},{\"code\":\"712502\",\"name\":\"兰屿乡\"},{\"code\":\"712503\",\"name\":\"绿岛乡\"},{\"code\":\"712504\",\"name\":\"延平乡\"},{\"code\":\"712505\",\"name\":\"卑南乡\"},{\"code\":\"712506\",\"name\":\"鹿野乡\"},{\"code\":\"712507\",\"name\":\"关山镇\"},{\"code\":\"712508\",\"name\":\"海端乡\"},{\"code\":\"712509\",\"name\":\"池上乡\"},{\"code\":\"712510\",\"name\":\"东河乡\"},{\"code\":\"712511\",\"name\":\"成功镇\"},{\"code\":\"712512\",\"name\":\"长滨乡\"},{\"code\":\"712513\",\"name\":\"太麻里乡\"},{\"code\":\"712514\",\"name\":\"金峰乡\"},{\"code\":\"712515\",\"name\":\"大武乡\"},{\"code\":\"712516\",\"name\":\"达仁乡\"}],\"code\":\"712500\",\"name\":\"台东县\"},{\"children\":[{\"code\":\"712601\",\"name\":\"太鲁阁\"},{\"code\":\"712602\",\"name\":\"花莲市\"},{\"code\":\"712603\",\"name\":\"新城乡\"},{\"code\":\"712604\",\"name\":\"秀林乡\"},{\"code\":\"712605\",\"name\":\"吉安乡\"},{\"code\":\"712606\",\"name\":\"寿丰乡\"},{\"code\":\"712607\",\"name\":\"凤林镇\"},{\"code\":\"712608\",\"name\":\"光复乡\"},{\"code\":\"712609\",\"name\":\"丰滨乡\"},{\"code\":\"712610\",\"name\":\"瑞穗乡\"},{\"code\":\"712611\",\"name\":\"万荣乡\"},{\"code\":\"712612\",\"name\":\"玉里镇\"},{\"code\":\"712613\",\"name\":\"卓溪乡\"},{\"code\":\"712614\",\"name\":\"富里乡\"}],\"code\":\"712600\",\"name\":\"花莲县\"},{\"children\":[{\"code\":\"712701\",\"name\":\"马公市\"},{\"code\":\"712702\",\"name\":\"西屿乡\"},{\"code\":\"712703\",\"name\":\"湖西乡\"},{\"code\":\"712704\",\"name\":\"白沙乡\"},{\"code\":\"712705\",\"name\":\"七美乡\"},{\"code\":\"712706\",\"name\":\"望安乡\"}],\"code\":\"712700\",\"name\":\"澎湖县\"}],\"code\":\"710000\",\"name\":\"台湾省\"},{\"children\":[{\"children\":[{\"code\":\"810101\",\"name\":\"中西区\"},{\"code\":\"810102\",\"name\":\"湾仔\"},{\"code\":\"810103\",\"name\":\"东区\"},{\"code\":\"810104\",\"name\":\"南区\"}],\"code\":\"810100\",\"name\":\"香港岛\"},{\"children\":[{\"code\":\"810201\",\"name\":\"九龙城区\"},{\"code\":\"810202\",\"name\":\"油尖旺区\"},{\"code\":\"810203\",\"name\":\"深水埗区\"},{\"code\":\"810204\",\"name\":\"黄大仙区\"},{\"code\":\"810205\",\"name\":\"观塘区\"}],\"code\":\"810200\",\"name\":\"九龙\"},{\"children\":[{\"code\":\"810301\",\"name\":\"北区\"},{\"code\":\"810302\",\"name\":\"大埔区\"},{\"code\":\"810303\",\"name\":\"沙田区\"},{\"code\":\"810304\",\"name\":\"西贡区\"},{\"code\":\"810305\",\"name\":\"元朗区\"},{\"code\":\"810306\",\"name\":\"屯门区\"},{\"code\":\"810307\",\"name\":\"荃湾区\"},{\"code\":\"810308\",\"name\":\"葵青区\"},{\"code\":\"810309\",\"name\":\"离岛区\"}],\"code\":\"810300\",\"name\":\"新界\"}],\"code\":\"810000\",\"name\":\"香港特别行政区\"},{\"children\":[{\"children\":[{\"code\":\"820101\",\"name\":\"澳门半岛\"}],\"code\":\"820100\",\"name\":\"澳门半岛\"},{\"children\":[{\"code\":\"820201\",\"name\":\"离岛\"}],\"code\":\"820200\",\"name\":\"离岛\"}],\"code\":\"820000\",\"name\":\"澳门特别行政区\"}]"}],"posts":[{"title":"React 中使用 AntD Upload 组件时手动触发文件选择框","slug":"2024-01-24-react-antd-upload","date":"2024-01-24T15:58:58.000Z","updated":"2024-01-24T15:58:58.000Z","comments":true,"path":"article/react-antd-upload.html","link":"","permalink":"https://liuxianyu.cn/article/react-antd-upload.html","excerpt":"最近有个需求，需要在点击上传按钮时先调用接口判断是否满足上传的条件，而不是在上传后校验失败后进行报错，将校验前置。过程中没查到其他有用的资料，这里记录下。","text":"最近有个需求，需要在点击上传按钮时先调用接口判断是否满足上传的条件，而不是在上传后校验失败后进行报错，将校验前置。过程中没查到其他有用的资料，这里记录下。 ¶一、实现效果 ¶二、实现代码 ¶html 先将 Upload 组件的 openFileDialogOnClick 属性置为 false，点击不打开文件对话框；Upload 的父级 div 加上 ref。 1234567891011&lt;div ref=&#123;(el: any) =&gt; (this.uploadEle = el)&#125;&gt; &lt;Upload &#123;...upLoadProps&#125; openFileDialogOnClick=&#123;false&#125;&gt; &lt;Button type=\"primary\" loading=&#123;loading&#125; onClick=&#123;this.handleImport&#125; &gt; 导入文件 &lt;/Button&gt; &lt;/Upload&gt;&lt;/div&gt; ¶JavaScript 点击按钮，先进行接口校验，校验成功则弹出文件选择框，失败则弹提示。通过父级 div 去拿文件上传 input 的 dom，然后手动触发 click 事件。 123456789101112handleImport = () =&gt; &#123; this.setState(&#123; loading: true &#125;); API.checkImport().then((&#123; data &#125;) =&gt; &#123; if (data) &#123; (this.uploadEle as any)?.querySelector('input[type=file]')?.click?.(); &#125; else &#123; message.warning('校验失败'); &#125; &#125;).finally(() =&gt; &#123; this.setState(&#123; loading: false &#125; &#125;);&#125;;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"}],"tags":[{"name":"AntD","slug":"AntD","permalink":"https://liuxianyu.cn/tags/AntD/"}],"author":"liuxy0551"},{"title":"Linux 定时备份 mysql (内有 docker 版)","slug":"2024-01-08-linux-crontab","date":"2024-01-08T14:02:17.000Z","updated":"2024-01-08T14:02:17.000Z","comments":true,"path":"article/linux-crontab.html","link":"","permalink":"https://liuxianyu.cn/article/linux-crontab.html","excerpt":"Linux 中的定时任务一般通过 crontab 命令来管理，这里记录下常用的一些任务。","text":"Linux 中的定时任务一般通过 crontab 命令来管理，这里记录下常用的一些任务。 ¶一、常用命令 crontab -l 查看当前用户的定时任务列表 crontab -e 编辑当前用户的定时任务列表 service crond status 查看服务状态 service crond start 启动服务 service crond stop 关闭服务 service crond restart 重启服务 service crond reload 重新载入配置 ¶二、命令脚本 先创建存放脚本的文件夹： 1mkdir -p /mnt/mysqldump 再编辑脚本文件(docker 版 在下方)： 1vim /mnt/mysqldump/my-database.sh 1234567891011121314151617181920212223242526272829303132333435363738394041#!/bin/bash# 数据库用户名username=root# 数据库密码password=123456# 要备份的数据库名称database_name=my-database# 保存备份个数，备份30天数据number=30# 日期格式day=`date +%Y%m%d`# 备份保存路径backup_dir=/mnt/mysqldump/$day# 如果文件夹不存在则创建if [ ! -d $backup_dir ];then mkdir -p $backup_dir;fi# 简单写法 mysqldump -uroot -p123456 my-database &gt; /mnt/my-database.sqlmysqldump -u$username -p$password $database_name &gt; $backup_dir/$database_name.sql# 写创建备份日志echo \"create $backup_dir/$database_name.dump\" &gt;&gt; $backup_dir/log.txt# 删除超期的备份delfile=`ls -l -crt $backup_dir/*.sql | awk '&#123;print $9 &#125;' | head -1`# 判断现在的备份数量是否大于 $numbercount=`ls -l -crt $backup_dir/*.sql | awk '&#123;print $9 &#125;' | wc -l`if [ $count -gt $number ]then # 删除更早生成的备份，只保留 $number 数量的备份 rm $delfile # 写删除文件日志 echo \"delete $delfile\" &gt;&gt; $backup_dir/log.txtfi 上述脚本仅需关注 username、password、database_name、number 等变量；通过 ls 命令获取第 9 列（文件名列），再通过实现定义操作时间最晚的那个需要删除的文件。 注意 执行命令可能提示 You have new mail.，输入 mail 查看 crontab 返回的信息，输入数字查看对应的信息 mail 交互式界面中的常用命令： n 查看下一封邮件 p 查看上一封邮件 d 1 2 按编号删除邮件，不填编号时删除当前邮件 d * 删除所有邮件 u 1 2 按编号恢复删除的邮件 q 退出 mail 界面 h 显示邮件列表的头部信息，包括邮件的发件人、主题等 ? 显示帮助信息 给脚本文件授权，否则会在 mail 中看到 Permission denied： 1chmod +x /mnt/mysqldump/*.sh ¶crontab cron 读取一个或多个配置文件，这些配置文件中包含了命令行及其调用时间。cron 的配置文件称为 crontab，是 cron table 的简写。 ¶crontab 语法 12 minute hour day-of-month month-of-year day-of-week commands合法值 00-59 00-23 01-31 01-12 0-6 (0 is sunday) 除了数字还有几个个特殊的符号就是 * / 和 - ,，* 代表所有的取值范围内的数字，/ 代表每的意思，/5 表示每 5 个单位，- 代表从某个数字到某个数字，, 分开几个离散的数字。 ¶添加 cron 定时任务 crontab -e 编辑任务文件，添加以下内容： 150 23 * * * /mnt/mysqldump/my-database.sh 可以使用 crontab -l 查看任务是否已添加成功。 ¶docker 版 当通过 docker 安装 mysql 时，也可以进行备份，比常规版新增了 container_name、container_tmp_dir 参数，需要注意 container_name 的值。使用下方脚本： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#!/bin/bash# 数据库用户名username=root# 数据库密码password=123456# 要备份的数据库名称database_name=my-database# docker 容器名container_name=mysql-5.7# 容器内临时存放的路径container_tmp_dir=/tmp# 保存备份个数，备份30天数据number=30# 日期格式day=`date +%Y%m%d`# 宿主机备份保存路径backup_dir=/mnt/mysqldump/$day# 如果文件夹不存在则创建if [ ! -d $backup_dir ];then mkdir -p $backup_dir;ficontainer_sql_path=$container_tmp_dir/$database_name.sql# docker exec mysql-5.7 bash -c \"mysqldump -uroot -pMysql..1234 $database_name &gt; /tmp/my-database.sql\"docker exec $container_name bash -c \"mysqldump -u$username -p$password $database_name &gt; $container_sql_path\"# 将容器内的文件挪到宿主机docker cp $container_name:$container_sql_path $backup_dir# 删除容器内的临时文件docker exec $container_name rm -rf $container_sql_path# 写创建备份日志echo \"create $backup_dir/$database_name-$dd.dump\" &gt;&gt; $backup_dir/log.txt# 删除超期的备份delfile=`ls -l -crt $backup_dir/*.sql | awk '&#123;print $9 &#125;' | head -1`# 判断现在的备份数量是否大于 $numbercount=`ls -l -crt $backup_dir/*.sql | awk '&#123;print $9 &#125;' | wc -l`if [ $count -gt $number ]then # 删除更早生成的备份，只保留 $number 数量的备份 rm $delfile # 写删除文件日志 echo \"delete $delfile\" &gt;&gt; $backup_dir/log.txtfi ¶参考资料： 编写BASH维护固定数量备份文件","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/tags/Linux/"}],"author":"liuxy0551"},{"title":"mysql 备份 —— 导出导入 sql 文件","slug":"2024-01-07-mysqldump","date":"2024-01-07T21:46:05.000Z","updated":"2024-01-07T21:46:05.000Z","comments":true,"path":"article/mysqldump.html","link":"","permalink":"https://liuxianyu.cn/article/mysqldump.html","excerpt":"最近在学习 mysql 的备份和恢复，我的实际应用场景是正式服数据同步到测试服用于测试、备份生产环境的数据库。","text":"最近在学习 mysql 的备份和恢复，我的实际应用场景是正式服数据同步到测试服用于测试、备份生产环境的数据库。 我的 mysql 是通过 docker 安装的，非容器的可以执行双引号中的命令；可以通过 ls -lhS 命令在目录下查看是否已存在文件。下方实例中的 123456 为数据库密码，my-database 是数据库名。 ¶一、数据备份 1docker exec mysql-5.7-backup bash -c \"mysqldump -uroot -p123456 my-database &gt; /tmp/my-database.sql\" 注意 -p 后面跟密码，加空格会被识别为 database；也可以不跟密码，回车后输入密码 导出后的文件还在 docker 容器中，可以通过 docker cp 命令将备份的 sql 文件拷贝到宿主机，便于后面在其他 docker 容器内使用。 1docker cp mysql-5.7:/tmp/my-database.sql /opt/ 同时备份多个数据库 1docker exec mysql-5.7-backup bash -c \"mysqldump -uroot -p123456 --databases dbname2 dbname2 &gt; Backup.sql\" ¶二、数据还原 还原使用 mysqldump 命令备份的数据库，先将导出的 sql 文件通过 docker cp 命令拷贝到备份的 mysql 容器内。 1docker cp /opt/my-database.sql mysql-5.7-backup:/tmp/ 再进行导入： 1docker exec mysql-5.7-backup bash -c \"mysql -uroot -p123456 my-database &lt; /tmp/my-database.sql\"","categories":[{"name":"mysql","slug":"mysql","permalink":"https://liuxianyu.cn/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://liuxianyu.cn/tags/mysql/"}],"author":"liuxy0551"},{"title":"npm 包相关命令","slug":"2023-04-02-npm-commands","date":"2023-04-02T18:43:56.000Z","updated":"2023-04-02T18:43:56.000Z","comments":true,"path":"article/npm-commands.html","link":"","permalink":"https://liuxianyu.cn/article/npm-commands.html","excerpt":"整理下 npm 包相关的一些命令，主要包括 npm、yarn、pnpm。","text":"整理下 npm 包相关的一些命令，主要包括 npm、yarn、pnpm。 ¶一、npm ¶npm publish 可以通过 `nrm`` 管理源，方便切换。 1npm config set registry https://registry.npmjs.org 1npm whoami 1npm login npm 包可以带上 tag 标识 1npm publish 1npm publish --tag=beta npm 包切换 tag 1npm dist-tag add my-package-demo@1.0.0 latest npm 撤销某个包 1npm unpublish my-package-demo -f ¶npm link 被依赖的包 1npm link 使用依赖的包 1npm link my-package-demo 去除依赖 1npm unlink 发布后的包可以同步到淘宝源，建议页面上点击 进行同步 按钮：https://npmmirror.com/package/my-package-demo ¶yarn 待补充 ¶pnpm ¶pnpm link 被依赖的包 1pnpm link --global 使用依赖的包 1pnpm link --global my-package-demo 去除依赖 1pnpm unlink 官方文档 注意 如果使用的是 clashx pro，出现连接不上 npm 官方源时可以打开增强模式，如果本地联调中，记得开关增强模式前后重启联调服务","categories":[{"name":"npm","slug":"npm","permalink":"https://liuxianyu.cn/categories/npm/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://liuxianyu.cn/tags/npm/"}],"author":"liuxy0551"},{"title":"在服务器上自建图床","slug":"2023-03-10-images-hosting","date":"2023-03-10T22:37:22.000Z","updated":"2023-03-10T22:37:22.000Z","comments":true,"path":"article/images-hosting.html","link":"","permalink":"https://liuxianyu.cn/article/images-hosting.html","excerpt":"至此，博客的图片资源已经经历 github -&gt; 阿里云服务器(1M 带宽) -&gt; 七牛云 -&gt; gitee -&gt; 腾讯云服务器(4M 带宽)，一直没有一个稳定的方案，上一次使用的还是 Gitee 图床，可以点击 Gitee 图床【已不可用】 查看当时的过程。","text":"至此，博客的图片资源已经经历 github -&gt; 阿里云服务器(1M 带宽) -&gt; 七牛云 -&gt; gitee -&gt; 腾讯云服务器(4M 带宽)，一直没有一个稳定的方案，上一次使用的还是 Gitee 图床，可以点击 Gitee 图床【已不可用】 查看当时的过程。 接下来通过把图片等静态资源放到服务器上，再通过 nginx 转发 + 域名生成固定格式的图片链接，记录下过程。 ¶1、解析域名 在对应的服务器控制台解析域名，我这里使用的是 images-hosting.liuxianyu.cn。 ¶2、申请并下载 SSL 证书 因为博客使用的是 https，所以需要申请一个 SSL 证书，我的域名是在阿里云购买的，每年赠送 20个 免费的证书。申请完成后下载 Nginx 版本的 SSL 证书，重命名并放到服务器指定路径下。 ¶3、服务器创建文件夹 需要进行的操作：创建 deploy 用户、添加本机的 SSH 公钥到服务器、创建文件夹等 创建 deploy 用户并设置密码，把 deploy 用户添加到 sudo 用户组中 - 参考 Cent OS 基础环境搭建 - 添加 deploy 用户 添加本机的 SSH 公钥到服务器 - 参考 Cent OS 基础环境搭建 - 添加本机的 SSH 到服务器 在服务器上新建一个 images-hosting 文件夹，用来存储图片等静态资源，并授权给 deploy 用户。 123sudo mkdir -p /mnt/projects/images-hostingcd /mnt/projects/sudo chown -R deploy:deploy images-hosting ¶4、本地环境变量 在本地添加远程服务器的环境变量，避免服务器 IP 暴露在公网。vim ~/.zshrc 添加以下内容后执行 source ~/.zshrc： 12# 腾讯云服务器export serverIP=&quot;43.139.139.139&quot; ¶5、本地图床仓库 在 gitee 新建了一个仓库用来做备份，但是由于包含图床内容，gitee 不允许公开仓库。在本地图床仓库中添加 deploy.command 文件： 1234567891011121314151617echo -e &apos;1、本地压缩资源中...&apos;gtar -czf images-hosting.tar.gz *echo -e &apos;2、上传压缩包到远程服务器&apos;scp -P 22 -r images-hosting.tar.gz deploy@$serverIP:/mnt/projects/images-hosting/echo -e &apos;3、在远程服务器解压中...&apos;ssh deploy@$serverIP &quot;cd /mnt/projects/images-hosting/; tar -xzf images-hosting.tar.gz; rm -rf images-hosting.tar.gz; ls&quot;echo -e &apos;4、删除本地压缩包&apos;rm -rf images-hosting.tar.gzecho -e &apos;\\n资源已经成功上传到远程服务器啦~&apos; 在本地图床仓库中添加 package.json 文件： 123456789&#123; &quot;name&quot;: &quot;images-hosting&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;在服务器上自建图床 https://liuxianyu.cn/article/images-hosting.html&quot;, &quot;scripts&quot;: &#123; &quot;deploy&quot;: &quot;bash deploy.command&quot;, &quot;push&quot;: &quot;git add . &amp;&amp; git commit -m &apos;new images&apos; &amp;&amp; git push&quot; &#125;&#125; 执行 npm run deploy 可将本地图床仓库中的图片等静态资源上传到远程服务器指定的地址了。 执行 npm run push 可以提交到远程 git 仓库。 ¶6、配置 nginx 配置完成后重启 nginx。 12345678910111213141516171819202122232425262728# images-hosting 的 nginx 配置# http#server &#123;# listen 80;# server_name images-hosting.liuxianyu.cn;# root /mnt/projects/images-hosting;## location / &#123;# try_files $uri $uri/ /index.html;# &#125;#&#125;# httpsserver &#123; listen 443 ssl; server_name images-hosting.liuxianyu.cn; root /mnt/projects/images-hosting; ssl_certificate cert/images-hosting.liuxianyu.cn.pem; ssl_certificate_key cert/images-hosting.liuxianyu.cn.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location / &#123; try_files $uri $uri/ /index.html; &#125;&#125; 图片资源可以访问啦 ¶7、替换博客原有的链接地址 全局替换 https://gitee.com/liuxy0551/image-hosting/ -&gt; https://images-hosting.liuxianyu.cn/，重新部署博客即可恢复图片资源的访问啦。 ¶8、缺点 每次都是上传全量资源，耗时较长","categories":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/categories/Blog/"}],"tags":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/tags/Blog/"}],"author":"liuxy0551"},{"title":"安装 on-my-zsh 和常用插件","slug":"2022-11-11-oh-my-zsh","date":"2022-11-11T20:31:23.000Z","updated":"2022-11-11T20:31:23.000Z","comments":true,"path":"article/on-my-zsh.html","link":"","permalink":"https://liuxianyu.cn/article/on-my-zsh.html","excerpt":"最近之前买的三年服务器到期了，新买了腾讯云的服务器，Cent OS 7.6，记录下安装oh-my-zsh及常用插件的过程，MacOS 通用。","text":"最近之前买的三年服务器到期了，新买了腾讯云的服务器，Cent OS 7.6，记录下安装oh-my-zsh及常用插件的过程，MacOS 通用。 ¶1、查看当前 shell 1echo $SHELL ¶2、安装 zsh 1yum install zsh -y ¶3、查看已经安装的 shell 1cat /etc/shells ¶4、切换 zsh 1chsh -s /bin/zsh ¶5、安装 git 1yum install git -y ¶6、安装 oh-my-zsh 1sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\" 由于网络原因，上述命令可能无法执行，此时新建一个install.sh脚本文件，复制 ohmyzsh/install.sh 的内容，然后执行bash install.sh命令即可。 ¶8、下载插件 oh-my-zsh 有很多的插件：plugins，我常用的有 z、cp、zsh-autosuggestions、zsh-syntax-highlighting，它们的功能分别是跳转常用目录、cp 通过rsync命令提供带进度条的复制文件命令、自动提示、错误命令高亮。 12git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestionsgit clone https://github.com/zsh-users/zsh-syntax-highlighting $ZSH_CUSTOM/plugins/zsh-syntax-highlighting 自带的插件：git、z、cp z 查看历史记录 –add 添加目录到记录里 -c 只查看当前目录 -t 按最近使用的匹配 rsync -r 递归文件夹 -h 显示常见的文件大小单位 -P 显示进度条 ¶9、编辑配置文件 1vim ~/.zshrc 我常用的主题是 ys，日常配置如下： 12345678910111213export ZSH=&quot;/Users/liuxy/.oh-my-zsh&quot;ZSH_THEME=&quot;ys&quot;plugins=(git z cp zsh-autosuggestions zsh-syntax-highlighting)source $ZSH/oh-my-zsh.shsource ~/.bash_profile# node n taobao 镜像export N_NODE_MIRROR=https://npm.taobao.org/dist/# pnpmalias p=&quot;pnpm&quot; 可能执行source ~/.zshrc后会报错：/etc/bashrc &quot;command not found: shopt&quot;，编辑~/.bashrc，将. /etc/bashrc替换成bash -c &quot;. /etc/bashrc&quot;，保存后退出，再次执行source ~/.zshrc即可。 ¶10、卸载 oh-my-zsh 1uninstall_oh_my_zsh","categories":[{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/categories/Cent-OS/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/tags/Linux/"},{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"}],"author":"liuxy0551"},{"title":"前端学习 Docker 之旅（七）—— Docker 中安装 MongoDB","slug":"2022-08-04-docker-f","date":"2022-08-04T10:51:23.000Z","updated":"2022-08-04T10:51:23.000Z","comments":true,"path":"article/docker-f.html","link":"","permalink":"https://liuxianyu.cn/article/docker-f.html","excerpt":"最近在公司中，有个项目需要用到数据库，选择了尝试下 MongoDB，记录下在 Docker 中安装 MongoDB 的过程。","text":"最近在公司中，有个项目需要用到数据库，选择了尝试下 MongoDB，记录下在 Docker 中安装 MongoDB 的过程。 ¶一、安装 MongoDB ¶1、查找镜像 在 Docker Hub 官网查找自己需要的版本 https://hub.docker.com/_/mongo?tab=tags ¶2、下载镜像 我选择的是 6.0.2： 1docker pull mongo:6.0.2 ¶3、创建挂载文件夹 12mkdir -p /mnt/docker/mongocd /mnt/docker/mongo ¶二、运行 MongoDB ¶1、使用镜像创建容器并运行 1docker run -v /mnt/docker/mongo:/data/db --name mongodb -p 27019:27017 -e MONGO_INITDB_ROOT_USERNAME=root -e MONGO_INITDB_ROOT_PASSWORD='123456' -d mongo:6.0.2 --auth 指令解释： -v 挂载本地文件夹，存储数据 --name 表示给容器指定的名称 -p 表示端口映射，-p 宿主机port:容器port，这里不使用相同端口是为了防止攻击 -e 携带密码等参数 -d 表示后台启动 --auth MongoDB 进行权限校验 ¶2、进入容器 1docker exec -it mongodb mongosh admin 注意 使用 docker exec -it mongodb mongo admin 可能如果出现以下报错，mongodb 5.0 以上的版本需要使用mongosh来代替mongo rpc error: code = 2 desc = oci runtime error: exec failed: container_linux.go:235: starting container process caused “exec: “mongo”: executable file not found in $PATH” ¶3、验证用户名密码登录 返回 1 代表登录成功。 1db.auth('root', '123456') ¶4、使用数据库 1use landingDB ¶5、创建数据库的管理员 1db.createUser(&#123; user: \"landing-user\", pwd: \"landing-admin.1234\", roles: [&#123; role: \"readWrite\", db: \"landingDB\" &#125;] &#125;) MongoDB 不允许同一窗口有多个用户登录，退出再次进入终端： 12use landingDBdb.auth('landing-user', 'landing-admin.1234') ¶6、创建表 12db.createCollection('article')db.createCollection('tag') ¶7、测试插入数据 1db.article.insert(&#123; id: 1, title: '测试文章标题' &#125;) ¶8、通过 MongoDB Compass 连接数据库 1mongodb://landing-user:landing-admin.1234@127.0.0.1:27019/landingDB ¶三、在 node 中使用 123456789101112131415161718192021222324252627282930313233343536373839404142const &#123; MongoClient &#125; = require('mongodb')const &#123; host, port, dbName, username, password &#125; = configObjconst url = `mongodb://$&#123;username&#125;:$&#123;password&#125;@$&#123;host&#125;:$&#123;port&#125;/$&#123;dbName&#125;`const client = new MongoClient(url)// 初始化数据库链接const initDB = async () =&gt; &#123; await client.connect() console.log('Connected successfully to mongodb')&#125;// 新增查询到的标签列表const insertTags = async (tagList) =&gt; &#123; const db = client.db(dbName) const collection = db.collection('tag') const updateResult = await collection.updateMany(&#123; isDelete: 0 &#125;, &#123; $set: &#123; isDelete: 1, updateTime: getDateStr() &#125; &#125;) console.log('updateTags documents =&gt;', updateResult) const insertResult = await collection.insertMany(tagList) console.log('insertTags documents =&gt;', insertResult)&#125;// 查询标签列表const getTagList = async () =&gt; &#123; const db = client.db(dbName) const collection = db.collection('tag') const data = await collection.find(&#123; isDelete: 0 &#125;).toArray() return &#123; code: 200, data, message: '成功', &#125;&#125;module.exports = &#123; initDB, insertTags, getTagList,&#125; 附：前端学习 Docker 之旅（二）—— 常用指令","categories":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/categories/Docker/"}],"tags":[{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"},{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/tags/Docker/"}],"author":"liuxy0551"},{"title":"规范 git commit、设置版本号、自动生成 changelog","slug":"2022-04-12-git-commit-version-changelog","date":"2022-04-12T15:49:25.000Z","updated":"2022-04-12T15:49:25.000Z","comments":true,"path":"article/git-commit-version-changelog.html","link":"","permalink":"https://liuxianyu.cn/article/git-commit-version-changelog.html","excerpt":"在开源项目中，规范的 commit message 可以让修改记录更简洁明了，记录下借助工具实现规范的 git commit。这里主要介绍 commitizen、conventional-changelog-cli、standard-version 这三款工具。","text":"在开源项目中，规范的 commit message 可以让修改记录更简洁明了，记录下借助工具实现规范的 git commit。这里主要介绍 commitizen、conventional-changelog-cli、standard-version 这三款工具。 全局安装是为了本地方便运行，-D 安装是为了方便 CI。 ¶一、commitizen ¶1.1、安装 commitizen 是一款标准化 git commit 的工具，在没有规范的情况下，开发人员的 commit message 通常是随意的，这就导致 commit message 显得有些无用。可是当你在做git log、code review、编写 changelog 等情况时，良好的 commit 规范就显得尤为重要。 1npm install commitizen -g 1npm install commitizen -D 使用 commitizen 来安装cz-conventional-changelog，commitizen 安装 cz-conventional-changelog 后会自动在 package.json 中添加如下配置： 1commitizen init cz-conventional-changelog --save-dev --save-exact package.json12345\"config\": &#123; \"commitizen\": &#123; \"path\": \"./node_modules/cz-conventional-changelog\" &#125;&#125; 安装并添加完成后，便可以使用git cz命令来替换git commit了。修改一个文件并git add后，通过git cz试一下： 类型 描述 feat 新增功能 fix bug 修复 docs 文档更新 style 不影响程序逻辑的代码修改(修改空白字符，格式缩进，补全缺失的分号等，没有改变代码逻辑) refactor 重构代码(既没有新增功能，也没有修复 bug) perf 性能, 体验优化 test 新增测试用例或是更新现有测试 build 主要目的是修改项目构建系统(例如 glup，webpack，rollup 的配置等)的提交 ci 主要目的是修改项目继续集成流程(例如 Travis，Jenkins，GitLab CI，Circle等)的提交 chore 不属于以上类型的其他类型 revert 回滚某个更早之前的提交 注意 如果想修改已经打好的 commit message，我们可以通过git reset HEAD~命令来修改 ¶1.2、commit message 的格式规范 commit message 包含三个部分：Header、Body、Footer，一般 Header 是必需的，Body 和 Footer 可以省略。Header部分只有一行，包括三个字段：type（必需）、scope（可选，用于定义 type 的影响范围）和subject（必需，commit 的简短描述）。 ¶二、conventional-changelog-cli ¶2.1、安装 conventional-changelog-cli 默认推荐的 commit 标准是来自 angular，还有其他可选值：atom, codemirror, ember, eslint, express, jquery。可用来生成CHANGELOG.md。 1npm install conventional-changelog-cli -g 1npm install conventional-changelog-cli -D 在项目根目录执行以下命令，不会覆盖以前的CHANGELOG.md，只会在CHANGELOG.md的头部加上自从上次git push以来的变动。-s表示读写同一文件，-r表示生成 changelog 所需要使用的发布版本数量，默认为 1，全部则是 0。 1conventional-changelog -p angular -i CHANGELOG.md -s -r 0 ¶2.2、自定义参数 生成的 changelog 中有些常用内容可以通过自定义参数来根据需求更改，例如版本号、commit 地址等等。 版本号是从 package.json 中获取的 version 字段值； commit 地址是从 package.json 中获取的 repository 字段值； issue 地址是从 package.json 中获取的 repository 字段值； 如果你使用了第三方的协作系统，那么在生成 changelog 后可以使用 replace 工具（--quiet 表示不输出 replace 日志）来处理文本中的原有地址： 1replace 'https://github.com/myproject/issues/' 'https://redmine.example.com' CHANGELOG.md --quiet 点此查看 更多配置选项。 ¶三、standard-version ¶3.1、安装 standard-version 是一款遵循语义化版本 semver 和 commit message 标准规范 的版本和 changelog 自动化工具。通常情况下，我们会在 master 分支进行如下的版本发布操作： 1、git pull origin master 2、根据 package.json 中的 version 更新版本号，更新 changelog 3、git add ., 然后 git commit 4、git tag 打版本操作 5、push 版本 tag 和 master 分支到仓库 其中 2，3，4 是 standard-version 工具会自动完成的工作，配合本地的 shell 脚本，就可以完成一系列版本发布的工作了。 1npm install standard-version -g 1npm install standard-version -D ¶3.2、命令 在项目根目录执行 standard-version 命令，可以在控制台看到整个执行流程的 log 信息，在这里几个常用的参数需要注意下: 1standard-version 1、–release-as, -r 指定版本号 默认情况下，工具会自动根据 主版本（major）、次版本（ minor）、修订版（patch）规则生成版本号，例如如果你 package.json 中的 version 为 1.0.0, 那么执行后版本号则是：1.0.1。自定义可以通过： 123standard-version -r minor // 1.1.0standard-version -r 2.0.0 // 2.0.0standard-version -r 2.0.0-test // 2.0.0-test 2、–prerelease, -p 预发版本命名 用来生成预发版本, 如果当期的版本号是 2.0.0，例如 1standard-version --prerelease alpha // 2.0.0-alpha.0 3、–tag-prefix, -t 版本 tag 前缀 用来给生成 tag 标签添加前缀，例如如果前版本号为 2.0.0，则： 1standard-version --tag-prefix \"stable-\" // tag: stable-v2.0.0 以上几个参数用得会多一些，还有其他选项可以通过standard-version --help查看。 ¶3.3、集成 npm 把命令集成到 package.json 的 scripts 中, 并配合 shell 脚本使用, 如下： package.json12345\"scripts\": &#123; \"release\": \"./scripts/release.sh\", \"changelog\": \"conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md &amp;&amp; npm run change-issue-url\", \"change-issue-url\": \"replace 'https://github.com/myproject/issues/' 'https://redmine.example.com/' CHANGELOG.md\"&#125; release.sh12345678910111213141516#!/bin/bash# Release branchbranch=\"master\"prefix=\"v\"git pull origin $branchecho \"Current pull origin $branch.\"# Auto generate version number and tagstandard-version -r $release --tag-prefix $prefixgit push --follow-tags origin $branchecho \"Git push origin $branch\"echo \"Release finished.\" ¶四、使用 husky 校验 husky 主用功能是为 git 添加钩子，它允许我们在 git 的一些重要动作发生时触发动作(npm script), 比如我们可以在 git push 之前执行特定的自定义脚本对代码进行单元测试、又或者在 git commit 之前执行 eslint 校验。 1npm install husky -D package.json1234567\"husky\": &#123; \"hooks\": &#123; \"pre-commit\": \"echo commit 之前的动作\", \"commit-msg\": \"echo $HUSKY_GIT_PARAMS $HUSKY_GIT_STDIN\", \"pre-push\": \"echo push 之前的动作\" &#125;&#125;","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"通过 Lerna 创建自己的 eslint 配置包","slug":"2022-03-23-my-eslint-config-by-lerna","date":"2022-03-23T17:24:04.000Z","updated":"2022-03-23T17:24:04.000Z","comments":true,"path":"article/my-eslint-config-by-lerna.html","link":"","permalink":"https://liuxianyu.cn/article/my-eslint-config-by-lerna.html","excerpt":"最近在写一个eslint config的整合包，因为有不同语言，会发多个 npm 包，通过 Lerna 来管理多包发布，它优化了使用 git 和 npm 管理多包存储库的工作流，Vue、Babel、React 都有使用 Lerna。这里记录下使用过程中的一些点。","text":"最近在写一个eslint config的整合包，因为有不同语言，会发多个 npm 包，通过 Lerna 来管理多包发布，它优化了使用 git 和 npm 管理多包存储库的工作流，Vue、Babel、React 都有使用 Lerna。这里记录下使用过程中的一些点。 ¶一、两种工作模式 ¶1.1、固定模式 Fixed/Locked mode，Vue，Babel 都是用这种，在 publish 的时候，会依据lerna.json文件里面的&quot;version&quot;: &quot;0.0.1&quot;进行增加，只选择一次，其他有改动的包自动更新版本号。 ¶1.2、独立模式 Independent mode，执行lerna init --independent命令初始化项目，lerna.json文件里面会设置&quot;version&quot;: &quot;independent&quot;。每次 publish 时，会得到一个提示符，提示每个已更改的包，以指定是补丁、次要更改、主要更改还是自定义更改(x.y.z)。 ¶二、初始化 新建一个文件夹eslint-config-liuxy0551，并进入该文件夹；为了方便 github action，安装 lerna 到开发环境： 12npm init -yyarn add lerna -D 因为 lerna 经常需要用到，我们全局安装下： 1yarn global add lerna 安装完成后输入lerna -v查看版本号： 1lerna init 我们使用固定模式，然后进入packages文件夹初始化几个不同语言对应的 eslint config 包： 1234567891011cd packagesmkdir basic prettier typescriptcd basicnpm init -ycd ../prettiernpm init -ycd ../reactnpm init -ycd ../typescriptnpm init -y 项目结构如下： 1234567891011121314eslint-config-liuxy0551├─lerna.json├─package.json├─result.txt├─yarn.lock├─packages| ├─typescript| | └package.json| ├─react| | └package.json| ├─prettier| | └package.json| ├─basic| | └package.json 按照约定 Shareable Configs，包名应该以eslint-config-开头，例如：eslint-config-liuxy0551-basic。依次将 packages 下的几个 package.json 中的 name 改成如：@liuxy0551/eslint-config-liuxy0551-basic，version 改成 0.0.0。 每个子 package 都有自己的 node_modules，通过如下设置，就可以只在根目录创建 node_modules，只有开启了 private 的项目才能使用 workspaces。依次修改根目录的 package.json 和 lerna.json，添加以下配置项： 1234\"private\": true,\"workspaces\": [ \"packages/*\"] 12\"useWorkspaces\": true,\"npmClient\": \"yarn\" ¶三、绑定 git 和 npm 接下来与远程仓库绑定，并登录 npm： 1git remote add origin git@github.com:liuxy0551/eslint-config-liuxy0551.git 1npm whoami 注意 如果上述命令报错，排查 npm 源: npm config ls 设置 npm 官方源: npm config set registry https://registry.npmjs.org/ 如果未登录则执行npm login登录 ¶四、配置内容 在 packages/basic 文件夹下新建 index.js，内容如下： 1234567891011121314module.exports = &#123; extends: [ 'airbnb', 'plugin:import/errors', 'plugin:import/warnings', 'plugin:eslint-comments/recommended', 'plugin:yml/recommended', 'prettier', ], plugins: ['html'], rules: &#123; &#125;,&#125; rules对象就是我们可以自己改动的配置项，在Airbnb/JavaScript仓库中的 https://github.com/airbnb/javascript/issues/1089，告诉了我们有哪些规则可以被修改。 ¶五、lerna 命令 ¶5.1、创建一个包 lerna create &lt;包名&gt; [存放的目录] 1lerna create packageName ¶5.2、查看当前列表 1lerna list ¶5.3、增加本地或者远程 package 作为当前项目 packages 里面的依赖 lerna add [@version] [--scope=localPackageName] [-D] [--exact] -D 表示安装到 devDependencies –exact 表示安装准确版本，不带 ^ 注意 以下基于node 12版本安装插件，需要兼容低版本的可以在插件后加上版本号 1lerna add eslint 12345678lerna add --scope=@liuxy0551/eslint-config-liuxy0551-basic eslint-loaderlerna add --scope=@liuxy0551/eslint-config-liuxy0551-basic eslint-config-airbnblerna add --scope=@liuxy0551/eslint-config-liuxy0551-basic eslint-plugin-eslint-commentslerna add --scope=@liuxy0551/eslint-config-liuxy0551-basic eslint-plugin-htmllerna add --scope=@liuxy0551/eslint-config-liuxy0551-basic eslint-plugin-importlerna add --scope=@liuxy0551/eslint-config-liuxy0551-basic eslint-plugin-nodelerna add --scope=@liuxy0551/eslint-config-liuxy0551-basic eslint-plugin-promiselerna add --scope=@liuxy0551/eslint-config-liuxy0551-basic eslint-plugin-sort-requires 加上--scope=表示给本地指定的包安装依赖，也可以 cd 到这个包的文件夹下安装，就不用加--scope=了；不加则是给所有子包都安装该依赖。 123lerna add --scope=@liuxy0551/eslint-config-liuxy0551-typescript @liuxy0551/eslint-config-liuxy0551-basiclerna add --scope=@liuxy0551/eslint-config-liuxy0551-typescript @typescript-eslint/eslint-pluginlerna add --scope=@liuxy0551/eslint-config-liuxy0551-typescript @typescript-eslint/parser 12345lerna add --scope=@liuxy0551/eslint-config-liuxy0551-react @liuxy0551/eslint-config-liuxy0551-typescriptlerna add --scope=@liuxy0551/eslint-config-liuxy0551-react eslint-plugin-jestlerna add --scope=@liuxy0551/eslint-config-liuxy0551-react eslint-plugin-jsx-a11ylerna add --scope=@liuxy0551/eslint-config-liuxy0551-react eslint-plugin-reactlerna add --scope=@liuxy0551/eslint-config-liuxy0551-react eslint-plugin-react-hooks 12345lerna add --scope=@liuxy0551/eslint-config-liuxy0551-prettier @liuxy0551/eslint-config-liuxy0551-reactlerna add --scope=@liuxy0551/eslint-config-liuxy0551-prettier prettierlerna add --scope=@liuxy0551/eslint-config-liuxy0551-prettier prettier-plugin-jsdoclerna add --scope=@liuxy0551/eslint-config-liuxy0551-prettier eslint-config-prettierlerna add --scope=@liuxy0551/eslint-config-liuxy0551-prettier eslint-plugin-prettier ¶5.4、安装依赖 因为我们指定过使用 yarn，直接执行yarn install就会把所有包的依赖安装到根目录的 node_modules。 1lerna bootstrap ¶5.5、删除依赖 1lerna clean --scope=特定的某个包 和rm -rf node_modules功能一致，--scope=表示指定包，不会移除根目录的 node_modules。 ¶5.6、建立软链接 lerna link [--force-local] 1lerna link --force-local 类似npm link的使用，–force-local 表示不论本地的版本是否符合，都使用本地的版本。 ¶5.7、列出更新的包 1lerna changed 列出改动过的包，发布时只更新改动过的包。 ¶5.8、指定版本号 1lerna version 0.0.2 -y 需要本地分支和远程分支无差别。 ¶5.9、发布 lerna publish [--conventional-commits -y] 1lerna publish 需要先执行 git commit，会打 tag，--conventional-commits表示生成 changelog。如果包名是带 scope 的格式，如：@liuxy0551/eslint-config-liuxy0551，则需要在 package.json 中添加配置项，packages 下的每个包都需要加： 123\"publishConfig\": &#123; \"access\": \"public\"&#125; ¶六、发布整合包 lerna publish 只会发布 packages 下的包，当前文件夹并不会作为一个包发布 在 packages 文件夹下新建一个main，作为入口： 12345cd packagesmkdir maincd mainnpm init -y 将 main 下 package.json 中的 name 改成如：@liuxy0551/eslint-config-liuxy0551，version 改成 0.0.0。添加依赖： 12lerna add --scope=@liuxy0551/eslint-config-liuxy0551 eslint@^7.0.0lerna add --scope=@liuxy0551/eslint-config-liuxy0551 @liuxy0551/eslint-config-liuxy0551-react 在 packages/main 文件夹下新建 index.js，内容如下： 123456/** Export all */module.exports = &#123; extends: [ '@liuxy0551/eslint-config-liuxy0551-react', ]&#125; lerna 不会发布标记私有的项目，需要修改根目录 package.json 中的配置&quot;private&quot;: false 1npm whoami 1lerna publish 访问https://www.npmjs.com/search?q=@liuxy0551/eslint-config-liuxy0551 可以看到发布的包。 常见错误 第一次发布失败后出现 Current HEAD is already released 执行lerna publish from-package 可选步骤删除测试发布的 npm 包： 12345npm unpublish @liuxy0551/eslint-config-liuxy0551-react --forcenpm unpublish @liuxy0551/eslint-config-liuxy0551-typescript --forcenpm unpublish @liuxy0551/eslint-config-liuxy0551-prettier --forcenpm unpublish @liuxy0551/eslint-config-liuxy0551-basic --forcenpm unpublish @liuxy0551/eslint-config-liuxy0551 --force ¶参考资料 1、Lerna 中文教程详解 2、如何创建自己的ESLint配置包 3、Lerna --多包存储管理工具（一）","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"}],"tags":[{"name":"eslint","slug":"eslint","permalink":"https://liuxianyu.cn/tags/eslint/"},{"name":"Lerna","slug":"Lerna","permalink":"https://liuxianyu.cn/tags/Lerna/"}],"author":"liuxy0551"},{"title":"Node.js 中操作 Redis","slug":"2022-03-12-node-redis","date":"2022-03-12T22:25:55.000Z","updated":"2022-03-12T22:25:55.000Z","comments":true,"path":"article/node-redis.html","link":"","permalink":"https://liuxianyu.cn/article/node-redis.html","excerpt":"之前写了个爬取 Github Trending 的服务 github-trending-api，因为网络原因，失败率比较高，最近在进行优化，会每个小时请求一次 Github，失败则重试5次，然后把成功的结果存到 Redis 中。记录下 Node.js 中操作 Redis 的一些方法。","text":"之前写了个爬取 Github Trending 的服务 github-trending-api，因为网络原因，失败率比较高，最近在进行优化，会每个小时请求一次 Github，失败则重试5次，然后把成功的结果存到 Redis 中。记录下 Node.js 中操作 Redis 的一些方法。 ¶一、安装 Redis 我这里是通过 Docker 来安装 Redis 的，具体可参考：前端学习 Docker 之旅（五）—— 安装 Redis 并启动、连接。 ¶二、缓存类型 主要分为三种：数据库、本地应用缓存（内存等）、远程缓存（Redis），这里不展开细讲。 ¶三、缓存模式 ¶四、Node.js 与 Redis 1234567891011121314import &#123; createClient &#125; from 'redis';(async () =&gt; &#123; const client = createClient(&#123; url: 'redis://username:password@host:port/db-number' &#125;); client.on('error', (err) =&gt; console.log('Redis Client Error', err)); await client.connect(); await client.set('key', 'value'); const value = await client.get('key');&#125;)(); 语法： 123createClient(&#123; url: 'redis://alice:foobared@awesome.redis.server:6380'&#125;) ¶五、Redis value 类型 Redis 的 key 是唯一的，如果 key 所对应的 value 是 string 类型，则不能再次覆盖修改为 hash 类型。点此查看其他方法 ¶5.1、string 1234await redis.set('key', 'value')const value = await redis.get('key')await redis.setEx('key', 60, 'value') // 设置缓存，单位秒 不建议赋值后再设置过期时间，这样不能保证原子性。 ¶5.2、hash 123456const obj = &#123; name: 'Tom' &#125;// await redis.hSet('key', obj, 'EX', 60)const obj = await redis.hGetAll('key') // &#123; name: 'Tom' &#125;const name = await redis.hGet('key', 'name') // 'Tom'const value = await redis.hVals('key') // ['Tom'] 取出存入 Redis 的对象时，每个 key 的值会被转成 string。 ¶5.3、lists ¶5.4、sets ¶5.4、事务 123456redis.multi() .set('key', 'value') .get('key') .exec((error, replies) =&gt; &#123; console.log(replies) // ['OK', 'value'] &#125;) ¶参考资料 1、nodejs操作redis总结 2、node-redis 3、https://redis.js.org/ 4、涉及代码：https://github.com/liuxy0551/github-trending-api","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Redis","slug":"node/Redis","permalink":"https://liuxianyu.cn/categories/node/Redis/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Redis","slug":"Redis","permalink":"https://liuxianyu.cn/tags/Redis/"}],"author":"liuxy0551"},{"title":"iframe 跨域时的通信方式 postMessage","slug":"2022-03-10-iframe-postMessage","date":"2022-03-10T23:02:41.000Z","updated":"2022-03-10T23:02:41.000Z","comments":true,"path":"article/iframe-postMessage.html","link":"","permalink":"https://liuxianyu.cn/article/iframe-postMessage.html","excerpt":"最近有个公司客户对接了公司的用户中心，客户期望自己的系统在退出登录时，公司的用户中心也退出登录。提出了 iframe 的技术方案，并给出了实现方式。 因为客户系统和公司的用户中心必然跨域，这里只记录一下跨域时的处理方法。","text":"最近有个公司客户对接了公司的用户中心，客户期望自己的系统在退出登录时，公司的用户中心也退出登录。提出了 iframe 的技术方案，并给出了实现方式。 因为客户系统和公司的用户中心必然跨域，这里只记录一下跨域时的处理方法。 ¶一、如何实现 ¶postMessage window.postMessage() 方法可以安全地实现跨源通信。通常，对于两个不同页面的脚本，只有当执行它们的页面位于具有相同的协议（通常为https），端口号（443为https的默认值），以及主机 (两个页面的模数 Document.domain设置为相同的值) 时，这两个脚本才能相互通信。window.postMessage() 方法提供了一种受控机制来规避此限制，只要正确的使用，这种方法就很安全。 以上是摘自 MDN 的原文，window.postMessage 语法 1otherWindow.postMessage(message, targetOrigin, [transfer]); otherWindow 其他窗口的引用对象 message 将要传递的消息，字符串或对象 targetOrigin 目标窗口，* 代表所有 transfer 可选，是一串和 message 同时传递的对象 postMessage非常强大，既可以父传子，也可以子传父，并且是可以跨域传输的。 ¶业务场景 客户的系统退出登录后，公司的用户中心前端页面无法感知到已经退出登录，也就无法清除 cookie，如果此时进入公司的用户中心页面，依旧可以访问，所以需要实现同步退出登录。而且因为客户的系统和公司的用户中心不同源，存在跨域，这里通过postMessage来解决。 ¶父传子 12345678910111213141516171819// 子页面&lt;script&gt; window.addEventListener(\"message\", (e) =&gt; &#123; console.log('这里是公司的用户中心，客户系统发来消息: ', e.data) if (e.data !== 'logout') return // TODO 清除 cookie &#125;)&lt;/script&gt;// 父页面&lt;div&gt; &lt;iframe src=\"子页面\" id=\"dtstack-logout\" /&gt; &lt;button onclick=\"logoutFunc()\"&gt;退出登录&lt;/button&gt;&lt;/div&gt;&lt;script&gt; function logoutFunc () &#123; document.getElementById('dtstack-logout').contentWindow.postMessage('logout', '*') &#125;&lt;/script&gt; 上面的代码表示：在父页面引入 iframe，src 指向子页面，父页面点击退出登录按钮时，向子页面发送一个消息，子页面监听到事先和父页面约定好的信息后，清除 cookie，并给父页面一个反馈。 ¶子传父 12345678910111213141516171819202122232425// 子页面&lt;script&gt; window.addEventListener(\"message\", (e) =&gt; &#123; console.log('这里是公司的用户中心，客户系统发来消息: ', e.data) if (e.data !== 'logout') return // TODO 清除 cookie setTimeout(() =&gt; &#123; // 向父页面传递消息 window.parent.postMessage('clear done', '*') &#125;, 2500) &#125;)&lt;/script&gt;// 父页面&lt;div&gt; &lt;iframe src=\"子页面\" id=\"dtstack-logout\" /&gt; &lt;button onclick=\"logoutFunc()\"&gt;退出登录&lt;/button&gt;&lt;/div&gt;&lt;script&gt; window.addEventListener(\"message\", (e) =&gt; &#123; console.log('这里是客户系统，公司的用户中心发来消息: ', e.data) if (!e.data.includes('clear')) return // TODO 清除公司用户中心的 cookie 后需要进行的动作 &#125;)&lt;/script&gt; 上面的代码表示：在父页面引入 iframe，src 指向子页面，子页面在接收到父页面清除 cookie 的消息后，清除 cookie，并在完成后给父页面发送消息，父页面接收到后进行下一步动作。 ¶二、实现效果 以上截图的代码是临时 demo。 ¶参考资料 1、HTML iframe 标签","categories":[{"name":"HTML","slug":"HTML","permalink":"https://liuxianyu.cn/categories/HTML/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"https://liuxianyu.cn/tags/HTML/"}],"author":"liuxy0551"},{"title":"Node.js 中的进程和线程","slug":"2022-02-22-node-process-thread","date":"2022-02-22T20:43:37.000Z","updated":"2022-02-22T20:43:37.000Z","comments":true,"path":"article/node-process-thread.html","link":"","permalink":"https://liuxianyu.cn/article/node-process-thread.html","excerpt":"线程和进程是计算机操作系统的基础概念，在程序员中属于高频词汇，那如何理解呢？Node.js 中的进程和线程又是怎样的呢？","text":"线程和进程是计算机操作系统的基础概念，在程序员中属于高频词汇，那如何理解呢？Node.js 中的进程和线程又是怎样的呢？ ¶一、进程和线程 ¶1.1、专业性文字定义 进程（Process），进程是计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位，是操作系统结构的基础，进程是线程的容器。 线程（Thread），线程是操作系统能够进行运算调度的最小单位，被包含在进程之中，是进程中的实际运作单位。 ¶1.2、通俗理解 以上描述比较硬，看完可能也没看懂，还不利于理解记忆。那么我们举个简单的例子： 假设你是某个快递站点的一名小哥，起初这个站点负责的区域住户不多，收取件都是你一个人。给张三家送完件，再去李四家取件，事情得一件件做，这叫单线程，所有的工作都得按顺序执行。 后来这个区域住户多了，站点给这个区域分配了多个小哥，还有个小组长，你们可以为更多的住户服务了，这叫多线程，小组长是主线程，每个小哥都是一个线程。 快递站点使用的小推车等工具，是站点提供的，小哥们都可以使用，并不仅供某一个人，这叫多线程资源共享。 站点小推车目前只有一个，大家都需要使用，这叫冲突。解决的方法有很多，排队等待或者等其他小哥用完后的通知，这叫线程同步。 总公司有很多站点，各个站点的运营模式几乎一模一样，这叫多进程。总公司叫主进程，各个站点叫子进程。 总公司和站点之间，以及各个站点互相之间，小推车都是相互独立的，不能混用，这叫进程间不共享资源。各站点间可以通过电话等方式联系，这叫管道。各站点间还有其他协同手段，便于完成更大的计算任务，这叫进程间同步。 还可以看看阮一峰对 进程与线程的一个简单解释。 ¶二、Node.js 中的进程和线程 Node.js 是单线程服务，事件驱动和非阻塞 I/O 模型的语言特性，使得 Node.js 高效和轻量。优势在于免去了频繁切换线程和资源冲突；擅长 I/O 密集型操作（底层模块 libuv 通过多线程调用操作系统提供的异步 I/O 能力进行多任务的执行），但是对于服务端的 Node.js，可能每秒有上百个请求需要处理，当面对 CPU 密集型请求时，因为是单线程模式，难免会造成阻塞。 ¶2.1、Node.js 阻塞 我们利用 Koa 简单地搭建一个 Web 服务，用斐波那契数列方法来模拟一下 Node.js 处理 CPU 密集型的计算任务： 斐波那契数列，也称黄金分割数列，这个数列从第三项开始，每一项都等于前两项只和：0、1、1、2、3、5、8、13、21、… 12345678910111213141516171819202122232425262728293031// app.jsconst Koa = require('koa')const router = require('koa-router')()const app = new Koa()// 用来测试是否被阻塞router.get('/test', (ctx) =&gt; &#123; ctx.body = &#123; pid: process.pid, msg: 'Hello World' &#125;&#125;)router.get('/fibo', (ctx) =&gt; &#123; const &#123; num = 38 &#125; = ctx.query const start = Date.now() // 斐波那契数列 const fibo = (n) =&gt; &#123; return n &gt; 1 ? fibo(n - 1) + fibo(n - 2) : 1 &#125; fibo(num) ctx.body = &#123; pid: process.pid, duration: Date.now() - start &#125;&#125;)app.use(router.routes())app.listen(9000, () =&gt; &#123; console.log('Server is running on 9000')&#125;) 执行node app.js启动服务，用 Postman 发送请求，可以看到，计算 38 次耗费了 617ms，换而言之，因为执行了一个 CPU 密集型的计算任务，所以 Node.js 主线程被阻塞了六百多毫秒。如果同时处理更多的请求，或者计算任务更复杂，那么在这些请求之后的所有请求都会被延迟执行。 我们再新建一个 axios.js 用来模拟发送多次请求，此时将 app.js 中的 fibo 计算次数改为 43，用来模拟更复杂的计算任务： 12345678910111213// axios.jsconst axios = require('axios')const start = Date.now()const fn = (url) =&gt; &#123; axios.get(`http://127.0.0.1:9000/$&#123; url &#125;`).then((res) =&gt; &#123; console.log(res.data, `耗时: $&#123; Date.now() - start &#125;ms`) &#125;)&#125;fn('test')fn('fibo?num=43')fn('test') 可以看到，当请求需要执行 CPU 密集型的计算任务时，后续的请求都被阻塞等待，这类请求一多，服务基本就阻塞卡死了。对于这种不足，Node.js 一直在弥补。 ¶2.2、master-worker master-worker 模式是一种并行模式，核心思想是：系统有两个及以上的进程或线程协同工作时，master 负责接收和分配并整合任务，worker 负责处理任务。 ¶2.3、多线程 线程是 CPU 调度的一个基本单位，只能同时执行一个线程的任务，同一个线程也只能被一个 CPU 调用。如果使用的是多核 CPU，那么将无法充分利用 CPU 的性能。 多线程带给我们灵活的编程方式，但是需要学习更多的 Api 知识，在编写更多代码的同时也存在着更多的风险，线程的切换和锁也会增加系统资源的开销。 worker_threads 工作线程，给 Node.js 提供了真正的多线程能力。 worker_threads 是 Node.js 提供的一种多线程 Api。对于执行 CPU 密集型的计算任务很有用，对 I/O 密集型的操作帮助不大，因为 Node.js 内置的异步 I/O 操作比 worker_threads 更高效。worker_threads 中的 Worker，parentPort 主要用于子线程和主线程的消息交互。 将 app.js 稍微改动下，将 CPU 密集型的计算任务交给子线程计算： 1234567891011121314151617181920212223242526272829303132333435// app.jsconst Koa = require('koa')const router = require('koa-router')()const &#123; Worker &#125; = require('worker_threads')const app = new Koa()// 用来测试是否被阻塞router.get('/test', (ctx) =&gt; &#123; ctx.body = &#123; pid: process.pid, msg: 'Hello World' &#125;&#125;)router.get('/fibo', async (ctx) =&gt; &#123; const &#123; num = 38 &#125; = ctx.query ctx.body = await asyncFibo(num)&#125;)const asyncFibo = (num) =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; // 创建 worker 线程并传递数据 const worker = new Worker('./fibo.js', &#123; workerData: &#123; num &#125; &#125;) // 主线程监听子线程发送的消息 worker.on('message', resolve) worker.on('error', reject) worker.on('exit', (code) =&gt; &#123; if (code !== 0) reject(new Error(`Worker stopped with exit code $&#123;code&#125;`)) &#125;) &#125;)&#125;app.use(router.routes())app.listen(9000, () =&gt; &#123; console.log('Server is running on 9000')&#125;) 新增 fibo.js 文件，用来处理复杂计算任务： 1234567891011121314const &#123; workerData, parentPort &#125; = require('worker_threads')const &#123; num &#125; = workerDataconst start = Date.now()// 斐波那契数列const fibo = (n) =&gt; &#123; return n &gt; 1 ? fibo(n - 1) + fibo(n - 2) : 1&#125;fibo(num)parentPort.postMessage(&#123; pid: process.pid, duration: Date.now() - start&#125;) 执行上文的 axios.js，此时将 app.js 中的 fibo 计算次数改为 43，用来模拟更复杂的计算任务： 可以看到，将 CPU 密集型的计算任务交给子线程处理时，主线程不再被阻塞，只需等待子线程处理完成后，主线程接收子线程返回的结果即可，其他请求不再受影响。 上述代码是演示创建 worker 线程的过程和效果，实际开发中，请使用线程池来代替上述操作，因为频繁创建线程也会有资源的开销。 线程是 CPU 调度的一个基本单位，只能同时执行一个线程的任务，同一个线程也只能被一个 CPU 调用。 我们再回味下，本小节开头提到的线程和 CPU 的描述，此时由于是新的线程，可以在其他 CPU 核心上执行，可以更充分的利用多核 CPU。 ¶2.4、多进程 Node.js 为了能充分利用 CPU 的多核能力，提供了 cluster 模块，cluster 可以通过一个父进程管理多个子进程的方式来实现集群的功能。 child_process 子进程，衍生新的 Node.js 进程并使用建立的 IPC 通信通道调用指定的模块。 cluster 集群，可以创建共享服务器端口的子进程，工作进程使用 child_process 的 fork 方法衍生。 cluster 底层就是 child_process，master 进程做总控，启动 1 个 agent 进程和 n 个 worker 进程，agent 进程处理一些公共事务，比如日志等；worker 进程使用建立的 IPC（Inter-Process Communication）通信通道和 master 进程通信，和 master 进程共享服务端口。 新增 fibo-10.js，模拟发送 10 次请求： 1234567891011// fibo-10.jsconst axios = require('axios')const url = `http://127.0.0.1:9000/fibo?num=38`const start = Date.now()for (let i = 0; i &lt; 10; i++) &#123; axios.get(url).then((res) =&gt; &#123; console.log(res.data, `耗时: $&#123; Date.now() - start &#125;ms`) &#125;)&#125; 可以看到，只使用了一个进程，10 个请求慢慢阻塞，累计耗时 15 秒： 接下来，将 app.js 稍微改动下，引入 cluster 模块： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// app.jsconst cluster = require('cluster')const http = require('http')const numCPUs = require('os').cpus().length// const numCPUs = 10 // worker 进程的数量一般和 CPU 核心数相同const Koa = require('koa')const router = require('koa-router')()const app = new Koa()// 用来测试是否被阻塞router.get('/test', (ctx) =&gt; &#123; ctx.body = &#123; pid: process.pid, msg: 'Hello World' &#125;&#125;)router.get('/fibo', (ctx) =&gt; &#123; const &#123; num = 38 &#125; = ctx.query const start = Date.now() // 斐波那契数列 const fibo = (n) =&gt; &#123; return n &gt; 1 ? fibo(n - 1) + fibo(n - 2) : 1 &#125; fibo(num) ctx.body = &#123; pid: process.pid, duration: Date.now() - start &#125;&#125;)app.use(router.routes())if (cluster.isMaster) &#123; console.log(`Master $&#123;process.pid&#125; is running`) // 衍生 worker 进程 for (let i = 0; i &lt; numCPUs; i++) &#123; cluster.fork() &#125; cluster.on('exit', (worker, code, signal) =&gt; &#123; console.log(`worker $&#123;worker.process.pid&#125; died`) &#125;)&#125; else &#123; app.listen(9000) console.log(`Worker $&#123;process.pid&#125; started`)&#125; 执行node app.js启动服务，可以看到，cluster 帮我们创建了 1 个 master 进程和 4 个 worker 进程： 通过 fibo-10.js 模拟发送 10 次请求，可以看到，四个进程处理 10 个请求耗时近 9 秒： 当启动 10 个 worker 进程时，看看效果： 仅需不到 3 秒，不过进程的数量也不是无限的。在日常开发中，worker 进程的数量一般和 CPU 核心数相同。 ¶2.5、多进程说明 开启多进程不全是为了处理高并发，而是为了解决 Node.js 对于多核 CPU 利用率不足的问题。 由父进程通过 fork 方法衍生出来的子进程拥有和父进程一样的资源，但是各自独立，互相之间资源不共享。通常根据 CPU 核心数来设置进程数量，因为系统资源是有限的。 ¶三、总结 1、大部分通过多线程解决 CPU 密集型计算任务的方案都可以通过多进程方案来替代； 2、Node.js 虽然异步，但是不代表不会阻塞，CPU 密集型任务最好不要在主线程处理，保证主线程的畅通； 3、不要一味的追求高性能和高并发，达到系统需要即可，高效、敏捷才是项目需要的，这也是 Node.js 轻量的特点。 4、Node.js 中的进程和线程还有很多概念在文章中提到了但没展开细讲或没提到的，比如：Node.js 底层 I/O 的 libuv、IPC 通信通道、多进程如何守护、进程间资源不共享如何处理定时任务、agent 进程等； 5、以上代码可在 https://github.com/liuxy0551/node-process-thread 查看。","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"Apache Bench(ab) 的使用方法","slug":"2022-02-22-apache-bench","date":"2022-02-22T16:41:45.000Z","updated":"2022-02-22T16:41:45.000Z","comments":true,"path":"article/apache-bench.html","link":"","permalink":"https://liuxianyu.cn/article/apache-bench.html","excerpt":"ApacheBench 是 Apache 服务器自带的一个 web 压力测试工具，简称 ab。ab 是一个命令行工具，对发起负载的本机要求很低，根据 ab 命令可以创建很多的并发访问线程，模拟多个访问者同时对某一 URL 地址进行访问，因此可以用来测试目标服务器的负载压力。总的来说 ab 工具小巧简单，可以提供需要的基本性能指标，但是没有图形化结果，不能监控。这里记录下参数含义。","text":"ApacheBench 是 Apache 服务器自带的一个 web 压力测试工具，简称 ab。ab 是一个命令行工具，对发起负载的本机要求很低，根据 ab 命令可以创建很多的并发访问线程，模拟多个访问者同时对某一 URL 地址进行访问，因此可以用来测试目标服务器的负载压力。总的来说 ab 工具小巧简单，可以提供需要的基本性能指标，但是没有图形化结果，不能监控。这里记录下参数含义。 格式：ab [options] [http://]hostname[:port]/path 1ab -c 10 -n 10 http://baidu.com/ 指令解释： -n 本次测试发起的总请求数 -c 一次产生的请求数（或并发数） -t 测试所进行的最大秒数，默认没有时间限制 -r 抛出异常继续执行测试任务 -p 包含了需要 POST 的数据的文件，文件格式如p1=1&amp;p2=2，使用方法是-p 111.txt -T POST 数据所使用的 Content-type 头信息，如-T “application/x-www-form-urlencoded”，配合-p使用 -v 设置显示信息的详细程度 – 4或更大值会显示头信息， 3或更大值可以显示响应代码(404, 200等), 2或更大值可以显示警告和其他信息。 -V 显示版本号并退出 -c -C cookie-name=value对请求附加一个 Cookie:行。其典型形式是name=value的一个参数对。此参数可以重复，用逗号分割。 -w 以 HTML 表的格式输出结果，默认是白色背景的两列宽度的一张表。 参数很多，一般我们用-c和-n参数就可以了，ab -c 并发数 -n 请求数 URL地址。 -c后面的 10 表示采用 10 个并发（模拟 10 个人同时访问），-n后面的 10 代表总共发出 10 个请求；后面的网址表示测试的目标 URL。 Document Path 测试页面 Document Length 页面大小 Concurrency Level 测试的并发数 Time taken for tests 整个测试持续的时间 Complete requests 完成的请求数量 Failed requests 失败的请求数量 Write errors: 0 Total transferred 整个过程中的网络传输量 HTML transferred 整个过程中的HTML内容传输量 Requests per second 最重要的指标之一，相当于LR中的每秒事务数，后面括号中的mean表示这是一个平均值 Time per request 最重要的指标之二，相当于LR中的平均事务响应时间，后面括号中的mean表示这是一个平均值 Time per request 每个连接请求实际运行时间的平均值 Transfer rate 平均每秒网络上的流量，可以帮助排除是否存在网络流量过大导致响应时间延长的问题","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/tags/Linux/"}],"author":"liuxy0551"},{"title":"React 项目中同时引入 antd3.x 和 antd4.x","slug":"2022-03-31-antd3-antd4-together","date":"2022-02-13T11:33:16.000Z","updated":"2022-03-31T16:23:02.000Z","comments":true,"path":"article/antd3-antd4-together.html","link":"","permalink":"https://liuxianyu.cn/article/antd3-antd4-together.html","excerpt":"公司的项目中一直使用的是antd3.x，最近有个需求，TreeSelect支持多选和模糊搜索的时候，模糊搜索后选中某个选项，不清除搜索条件，点击组件外其他地方才清除搜索条件。思路是如下： 设置 autoClearSearchValue 为 false，选择选项后不清除搜索框 监听 onBlur 事件，触发时清除搜索框","text":"公司的项目中一直使用的是antd3.x，最近有个需求，TreeSelect支持多选和模糊搜索的时候，模糊搜索后选中某个选项，不清除搜索条件，点击组件外其他地方才清除搜索条件。思路是如下： 设置 autoClearSearchValue 为 false，选择选项后不清除搜索框 监听 onBlur 事件，触发时清除搜索框 ¶一、使用 antd3.x 由于年久失修，antd3.x 有很多 api 有错误，会影响业务场景，这里就有一个坑： antd3.x TreeSelect，在第一次获得焦点时，会依次触发onFocus、onBlur、onFocus，此时会清除一下搜索框，第一次还没有输入搜索条件，清除也无伤大雅。 输入搜索内容后，选择某个选项，此时会发现，第一次选择选项，会再次出触发onBlur事件，这就让人很尴尬了，这样会让开发者无法区分onBlur到底是搜索后第一次选择选项触发的，还是点击组件外触发的，也就不能在onBlur事件中清除搜索条件，否则与需求不符。 思考 我们去antd4.x TreeSelect尝试了一下，发现没有这个问题，所以着手引入 antd4.x； 但是项目中目前暂时不能全部升级 antd4.x，否则改动太大； 最终考虑同时引入 antd3.x 和 antd4.x。 ¶二、使用 antd4.x ¶2.1、安装 1yarn add antd-v4@npm:antd@^4 安装完成后可以在 package.json 和 yarn.lock 中看到安装的依赖： ¶2.2、配置 css loader 12345678910111213141516171819202122232425262728293031const path = require('path');module: &#123; rules: [ &#123; test: /\\.less$/, include: [ path.resolve(__dirname, \"../../node_modules/antd-v4\"), ], use: [ 'style-loader', &#123; loader: 'css-loader', options: &#123; importLoaders: 1, &#125; &#125;, &#123; loader: 'less-loader', options: &#123; javascriptEnabled: true, modifyVars: &#123; '@ant-prefix': 'ant-v4', '@primary-color': '#237804', // 主题色 &#125; &#125; &#125; ] &#125; ]&#125;, style-loader将打包后的 css 代码添加到页面头部 css-loader加载 css 文件，importLoaders的含义可参考：css-loader中importLoaders的理解 less-loader将 less 转成 css，modifyVars可以修改 less 中变量的值，我们再配合 antd4.x ConfigProvider 的 prefixCls 属性，搭配 ant-prefix 将样式前缀修改为antd-v4，故意修改下主题色，可以更显眼的看到是否成功 如果已经配置了 less loader，建议给之前的规则添加 exclude： 123exclude: [ path.resolve(__dirname, \"../../node_modules/antd-v4\"),], 注意 path.resolve 处理的是 node_modules 中的 antd-v4，注意路径 修改 webpack 配置后需要重启项目 ¶2.3、引入样式、组件 在/src/components下新建一个文件夹 TreeSelectV4，添加 index.tsx： 12345678910111213141516171819/** * 封装 antd4.x 的 TreeSelect * 使用的地方可以直接使用 TreeSelectV4，不再需要引入各种 antd4.x 的依赖 */import * as React from 'react'import &#123; ConfigProvider, TreeSelect &#125; from 'antd-v4';import zhCN from 'antd-v4/es/locale/zh_CN';import 'antd-v4/dist/antd.less';// import './style.scss'export default class TreeSelectV4 extends React.Component&lt;any, any&gt; &#123; render () &#123; return ( &lt;ConfigProvider locale=&#123;zhCN&#125; prefixCls=\"ant-v4\"&gt; &lt;TreeSelect &#123;...this.props&#125; /&gt; &lt;/ConfigProvider&gt; ) &#125;&#125; prefixCls 是样式前缀，这里统一写成ant-v4。 注意 建议完成以上内容后执行 lint、check-types、test 等命令 建议升级typescript等相关依赖的版本 ¶参考资料 1、antd3.x 的 TreeSelect 2、antd4.x 的 TreeSelect","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"}],"tags":[{"name":"AntD","slug":"AntD","permalink":"https://liuxianyu.cn/tags/AntD/"}],"author":"liuxy0551"},{"title":"账号簿开发（四）—— 写一个随机密码生成器","slug":"2021-12-14-account-notebook-d","date":"2021-12-14T21:39:53.000Z","updated":"2021-12-14T21:39:53.000Z","comments":true,"path":"article/account-notebook-d.html","link":"","permalink":"https://liuxianyu.cn/article/account-notebook-d.html","excerpt":"用户在第一次注册网站时，可以使用随机密码生成器生成一个密码，可以控制密码长度和密码包含的内容项（大小写字母、数字、字符），不满意可以重新生成。","text":"用户在第一次注册网站时，可以使用随机密码生成器生成一个密码，可以控制密码长度和密码包含的内容项（大小写字母、数字、字符），不满意可以重新生成。 这是一个系列随笔，主要记录『账号簿』微信小程序的开发过程： 账号簿（微信小程序）的开发过程 账号簿开发（一）—— 微信小程序 AES 加密解密 账号簿开发（二）—— 微信小程序检查更新及调试 账号簿开发（三）—— 微信小程序的云开发 账号簿开发（四）—— 写一个随机密码生成器 ¶一、实现效果 ¶二、需求分解 写一个方法，接收密码包含的内容项（大小写字母、数字、字符）和需要的长度 根据密码长度确定每个内容项出现几次，取余后的从所有内容项中随机取 将上述得到的密码字符串使用乱序算法打乱 ¶三、代码实现 ¶3.1、基础单元 大写字母: ABCDEFGHIJKLMNPQRSTUVWXYZ 小写字母: abcdefghijklmnopqrstuvwxyz 数字: 1234567890 符号: ~!@#$%^&amp;*()[]{}:,./?-_+=&lt;&gt; ¶3.2、生成分段式密码 完整代码：/src/utils/password.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * 生成随机密码 * 1、先确定 average，平均每类选多少个字符 * 2、remainder 剩余的从累加字符串中随机取 * 3、使用乱序算法，打乱字符串 https://blog.csdn.net/yunlliang/article/details/41084785 * @param &#123;Array&#125; 包含的项，upper 大写字母，lower 小写字母，number 数字，symbol 特殊符号 * @param &#123;number&#125; 密码长度 * @returns string */const getRandomPassword = (arr = [], length) =&gt; &#123; const average = Math.floor(length / arr.length) const remainder = length % arr.length let str = '', allStr = '' for (let i of arr) &#123; str += getRandomStr(i, average) &#125; arr.forEach(item =&gt; allStr += strObj[item]) for (let i = 0; i &lt; remainder; i++) &#123; str += allStr[random(allStr.length)] &#125; return shuffle(str.split('')).join('')&#125;// 获取固定个数的字符串const getRandomStr = (key, average) =&gt; &#123; let str = strObj[key], result = '' for (let i = 0; i &lt; average; i++) &#123; result += str[random(str.length)] &#125; return result&#125;/** * 生成范围内的随机整数 * @param &#123;number&#125; max * @param &#123;number&#125; min * @returns number */const random = (max, min = 0) =&gt; &#123; return Math.floor(Math.random() * (max - min)) + min&#125; ¶3.3、乱序算法 上述拿到的密码是一个分段式的密码，举个例子，我需要长度为 8 且包含大小写字母、数字的密码，那么经常上述方法，得到的会是这样一个密码：Aa1Aa1Aa，即按包含的项依次拿出单个字符串的密码，最后拼接在一起。 显然上述得到的密码不太实用，而且不够安全，这时候可以将上述密码打乱一下顺序，即可得到最终的密码。 12345678910// 乱序算法const shuffle = (arr) =&gt; &#123; for (let i = arr.length - 1; i &gt; 0; i--) &#123; let j = Math.floor(Math.random() * (i + 1)) let temp = arr[i] arr[i] = arr[j] arr[j] = temp &#125; return arr&#125; ¶3.4、组件调用 完整代码：/src/pages/account/components/NewPassword/index.jsx 123456789101112131415const checkboxList = [ &#123; value: 'upper', label: '包含大写字母', checked: true &#125;, &#123; value: 'lower', label: '包含小写字母', checked: true &#125;, &#123; value: 'number', label: '包含数字', checked: true &#125;, &#123; value: 'symbol', label: '包含符号', checked: false &#125;]const checkboxValue = checkboxList.filter(item =&gt; item.checked).map(item =&gt; item.value)const lengthIdx = 2const lengthList = []for (let i = 6; i &lt;= 30; i++) &#123; lengthList.push(i)&#125;const password = getRandomPassword(checkboxValue, lengthList[lengthIdx])","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"}],"author":"liuxy0551"},{"title":"Sequelize 中的一对一、一对多、多对多","slug":"2021-09-21-sequelize-association","date":"2021-09-21T18:53:17.000Z","updated":"2021-09-21T18:53:17.000Z","comments":true,"path":"article/sequelize-association.html","link":"","permalink":"https://liuxianyu.cn/article/sequelize-association.html","excerpt":"最近做了写公司中的基建工作，其中涉及到了 node 项目中使用 sequelize，同时有多对多的关系需要处理，便写了个关于 sequelize 处理多对多关系的练手示例，liuxy0551/sequelize-association，目前仅涉及查询，create和update暂未进行。","text":"最近做了写公司中的基建工作，其中涉及到了 node 项目中使用 sequelize，同时有多对多的关系需要处理，便写了个关于 sequelize 处理多对多关系的练手示例，liuxy0551/sequelize-association，目前仅涉及查询，create和update暂未进行。 sql 语句 点此查看。 ¶一、一对一 一对一的举例是：一个中国公民 (Chinese) 只有一个身份证号 (IDNumber) ，具体实现如下： 123456const models = initModels(sequelize)const &#123; Chinese, IDNumber &#125; = models// 建立关系Chinese.hasOne(IDNumber, &#123; foreignKey: 'id', sourceKey: 'IDNumberId', as: 'IDNumberInfo' &#125;)IDNumber.belongsTo(Chinese, &#123; foreignKey: 'id', targetKey: 'IDNumberId' &#125;) 12345678910111213141516171819202122232425262728// service 层实现async getChinese (ctx) &#123; try &#123; const &#123; offset, limit, page, pageSize &#125; = getPage(ctx.query) const &#123; count, rows &#125; = await DB.Chinese.findAndCountAll(&#123; where: getWhere(), attributes: &#123; exclude: getExclude(), &#125;, include: [ &#123; model: DB.IDNumber, as: \"IDNumberInfo\", required: false, where: getWhere(), attributes: &#123; exclude: getExclude(), &#125;, &#125;, ], offset, limit, &#125;) return setCtxBody(200, rows, '成功', &#123; total: count, page, pageSize &#125;) &#125; catch (error) &#123; return setCtxBody(500, error, '系统错误') &#125;&#125; 接口返回的结果如下： sequelize 自动生成的 sql 语句如下： 12345678910111213141516171819SELECT `Chinese`.`id`, `Chinese`.`IDNumberId`, `Chinese`.`name`, `Chinese`.`createdAt`, `Chinese`.`updatedAt`, `IDNumberInfo`.`id` AS `IDNumberInfo.id`, `IDNumberInfo`.`number` AS `IDNumberInfo.number`, `IDNumberInfo`.`address` AS `IDNumberInfo.address`, `IDNumberInfo`.`createdAt` AS `IDNumberInfo.createdAt`, `IDNumberInfo`.`updatedAt` AS `IDNumberInfo.updatedAt` FROM `Chinese` AS `Chinese` LEFT OUTER JOIN `IDNumber` AS `IDNumberInfo` ON `Chinese`.`IDNumberId` = `IDNumberInfo`.`id` AND `IDNumberInfo`.`isDeleted` = 0 WHERE `Chinese`.`isDeleted` = 0 LIMIT 0, 10; ¶二、一对多 一对多的举例是：一个省份 (Province) 有多个市 (City)，具体实现如下： 123456const models = initModels(sequelize)const &#123; Province, City &#125; = models// 建立关系Province.hasMany(City, &#123; as: 'cityList' &#125;)City.belongsTo(Province, &#123; foreignKey: 'id' &#125;) 12345678910111213141516171819202122232425262728// service 层实现async getProvinceList (ctx) &#123; try &#123; const &#123; offset, limit, page, pageSize &#125; = getPage(ctx.query) const &#123; count, rows &#125; = await DB.Province.findAndCountAll(&#123; where: getWhere(), attributes: &#123; exclude: getExclude(), &#125;, include: [ &#123; model: DB.City, as: 'cityList', required: false, where: getWhere(), attributes: &#123; exclude: getExclude(['ProvinceId']), &#125;, &#125; ], offset, limit, &#125;) return setCtxBody(200, rows, '成功', &#123; total: count, page, pageSize &#125;) &#125; catch (error) &#123; return setCtxBody(500, error, '系统错误') &#125;&#125; 接口返回的结果如下： sequelize 自动生成的 sql 语句如下： 1234567891011121314151617181920212223SELECT `Province`.*, `cityList`.`id` AS `cityList.id`, `cityList`.`provinceId` AS `cityList.provinceId`, `cityList`.`name` AS `cityList.name`, `cityList`.`createdAt` AS `cityList.createdAt`, `cityList`.`updatedAt` AS `cityList.updatedAt` FROM ( SELECT `Province`.`id`, `Province`.`name`, `Province`.`createdAt`, `Province`.`updatedAt` FROM `Province` AS `Province` WHERE `Province`.`isDeleted` = 0 LIMIT 0, 10 ) AS `Province` LEFT OUTER JOIN `City` AS `cityList` ON `Province`.`id` = `cityList`.`ProvinceId` AND `cityList`.`isDeleted` = 0; ¶三、多对多 多对多的举例是：一部电影 (Movie) 有多个演员 (Actor), 一个演员 (Actor) 参演多部电影 (Movie)，具体实现如下： 123456const models = initModels(sequelize)const &#123; Movie, Actor, MovieActor &#125; = models// 建立关系Movie.belongsToMany(Actor, &#123; through: MovieActor, as: 'actorList' &#125;)Actor.belongsToMany(Movie, &#123; through: MovieActor, as: 'movieList' &#125;) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// service 层实现async getMovieListWithActors (ctx) &#123; try &#123; const &#123; offset, limit, page, pageSize &#125; = getPage(ctx.query) const &#123; count, rows &#125; = await DB.Movie.findAndCountAll(&#123; where: getWhere(), attributes: &#123; exclude: getExclude() &#125;, include: [ &#123; model: DB.Actor, as: 'actorList', required: false, where: getWhere(), attributes: &#123; exclude: getExclude(), &#125;, through: &#123; attributes: [] &#125; &#125; ], offset, limit, &#125;) return setCtxBody(200, rows, '成功', &#123; total: count, page, pageSize &#125;) &#125; catch (error) &#123; return setCtxBody(500, error, '系统错误') &#125;&#125;async getActorListWithMovies (ctx) &#123; try &#123; const &#123; offset, limit, page, pageSize &#125; = getPage(ctx.query) const &#123; count, rows &#125; = await DB.Actor.findAndCountAll(&#123; where: getWhere(), attributes: &#123; exclude: getExclude() &#125;, include: [ &#123; model: DB.Movie, as: 'movieList', required: false, where: getWhere(), attributes: &#123; exclude: getExclude(['MovieActor']), &#125;, through: &#123; attributes: [] &#125; &#125; ], offset, limit, &#125;) return setCtxBody(200, rows, '成功', &#123; total: count, page, pageSize &#125;) &#125; catch (error) &#123; return setCtxBody(500, error, '系统错误') &#125;&#125; 接口返回的结果如下： sequelize 自动生成的 sql 语句如下： 1234567891011121314151617181920212223242526-- 多对多 getActorListWithMoviesSELECT `Actor`.*, `movieList`.`id` AS `movieList.id`, `movieList`.`name` AS `movieList.name`, `movieList`.`createdAt` AS `movieList.createdAt`, `movieList`.`updatedAt` AS `movieList.updatedAt` FROM ( SELECT `Actor`.`id`, `Actor`.`name`, `Actor`.`createdAt`, `Actor`.`updatedAt` FROM `Actor` AS `Actor` WHERE `Actor`.`isDeleted` = 0 LIMIT 0, 10 ) AS `Actor` LEFT OUTER JOIN ( `MovieActor` AS `movieList-&gt;MovieActor` INNER JOIN `Movie` AS `movieList` ON `movieList`.`id` = `movieList-&gt;MovieActor`.`MovieId` ) ON `Actor`.`id` = `movieList-&gt;MovieActor`.`ActorId` AND `movieList`.`isDeleted` = 0; 1234567891011121314151617181920212223242526-- 多对多 getMovieListWithActorsSELECT `Movie`.*, `actorList`.`id` AS `actorList.id`, `actorList`.`name` AS `actorList.name`, `actorList`.`createdAt` AS `actorList.createdAt`, `actorList`.`updatedAt` AS `actorList.updatedAt` FROM ( SELECT `Movie`.`id`, `Movie`.`name`, `Movie`.`createdAt`, `Movie`.`updatedAt` FROM `Movie` AS `Movie` WHERE `Movie`.`isDeleted` = 0 LIMIT 0, 10 ) AS `Movie` LEFT OUTER JOIN ( `MovieActor` AS `actorList-&gt;MovieActor` INNER JOIN `Actor` AS `actorList` ON `actorList`.`id` = `actorList-&gt;MovieActor`.`ActorId` ) ON `Movie`.`id` = `actorList-&gt;MovieActor`.`MovieId` AND `actorList`.`isDeleted` = 0; ¶四、注意事项 1、在使用关联关系进行查询时，请求参数中不要使用raw: true，raw默认为 false，此时 sequelize 会自动拼接一些参数，设为 true 的话，会丢失参数导致数据结构错乱，如下图： 2、一对多时会出现返回的结果包含了大驼峰写法的关联 id 及值，可通过include attributes exclude将该字段过滤； 3、多对多时，一般不需要展示关联表的字段，可通过include through attributes将关联表字段过滤，如下： 123456789const &#123; count, rows &#125; = await DB.Actor.findAndCountAll(&#123; ... include: [ &#123; ... through: &#123; attributes: [] &#125; &#125; ]&#125;) 4、建立关联关系时，可在app/utils/mysql/db.js中进行，引入的 initModels 中导出了所有 model 层，可参考：app/utils/mysql/db.js。 5、多对多的关联查询可以分解为以下四条 sql 进行，在数据量大的时候能减少查询时间，也是简化 sql 语句的方法： 查询电影表的总数量 total 查询电影表前十条数据 拿着上述十条数据去关联表查询关联数据，对关联的演员信息进行去重 拿着上述去重后的演员信息在演员表中查询，由代码拼装数据再从接口返回 ¶五、占坑文章 1、预先加载，参考 Sequelize 中文文档 - 预先加载 ¶六、参考文章 练习过程中较多的参考了以下文章中提到的内容，在此感谢： [1] Sequelize 中文文档 - 关联 [2] Sequelize 英文官网 Many-To-Many relationships","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Sequelize","slug":"node/Sequelize","permalink":"https://liuxianyu.cn/categories/node/Sequelize/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Sequelize","slug":"Sequelize","permalink":"https://liuxianyu.cn/tags/Sequelize/"}],"author":"liuxy0551"},{"title":"账号簿开发（三）—— 微信小程序的云开发和云函数","slug":"2021-08-08-account-notebook-c","date":"2021-08-08T17:49:53.000Z","updated":"2021-08-08T17:49:53.000Z","comments":true,"path":"article/account-notebook-c.html","link":"","permalink":"https://liuxianyu.cn/article/account-notebook-c.html","excerpt":"微信小程序的云开发是腾讯云为小程序提供的开发能力，可以省去后端的工作，也可以节省很多运维的工作，有些类似于 Serverless 和之前学习的函数计算，官方文档：微信云开发。云开发的初始入门可以看看哔站上的视频，入门够用了，推荐一个：认识云开发。","text":"微信小程序的云开发是腾讯云为小程序提供的开发能力，可以省去后端的工作，也可以节省很多运维的工作，有些类似于 Serverless 和之前学习的函数计算，官方文档：微信云开发。云开发的初始入门可以看看哔站上的视频，入门够用了，推荐一个：认识云开发。 这是一个系列随笔，主要记录『账号簿』微信小程序的开发过程： 账号簿（微信小程序）的开发过程 账号簿开发（一）—— 微信小程序 AES 加密解密 账号簿开发（二）—— 微信小程序检查更新及调试 账号簿开发（三）—— 微信小程序的云开发 账号簿开发（四）—— 写一个随机密码生成器 ¶一、云能力初始化 小程序端使用云能力前需要先完成初始化，小程序端初始化： 1234567// app.jsonLoad() &#123; wx.cloud.init(&#123; env: 'prod-32r233wer424as22fq', traceUser: true &#125;)&#125; ¶二、数据库 使用数据库前先获取数据库的引用 1const DB = wx.cloud.database() ¶2.1、增 1234DB.collection('user').add(&#123; name: 'Tom', age: 18&#125;) ¶2.2、改 12345DB.collection('user').where(&#123; name: 'Tom'&#125;).update(&#123; age: 20&#125;) ¶2.3、查 1234const user = await DB.collection('user').where(&#123; name: 'Tom'&#125;).get()console.log(user) // &#123; name: 'Tom', age: 20 &#125; ¶三、云函数 云函数的优点有很多，比如在小程序端进行数据库插入时，会有条数限制，云函数则没有；天然鉴权，请求自带 openId 等等优势，和 Serverless 及之前学习的函数计算一致，官方文档：云函数。 推荐哔站的一个云函数入门视频：开发者工具中新建云函数。 代码参考：获取用户 openId","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"}],"author":"liuxy0551"},{"title":"账号簿开发（二）—— 微信小程序检查更新及调试","slug":"2021-08-08-account-notebook-b","date":"2021-08-08T17:13:03.000Z","updated":"2021-08-08T17:13:03.000Z","comments":true,"path":"article/account-notebook-b.html","link":"","permalink":"https://liuxianyu.cn/article/account-notebook-b.html","excerpt":"微信小程序发布上线后，对其进行迭代也需要微信官方审核代码，之后才可以发布新版本，对于已经使用过该小程序的用户来说，会因为缓存的关系，在小程序发布后不能及时更新到新版本。对于某些 bug 修复的版本，开发者总是希望能立即生效的，类似于 H5 的热更新，这时可以使用到微信提供的 wx.getUpdateManager()。官方文档：wx.getUpdateManager()","text":"微信小程序发布上线后，对其进行迭代也需要微信官方审核代码，之后才可以发布新版本，对于已经使用过该小程序的用户来说，会因为缓存的关系，在小程序发布后不能及时更新到新版本。对于某些 bug 修复的版本，开发者总是希望能立即生效的，类似于 H5 的热更新，这时可以使用到微信提供的 wx.getUpdateManager()。官方文档：wx.getUpdateManager() 这是一个系列随笔，主要记录『账号簿』微信小程序的开发过程： 账号簿（微信小程序）的开发过程 账号簿开发（一）—— 微信小程序 AES 加密解密 账号簿开发（二）—— 微信小程序检查更新及调试 账号簿开发（三）—— 微信小程序的云开发 账号簿开发（四）—— 写一个随机密码生成器 ¶一、代码封装 可以新建目录 /src/utils/wechat，在 wechat 目录下新建文件 update.js，代码如下： 123456789101112131415161718192021222324252627282930// 检测小程序更新const getUpdateInfo = () =&gt; &#123; if (!wx.canIUse('getUpdateManager')) return const updateManager = wx.getUpdateManager() updateManager.onCheckForUpdate(res =&gt; &#123; if (res.hasUpdate) &#123; updateManager.onUpdateReady(() =&gt; &#123; wx.showModal(&#123; title: '更新提示', content: '新版本已经准备好了，是否立即重启小程序？', success: (&#123; confirm &#125;) =&gt; &#123; // 新版本已经下载好，调用 applyUpdate 应用新版本并重启 confirm &amp;&amp; updateManager.applyUpdate() &#125; &#125;) &#125;) updateManager.onUpdateFailed(() =&gt; &#123; // 新版本下载失败 wx.showModal(&#123; title: '已经有新版本了哟~', content: '新版本已经上线啦~，请您删除当前小程序，重新搜索打开哟~' &#125;) &#125;) &#125; &#125;)&#125;export &#123; getUpdateInfo&#125; ¶二、使用 可以在小程序入口文件 app.js 中的 onLoad 方法中使用封装的 getUpdateInfo 方法。 12345import &#123; getUpdateInfo &#125; from '@/utils/wechat/update'onLoad() &#123; getUpdateInfo()&#125; ¶三、微信开发者工具调试 注意 小程序 开发版/体验版 没有「版本」概念，所以无法在 开发版/体验版 上测试版本更新情况 勾选编译模式下的下次编译模拟更新，并选择成功状态或失败状态，确认后点击编译按钮稍候片刻即可查看模拟效果：","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"}],"author":"liuxy0551"},{"title":"账号簿开发（一）—— 微信小程序 AES 加密解密","slug":"2021-08-08-account-notebook-a","date":"2021-08-08T16:42:00.000Z","updated":"2021-08-08T16:42:00.000Z","comments":true,"path":"article/account-notebook-a.html","link":"","permalink":"https://liuxianyu.cn/article/account-notebook-a.html","excerpt":"『账号簿』作为一款记录账号密码的微信小程序而言，安全自然是很重要的，基于此放弃了自行搭建数据库的打算，使用了腾讯云为微信小程序提供的云开发功能，同时也提供数据库的功能，是一个对象型的数据库，安全性比自己在 Docker 中搭建的数据库要高且有更多保障。但是即便如此，上传到数据库的账号密码也使用了业内普遍认可的 AES 对称加密算法进行加密再经 BASE64 编码。这里记录一下 AES 加密后再经 BASE64 编码的过程。","text":"『账号簿』作为一款记录账号密码的微信小程序而言，安全自然是很重要的，基于此放弃了自行搭建数据库的打算，使用了腾讯云为微信小程序提供的云开发功能，同时也提供数据库的功能，是一个对象型的数据库，安全性比自己在 Docker 中搭建的数据库要高且有更多保障。但是即便如此，上传到数据库的账号密码也使用了业内普遍认可的 AES 对称加密算法进行加密再经 BASE64 编码。这里记录一下 AES 加密后再经 BASE64 编码的过程。 这是一个系列随笔，主要记录『账号簿』微信小程序的开发过程： 账号簿（微信小程序）的开发过程 账号簿开发（一）—— 微信小程序 AES 加密解密 账号簿开发（二）—— 微信小程序检查更新及调试 账号簿开发（三）—— 微信小程序的云开发 账号簿开发（四）—— 写一个随机密码生成器 ¶一、CryptoJS 依赖 CryptoJS 进行加密，可以新建目录 /src/utils/lib，在 lib 目录下新建文件 CryptoJS.js，具体代码见：CryptoJS.js，然后在 utils 目录下新建文件 crypto.js，代码如下： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/** * 加密过程：先对账号和密码进行 AES 加密，再进行 BASE64 编码 * 解密过程：与加密过程相反 */import CryptoJS from './lib/CryptoJS'const key = CryptoJS.enc.Utf8.parse('0102030405060807') // 十六位十六进制数作为秘钥const iv = CryptoJS.enc.Utf8.parse('0102030405060807') // 十六位十六进制数作为秘钥偏移量// aes 加密const aesEncrypt = (word) =&gt; &#123; let srcs = CryptoJS.enc.Utf8.parse(word) let encrypted = CryptoJS.AES.encrypt(srcs, key, &#123; iv, mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7 &#125;) return Base64Encode(encrypted.ciphertext.toString().toUpperCase())&#125;// aes 解密const aesDecrypt = (val) =&gt; &#123; let word = Base64Decode(val) let encryptedHexStr = CryptoJS.enc.Hex.parse(word) let srcs = CryptoJS.enc.Base64.stringify(encryptedHexStr) let decrypt = CryptoJS.AES.decrypt(srcs, key, &#123; iv, mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7 &#125;) let decryptedStr = decrypt.toString(CryptoJS.enc.Utf8) return decryptedStr.toString()&#125;// base64 加密const Base64Encode = (val) =&gt; &#123; let str = CryptoJS.enc.Utf8.parse(val) let base64 = CryptoJS.enc.Base64.stringify(str) return base64&#125;// base64 解密const Base64Decode = (val) =&gt; &#123; let words = CryptoJS.enc.Base64.parse(val) return words.toString(CryptoJS.enc.Utf8)&#125;export &#123; aesEncrypt, aesDecrypt&#125; ¶二、使用 123456import &#123; aesEncrypt, aesDecrypt &#125; from '@/utils/crypto'const password = 'Aa@.-123456'console.log('原密码：', password) // Aa@.-123456console.log('加密后：', aesEncrypt(password)) // MTgzRDhEQTA1ODUzQzMwMDU0NkQyQ0FGQTg4RDI3NjQconsole.log('解密后：', aesDecrypt(aesEncrypt(password))) // Aa@.-123456","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"加密解密","slug":"加密解密","permalink":"https://liuxianyu.cn/tags/加密解密/"},{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"}],"author":"liuxy0551"},{"title":"账号簿（微信小程序）的开发过程","slug":"2021-08-08-account-notebook","date":"2021-08-08T16:07:42.000Z","updated":"2021-08-08T16:07:42.000Z","comments":true,"path":"article/account-notebook.html","link":"","permalink":"https://liuxianyu.cn/article/account-notebook.html","excerpt":"最近公司的业务比较繁忙，几乎停止了随笔的更新，反省下自己。 但还是利用两个周末开发了一个之前一直想做的小程序，idea 来自一位朋友，他想自己做一个记录账号密码的微信小程序给自己使用，他是位后端，即便学习了 Vue 的知识，但还是没开始这项工作，那就由我来完成吧。","text":"最近公司的业务比较繁忙，几乎停止了随笔的更新，反省下自己。 但还是利用两个周末开发了一个之前一直想做的小程序，idea 来自一位朋友，他想自己做一个记录账号密码的微信小程序给自己使用，他是位后端，即便学习了 Vue 的知识，但还是没开始这项工作，那就由我来完成吧。 会围绕这个小程序的开发过程写几篇系列随笔，主要是为了在以后开发小程序的过程中可以有所参考和改进。Github 代码，欢迎 star。 ¶一、相关随笔 账号簿（微信小程序）的开发过程 账号簿开发（一）—— 微信小程序 AES 加密解密 账号簿开发（二）—— 微信小程序检查更新及调试 账号簿开发（三）—— 微信小程序的云开发 账号簿开发（四）—— 写一个随机密码生成器 ¶二、实现效果 ¶2.1、微信扫码体验 ¶2.2、小程序截图 ¶2.3、云端数据截图 账号密码均为加密后的密文，无法查看明文 ¶三、相关说明 ¶3.1、功能点 [x] 标签管理 [x] 账号管理 [x] 安全密码 [x] 检查更新 [x] 指纹解锁 [x] 云同步及权限管理 [x] 分享、友情链接 [x] 代码开源 [x] 系列文章 [x] 账号密码自动同步 [x] 账号列表顶部模糊搜索框 [x] 随机密码生成器 [ ] 云同步记录 ¶3.2、使用说明 开发者承诺不会自动上传账号密码到云端，仅在用户主动点击备份时才会**加密（AES 加密后再经过 BASE64 编码）**账号密码后上传到云端，数据库为腾讯云专门为微信小程序提供的云数据库，任何人无法查看账号密码的明文，均为加密后的密文。用户账号密码保存在手机本地数据中。 清除微信数据或微信缓存以及删除小程序都会丢失本地数据，建议进行这些操作前使用云同步功能备份账号密码。 开发『账号簿』的目的是方便个人密码的保存和查看，是为了保存个人账号密码而开发的，分享给有需要的人使用。 如遇到问题或想二次开发的，请联系开发者。邮箱：liuxy0551@qq.com 开发者尽最大可能保障数据安全，但不承担任何责任。 ¶3.3、用途说明 『账号簿』用来记录个人的账号密码，数据保存在本地，清除微信数据或微信缓存以及删除小程序都会丢失本地数据。提供了云同步的功能，可以在更换手机前将数据加密（AES 加密后再经过 BASE64 编码）后备份到云端，更换手机后下载备份即可恢复。因云同步功能会使用云数据库读写次数，可以在支持开发者后联系开发者开通此功能。 如果对安全不放心，可以联系开发者进行私有化部署，让你拥有一个属于自己的账号管理小程序！ ¶3.4、技术说明 Taro 3.x React 17.x taro-ui 最新版 微信小程序 - 云开发 微信小程序 - 云函数 基于 Taro 3.x 使用 React 语法和 Taro UI 的部分组件开发了“账号簿”微信小程序，使用到了微信小程序的云开发和云函数，免费版数据库读写次数有限。 ¶3.5、代码结构 12345678910111213141516171819202122232425262728293031account-notebook├─package.json├─src| ├─app.config.js 公用配置项| ├─app.js 全局入口| ├─app.scss 全局样式| ├─index.html| ├─utils 工具方法| ├─pages| | ├─tag| | | ├─list 标签列表页面| | | └─form 标签表单页面| | ├─personal| | | ├─unlock 输入安全密码页面| | | ├─password 设置安全密码页面| | | ├─grid 个人页面| | | ├─cloudSync 云同步页面| | | └─about 关于页面| | ├─home 首页| | └─account| | └─form 账号表单页面| ├─components| | ├─TopBar 自定义状态栏组件| | ├─Empty 空数据组件| | └─ChangeLog 更新日志浮框| ├─assets| | ├─style 样式文件| | └─images 图片资源├─config 配置文件└─cloud 云开发 └─getOpenId 云函数 ¶四、开发 1234git clone https://github.com/liuxy0551/account-notebook.gitcd account-notebookyarnyarn dev:weapp 在微信开发者工具导入项目即可查看效果。 ¶五、管理 ¶5.1、云同步 在微信开发者工具 -&gt; 云开发 -&gt; 数据库 -&gt; userList 中选择指定用户，添加字段isPay，boolean型，值为true即可为该用户开启云同步功能。 ¶5.2、账号记录自动同步 在微信开发者工具 -&gt; 云开发 -&gt; 数据库 -&gt; userList 中选择指定用户，确认isPay字段为true后，添加字段autoSync，boolean型，值为true即可为该用户开启账号记录自动同步功能。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"}],"author":"liuxy0551"},{"title":"利用 canvas 实现简单图片滤镜","slug":"2021-07-16-canvas-image-filter","date":"2021-07-16T10:37:40.000Z","updated":"2021-07-16T10:37:40.000Z","comments":true,"path":"article/canvas-image-filter.html","link":"","permalink":"https://liuxianyu.cn/article/canvas-image-filter.html","excerpt":"最近会做一次周分享，主题是 canvas 图片滤镜，记录下为此写的 demo。在线访问：https://liuxy0551.github.io/canvas-image-filter/index.html","text":"最近会做一次周分享，主题是 canvas 图片滤镜，记录下为此写的 demo。在线访问：https://liuxy0551.github.io/canvas-image-filter/index.html ¶一、什么是 canvas canvas是一个 HTML 元素，也叫 canvas 画布。Canvas API 主要绘制 2D 图形，而同样使用canvas元素的 WebGL API 一般用于绘制硬件加速的 2D 和 3D 图形。 ¶二、常用图像 API 接口 关于图像处理的 API，主要有 4 个： ¶2.1、绘制图片 drawImage(image, x, y, dwidth, dheight) 其中image是 image 或 canvas 对象，x 和 y 是其在目标 canvas 里的起始坐标，dwidth和dheight是生成图像的宽高。 123456789101112let img = new Image() // 声明新的Image对象img.src = \"./img/photo.png\"// 图片加载后img.onload = () =&gt; &#123; canvas = document.querySelector(\"#my-canvas\") ctx = canvas.getContext(\"2d\") // 根据image大小，指定canvas大小 canvas.width = img.width canvas.height = img.height // 绘制图像 ctx.drawImage(img, 0, 0, canvas.width, canvas.height)&#125; ¶2.2、获取图像数据 getImageData(x, y, width, height) 其中x和y是将要被提取图像区域的左上角坐标，width和height是将要被提取图像区域的宽高。返回一个ImageData对象，包含 canvas 给定矩形区域的图像数据。 1const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height) ¶2.3、重写图像数据 putImageData(imageData, x, y) 其中imageData是getImageData方法返回的ImageData对象，x和y分别是源图像数据在目标画布中 x 轴 和 y 轴的偏移量。 1ctx.putImageData(imageData, 0, 0) // 重绘图像 ¶2.4、导出图像 toDataURL([type, encoderOptions]) 其中type代表图片格式，默认为 image/png，encoderOptions是指在type设置为 image/jpeg 或 image/webp 时，可以从 0 到 1 设置图片的质量，默认 0.92。 更详细的 API 和参数说明请参考：MDN CanvasRenderingContext2D ¶三、常见滤镜效果 实现滤镜主要借用getImageData方法，返回每个像素的 RGBA 值，操作像素进行不同的运算即可得到不同的滤镜效果。 ¶3.1、去色效果 相当于黑白照片，定义以下公式：gray = red * 0.3 + green * 0.59 + blue * 0.11 ¶3.2、底片效果 底片效果就是 RGB 最大值减去当前值，即 255 - 当前值： ¶3.3、单色效果 单色效果是将当前像素的其他色值去除，比如显示红色时将 green、blue 可以设置为 0： ¶3.4、黑白效果 通过判断当前像素的色值是否超过某一个标定值，大于则显示黑色，否则显示白色，即可达到效果。这个标定值可以设定为 RGB 最大值的一半，也就是 128： ¶3.5、荧光效果 ¶四、代码 [1] https://github.com/liuxy0551/canvas-image-filter","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"}],"tags":[{"name":"canvas","slug":"canvas","permalink":"https://liuxianyu.cn/tags/canvas/"}],"author":"liuxy0551"},{"title":"egg 设置 keepAliveTimeout 超时时间","slug":"2021-06-25-egg-keepAlive-timeout","date":"2021-06-25T23:19:19.000Z","updated":"2021-06-25T23:19:19.000Z","comments":true,"path":"article/egg-keepAlive-timeout.html","link":"","permalink":"https://liuxianyu.cn/article/egg-keepAlive-timeout.html","excerpt":"最近在阿里云函数计算中，Post 接口经常在紧密相邻的第二次调用时报错，{ errorMessage: 'Process exited unexpectedly before completing request (duration: 1ms, maxMemoryUsage: 200.52MB) }，这个错误经过测试是偶发必现的，比较影响体验，记录下解决方法。","text":"最近在阿里云函数计算中，Post 接口经常在紧密相邻的第二次调用时报错，{ errorMessage: 'Process exited unexpectedly before completing request (duration: 1ms, maxMemoryUsage: 200.52MB) }，这个错误经过测试是偶发必现的，比较影响体验，记录下解决方法。 ¶一、出现错误 这个项目在函数计算的部署环境是Custom Runtime，选用了egg框架。调用一个 Post 接口的时候，发现经常性的没有反应，查看日志后发现偶发遇到502 bad gateway的错误。查看函数计算的文档后发现有以下要求： HTTP Server 配置要求 Connection 需要设置为 Keep-Alive，Server 端请求超时时间需设置在15分钟及以上。示例如下： 1234//例如Node.js使用express时var server = app.listen(PORT, HOST)server.timeout = 0 // never timeoutserver.keepAliveTimeout = 0 // keepalive, never timeout ¶二、解决方法 从网上找到三种解决方法，下述前两种尝试后发现没有效果，错误依旧可复现。 ¶2.1 config.httpclient 无效 修改/config/config.default.js文件： 123456789101112131415161718192021222324252627config.httpclient = &#123; request: &#123; // 默认 request 超时时间 timeout: 60000 &#125;, httpAgent: &#123; // 默认开启 http KeepAlive 功能 keepAlive: true, // 空闲的 KeepAlive socket 最长可以存活 4 秒 freeSocketTimeout: 0, // 当 socket 超过 30 秒都没有任何活动，就会被当作超时处理掉 timeout: 0, // 允许创建的最大 socket 数 maxSockets: Number.MAX_SAFE_INTEGER, // 最大空闲 socket 数 maxFreeSockets: 256 &#125;, httpsAgent: &#123; keepAlive: true, freeSocketTimeout: 0, timeout: 0, maxSockets: Number.MAX_SAFE_INTEGER, maxFreeSockets: 256 &#125;&#125; 可在 HttpClient 默认全局配置、github -&gt; config.default.js -&gt; httpclient 中查看文档。 注意 HttpClient 是发送 HTTP 请求的，而 timeout 和 keepAliveTimeout 是要设置到 egg 启动的 http server 上。 ¶2.2 config.clusterClient 无效 修改/config/config.default.js文件： 1234config.clusterClient = &#123; maxWaitTime: 60000, responseTimeout: 60000&#125; 可在 在框架里面 cluster-client 相关的配置项、github -&gt; config.default.js -&gt; clusterClient 中查看文档。 ¶2.3 app.server 推荐 APP 的生命周期函数中提供了serverDidReady方法，此时可以从app.server拿到 server 的实例。文档：启动自定义。拿到 server 实例我们就可以设置 timeout 和 keepAliveTimeout。 根目录增加app.js文件，代码如下： 12345678910111213class AppBootHook &#123; constructor(app) &#123; this.app = app &#125; async serverDidReady() &#123; // http / https server 已启动，开始接受外部请求 // 此时可以从 app.server 拿到 server 的实例 this.app.server.timeout = 0 this.app.server.keepAliveTimeout = 0 &#125;&#125;module.exports = AppBootHook ¶参考文章 [1] egg Issue #4541 - egg 如此设置 keepAliveTimeout 超时时间不不起作用？ [2] egg Issue #4411 - egg 迁移到阿里云函数计算，使用post方式发送请求，第一个请求正常，相隔10秒后发第二个请求，egg崩溃","categories":[{"name":"Serverless","slug":"Serverless","permalink":"https://liuxianyu.cn/categories/Serverless/"}],"tags":[{"name":"函数计算","slug":"函数计算","permalink":"https://liuxianyu.cn/tags/函数计算/"},{"name":"Serverless","slug":"Serverless","permalink":"https://liuxianyu.cn/tags/Serverless/"}],"author":"liuxy0551"},{"title":"在 Cent OS 中部署 Gotty 并提供给项目使用","slug":"2021-06-08-cent-os-gotty","date":"2021-06-08T09:31:45.000Z","updated":"2021-06-08T09:31:45.000Z","comments":true,"path":"article/cent-os-gotty.html","link":"","permalink":"https://liuxianyu.cn/article/cent-os-gotty.html","excerpt":"Gotty 是一个能在浏览器打开的终端（Web Terminal），可以用于执行命令，也可以用于 SSH。通过把部署的主机作为跳板机，登录主机列表中的某一台机器。利用 前端学习 Docker 之旅（六）—— Docker 中安装 Cent OS 并通过 SSH 连接 搭建的 Cent OS 环境来尝试部署并使用。","text":"Gotty 是一个能在浏览器打开的终端（Web Terminal），可以用于执行命令，也可以用于 SSH。通过把部署的主机作为跳板机，登录主机列表中的某一台机器。利用 前端学习 Docker 之旅（六）—— Docker 中安装 Cent OS 并通过 SSH 连接 搭建的 Cent OS 环境来尝试部署并使用。 ¶一、实现效果 ¶二、安装运行 ¶2.1 安装工具 1yum install -y wget ¶2.2 拉取对应的文件 从 Release 页面下载对应的文件，建议下载最新版，当前最新版 v1.0.1。 1wget -P /mnt/gotty https://github.com/yudai/gotty/releases/download/v1.0.1/gotty_linux_amd64.tar.gz 指令解释： wget -P /保存文件的目录 文件下载地址 ¶2.3 解压文件 1tar -xzvf /mnt/gotty/gotty_linux_amd64.tar.gz -C /mnt/gotty ¶2.4 运行 ¶2.4.1 前台运行 1/mnt/gotty/gotty -p 9000 -w --max-connection 50 --permit-arguments bash ¶2.4.2 后台运行推荐 1/mnt/gotty/gotty -p 9000 -w --permit-arguments bash &gt;/mnt/gotty/log.file 2&gt;&amp;1 &amp; &gt;/mnt/gotty/log.file 2&gt;&amp;1 &amp;是将产生的文件存到指定文件中，可搜索Linux 后台运行；上述命令会返回对应进程的 PID。服务启动后可在 MAC 上访问 http://localhost:9000 查看效果。 更多选项可参考：https://github.com/yudai/gotty#options 指令解释： -p 9000 表示运行在 9000 端口 -w 表示允许客户端写入 --max-connection 50 表示 socket 最大连接数 --permit-arguments 表示运行 url 携带参数，?arg=aaa bash 表示进入 bash 终端 -r 表示会在 url 后添加随机字符串路径 -c admin:1234 表示需要用户名密码进行访问 ¶2.5 停止后台运行 方法一： 可参考：Linux 中的一些命令 通过lsof查看对应端口的程序，会返回对应进程的 PID，假设 PID 是 1476： 1yum install -y lsof 1lsof -i:9000 1kill 1476 方法二： 常用任务管理命令： 12345jobs // 查看任务，返回任务编号n和进程号fg %n // 将编号为n的任务转前台运行bg %n // 将编号为n的任务转后台运行ctrl + c // 结束当前任务ctrl + z // 挂起当前任务","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"Cent OS","slug":"Linux/Cent-OS","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/"}],"tags":[{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"},{"name":"Gotty","slug":"Gotty","permalink":"https://liuxianyu.cn/tags/Gotty/"}],"author":"liuxy0551"},{"title":"前端学习 Docker 之旅（六）—— Docker 中安装 Cent OS 并通过 SSH 连接","slug":"2021-06-07-docker-e","date":"2021-06-07T10:51:23.000Z","updated":"2021-06-07T10:51:23.000Z","comments":true,"path":"article/docker-e.html","link":"","permalink":"https://liuxianyu.cn/article/docker-e.html","excerpt":"最近有个 Web Terminal 的想法，可能需要多次测试，所以准备个 Cent OS 的环境还是很重要的，记录下在 Docker 中安装 Cent OS 的过程。","text":"最近有个 Web Terminal 的想法，可能需要多次测试，所以准备个 Cent OS 的环境还是很重要的，记录下在 Docker 中安装 Cent OS 的过程。 ¶一、安装 Cent OS ¶1.1、查找镜像 在 Docker Hub 官网查找自己需要的版本 https://hub.docker.com/_/centos?tab=tags ¶1.2、下载镜像 我选择的是 7.9.2009 版本： 1docker pull centos:centos7.9.2009 下载完成后使用docker images命令查看镜像列表。 ¶二、启动容器 ¶2.1、使用镜像创建容器并运行 1docker run -p 10000:22 -p 9000:9000 -itd --name centos7.9 --privileged=true centos:centos7.9.2009 /usr/sbin/init 或 1docker run -p 10000:22 -itd --name centos7.9 centos:centos7.9.2009 /bin/bash 指令解释： -p 表示端口映射，-p 宿主机port:容器port --name 表示给容器指定的名称 centos:centos7.9.2009 表示运行的镜像名称 --privileged=true 表示以特权模式运行容器，且不能使用默认的 bash，得换成 init 后续可通过以下命令启动/停止容器： 1docker start/stop centos7.9 ¶2.2、进入容器 以后台模式运行容器，再进入容器： 1docker exec -it centos7.9 /bin/bash 指令解释： centos7.9 容器名称 进入 centos7.9，出现下图红框部分的容器 id 则表示进入成功： ¶2.3、开启 ssh 连接 安装工具： 1yum install -y openssh-server 启动 ssh 服务： 1systemctl start sshd.service 设置系统 root 用户密码，输入两次密码设置成功： 1passwd ¶2.4、连接 centos7.9 1ssh root@192.168.106.119 -p 10000 因为是很多操作是尝试着进行的，所以很多次在连接 Cent OS 后，删除镜像、容器后再次尝试连接的时候就会报错了WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!，根据提示编辑~/.ssh/known_hosts文件，删除服务器的记录即可。 1vim ~/.ssh/known_hosts 附：前端学习 Docker 之旅（二）—— 常用指令","categories":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/categories/Docker/"}],"tags":[{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"},{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/tags/Docker/"}],"author":"liuxy0551"},{"title":"阿里云函数计算介绍与实践","slug":"2021-05-16-aliyun-function-compute","date":"2021-05-16T14:10:08.000Z","updated":"2021-05-16T14:10:08.000Z","comments":true,"path":"article/aliyun-function-compute.html","link":"","permalink":"https://liuxianyu.cn/article/aliyun-function-compute.html","excerpt":"函数计算是一个和 Serverless 相关的概念，函数计算可以理解为 FaaS，目前 Serverless 并没有一个很官方的定义，业内普遍认为 Serverless = BaaS + FaaS。","text":"函数计算是一个和 Serverless 相关的概念，函数计算可以理解为 FaaS，目前 Serverless 并没有一个很官方的定义，业内普遍认为 Serverless = BaaS + FaaS。 ¶一、Serverless Serverless 是一种新型的互联网架构 —— 无服务器架构，这里的无服务器不是指不需要服务器，而是开发者可以不管理服务器等基础设施。其实 Serverless 也谈不上新，因为这个概念在 2012 年就已经提出了，简单看下 Serverless 的发展历史： 云计算的发展过程从 IaaS，PaaS，SaaS 到最新的 Serverless，介绍下这些基本概念就可以看出 Serverless 是云计算发展到某一阶段的必然产物，可以节省运维成本和开发成本。 IaaS：基础设施即服务，服务商提供物理层基础设施资源，开发者需要购买并选择操作系统，安装软件、部署程序、监控应用。 PaaS：平台即服务，服务商提供操作系统、数据库、负载均衡器和其他中间件，相比 IaaS，开发者仅需要控制上层的程序部署与应用托管的环境即可。 SaaS：软件即服务， 服务商提供基于软件的解决方案，如 OA、CRM、ERP、Office、iCloud 等，客户只需要通过服务商平台获取软件使用即可。 BaaS：后端即服务，如提供文件存储、推送服务、身份验证服务等。 FaaS：函数即服务，服务商提供一个平台，允许开发者开发、允许和管理应用程序，而无需构建和维护基础架构，通常在构建微服务应用时使用。 ¶二、函数计算 函数计算是阿里云作为云服务商提供的一项服务能力，类似的服务还有亚马逊的 Lambda、腾讯云的云函数、Google Cloud Functions 等。本篇随笔就介绍一下阿里云的函数计算，并进行小场景实践：基于 egg 和 MySQL 提供 Web 服务。 阿里云对函数计算（Function Compute）的定义是：一个事件驱动的全托管 Serverless 计算服务，无需管理服务器等基础设施，只需编写代码并上传，函数计算会准备好计算资源，并以弹性、可靠的方式运行代码，并提供日志查询、性能监控和报警等功能。 我们可以对比一个应用从开发到上线的过程： ¶2.1、工作流程 1、开发者编写程序，函数计算支持的 开发语言列表。 2、开发者上传程序到函数计算。 3、触发函数执行，触发方式包括OSS、API网关、日志服务、表格存储以及函数计算API、SDK等。 4、动态扩容，根据用户请求量自动扩容，减轻运维压力，开发者和用户无感知。 5、按函数执行时间计费。 ¶2.2、特点 高效免运维 弹性执行 按量付费，低成本 事件驱动 调试麻烦 构建复杂 休眠启动 ¶2.3、典型场景 Web 应用 对计算能力有很强的弹性诉求 事件驱动型的应用 ¶三、实践 可参考官方文档：快速入门。创建函数的方法有很多种，我采用的是通过命令行创建函数。 ¶3.1、开通函数计算服务 登录阿里云控制台，搜索函数计算并开通。 ¶3.2、安装命令行工具 全局安装命令行工具 Funcraft： 12npm install @alicloud/fun -gfun --version 使用 fun 工具部署可以去全局定义账户信息，输入fun config依次配置 Account ID（阿里云账号 ID）、AccessKey ID、AccessKey Secret、Default Region Name。如果账号是 RAM 用户，Account ID 需要配置为阿里云账号的 ID，AccessKey ID、AccessKey Secret 为 RAM 用户的密钥。推荐全局配置，完成配置后，Funcraft 会将配置保存到用户目录下的.fcli/config.yaml文件中。 ¶3.3、编写代码 先写个 hello-world： 12345mkdir hello-worldcd hello-worldnpm init egg --type=simplenpm inpm run dev 写个 GET 和 POST 的接口，egg 会有 CSRF 攻击的限制，可以在/config/config.default.js中添加 csrf 配置的代码： 12345678module.exports = appInfo =&gt; &#123; const config = exports = &#123;&#125;; config.security = &#123; csrf: &#123; enable: false &#125; &#125;&#125; ¶3.4、部署过程 部署时会同时上传 node_modules，所以使用 deploy 命令中使用了npm i --production。也可以通过 层 的概念去上传依赖包，层可以理解为依赖库、自定义运行环境，此时可配置.funignore文件，过滤不上传的文件或目录。 123rm -rf node_modulesnpm i --productionfun deploy 确认服务和函数的名称后，fun 工具会生成对应的配置文件： （1）新增配置文件 1234567891011121314151617181920212223242526272829ROSTemplateFormatVersion: &apos;2015-09-01&apos;Transform: &apos;Aliyun::Serverless-2018-04-03&apos;Resources: dingtalk-robot: # service name Type: &apos;Aliyun::Serverless::Service&apos; Properties: Description: This is FC service LogConfig: Project: aliyun-fc-cn-hangzhou-3ff06808-bae1-59f3-a782-6e6623a34e1f Logstore: function-log EnableRequestMetrics: true TracingConfig: Disable InternetAccess: true dingtalk-robot: # function name Type: &apos;Aliyun::Serverless::Function&apos; Properties: Handler: index.handler Runtime: custom CodeUri: ./ MemorySize: 1024 InstanceConcurrency: 1 Timeout: 120 Events: httpTrigger: Type: HTTP Properties: AuthType: ANONYMOUS Methods: [&apos;GET&apos;, &apos;POST&apos;] （2）自定义运行环境，需要将可执行文件 bootstrap 的顶部配置更新为： 1#!/bin/bash 同时，给予 bootstrap 文件可执行权限（777 或 755）： 1chmod 777 bootstrap 部署代码到后，函数计算会运行bootstrap 文件，该文件指定运行端口、启动程序。 12345// bootstrap#!/bin/bashexport PORT=9000export EGG_SERVER_ENV=prodnpx --no-install egg-scripts start --workers=1 ¶3.5、部署完成 继续命令行的部署，配置自定义域名后进行验证。 ¶四、复杂场景 本节代码：https://github.com/liuxy0551/dingtalk-robot ¶4.1、实现效果 可以发送消息到指定钉钉群，效果如下: ¶4.2、通过钉钉群机器人发消息 12345678910111213141516171819202122232425262728293031323334353637383940/** * 发送消息 * @param &#123;string&#125; url * @param &#123;object&#125; msg * @returns &#123;Promise&#125; */const sendMsgToGroup = (msg, service) =&gt; &#123; return new Promise(async (resolve, reject) =&gt; &#123; try &#123; const robots = await service.robot.getRobots() let promiseList = [] for (let i of robots) &#123; promiseList.push(sendOne(getSignUrl(i.secret, i.Webhook), msg, i.name)) &#125; const res = await Promise.all(promiseList) resolve(res) &#125; catch (err) &#123; reject(err) &#125; &#125;) function sendOne (url, msg, name) &#123; const params = &#123; json: msg, encoding: 'utf-8', headers: &#123; 'Content-Type': 'application/json' &#125; &#125; return new Promise((resolve, reject) =&gt; &#123; request.post(url, params, (error, response, body) =&gt; &#123; if (!error &amp;&amp; response.statusCode == 200) &#123; resolve(&#123; ...body, name &#125;) &#125; else &#123; reject(&#123; ...error, name &#125;) &#125; &#125; ) &#125;) &#125;&#125; /app/service/robot.js： 1234567891011121314// 获取机器人列表getRobots () &#123; return new Promise(async (resolve, reject) =&gt; &#123; try &#123; const robots = await db.Robot.findAll(&#123; where: getWhere(), raw: true &#125;) resolve(robots) &#125; catch (err) &#123; reject(err) &#125; &#125;)&#125; ¶4.3、百度统计 通过定时任务拉取百度统计的埋点数据，并通过统一的钉钉群机器人发送到群 123456789101112131415161718192021// 百度统计实现const baidutjAPI = async (config) =&gt; &#123; const &#123; apiUrl, header, body &#125; = config const params = &#123; header, body: &#123; ...body, start_date: getDate(-1), end_date: getDate(), &#125; &#125; return new Promise((resolve, reject) =&gt; &#123; axios.post(apiUrl, params).then(res =&gt; &#123; const desc = res.data.header.desc desc === 'success' ? resolve(res.data) : reject(desc) &#125;).catch(err =&gt; &#123; reject(err) &#125;) &#125;)&#125; 12345678// 定时触发器const axios = require('axios')// 入口文件exports.handler = (event, context, callback) =&gt; &#123; const url = 'http://dingtalk-robot.liuxianyu.cn/api/baidutj' axios.post(url) callback(null, 'timed-task')&#125; ¶4.4、记账啦 通过定时任务拉取微信小程序的数据，并通过统一的钉钉群机器人发送到群 ¶4.5、从 MySQL 查询数据 ¶五、使用心得 ¶5.1、版本管理 操作路径：控制台 -&gt; 函数计算 -&gt; 服务及函数 -&gt; (选择一个服务)版本管理。 每次部署时可以新建一个版本，第一次新建版本后可以在此版本的基础上新建别名，如：prod，并将自定义域名（第 3 条）、函数的 http 触发器中 版本/别名 选择为 prod。后续部署时，可以新建版本，需要该版本生效时，可以简单编辑 prod 别名对应的版本即可，同时别名支持版本配比，可进行灰度测试。 ¶5.2、配置导出 操作路径：控制台 -&gt; 函数计算 -&gt; 服务及函数 -&gt; (选择一个服务)函数列表 -&gt; 函数名称(点击函数名称) -&gt; 概览 -&gt; 导出 -&gt; 导出配置将导出的 template.yml 文件放到项目中，这样控制台配置的配置项就不会被 deploy 覆盖掉。 注意 控制台导出的配置文件可能有部分缺失，需要和本地已有的 template.yml 文件对比，保留部分字段，如：CodeUri ¶5.3、自定义域名 操作路径：控制台 -&gt; 函数计算 -&gt; 自定义域名每个路由的 版本/别名 在开发调试时先选择 LATEST，等待上线时，按照第 1 条的版本管理，选择别名。 ¶5.4、日志查询 操作路径：控制台 -&gt; 函数计算 -&gt; 服务及函数 -&gt; (选择一个服务)函数列表 -&gt; 函数名称(点击函数名称) -&gt; 日志查询日志内容包含的内容如：接口 url、报错信息。 注意 当函数的 单实例并发度 大于 1 时，只有高级查询，等于 1 时，有简单查询和高级查询。 ¶5.5、请求环境区分 使用函数时如果需要区分生产环境和测试环境，可以发布不同的版本，并创建多个触发器，设置触发器指向不同的版本/别名，如下图： 自定义域名中创建两个域名，用来区分环境，路径可按下方示例填写，生产和测试选择不同的版本/别名即可。 ¶参考文章 [1] 当我们在聊 Serverless 时你应该知道这些 ¶附件 1、函数计算的介绍与实践.pptx (2.7 MB) 2、部署演示.mp4 (28.2 MB)","categories":[{"name":"Serverless","slug":"Serverless","permalink":"https://liuxianyu.cn/categories/Serverless/"}],"tags":[{"name":"函数计算","slug":"函数计算","permalink":"https://liuxianyu.cn/tags/函数计算/"},{"name":"Serverless","slug":"Serverless","permalink":"https://liuxianyu.cn/tags/Serverless/"}],"author":"liuxy0551"},{"title":"Git 常用命令（十五）—— Git 设置代理","slug":"2018-10-22-Git-Order-O","date":"2021-04-30T17:55:42.000Z","updated":"2021-04-30T17:55:42.000Z","comments":true,"path":"article/git-order-o.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-o.html","excerpt":"git clone github 仓库时常出现超时，设置下代理可以很好的解决问题。","text":"git clone github 仓库时常出现超时，设置下代理可以很好的解决问题。 ¶设置代理 https 也可以改为 http；7890 是 clash 的代理服务端口。--global 表示全局设置。 1git config --global https.proxy https://127.0.0.1:7890 ¶取消代理 1git config --global --unset https.proxy ¶查看代理 1git config --global --get https.proxy","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（十四）—— Git 批量删除分支","slug":"2018-10-22-Git-Order-N","date":"2021-04-30T16:55:42.000Z","updated":"2021-04-30T16:55:42.000Z","comments":true,"path":"article/git-order-n.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-n.html","excerpt":"在日常工作中，每个需求会单独切一个分支，通过 MR 合入公共分支的同时可以在 MR 勾选删除源分支，日积月累就会导致本地有很多分支且对应的远程分支已经被删除。这里记录下如何快速清理这些分支。","text":"在日常工作中，每个需求会单独切一个分支，通过 MR 合入公共分支的同时可以在 MR 勾选删除源分支，日积月累就会导致本地有很多分支且对应的远程分支已经被删除。这里记录下如何快速清理这些分支。 清理前 确认即将清理的本地分支是已经 merged 的分支，避免丢失分支。同时分支名有一定规律则方便批量删除。 ¶批量删除本地分支 1git branch |grep 'feat_5.2.x_' |xargs git branch -D ¶批量删除远程分支 1git branch -r| grep 'feat_5.2.x_' | sed 's/origin\\///g' | xargs -I &#123;&#125; git push origin :&#123;&#125;","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（十三）—— Git 取消文件更新监听【转载】","slug":"2018-10-22-Git-Order-M","date":"2021-04-30T11:40:22.000Z","updated":"2021-04-30T11:40:22.000Z","comments":true,"path":"article/git-order-m.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-m.html","excerpt":"平常使用 pm2 启动 node 项目时，想要指定日志输出地址，需要创建好日志文件，但是又不想打印的日志页传到仓库，可以新创建日志文件，提交后在忽略该文件的更新监听。","text":"平常使用 pm2 启动 node 项目时，想要指定日志输出地址，需要创建好日志文件，但是又不想打印的日志页传到仓库，可以新创建日志文件，提交后在忽略该文件的更新监听。 ¶为什么要取消文件监听 取消文件监听自有它的好处，比如平时开发你可以使用自己的脚本对项目进行更改、打补丁、等等。最常见的手段就是直接修改项目的配置文件.gitignore，然后写上你要忽略的文件，比如： 1234node_modules/dist/test/config/index.js 但问题来了，.gitignore的修改会被 git 监听到，如果你不介意的话，那么到这里就结束了，但如果你也不想要.gitignore也被监听到，那就继续往下看。 ¶一、assume-unchanged 和 skip-worktree 使用assume-unchanged 123git update-index --assume-unchanged 指定你的文件// 例如git update-index --assume-unchanged ./config/index.js 此时放心的去修改./config/index.js，你会看到 git 不再去监听它，达到了不改.gitignore的的情况下也能取消监听。 使用skip-worktree 123git update-index --skip-worktree 指定你的文件// 例如git update-index --skip-worktree ./config/index.js 也是一样，放心的去修改./config/index.js 如果你想恢复监听可以输入： 12git update-index --no-assume-unchanged 文件名git update-index --no-skip-worktree 文件名 如果你想列出哪些文件使用过assume-unchanged或skip-worktree，可以输入： 12git ls-files -v|grep &quot;^h&quot;git ls-files -v|grep &quot;^S&quot; ¶assume-unchanged与skip-worktree有什么区别 这两种方式效果功能一样，笔者的初略理解是使用pull时有细微差别 --assume-unchanged pull 时，如果远程文件发生与你的取消监听文件有发生了冲突，git 会以远程文件为最新进行覆盖掉旧的，则原先的取消监听文件会失效。 --skip-worktree pull 时，git 会尽力维护你的取消监听文件，确保它们不会被某些情况给覆盖掉，最多就会提示你冲突了，让你手动解决。 结合以上笔者建议使用skip-worktree会更稳妥些。 ¶二、配置当前项目的.git\\info\\exclude文件 如果项目没看到有.git目录说明是被隐藏掉了，可以通过【查看】进行设置显示，编辑exclude文件跟编辑.gitignore一样： 1234node_modules/dist/test/config/index.js OK，就是这么简单！ ¶三、全局配置.gitignore_global文件 123cd ~touch .gitignore_globalgit config --global core.excludesfile ~/.gitignore_global 解释： 1、cd ~表示切换到用户目录 2、touch .gitignore_global表示新建.gitignore_global文件 3、最后进行 git 配置 4、.gitignore_global文件通常放在C:\\Users\\用户名下面 5、.gitignore_global文件编辑规则和上面一样 1234node_modules/dist/test/config/index.js 这样所有项目就都会生效这套规则啦~ ¶注意事项 以上的任意方式当切换分支时会出现一种特殊情况：即你的取消监听文件（比如 index.js）是项目现有的，然后你对它进行了更改而且 git 也忽略了它，但是当你切换分支时，如果切换分支的（index.js）与当前分支的 index.js 文件有冲突，你是无法切换过去的，它会提示如下： 图中表示config/index.js会被即将到来的分支所覆盖，请在切换分支前进行提交。 因为这个问题笔者也是花费了很多时间去找答案，最终能找到的解决手段是： 1、恢复监听 2、使用 stash 保留数据 然后切换分支 3、stash pop 恢复数据 4、重新取消监听 命令如下： 12345git update-index --no-skip-worktree ./config/index.jsgit stashgit checkout 分支名git stash popgit update-index --skip-worktree ./config/index.js 虽然繁琐了点，但起码这是目前唯一的手段，因此笔者建议要取消监听的文件最好是新建的，而不是现有的，这样切换不同分支时就不会出现这样的问题，当然也有可能切换的分支刚好跟你新建的文件是相同的那么还是会产生上面情况，总之尽量少对现有的文件进行取消跟踪，因为 git 不知道切换下一个分支时，到底是忽略还是监听。 关于使用哪种方式来取消文件监听笔者最喜欢的当然是 第二和第三种，简单省事 ~ ¶参考资料 1、Git 取消 git 文件跟踪/监听的几种方式及注意事项 2、删除 git 仓库中无用大文件","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（十二）—— Git 项目设置用户名、邮箱","slug":"2018-10-22-Git-Order-L","date":"2021-04-29T16:10:20.000Z","updated":"2021-04-29T16:10:20.000Z","comments":true,"path":"article/git-order-l.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-l.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下Git 项目设置用户名、邮箱：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下Git 项目设置用户名、邮箱： ¶一、全局配置 公司电脑可以全局设置 Git 的用户名和密码： 12git config --global user.name &quot;git repository userName&quot;git config --global user.email &quot;git repository email&quot; 12git config --global user.name &quot;liuyi&quot;git config --global user.email &quot;liuyi@dtstack.com&quot; 1git config -l ¶二、单独配置 有时候会在公司电脑上处理一些 github 上的项目，这个时候使用单独的用户名和邮箱比较好，在项目路径下执行： 12git config user.name &quot;git repository userName&quot;git config user.email &quot;git repository email&quot; 12git config user.name &quot;liuxy0551&quot;git config user.email &quot;liuxy0551@qq.com&quot; 1git config -l git config -l查看的是全局配置 + 当前项目的单独配置，使用时会优先使用当前项目的单独配置。","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"手写 JavaScript 部分常见方法的代码","slug":"2021-03-31-js-code","date":"2021-03-31T10:10:17.000Z","updated":"2021-03-31T10:10:17.000Z","comments":true,"path":"article/js-code.html","link":"","permalink":"https://liuxianyu.cn/article/js-code.html","excerpt":"最近在复习 js 的基础知识，记录一些常见方法的实现，保持保持写代码的能力。","text":"最近在复习 js 的基础知识，记录一些常见方法的实现，保持保持写代码的能力。 ¶一、深拷贝 可查看之前关于深拷贝的一篇随笔：深拷贝（DeepCopy），本小节代码见： github。 ¶1、代码实现 123456789101112function deepCopy (obj) &#123; let result if (obj !== null &amp;&amp; typeof obj === 'object') &#123; result = Array.isArray(obj) ? [] : &#123;&#125; for (var i in obj) &#123; result[i] = typeof obj[i] === 'object' ? deepCopy(obj[i]) : obj[i] &#125; &#125; else &#123; result = obj &#125; return result&#125; ¶2、验证 12345678910111213// 1、数组拷贝let arr = [&#123; a: 1 &#125;, &#123; b: 2 &#125;]let arr1 = arrlet arr2 = deepCopy(arr)console.log(arr1[0] === arr[0]) // true，浅拷贝，赋址console.log(arr2[0] === arr[0]) // false，深拷贝，赋值// 2、对象拷贝let obj = &#123; a: &#123; b: 1 &#125; &#125;let obj1 = objlet obj2 = deepCopy(obj)console.log(obj1.a === obj.a) // true，浅拷贝，赋址console.log(obj2.a === obj.a) // false，深拷贝，赋值 ¶3、判断是否数组的两种写法 123let arr = []arr.constructor === Array // trueArray.isArray(arr) // true ¶二、防抖 多次操作只触发最后一次操作，可查看之前关于防抖的一篇随笔：防抖-debounce，本小节代码见： github。 ¶1、代码实现 123456789function debounce (func, delay = 600) &#123; let timer = null return function () &#123; timer &amp;&amp; clearTimeout(timer) timer = setTimeout(() =&gt; &#123; func() &#125;, delay) &#125;&#125; ¶2、验证 123456789101112131415161718192021222324&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;防抖&lt;/title&gt; &lt;button id=\"btn\"&gt;点击&lt;/button&gt; &lt;script&gt; // 验证 document.getElementById('btn').addEventListener('click', debounce(() =&gt; &#123; console.log('执行函数') &#125;, 2000)) // 实现 function debounce (func, delay = 600) &#123; let timer = null return function () &#123; timer &amp;&amp; clearTimeout(timer) timer = setTimeout(() =&gt; &#123; func() &#125;, delay) &#125; &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt;&lt;/body&gt;&lt;/html&gt; ¶三、节流 n 秒内触发事件仅执行一次函数，可查看之前关于节流的一篇随笔：节流-throttle，本小节代码见： github。 ¶1、代码实现 123456789101112 function throttle (func, delay = 600) &#123; let timer = null return function () &#123; if (timer) &#123; return &#125; timer = setTimeout(() =&gt; &#123; timer = null func() &#125;, delay) &#125;&#125; ¶2、验证 123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;节流&lt;/title&gt; &lt;button id=\"btn\"&gt;点击&lt;/button&gt; &lt;script&gt; // 验证 document.getElementById('btn').addEventListener('click', throttle(() =&gt; &#123; console.log('执行函数') &#125;, 2000)) // 实现 function throttle (func, delay = 600) &#123; let timer = null return function () &#123; if (timer) &#123; return &#125; timer = setTimeout(() =&gt; &#123; timer = null func() &#125;, delay) &#125; &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"CSS 某个元素 hover 时显示另一个元素","slug":"2021-03-07-css-hover-show","date":"2021-03-07T20:46:03.000Z","updated":"2021-03-08T10:39:03.000Z","comments":true,"path":"article/css-hover-show.html","link":"","permalink":"https://liuxianyu.cn/article/css-hover-show.html","excerpt":"最近在项目有个鼠标移到按钮上旁边显示二维码的需求，简化理解为某个元素 hover 时显示另一个元素，记录下解决方法。","text":"最近在项目有个鼠标移到按钮上旁边显示二维码的需求，简化理解为某个元素 hover 时显示另一个元素，记录下解决方法。 ¶实现思路： 二维码是按钮的子组件 二维码是默认隐藏的display: none; 当鼠标移到按钮上即按钮处于hover状态时，二维码显示display: block; ¶代码示例 ¶HTML 123456&lt;div class=\"bottom-btn\"&gt; &lt;div class=\"qrcode-box\"&gt; &lt;img class=\"qrcode-img\" src=\"../assets/images/a-10.png\" alt=\"\"&gt; &lt;div class=\"text\"&gt;手机扫码下载安装&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; ¶CSS 1234567891011121314151617181920212223242526272829.bottom-btn &#123; width: 232px; height: 57px; background-image: url(\"../assets/images/a-6.png\"); background-size: 100% 100%; cursor: pointer; &amp;:hover .qrcode-box &#123; display: block; &#125; .qrcode-box &#123; width: 234px; height: 261px; margin-top: 40px; background-image: url(\"../assets/images/a-9.png\"); background-size: 100% 100%; text-align: center; display: none; .qrcode-img &#123; width: 120px; height: 120px; border-radius: 4px; margin: 58px auto 5px; &#125; .text &#123; color: #1A64FF; font-size: 14px; &#125; &#125;&#125; ¶添加动画 按如下代码添加 CSS3 animation 动画，推荐写法： 123456789101112131415161718.bottom-btn &#123; &amp;:hover .qrcode-box &#123; display: block; animation: fade-in 0.5s linear forwards; &#125; @keyframes fade-in &#123; from &#123; opacity: 0; &#125; to &#123; opacity: 1; &#125; &#125; .qrcode-box &#123; display: none; &#125;&#125; 以下代码是参考资料中的写法，会使得 bottom-btn 元素变得较大，鼠标滑过二维码隐藏时的区域也会使二维码显现，不符合逻辑，瑕疵示范： 1234567891011121314.bottom-btn &#123; &amp;:hover .qrcode-box &#123; /*display: block;*/ opacity: 1; transform: translateY(0); &#125; .qrcode-box &#123; /*display: none;*/ opacity: 0; transition: all 0.4s; transform: translateY(50%); &#125;&#125; 注意 如果按钮、二维码有一个相同的父元素，.father:hover .qrcode-box { display: block; } 就可以实现类似的效果了。 ¶参考资料： css鼠标悬浮控制元素隐藏与显示","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Sass","slug":"前端/Vue/Sass","permalink":"https://liuxianyu.cn/categories/前端/Vue/Sass/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://liuxianyu.cn/tags/CSS/"}],"author":"liuxy0551"},{"title":"node-sass 安装失败，使用 dart-sass 替代","slug":"2021-03-07-node-sass-failed","date":"2021-03-07T20:04:59.000Z","updated":"2021-03-07T20:04:59.000Z","comments":true,"path":"article/node-sass-failed.html","link":"","permalink":"https://liuxianyu.cn/article/node-sass-failed.html","excerpt":"项目中使用的node-sass在服务器上经常安装失败，改用dart-sass替代，记录下更换方法。","text":"项目中使用的node-sass在服务器上经常安装失败，改用dart-sass替代，记录下更换方法。 ¶更换方法 12npm uninstall node-sassnpm i sass -D 注意 dart-sass 不支持 sass 的/deep/的写法，需要更换成：::v-deep 示例： 123456789101112.box &#123; /deep/ .van-button &#123; padding: 0 20px; &#125;&#125;// 修改为：.box &#123; ::v-deep .van-button &#123; padding: 0 20px; &#125;&#125; ¶参考资料： Node Sass to Dart Sass —— vue-element-admin","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Sass","slug":"前端/Vue/Sass","permalink":"https://liuxianyu.cn/categories/前端/Vue/Sass/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"钉钉定制工作台自定义组件开发","slug":"2021-03-02-dingtalk-workbench-plugin","date":"2021-03-02T18:22:43.000Z","updated":"2021-03-02T18:22:43.000Z","comments":true,"path":"article/dingtalk-workbench-plugin.html","link":"","permalink":"https://liuxianyu.cn/article/dingtalk-workbench-plugin.html","excerpt":"钉钉定制工作台的介绍可查阅官方文档 什么是钉钉定制工作台，这篇随笔主要涉及开发自定义组件，对使用官方组件的过程不做介绍。","text":"钉钉定制工作台的介绍可查阅官方文档 什么是钉钉定制工作台，这篇随笔主要涉及开发自定义组件，对使用官方组件的过程不做介绍。 ¶一、准备工作 ¶1、小程序开发者工具 下载最新版 小程序开发者工具重要。 ¶2、查阅文档 其余步骤参考：开发自定义组件 - 入门教程，这篇随笔不做赘述。 ¶二、常见问题 ¶1、小程序语法 自定义组件使用小程序语法，可使用block、picker、swiper等标签。 ¶2、在自定义组件中使用数据源 先查阅官方文档：SDK -&gt; 发送请求 /plugin/components/sy-swiper/index.js： 12345678910111213141516171819202122232425262728293031323334353637import &#123; getSdk, getLifecycleSdk, &#125; from '../../api/sdk';Component(&#123; data: &#123; bannerList: [] &#125;, props: &#123; ... &#125;, didMount() &#123; ... this.getBanners() &#125;, ... methods: &#123; // 获取轮播图列表 async getBanners () &#123; // 这里读到的props，和config.json文件中定义的props相对应，详见config.json文件说明 const props = this.props.componentProps; // 请求接口 - 获取新闻列表 const &#123; data &#125; = await getSdk().request(props.getBanners, &#123;&#125;, &#123; // sdk.request的第三个参数，输入注册数据源的信息 url: 'http://xxxxxxx.com/api/v1/xxxx', apiKey: 'XXXXXX_BANNERS', httpMethod: 'GET', params: '', apiSecret: 'XXXXXX_BANNERS', system: &#123; userid: 'xxxx', corpId: 'xxxx' &#125; &#125;) this.setData(&#123; bannerList: data.groupnews.filter(i =&gt; i.topimg) &#125;) &#125; &#125;&#125;); /plugin/components/sy-swiper/index.axml： 12345678910111213&lt;!-- 轮播图列表 --&gt;&lt;view class=&quot;sy-swiper-box&quot;&gt; &lt;swiper class=&quot;swiper-box&quot; indicator-dots=&quot;&#123;&#123; true &#125;&#125;&quot; autoplay=&quot;&#123;&#123; true &#125;&#125;&quot; interval=&quot;&#123;&#123; 5000 &#125;&#125;&quot; circular=&quot;&#123;&#123; true &#125;&#125;&quot; &gt; &lt;swiper-item a:for=&quot;&#123;&#123; bannerList &#125;&#125;&quot; key=&quot;swiper-item-&#123;&#123; index &#125;&#125;&quot;&gt; &lt;image class=&quot;swiper-img&quot; mode=&quot;scaleToFill&quot; src=&quot;&#123;&#123; item.topimg &#125;&#125;&quot; data-index=&quot;&#123;&#123; index &#125;&#125;&quot; onTap=&quot;goPage&quot; /&gt; &lt;/swiper-item&gt; &lt;/swiper&gt;&lt;/view&gt; ¶3、打开应用或链接 阅读官方文档：SDK -&gt; 打开应用或链接","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"钉钉","slug":"前端/钉钉","permalink":"https://liuxianyu.cn/categories/前端/钉钉/"}],"tags":[{"name":"钉钉","slug":"钉钉","permalink":"https://liuxianyu.cn/tags/钉钉/"}],"author":"liuxy0551"},{"title":"在不同电脑间同步 WebStorm 配置","slug":"2021-03-02-webstorm-settings-repository","date":"2021-03-02T10:18:35.000Z","updated":"2021-03-02T10:18:35.000Z","comments":true,"path":"article/webstorm-settings-repository.html","link":"","permalink":"https://liuxianyu.cn/article/webstorm-settings-repository.html","excerpt":"平常使用 WebStorm 比较多，使用中偶尔会变更一下设置或者代码片段等，公司电脑和家里电脑会有些不同步，导出配置文件再导入有些不够高效（懒）。这个功能主要依赖Preferences -&gt; Tools -&gt; Settings Repository。","text":"平常使用 WebStorm 比较多，使用中偶尔会变更一下设置或者代码片段等，公司电脑和家里电脑会有些不同步，导出配置文件再导入有些不够高效（懒）。这个功能主要依赖Preferences -&gt; Tools -&gt; Settings Repository。 ¶操作步骤 ¶1、新建仓库 新建一个 git 仓库用来存放配置，这里选的是 Github，生成一个 Token，稍后需要使用。 ¶2、上传配置 在需要上传配置的电脑上，打开 File -&gt; Settings Repository，输入仓库地址后点击 Overwrite Remote。 ¶3、下载配置 在需要下载配置的电脑上，打开 File -&gt; Settings Repository，输入仓库地址后点击 Overwrite Local。 ¶参考资料： 1、Github: Creating a personal access token 2、WebStorm: Share settings through a settings repository","categories":[{"name":"开发工具","slug":"开发工具","permalink":"https://liuxianyu.cn/categories/开发工具/"},{"name":"WebStorm","slug":"开发工具/WebStorm","permalink":"https://liuxianyu.cn/categories/开发工具/WebStorm/"}],"tags":[{"name":"WebStorm","slug":"WebStorm","permalink":"https://liuxianyu.cn/tags/WebStorm/"}],"author":"liuxy0551"},{"title":"记账啦开发系列（二）—— 微信小程序","slug":"2021-02-21-jizhangla-api-b","date":"2021-02-21T22:30:29.000Z","updated":"2021-02-21T22:30:29.000Z","comments":true,"path":"article/jizhangla-api-b.html","link":"","permalink":"https://liuxianyu.cn/article/jizhangla-api-b.html","excerpt":"记账啦是一个微信小程序，如果你也喜欢记账，可以看看这个小程序。","text":"记账啦是一个微信小程序，如果你也喜欢记账，可以看看这个小程序。 ¶系列文章 记账啦开发系列（一）—— 项目介绍 记账啦开发系列（二）—— 微信小程序 ¶截图展示 ¶目录结构 微信小程序使用的框架是 wepy 2.x 版本，可参考另一篇随笔：wepy 常用指令。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485jizhangla-wechat├─.editorconfig├─.prettierrc├─.wepycache├─.wepyignore├─package.json├─project.config.json├─wepy.config.js├─src| ├─app.wpy| ├─utils| | ├─date.js| | ├─index.js| | ├─previewImage.js| | ├─toast.js| | ├─data| | | └accountTypes.js| | ├─api| | | ├─apis.js| | | └request.js| ├─store| | ├─index.js| | ├─modules| | | ├─accountBook.js| | | ├─accountType.js| | | ├─asset.js| | | ├─member.js| | | └user.js| ├─pages| | ├─personal| | | ├─about.wpy| | | ├─accountBook.wpy| | | ├─appSetting.wpy| | | ├─feedback.wpy| | | ├─index.wpy| | | ├─info.wpy| | | ├─userIntegral.wpy| | | ├─member| | | | ├─form.wpy| | | | └index.wpy| | | ├─asset| | | | ├─form.wpy| | | | ├─index.wpy| | | | └types.wpy| | ├─login| | | ├─index.wpy| | | ├─protocol.wpy| | | └welcome.wpy| | ├─home| | | └index.wpy| | ├─billTemplate| | | └index.wpy| | ├─bill| | | ├─form.wpy| | | └index.wpy| | ├─asset| | | └index.wpy| ├─components| | ├─share| | | ├─BillDayItem.wpy| | | └ToLogin.wpy| ├─mixins| | ├─mixList.js| | └mixScrollView.js├─static| ├─styles| | ├─color.less| | ├─default.less| | ├─index.less| | ├─myCss.less| | └vant.less| ├─images| | ├─home-top.jpg| | ├─logo.png| | ├─more-icon.png| | ├─share.jpg| | ├─tabBar| | | ├─asset_active.png| | | ├─asset_inactive.png| | | ├─bill_active.png| | | ├─bill_inactive.png| | | ├─home_active.png| | | ├─home_inactive.png| | | ├─personal_active.png| | | └personal_inactive.png ¶mixList.js 这里着重记录下 mixins 混入的写法，可以节省喝多长列表页面的代码量，我在 H5 的开发中也经常使用这种写法，可参考我写的组件文档：syedu -&gt; Scroll 滚动。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273/* * 列表页请求数据 - mixList */export default &#123; data: &#123; mixPromise: null, mixParams: null, mixData: &#123; fetching: false, items: [], page: 1, pageSize: 10, total: 0 &#125;, extraCallBack: null, // 额外的数据处理 itemsRealLength: 0 // 当前整理过后的数组实际长度 &#125;, methods: &#123; // 分页 async mixFetchPageData (promise, query = &#123;&#125;) &#123; this.mixPromise = promise || this.mixPromise this.mixParams = &#123; ...this.mixParams, page: this.mixData.page, pageSize: this.mixData.pageSize, ...query &#125; this.mixData.fetching = true return await this.mixPromise(this.mixParams).then(res =&gt; &#123; this.mixData.fetching = false return res &#125;).catch(() =&gt; &#123; this.mixData.fetching = false &#125;) &#125;, // 获取数据，如果结果是 res.data[data]，则可以传入 data，一般用不着 async mixFetchData (promise, query = &#123;&#125;, hasMore = false, data = '') &#123; if (!hasMore) &#123; this.mixData.page = 1 &#125; else &#123; this.mixData.page += 1 &#125; let res = await this.mixFetchPageData(promise, query) if (hasMore) &#123; this.mixData.items = this.mixData.items.concat(data ? res.data[data] : res.data) &#125; else &#123; this.mixData.items = data ? res.data[data] : res.data &#125; this.extraCallBack &amp;&amp; this.extraCallBack() this.mixData.total = res.total &#125;, // 上拉加载更多 async mixLoadMore (data = '') &#123; if (this.mixData.total &gt; (this.itemsRealLength ? this.itemsRealLength : this.mixData.items.length) &amp;&amp; this.mixPromise) &#123; await this.mixFetchData(this.mixPromise, &#123; ...this.mixParams, page: this.mixData.page + 1, pageSize: this.mixData.pageSize &#125;, true, data) &#125; &#125; &#125;&#125;// used// mixData.items 数据集合（数组），在页面中循环展示// methods: &#123;// fetchData () &#123;// this.mixFetchData(wepy.apis.getUsers)// &#125;// &#125;// 上拉加载更多// onReachBottom () &#123;// this.mixLoadMore()// &#125; 注意 ios 微信小程序中的 Promise 不支持使用 finally，请使用 .then 和 catch","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"记账啦","slug":"记账啦","permalink":"https://liuxianyu.cn/tags/记账啦/"}],"author":"liuxy0551"},{"title":"记账啦开发系列（一）—— 项目介绍","slug":"2021-02-20-jizhangla-api-a","date":"2021-02-20T21:14:00.000Z","updated":"2021-02-20T21:14:00.000Z","comments":true,"path":"article/jizhangla-api-a.html","link":"","permalink":"https://liuxianyu.cn/article/jizhangla-api-a.html","excerpt":"记账啦是一个微信小程序，如果你也喜欢记账，可以看看这个小程序。","text":"记账啦是一个微信小程序，如果你也喜欢记账，可以看看这个小程序。 ¶系列文章 记账啦开发系列（一）—— 项目介绍 记账啦开发系列（二）—— 微信小程序 ¶为什么做 之前用了近三年的网易有钱记账即将关闭服务器，用了一个月随手记，觉得功能完善，但是有部分功能有点反我这个人类。由于已经养成了记账的习惯，刚好最近也想要学习下用 node 写 Web Server，便有了记账啦这个微信小程序。目前已发布，功能继续完善中。借助微信的用户体系，是因为可以省去手机号验证码的开发（验证码要钱），个人的微信公众号开发又有诸多限制，最终选择了微信小程序，这方面的经验也多一些，管理后台也在同步建设中。因为是第一次用 node 写 Web Server，所以随笔内容是做思路整理。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"记账啦","slug":"记账啦","permalink":"https://liuxianyu.cn/tags/记账啦/"}],"author":"liuxy0551"},{"title":"Gitee 图床【已不可用】","slug":"2021-02-01-gitee-image-hosting","date":"2021-02-01T12:00:39.000Z","updated":"2021-02-01T12:00:38.000Z","comments":true,"path":"article/gitee-image-hosting.html","link":"","permalink":"https://liuxianyu.cn/article/gitee-image-hosting.html","excerpt":"博客的图片等媒体资源经历了几次波折，这次记录下用 Gitee 搭建图床存储博客图片等媒体资源，不借助 PicGo 是因为 Gitee 仓库中超过 1M 的图片需要登录后才能查看，对访客很不友好。","text":"博客的图片等媒体资源经历了几次波折，这次记录下用 Gitee 搭建图床存储博客图片等媒体资源，不借助 PicGo 是因为 Gitee 仓库中超过 1M 的图片需要登录后才能查看，对访客很不友好。 ¶一波三折 这个博客是用 Hexo 搭建的，图片等媒体资源经历过以下几次折腾： ¶1、github 博客初期是用的 github pages，图片等媒体资源都在项目的文件夹中，由于国内的网络原因，经常出现图片加载失败、加载慢等情况。 ¶2、阿里云服务器 目前博客打包后放在我的阿里云服务器上，图片等媒体资源自然也是从服务器访问，由于服务器带宽有限，加载效果也不理想。 ¶3、七牛云 看了下七牛云每个月的免费流量，对这个博客来说够用了，便准备搬迁到七牛云，奈何搬迁初期发现七牛云的 https 访问是收费的，博客是 https 访问的，访问 http 资源会报错，故舍弃之。 ¶4、gitee 写这篇随笔之前，博客项目是同步部署到 gitee 上的，利用 gitee pages 功能部署项目，这样就能拿到图片等媒体资源的 https 链接了，无奈 gitee 每个项目的文件总大小限制了 1G，随着随笔的积累，日前部署时 gitee 的仓库已经推不上去了（保持微笑），遂准备将图片等媒体资源统统迁移到单独的 gitee 项目中，每满 1G 便新建一个项目（来自白嫖党的倔强）。 ¶Gitee 图床 ¶1、新建仓库 clone 该仓库，将图片等媒体资源按随笔分文件夹存放到这个仓库，push 到远程仓库。 ¶2、Gitee Pages 每次有新图片都需要更新（白嫖的无奈），看到有 Open API，后续研究。","categories":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/categories/Blog/"}],"tags":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/tags/Blog/"}],"author":"liuxy0551"},{"title":"解决国内 npm 太慢的问题","slug":"2021-01-25-npm-cnpm","date":"2021-01-25T15:57:57.000Z","updated":"2021-01-25T15:57:57.000Z","comments":true,"path":"article/npm-cnpm.html","link":"","permalink":"https://liuxianyu.cn/article/npm-cnpm.html","excerpt":"日常使用 npm 的过程中，国内下载第三方包的速度很慢，还容易安装超时报错后停止，这时候需要删除 node_modules 文件重新下载，比较麻烦，记录下解决方法。","text":"日常使用 npm 的过程中，国内下载第三方包的速度很慢，还容易安装超时报错后停止，这时候需要删除 node_modules 文件重新下载，比较麻烦，记录下解决方法。 ¶一、更换 npm 源推荐 淘宝仓库源和 npm 仓库源每十分钟同步一次，基本满足日常需求，可以更换 npm 源，使用淘宝仓库源。 1、查看 npm 配置： 1npm config ls 默认示例： 123456789; cli configsmetrics-registry = &quot;https://registry.npmjs.org/&quot;scope = &quot;&quot;user-agent = &quot;npm/6.14.5 node/v14.3.0 linux x64&quot;; node bin location = /usr/src/node-v14.3.0-linux-x64/bin/node; cwd = /root/.jenkins/workspace/zucc-dingtalk-welcome; HOME = /root; &quot;npm config ls -l&quot; to show all defaults. 2、使用淘宝仓库源：推荐 1npm config set registry https://registry.npm.taobao.org/ 3、使用官方源（默认源）： 1npm config set registry https://registry.npmjs.org/ ¶二、使用 cnpm 1npm install -g cnpm --registry=https://registry.npm.taobao.org 注意 cnpm 不受 package-lock 的影响，所以建议使用更换 npm 源的方法","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://liuxianyu.cn/tags/npm/"}],"author":"liuxy0551"},{"title":"前端学习 Docker 之旅（五）—— 安装 Redis 并启动、连接","slug":"2021-01-16-docker-d","date":"2021-01-16T20:25:55.000Z","updated":"2021-01-16T20:25:55.000Z","comments":true,"path":"article/docker-d.html","link":"","permalink":"https://liuxianyu.cn/article/docker-d.html","excerpt":"这两年 Docker 比较火，很多大厂都在使用。这里记录一下 Cent OS 中使用 Docker 安装 Redis 并启动、连接的过程。","text":"这两年 Docker 比较火，很多大厂都在使用。这里记录一下 Cent OS 中使用 Docker 安装 Redis 并启动、连接的过程。 建议切换 root 用户进行以下操作 ¶一、安装 Redis ¶1、查找镜像 在 Docker Hub 官网查找自己需要的版本 https://hub.docker.com/_/redis?tab=tags ¶2、下载镜像 我选择的是 7.0.5： 1docker pull redis:7.0.5 ¶3、创建项目文件夹并进入 本地创建一个文件夹用来存放 Redis 的配置文件、日志以及数据等（挂载目录，作用是将此目录中的文件或文件夹覆盖掉容器内部的文件或文件夹），可跳过。 123mkdir -p /mnt/docker/redis/confcd /mnt/docker/redis/conftouch redis.conf ¶二、运行 Redis ¶1、使用镜像创建容器并运行 1docker run -p 9736:6379 -d --name docker-redis -v $PWD/conf/redis.conf:/etc/redis/redis.conf -v $PWD/logs:/logs -v $PWD/data:/data -d redis:7.0.5 redis-server /etc/redis/redis.conf --appendonly yes --requirepass 123456 指令解释： -p 表示端口映射，-p 宿主机port:容器port -d 表示后台运行并返回容器 id，只有在父进程即 docker 进程退出的时候才会去把容器退出，除非你使用了--rm选项。如果你在运行容器时将-d和--rm两个选项一起使用，那么容器会在退出或者后台进程停止的的时候自动移除掉（只要一个情况便会自动移除镜像） --name 表示给容器指定的名称 d redis 表示后台启动 Redis -v $PWD/conf/redis.conf:/etc/redis/redis.conf 表示将主机上当前目录下的 conf/my.cnf 文件挂载到容器的 /etc/redis/redis.conf -v $PWD/logs:/logs 表示将主机上当前目录下的 logs 目录挂载到容器的 /logs appendonly yes 开启 Redis 持久化 --requirepass 123456 需要密码，auth 可以不挂载文件夹 1docker run -p 9736:6379 -d --name docker-redis -d redis:7.0.5 redis-server --appendonly yes --requirepass 123456 ¶2、进入容器 1docker exec -it docker-redis redis-cli ¶3、输入密码 1auth 123456 ¶4、查看当前密码 1config get requirepass ¶5、重新设置密码 1config set requirepass abcd","categories":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/tags/Docker/"},{"name":"Redis","slug":"Redis","permalink":"https://liuxianyu.cn/tags/Redis/"}],"author":"liuxy0551"},{"title":"Sequelize 中的事务（托管事务）","slug":"2021-01-15-sequelize-transaction","date":"2021-01-15T15:35:31.000Z","updated":"2021-01-15T15:35:31.000Z","comments":true,"path":"article/transaction.html","link":"","permalink":"https://liuxianyu.cn/article/transaction.html","excerpt":"最近 koa2 项目中用到的 ORM 是 Sequelize V6，用户第一次登录时会在用户表、积分表、账本表等多个表中添加数据，还有其他场景，记录一下 Sequelize 中的事务如何使用，重点是托管事务。","text":"最近 koa2 项目中用到的 ORM 是 Sequelize V6，用户第一次登录时会在用户表、积分表、账本表等多个表中添加数据，还有其他场景，记录一下 Sequelize 中的事务如何使用，重点是托管事务。 ¶一、事务的定义 网上关于事务的定义有很多，简单理解为以下几点： 原子性：事务中的全部操作在数据库中是不可分割的，要么全部完成，要么全部不执行。 一致性：几个并行执行的事务，其执行结果必须与按某一顺序 串行执行的结果相一致。 隔离性：事务的执行不受其他事务的干扰，事务执行的中间结果对其他事务必须是透明的。 持久性：对于任意已提交事务，系统必须保证该事务对数据库的改变不被丢失，即使数据库出现故障。 ¶二、Sequelize 中的事务 默认情况下，Sequelize 不使用事务，正常情况下生产环境是应该使用事务的。Sequelize 中支持两种使用方式，推荐托管事务： ¶1、非托管事务 可参考：非托管事务 ¶2、托管事务 托管事务会自动处理提交或回滚事务，通过将回调传递给sequelize.transaction来启动托管事务，这个回调可以是async的(通常是的)。在这种情况下，将发生以下情况： Sequelize 将自动开始事务并获得事务对象t 将执行提供的回调，并在其中传递t 如果回调抛出错误，Sequelize 将自动回滚事务 如果回调成功，Sequelize 将自动提交事务 sequelize.transaction调用的两种结果： 1、回调执行完成 2、如果回调引发错误，则拒绝执行回调并抛出错误 12345678910111213141516171819try &#123; const result = await sequelize.transaction(async t =&gt; &#123; const user = await User.create(&#123; firstName: 'Abraham', lastName: 'Lincoln' &#125;, &#123; transaction: t &#125;) await user.setShooter(&#123; firstName: 'John', lastName: 'Boothe' &#125;, &#123; transaction: t &#125;) return user &#125;) // 如果执行到此，则表示事务已成功提交，result 是事务返回的结果，在这种情况下为 `user`&#125; catch (error) &#123; // 如果执行到此，则发生错误，该事务已由 Sequelize 自动回滚。&#125; 注意 t.commit()和t.callback()没有被直接调用。 ¶3、抛出错误以回滚 使用托管事务时，不应手动执行t.commit()和t.callback()，如果回调成功，依旧想回滚事务，可手动抛出错误： 12345678910await sequelize.transaction(async t =&gt; &#123; const user = await User.create(&#123; firstName: 'Abraham', lastName: 'Lincoln' &#125;, &#123; transaction: t &#125;) // 查询成功，但仍要回滚， // 手动抛出错误，以便 Sequelize 自动处理所有内容. throw new Error();&#125;); ¶参考资料 Sequelize 事务","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Sequelize","slug":"node/Sequelize","permalink":"https://liuxianyu.cn/categories/node/Sequelize/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Sequelize","slug":"Sequelize","permalink":"https://liuxianyu.cn/tags/Sequelize/"}],"author":"liuxy0551"},{"title":"SQL 按日期分组统计数量","slug":"2021-01-07-sql-group-by-day","date":"2021-01-07T16:35:17.000Z","updated":"2021-01-07T16:35:17.000Z","comments":true,"path":"article/sql-group-by-day.html","link":"","permalink":"https://liuxianyu.cn/article/sql-group-by-day.html","excerpt":"最近在学习用 node 写个 Web Server，有个需求是统计最近30天每天新增的用户数，记录下 SQL 语句。","text":"最近在学习用 node 写个 Web Server，有个需求是统计最近30天每天新增的用户数，记录下 SQL 语句。 ¶1、User 表 ¶2、SQL 语句和结果 1234567SELECT DATE_FORMAT( createTime, &quot;%Y-%m-%d&quot; ) AS DAY, COUNT(*) AS count FROM `User` GROUP BY DATE_FORMAT( createTime, &quot;%Y-%m-%d&quot; ); ¶参考资料： sql 按日期分组统计数量","categories":[{"name":"数据库","slug":"数据库","permalink":"https://liuxianyu.cn/categories/数据库/"},{"name":"SQL 语句","slug":"数据库/SQL-语句","permalink":"https://liuxianyu.cn/categories/数据库/SQL-语句/"}],"tags":[{"name":"SQL 语句","slug":"SQL-语句","permalink":"https://liuxianyu.cn/tags/SQL-语句/"}],"author":"liuxy0551"},{"title":"mysql 5.7 报错：1055 - Expression&nbsp;#1 of SELECT list is not in GROUP BY clause and contains nonaggregated column","slug":"2021-01-07-mysql-1055","date":"2021-01-07T16:11:10.000Z","updated":"2021-01-07T16:11:10.000Z","comments":true,"path":"article/mysql-1055.html","link":"","permalink":"https://liuxianyu.cn/article/mysql-1055.html","excerpt":"通过 Docker 安装的 mysql 5.7，发现使用GROUP BY语句时或报错，记错下处理过程：","text":"通过 Docker 安装的 mysql 5.7，发现使用GROUP BY语句时或报错，记错下处理过程： mysql 5.7 的安装可参考 前端学习 Docker 之旅（四）—— 安装 mysql 并启动、连接，修改时区。 ¶1、进入容器 1docker exec -it mysql-5.7 /bin/bash ¶2、进入 mysql 的配置文件夹 通过 docker 安装的 mysql 5.7 配置文件为/etc/mysql/mysql.conf.d/mysqld.cnf 12cd /etc/mysql/mysql.conf.dcat mysqld.cnf 可以看看有没有vi、vim，没有的话可以通过echo编辑mysqld.cnf，命令格式为echo '' &gt; fileName，引号内为文件内容。 将上一步 cat 得到的原有配置文件拷贝到编辑器，在配置文件中的[mysqld]下添加一行： 1sql_mode = &quot;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot; 在上述编辑后的内容前后加上命令的内容，并拷贝到 docker 镜像内的终端执行： 1234567891011121314151617181920212223242526272829303132333435363738echo &apos;# Copyright (c) 2014, 2016, Oracle and/or its affiliates. All rights reserved.## This program is free software; you can redistribute it and/or modify# it under the terms of the GNU General Public License, version 2.0,# as published by the Free Software Foundation.## This program is also distributed with certain software (including# but not limited to OpenSSL) that is licensed under separate terms,# as designated in a particular file or component or in included license# documentation. The authors of MySQL hereby grant you an additional# permission to link the program and your derivative works with the# separately licensed software that they have included with MySQL.## This program is distributed in the hope that it will be useful,# but WITHOUT ANY WARRANTY; without even the implied warranty of# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the# GNU General Public License, version 2.0, for more details.## You should have received a copy of the GNU General Public License# along with this program; if not, write to the Free Software# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA## The MySQL Server configuration file.## For explanations see# http://dev.mysql.com/doc/mysql/en/server-system-variables.html[mysqld]sql_mode = &quot;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot;pid-file = /var/run/mysqld/mysqld.pidsocket = /var/run/mysqld/mysqld.sockdatadir = /var/lib/mysql#log-error = /var/log/mysql/error.log# By default we only accept connections from localhost#bind-address = 127.0.0.1# Disabling symbolic-links is recommended to prevent assorted security riskssymbolic-links=0&apos; &gt; mysqld.cnf ¶3、重启 docker 镜像 完成上述步骤后可以cat mysqld.cnf看下是否已保存成功，重启 docker 镜像后就可以使用GROUP BY语句啦。 12docker stop mysql-5.7docker start mysql-5.7 ¶参考资料： mysql5.7 报错1055:Expression #1 of SELECT list is not in GROUP BY clause and contains non","categories":[{"name":"数据库","slug":"数据库","permalink":"https://liuxianyu.cn/categories/数据库/"},{"name":"mysql","slug":"数据库/mysql","permalink":"https://liuxianyu.cn/categories/数据库/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://liuxianyu.cn/tags/mysql/"}],"author":"liuxy0551"},{"title":"滚动到顶部时吸附","slug":"2020-12-22-scroll-fixed","date":"2020-12-22T14:50:13.000Z","updated":"2020-12-22T14:50:13.000Z","comments":true,"path":"article/scroll-fixed.html","link":"","permalink":"https://liuxianyu.cn/article/scroll-fixed.html","excerpt":"最近一个简单的官网项目中，有滑动到顶部时将标题栏吸顶的优化需求，记录一下。","text":"最近一个简单的官网项目中，有滑动到顶部时将标题栏吸顶的优化需求，记录一下。 1234&lt;!--横标题部分--&gt;&lt;div class=\"px-title title\" :class=\"&#123; 'fixed': fixed &#125;\"&gt; 标题&lt;/div&gt; 123456789data () &#123; fixed: false&#125;,mounted () &#123; // 滚动后吸顶 window.addEventListener('scroll', () =&gt; &#123; this.fixed = this.$refs['topBgRef'].getBoundingClientRect().bottom &lt; 0 &#125;, true)&#125; 123456789.px-title &#123; &amp;.fixed &#123; width: 100%; box-shadow: 0 16px 16px -20px #5E5E5E; position: fixed; top: 0; z-index: 2; &#125;&#125; 参考资料：Element.getBoundingClientRect()","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"Sequelize 日期格式化","slug":"2020-12-18-sequelize-date","date":"2020-12-18T14:58:33.000Z","updated":"2020-12-18T14:58:33.000Z","comments":true,"path":"article/sequelize-date.html","link":"","permalink":"https://liuxianyu.cn/article/sequelize-date.html","excerpt":"最近 koa2 项目中用到的 ORM 是 Sequelize V6，查询时返回的时间格式是2020-12-18T09:11:12.668Z，希望得到的是YYYY-MM-dd HH:mm:ss，记录一下处理过程。","text":"最近 koa2 项目中用到的 ORM 是 Sequelize V6，查询时返回的时间格式是2020-12-18T09:11:12.668Z，希望得到的是YYYY-MM-dd HH:mm:ss，记录一下处理过程。 ¶一、统一配置项 推荐 添加dialectOptions配置项，并设置dateStrings、typeCast两个参数的值为 true，如下： 123456789101112131415const &#123; host, user, password, database, dialect, timezone, logging &#125; = require('../../../config/db.config')const options = &#123; host, dialect, define: &#123; timestamps: false &#125;, timezone, logging, dialectOptions: &#123; dateStrings: true, typeCast: true &#125; &#125;const sequelize = new Sequelize(database, user, password, options) ¶二、方法转换 不推荐 123456789101112const sequelize = require('sequelize')const userInfo = await db.User.findOne(&#123; where, attributes: &#123; exclude: ['isDelete', 'openId', 'password'], include: [ [sequelize.Sequelize.fn('date_format', sequelize.Sequelize.col('createTime'), '%Y-%m-%d %H:%i:%s'), 'createTime'], [sequelize.Sequelize.fn('date_format', sequelize.Sequelize.col('updateTime'), '%Y-%m-%d %H:%i:%s'), 'updateTime'], ] &#125;&#125;)","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Sequelize","slug":"node/Sequelize","permalink":"https://liuxianyu.cn/categories/node/Sequelize/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Sequelize","slug":"Sequelize","permalink":"https://liuxianyu.cn/tags/Sequelize/"}],"author":"liuxy0551"},{"title":"koa2 中使用 sequelize-auto 自动生成 models","slug":"2020-12-18-sequelize-auto","date":"2020-12-18T11:43:31.000Z","updated":"2020-12-18T11:43:31.000Z","comments":true,"path":"article/sequelize-auto.html","link":"","permalink":"https://liuxianyu.cn/article/sequelize-auto.html","excerpt":"最近 koa2 项目中用到的 ORM 是 Sequelize V6，建好表后可以使用sequelize-auto自动生成每个表对应的 Model。","text":"最近 koa2 项目中用到的 ORM 是 Sequelize V6，建好表后可以使用sequelize-auto自动生成每个表对应的 Model。 GitHub：sequelize-auto ¶一、安装依赖 项目中使用的 Mysql 5.7，安装sequelize-auto和mysql依赖： 12npm i mysql -Snpm i sequelize-auto -D 在package.json中的script添加命令： 1234\"scripts\": &#123; \"dev\": \"export NODE_ENV=development &amp;&amp; nodemon app.js\", \"models\": \"export NODE_ENV=development &amp;&amp; node utils/mysql/sequelize-auto/auto.js\"&#125; ¶二、配置参数 ¶db.config.js 12345678module.exports = &#123; host : '127.0.0.1', user : 'root', password : '123456', database : 'jizhangla', port: 3306, dialect: 'mysql'&#125; ¶auto.js 123456789101112131415161718// utils/mysql/sequelize-auto/auto.jsconst SequelizeAuto = require('sequelize-auto')const &#123; host, user, password, database, dialect, port &#125; = require('../../../db.config')const options = &#123; host, dialect, directory: 'models', // 指定输出 models 文件的目录 port, additional: &#123; timestamps: false &#125;&#125;const auto = new SequelizeAuto(database, user, password, options)auto.run(err =&gt; &#123; if (err) throw err&#125;) 执行npm run models，将自动在models文件夹下生成每个表对应的 Model，并生成init-models.js。 ¶db.js 在utils/mysql下新增db.js文件，内容如下： 123456const Sequelize = require('sequelize')const initModels = require('../../models/init-models')const &#123; host, user, password, database, dialect &#125; = require('../../db.config')const sequelize = new Sequelize(database, user, password, &#123; host, dialect, define: &#123; timestamps: false &#125; &#125;)module.exports = initModels(sequelize) ¶三、使用 12const db = require('../utils/mysql/db')const userInfo = await db.User.findOne(&#123; where: isDelete: 0 &#125;)","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Sequelize","slug":"node/Sequelize","permalink":"https://liuxianyu.cn/categories/node/Sequelize/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Sequelize","slug":"Sequelize","permalink":"https://liuxianyu.cn/tags/Sequelize/"}],"author":"liuxy0551"},{"title":"Sequelize 中常用的一些方法和参数","slug":"2020-12-17-sequelize-function","date":"2020-12-17T09:52:01.000Z","updated":"2020-12-17T09:52:01.000Z","comments":true,"path":"article/sequelize-function.html","link":"","permalink":"https://liuxianyu.cn/article/sequelize-function.html","excerpt":"最近 koa2 项目中用到的 ORM 是 Sequelize V6，记录一下相关知识点。","text":"最近 koa2 项目中用到的 ORM 是 Sequelize V6，记录一下相关知识点。 Sequelize 中文文档、Sequelize 中文API文档－2. Model 的定义、使用与Model类的API ¶一、常用方法 ¶1、findAll findAll 从数据库读取整个表： 12const user = await User.findAll()SELECT * FROM User; ¶（1）SELECT 特定属性attributes 选择某些特定属性，可以使用attributes参数： 1234User.findAll(&#123; attributes: ['name', 'age']&#125;)SELECT name, age FROM User; 可以使用嵌套数组来重命名属性： 1234User.findAll(&#123; attributes: ['name', ['age', 'ageage'], 'hats']&#125;)SELECT name, age AS ageage, hats FROM User; 可以使用sequelize.fn进行聚合。使用聚合函数时，必须为它提供一个别名，以便能够从 Model 中访问它。在下面的示例中，可以通过instance.n_hats获取帽子数量： 12345678User.findAll(&#123; attributes: [ 'name', [sequelize.fn('COUNT', sequelize.col('hats')), 'n_hats'], 'age' ]&#125;)SELECT name, COUNT(hats) AS n_hats, age FROM User; 不用列出所有属性，也可以使用聚合： 12345678User.findAll(&#123; attributes: &#123; include: [ [sequelize.fn('COUNT', sequelize.col('hats')), 'n_hats'] ] &#125;&#125;)SELECT name, age, ..., hats, COUNT(hats) AS n_hats FROM User; 同时，也可以排除部分属性： 123456789User.findAll(&#123; attributes: &#123; include: [ [sequelize.fn('COUNT', sequelize.col('hats')), 'n_hats'] ], exclude: ['age'] &#125;&#125;)SELECT name, ..., hats, COUNT(hats) AS n_hats FROM User; ¶（2）应用 WHERE 子句 where 用于过滤查询，where有很多运算符，可以从Op中以 Symbols 的形式使用。 1234567User.findAll(&#123; where: &#123; name: 'Tom', age: 20 &#125;&#125;)SELECT * FROM User WHERE name = 'TOM' AND age = 20; OR 12345678910const &#123; Op &#125; = require('sequelize')User.findAll(&#123; where: &#123; [Op.or]: [ &#123; name: 'Tom' &#125;, &#123; age: 20' &#125; ] &#125;&#125;)SELECT * FROM User WHERE name = 'TOM' OR age = 20; IN 1234567const &#123; Op &#125; = require('sequelize')User.findAll(&#123; where: &#123; name: ['Tom', 'Mary'] // 等同于：name: &#123; [Op.or]: ['Tom', 'Mary'] &#125; &#125;&#125;)SELECT * FROM User WHERE name = 'TOM' OR age = 20; 更多Op操作符参见文档：操作符 ¶（3）排序和分组 排序和分组 ¶（4）限制和分页 使用limit和offset参数可以进行限制和分页，通常与order排序一起使用： 12345678// 提取10行User.findAll(&#123; limit: 10 &#125;)// 跳过8行User.findAll(&#123; offset: 8 &#125;)// 跳过5行，然后获取5行User.findAll(&#123; offset: 5, limit: 5 &#125;) ¶（5）返回原始数据 默认情况下，返回的是模型类的实例，这意味着在数据库返回结果之后，Sequelize 会自动将所有内容包装在适当的实例对象中。当结果太多时，这种包装可能会效率低下，要禁用此包装并收到简单的响应，请将{ raw: true }作为参数传递给方法。 12// 增加 raw 选项后，会返回数据库中的原始结果User.findAll(&#123; where: &#123; ... &#125;, raw: true &#125;) ¶2、count 123456// 查询 age = 20 的用户数量const total = await User.count(&#123; where: &#123; age: 20 &#125;&#125;) ¶3、findByPk findByPk方法使用提供的主键从表中仅获得一行数据： 1const user = await User.findByPk(1024) // 主键的值是 1024 ¶4、findOne findOne方法获得它找到的第一行数据： 1const user = await User.findOne(&#123; where: &#123; name: 'Tom' &#125; &#125;) ¶5、findOrCreate 除非找到一个满足查询参数的结果,否则findOrCreate将在表中创建一行。具体参考：findOrCreate ¶6、findAndCountAll推荐 结合了findAll和count的便捷方法。具体参考：findAndCountAll。findAndCountAll 方法返回有两个属性的对象： count —— 整数，符合查询条件的记录总数 rows —— 数组对象，获得的记录 1234567891011const &#123; count, rows &#125; = await User.findAndCountAll(&#123; where: &#123; name: &#123; [Op.like]: 'T%' &#125; &#125;, offset: 10, limit: 2&#125;)console.log(count)console.log(rows) ¶二、作用域 作用域用于帮助复用代码","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Sequelize","slug":"node/Sequelize","permalink":"https://liuxianyu.cn/categories/node/Sequelize/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Sequelize","slug":"Sequelize","permalink":"https://liuxianyu.cn/tags/Sequelize/"}],"author":"liuxy0551"},{"title":"koa2 本地运行及 pm2 运行时如何区分 development 和 production","slug":"2020-12-16-pm2-koa2-NODE_ENV","date":"2020-12-16T11:10:20.000Z","updated":"2020-12-16T11:10:20.000Z","comments":true,"path":"article/pm2-koa2-NODE_ENV.html","link":"","permalink":"https://liuxianyu.cn/article/pm2-koa2-NODE_ENV.html","excerpt":"最近项目本地开发时希望和生产环境区分数据库，本地是 nodemon 启动 app.js 的，生产环境是通过 pm2 启动的，记录在macOS开发时的配置。","text":"最近项目本地开发时希望和生产环境区分数据库，本地是 nodemon 启动 app.js 的，生产环境是通过 pm2 启动的，记录在macOS开发时的配置。 在 app.js 中打印process.env.NODE_ENV，可分别输出 development、production。 app.js1console.log('NODE_ENV', process.env.NODE_ENV) ¶一、本地运行 本地运行时希望process.env.NODE_ENV拿到的值是development，可以在package.json中的script设置： 123&quot;scripts&quot;: &#123; &quot;dev&quot;: &quot;export NODE_ENV=development &amp;&amp; nodemon app.js&quot;&#125;, 注意 其他文章看到说 Linux、macOS 使用 export，Windows 使用 set，未验证 set 是否有效 nodemon 参考 node 自动编译 启动时执行npm run dev。 ¶二、生产环境 生产环境运行时希望process.env.NODE_ENV拿到的值是production，此随笔涉及到的项目是用 pm2 部署的，关于 pm2 可参考 使用 pm2 部署 node 项目。 对应的 pm2 配置文件内容如下： 123456789101112&#123; &quot;name&quot;: &quot;jizhangla&quot;, &quot;script&quot;: &quot;./app.js&quot;, &quot;cwd&quot; : &quot;./&quot;, &quot;log_date_format&quot;: &quot;YYYY-MM-DD HH:mm:ss&quot;, &quot;max_memory_restart&quot;: &quot;500M&quot;, &quot;out_file&quot; : &quot;./pm2/logs/pm2-out.log&quot;, &quot;error_file&quot; : &quot;./pm2/logs/pm2-err.log&quot;, &quot;env_production&quot;: &#123; &quot;NODE_ENV&quot;: &quot;production&quot; &#125;&#125; 对应的 start.sh 文件内容如下： 1234git pull origin mastercnpm ipm2 restart ./pm2/config.json --env productionpm2 monit 注意 常见命令为：pm2 start app.js --env production","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"pm2","slug":"node/pm2","permalink":"https://liuxianyu.cn/categories/node/pm2/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"pm2","slug":"pm2","permalink":"https://liuxianyu.cn/tags/pm2/"}],"author":"liuxy0551"},{"title":"hexo-nginx 配置 https 证书","slug":"2020-12-15-hexo-nginx-https","date":"2020-12-15T11:52:19.000Z","updated":"2020-12-15T11:52:19.000Z","comments":true,"path":"article/hexo-nginx-https.html","link":"","permalink":"https://liuxianyu.cn/article/hexo-nginx-https.html","excerpt":"之前通过 使用 certbot 在 Cent OS 中给 nginx 配置 https 给 hexo 配置的 https 似乎到期了，Chrome 会报危险，这次参考 在阿里云通过 SSL证书和 nginx 配置 https，对 https 证书进行了更新，记录下 nginx 配置。","text":"之前通过 使用 certbot 在 Cent OS 中给 nginx 配置 https 给 hexo 配置的 https 似乎到期了，Chrome 会报危险，这次参考 在阿里云通过 SSL证书和 nginx 配置 https，对 https 证书进行了更新，记录下 nginx 配置。 只在原有的 nginx 配置上进行了简单更改，如下： 1234567891011121314151617181920212223242526272829303132333435# 博客的 nginx 配置server &#123; server_name liuxianyu.cn; root /mnt/projects/hexo-blog/blog; index index.html; location ^~ /static|img|js|css/ &#123; gzip_static on; expires max; add_header Cache-Control public; &#125; location / &#123; try_files $uri $uri/ /index.html; &#125; location ~* \\.(css|js|gif|jpe?g|png)$ &#123; expires 50d; access_log off; add_header Pragma public; add_header Cache-Control &quot;public&quot;; &#125; listen 443 ssl; # managed by Certbot ssl_certificate cert/liuxianyu.cn.pem; ssl_certificate_key cert/liuxianyu.cn.key;&#125;server &#123; if ($host = liuxianyu.cn) &#123; return 301 https://$host$request_uri; &#125; # managed by Certbot listen 80; server_name liuxianyu.cn; return 404; # managed by Certbot&#125;","categories":[{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/categories/nginx/"},{"name":"https-SSL","slug":"nginx/https-SSL","permalink":"https://liuxianyu.cn/categories/nginx/https-SSL/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/tags/nginx/"},{"name":"https-SSL","slug":"https-SSL","permalink":"https://liuxianyu.cn/tags/https-SSL/"}],"author":"liuxy0551"},{"title":"node 微信公众号开发（四）—— 获取并缓存 jsapi_ticket 并生成 JS-SDK 权限验证的签名","slug":"2020-12-11-node-wechat-jsapi_ticket","date":"2020-12-11T11:43:35.000Z","updated":"2020-12-11T11:43:35.000Z","comments":true,"path":"article/node-wechat-jsapi_ticket.html","link":"","permalink":"https://liuxianyu.cn/article/node-wechat-jsapi_ticket.html","excerpt":"最近想用 node 写一个微信公众号的项目，建议全程 https，这里记录一下如何获取并缓存 jsapi_ticket 并生成 JS-SDK 权限验证的签名。","text":"最近想用 node 写一个微信公众号的项目，建议全程 https，这里记录一下如何获取并缓存 jsapi_ticket 并生成 JS-SDK 权限验证的签名。 ¶一、jsapi_ticket 这一部分可参考 官方文档 - JS-SDK 使用权限签名算法，app.config.js。 ¶1、getJsapiTicket.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172/** * jsapiTicket 的缓存和更新 */const fs = require('fs')const path = require('path')const request = require('request')const appConfig = require('../../app.config')const fileName = path.resolve(__dirname, './jsapiTicket.json')let accessTokenTemp, validTime = 7200 // jsapiTicket 的默认有效时间/** * 根据 access_token 获取 jsapiTicket * @param &#123;string&#125; accessToken */const getJsapiTicket = async (accessToken) =&gt; &#123; accessTokenTemp = accessToken try &#123; let readRes = fs.readFileSync(fileName, 'utf8') readRes = JSON.parse(readRes) // 如果创建的时间超过现在时间默认 7200ms const createTime = new Date(readRes.createTime).getTime() const nowTime = new Date().getTime() if ((nowTime - createTime) / 1000 &gt;= validTime) &#123; await updateJsapiTicket() return await getJsapiTicket() &#125; return readRes.jsapiTicket &#125; catch (error) &#123; // 未读取到文件中的正确内容则更新接口 await updateJsapiTicket() return await getJsapiTicket() &#125;&#125;// 更新本地缓存的 jsapiTicketconst updateJsapiTicket = async () =&gt; &#123; const res = JSON.parse(await getNewJsapiTicket()) if (res.ticket) &#123; validTime = res.expires_in fs.writeFileSync(fileName, JSON.stringify(&#123; createTime: new Date(), ...res &#125;)) &#125; else &#123; await updateJsapiTicket() &#125;&#125;/** * 根据 access_token 获取 jsapiTicket * @return &#123;Promise&#125; */// 从微信获取新的 jsapiTicket，有效时间默认是 7200msconst getNewJsapiTicket = async () =&gt; &#123; console.log('从微信服务器获取 jsapiTicket 啦') return new Promise((resolve, reject) =&gt; &#123; request.get(`$&#123; appConfig.wxapiBaseUrl &#125;/ticket/getticket?access_token=$&#123; accessTokenTemp &#125;&amp;type=jsapi`, (err, res, body) =&gt; &#123; if (err) &#123; reject('获取 jsapiTicket 失败 检查 getJsapiTicket 函数') &#125; resolve(body) &#125;) &#125;)&#125;// jsapiTicket 默认有效时间 7200ms，五分钟交替时间setInterval(async () =&gt; &#123; await updateJsapiTicket()&#125;, (validTime - 300) * 1000)module.exports = getJsapiTicket ¶2、外部获取 jsapi_ticket 12345const getAccessToken = require('../utils/wechat/getAccessToken')const getJsapiTicket = require('../utils/wechat/getJsapiTicket')const jsapiTicket = await getJsapiTicket(await getAccessToken())console.log(jsapiTicket) ¶二、签名算法 这一部分可参考 官方文档 - JS-SDK 使用权限签名算法 ¶1、sign.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * 从这里下载官方示例 * http://demo.open.weixin.qq.com/jssdk/sample.zip * jssha 请用官方示例中的文件 */var createNonceStr = function () &#123; return Math.random().toString(36).substr(2, 15)&#125;var createTimestamp = function () &#123; return parseInt(new Date().getTime() / 1000) + ''&#125;var raw = function (args) &#123; var keys = Object.keys(args) keys = keys.sort() var newArgs = &#123;&#125; keys.forEach(function (key) &#123; newArgs[key.toLowerCase()] = args[key] &#125;) var string = '' for (var k in newArgs) &#123; string += '&amp;' + k + '=' + newArgs[k] &#125; string = string.substr(1) return string&#125;/*** @synopsis 签名算法 ** @param appId 应用appId* @param jsapi_ticket 用于签名的 jsapi_ticket* @param url 用于签名的 url ，注意必须动态获取，不能 hardcode** @returns*/var sign = function (appId, jsapi_ticket, url) &#123; let timestamp = createTimestamp() let nonceStr = createNonceStr() var ret = &#123; appId, jsapi_ticket, nonceStr, timestamp, url &#125; var string = raw(ret) var jsSHA = require('jssha') var shaObj = new jsSHA(string, 'TEXT') var signature = shaObj.getHash('SHA-1', 'HEX') const config = &#123; appId, timestamp, nonceStr, signature &#125; return config&#125;module.exports = sign 注意 jssha 建议与官方 demo 使用的版本一致，即1.5.0版本，可输入如下命令安装： 1npm i jssha@1.5.0 -S ¶2、签名结果 1234567891011121314151617const appConfig = require(&apos;../app.config&apos;)const sign = require(&apos;../utils/wechat/sign&apos;)const getAccessToken = require(&apos;../utils/wechat/getAccessToken&apos;)const getJsapiTicket = require(&apos;../utils/wechat/getJsapiTicket&apos;)// 获取微信鉴权信息async getConfig () &#123; let config try &#123; const jsapiTicket = await getJsapiTicket(await getAccessToken()) config = sign(appConfig.appId, jsapiTicket, ctx.query.url) &#125; catch (error) &#123; console.log(&apos;error&apos;, error) config = &#123;&#125; &#125; console.log(config)&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信公众号","slug":"前端/微信公众号","permalink":"https://liuxianyu.cn/categories/前端/微信公众号/"}],"tags":[{"name":"微信公众号","slug":"微信公众号","permalink":"https://liuxianyu.cn/tags/微信公众号/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"node 微信公众号开发（三）—— 获取并缓存 access_token","slug":"2020-12-11-node-wechat-access_token","date":"2020-12-11T11:05:48.000Z","updated":"2020-12-11T11:05:48.000Z","comments":true,"path":"article/node-wechat-access_token.html","link":"","permalink":"https://liuxianyu.cn/article/node-wechat-access_token.html","excerpt":"最近想用 node 写一个微信公众号的项目，建议全程 https，这里记录一下如何获取并缓存 access_token。","text":"最近想用 node 写一个微信公众号的项目，建议全程 https，这里记录一下如何获取并缓存 access_token。 ¶一、开发信息 在微信公众号管理平台 -&gt; 开发 -&gt; 基本设置 -&gt; 公众号开发信息中获取 appId、appSecret，并将服务器和本地的 ip 配置到IP白名单中，“获取access_token”接口新增IP白名单保护。 ¶二、access_token 这一部分可参考 官方文档 - 获取Access token，app.config.js。 ¶1、getAccessToken.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566/** * access_token 的缓存和更新 */const fs = require('fs')const path = require('path')const request = require('request')const appConfig = require('../../app.config')const fileName = path.resolve(__dirname, './access_token.json')let validTime = 7200 // access_token 的默认有效时间/** * 通过 appId 和 appSecret 获取 access_token * @return &#123;Promise&#125; */const getAccessToken = async () =&gt; &#123; try &#123; let readRes = fs.readFileSync(fileName, 'utf8') readRes = JSON.parse(readRes) // 如果创建的时间超过现在时间默认 7200ms const createTime = new Date(readRes.createTime).getTime() const nowTime = new Date().getTime() if ((nowTime - createTime) / 1000 &gt;= validTime) &#123; await updateAccessToken() return await getAccessToken() &#125; return readRes.access_token &#125; catch (error) &#123; // 未读取到文件中的正确内容则更新接口 await updateAccessToken() return await getAccessToken() &#125;&#125;// 更新本地缓存的 access_tokenconst updateAccessToken = async () =&gt; &#123; const res = JSON.parse(await getNewAccessToken()) if (res.access_token) &#123; validTime = res.expires_in fs.writeFileSync(fileName, JSON.stringify(&#123; createTime: new Date(), ...res &#125;)) &#125; else &#123; await updateAccessToken() &#125;&#125;// 从微信获取新的 access_token，有效时间默认是 7200msconst getNewAccessToken = async () =&gt; &#123; console.log('从微信服务器获取 access_token 啦') return new Promise((resolve, reject) =&gt; &#123; request.get(`$&#123; appConfig.wxapiBaseUrl &#125;/token?grant_type=client_credential&amp;appId=$&#123; appConfig.appId &#125;&amp;secret=$&#123; appConfig.appSecret &#125;`, (err, res, body) =&gt; &#123; if (err) &#123; reject('获取 access_token 失败 检查 getAccessToken 函数') &#125; resolve(body) &#125;) &#125;)&#125;// access_token 默认有效时间 7200ms，五分钟交替时间setInterval(async () =&gt; &#123; await updateAccessToken()&#125;, (validTime - 300) * 1000)module.exports = getAccessToken ¶2、外部获取 access_token 1234const getAccessToken = require('../utils/wechat/getAccessToken')const accessToken = await getAccessToken()console.log(accessToken) 注意 在 getAccessToken() 中调用本身的地方需要注意，两处 await getAccessToken() 前都要加上 return，否则执行到这里时，外部调用 await getAccessToken() 拿到的会是 undefined，因为不加 return 意味着没有将此处拿到的返回值重新返回给外部。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信公众号","slug":"前端/微信公众号","permalink":"https://liuxianyu.cn/categories/前端/微信公众号/"}],"tags":[{"name":"微信公众号","slug":"微信公众号","permalink":"https://liuxianyu.cn/tags/微信公众号/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"node 微信公众号开发（二）—— 服务器配置","slug":"2020-12-11-node-wechat-server","date":"2020-12-11T10:36:43.000Z","updated":"2020-12-11T10:36:43.000Z","comments":true,"path":"article/node-wechat-server.html","link":"","permalink":"https://liuxianyu.cn/article/node-wechat-server.html","excerpt":"最近想用 node 写一个微信公众号的项目，建议全程 https，这里记录一下怎么在微信公众号平台设置服务器及对应开发。","text":"最近想用 node 写一个微信公众号的项目，建议全程 https，这里记录一下怎么在微信公众号平台设置服务器及对应开发。 ¶一、开发内容 在刚刚搭建的基础框架中开发，router/index.js中写入如下代码： 12345678910111213141516171819202122232425262728/** * 模块化处理router */const Router = require('koa-router')const sha1 = require('sha1')const appConfig = require('../app.config')const router = new Router()/** * 启动路由 * allowedMethods, 在所有路由中间件最后调用, 此时根据 ctx.status 设置 response 响应头 */module.exports = app =&gt; &#123; // 验证消息的确来自微信服务器 router.get('/', ctx =&gt; &#123; const &#123; openid &#125; = ctx.query if (openid) &#123; // 用户给公众号发消息 return ctx.body = '' &#125; const &#123; signature, timestamp, nonce, echostr &#125; = ctx.query let str = [appConfig.Token, timestamp, nonce].sort().join('') // 按字典排序，拼接字符串 let sha = sha1(str) ctx.body = (sha === signature) ? echostr : '' &#125;) app.use(router.routes(), router.allowedMethods())&#125; ¶二、服务器配置 如上图在微信公众号管理平台 -&gt; 开发 -&gt; 基本设置 -&gt; 服务器配置中设置参数，注意Token字段需要与 app.config.js 中的Token保持一致。记得启用服务器配置。配置后用户发给公众号的信息也会调用刚刚设置的服务器 URL，我这边暂时不对消息做处理，可依据 官方文档建议，先返回空字符串。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信公众号","slug":"前端/微信公众号","permalink":"https://liuxianyu.cn/categories/前端/微信公众号/"}],"tags":[{"name":"微信公众号","slug":"微信公众号","permalink":"https://liuxianyu.cn/tags/微信公众号/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"node 微信公众号开发（一）—— 基础框架","slug":"2020-12-11-node-wechat-base-koa","date":"2020-12-11T09:50:43.000Z","updated":"2020-12-11T09:50:43.000Z","comments":true,"path":"article/node-wechat-base-koa.html","link":"","permalink":"https://liuxianyu.cn/article/node-wechat-base-koa.html","excerpt":"最近想用 node 写一个微信公众号的项目，建议全程 https，这里记录一下基础框架的搭建。","text":"最近想用 node 写一个微信公众号的项目，建议全程 https，这里记录一下基础框架的搭建。 ¶一、基于 koa2 ¶1、安装 koa 相关包 1npm i koa koa-bodyparser koa-compress koa-logger koa-router -S ¶2、Package 说明 koa # 主程 koa-router # 路由 koa-logger # 日志 koa-compress # 压缩响应 koa-bodyparser # 获取 post 请求的参数 ¶二、基础结构 ¶1、项目结构 目前项目未完成，仅供初始参考。 12345678910111213141516171819202122232425262728293031323334353637383940414243jizhangla-api├─controller —— 控制器| ├─User.js| └─Wechat.js├─middleWares —— 中间件目录| ├─code.js —— 统一处理返回的 ctx.body| ├─error.js —— 错误处理| └─index.js├─model —— 模型| ├─user.js| └─wechat.js├─mysql —— mysql 执行 sql 文件相关方法| ├─README.md| ├─index.js| ├─util| | ├─db.js| | ├─get-sql-content-map.js| | ├─get-sql-map.js| | └─walk-file.js| ├─sql| | └─base-table.sql├─pm2| ├─config.json —— pm2 配置文件| ├─logs —— pm2 输出日志| | ├─pm2-err.log —— 错误日志| | └─pm2-out.log —— 输出日志├─router —— 路由| ├─index.js| ├─user.js —— 用户相关| └─wechat.js —— 微信相关├─utils| ├─uuid.js —— 生成 uuid| ├─wechat —— 微信相关方法目录| | ├─access_token.json —— 暂存 access_token| | ├─getAccessToken.js —— 获取 access_token| | ├─getTicket.js —— 暂存 ticket| | ├─sign.js —— 微信鉴权签名算法| | └─ticket.json —— 获取 ticket├─app.config.js —— 配置文件├─app.js —— 入口文件├─package.json├─README.md —— README└─start.sh —— 服务器部署脚本文件 ¶2、app.js 1234567891011121314151617181920212223242526272829303132const Koa = require('koa')const logger = require('koa-logger')const compress = require('koa-compress')const bodyParser = require('koa-bodyparser')const appConfig = require('./app.config')const middles = require('./middleWares')const router = require('./router')const app = new Koa()// 配置中间件，通过 bodyParser 获取 post 请求传递过来的参数app.use(bodyParser())app.use(logger())app.use(compress(&#123; threshold: 1024 // 超过大小即压缩，bytes&#125;))// 启动自定义中间件middles(app)// 启动路由router(app)// app错误监听app.on('error', (err) =&gt; &#123; console.error('Server error: \\n%s\\n%s ', err.stack || '')&#125;)app.listen(appConfig.appPort, () =&gt; &#123; console.log(`app runs on port $&#123; appConfig.appPort &#125;`)&#125;) ¶2、app.config.js 1234567891011/** * 配置文件 */module.exports = &#123; appPort: 9002, // 服务端口 Token: 'liuxy0551', // 公众号平台 - 开发 - 基本配置/填写服务器配置 appId: 'wx9a4ad27276******', appSecret: '********************************', // 重要，不可公开 wxapiBaseUrl: 'https://api.weixin.qq.com/cgi-bin' // 请求微信信息时微信服务器的地址&#125; ¶3、middleWares/code.js 123456789/** * ctx code 设置 * @param ctx koa ctx * @param next koa next */module.exports = async (ctx, next) =&gt; &#123; ctx.body = &#123; code: 200, message: '成功' &#125; await next()&#125; ¶4、middleWares/error.js 1234567891011121314151617/** * 错误处理中间件，放在所有中间件之前，就可以捕获它们所有的同步或者异步代码中抛出的异常 * @param ctx koa ctx * @param next koa next */module.exports = async (ctx, next) =&gt; &#123; try &#123; // Node标识 ctx.set('X-Proxy', 'Node Server') await next() &#125; catch (err) &#123; console.log('err', err) ctx.status = err.status || 500 ctx.body = 'We are sorry. Internal server error occurred.' ctx.app.emit('error', err, ctx) &#125;&#125; ¶5、middleWares/index.js 123456789101112131415161718/** * @file 中间件集合 */const errorMiddleWare = require('./error')const codeMiddleWare = require('./code')/** * 中间件 */module.exports = (app) =&gt; &#123; // error 放在所有中间件之前，就可以捕获它们所有的同步或者异步代码中抛出的异常 // codeMiddleWare 放在所有中间件之后 const middleWares = [errorMiddleWare, codeMiddleWare] middleWares.forEach((middleware) =&gt; &#123; app.use(middleware) &#125;)&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信公众号","slug":"前端/微信公众号","permalink":"https://liuxianyu.cn/categories/前端/微信公众号/"}],"tags":[{"name":"微信公众号","slug":"微信公众号","permalink":"https://liuxianyu.cn/tags/微信公众号/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"node 项目部署（pm2）","slug":"2020-12-10-deploy-node","date":"2020-12-10T15:28:15.000Z","updated":"2020-12-10T15:28:15.000Z","comments":true,"path":"article/deploy-node.html","link":"","permalink":"https://liuxianyu.cn/article/deploy-node.html","excerpt":"最近在用 node 写个 Web Server，记录一下部署方法。","text":"最近在用 node 写个 Web Server，记录一下部署方法。 ¶一、部署项目 ¶1、部署前准备 服务器端需要提前安装好 git、nginx、node、cnpm（安装 git、安装 nginx）、pm2（使用 pm2 部署 node 项目） 1、ssh 到服务器，并在指定目录位置通过 git clone 拉取代码初始化文件夹 2、配置 node 服务的 nginx，服务启动在 9000 端口，http、https 均可访问(需要配置证书)，配置如下： 12345678910111213141516171819202122232425262728# 记账啦后端 node api 的 nginx 配置# httpserver &#123; listen 80; server_name api.jzl.liuxianyu.cn; location / &#123; proxy_pass http://localhost:9000/; &#125;&#125;# httpsserver &#123; listen 443 ssl; server_name api.jzl.liuxianyu.cn; client_max_body_size 50M; client_body_timeout 10m; ssl_certificate cert/api.jzl.liuxianyu.cn.pem; ssl_certificate_key cert/api.jzl.liuxianyu.cn.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location / &#123; proxy_pass http://localhost:9000/; &#125;&#125; ¶2、部署流程 1、本地修改代码，上传到 git 2、服务器通过 git 拉取最新代码 3、重启 pm2 对应进程 ¶二、操作 终端连接到服务器，进入对应目录，命令行执行： 1./start.sh start.sh文件内容如下： 1234git pull origin mastercnpm ipm2 restart ./pm2/config.jsonpm2 monit 可按需要添加以下两条命令： 含义 命令 显示每个应用程序的 CPU 和内存占用情况 pm2 monit 查看输出的日志 pm2 logs","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"pm2","slug":"pm2","permalink":"https://liuxianyu.cn/tags/pm2/"}],"author":"liuxy0551"},{"title":"Git 常用命令（十一）—— 解决每次拉代码都需要输入用户名和密码","slug":"2018-10-21-Git-Order-K","date":"2020-12-10T13:45:46.000Z","updated":"2020-12-10T13:45:46.000Z","comments":true,"path":"article/git-order-k.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-k.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下解决每次拉代码都需要输入用户名和密码：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下解决每次拉代码都需要输入用户名和密码： ¶全局配置 1git config credential.helper store 上述命令会在拉取时记录用户名和密码，下次再执行 git pull 时就不用再输入了。 也可以使用 ssh 链接 clone 项目","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"阿里云函数计算初接触","slug":"2020-11-17-fc-serverless","date":"2020-11-17T17:10:00.000Z","updated":"2021-05-16T14:10:08.000Z","comments":true,"path":"article/fc-serverless.html","link":"","permalink":"https://liuxianyu.cn/article/fc-serverless.html","excerpt":"最近在公司项目中实践数据中台的概念，调研并使用了阿里云提供的函数计算服务，记录下相关内容：","text":"最近在公司项目中实践数据中台的概念，调研并使用了阿里云提供的函数计算服务，记录下相关内容： ¶一、安装 fun 命令行工具 12npm install @alicloud/fun -gfun --version ¶二、搭建基于Express的Serverless Web应用 阿里云文档：搭建基于Express的Serverless Web应用 ¶1、通过 fun 模板生成项目 1fun init -n wisejob-class https://github.com/muxiangqiu/fc-Express-nodejs8.git ¶2、本地运行 注意 本地需要安装 Docker 并启动 静态页面打包时的路径需带上访问域名的名称前缀 本地访问静态页面时 url 后需要带 / 1234cd demoyarnnpm run devfun local start 本地查看效果：http://localhost:8000/2016-08-15/proxy/wisejob-class-service/wisejob-class ¶3、通过 .env 文件配置 (1)、在项目目录即template.yml文件所在目录下，创建一个名为.env的文件。 说明 建议将 .env 文件放到 .gitignore中，避免泄漏重要的账户信息。 (2)、在 .env 文件录入以下配置： 123456ACCOUNT_ID=xxxxxxxxREGION=cn-shanghaiACCESS_KEY_ID=xxxxxxxxxxxxACCESS_KEY_SECRET=xxxxxxxxxxTIMEOUT=10RETRIES=3 ¶4、部署函数到控制台 1fun deploy ¶三、阿里云控制台注意事项 ¶1、自定义域名 操作路径：控制台 -&gt; 函数计算 -&gt; 自定义域名 每个路由的 版本/别名 在开发调试时先选择 LATEST，等待上线时，按照第4条的版本管理，选择别名。 ¶2、日志查询 操作路径：控制台 -&gt; 函数计算 -&gt; 服务/函数 -&gt; (选择一个函数)函数列表 -&gt; 函数名称(点击函数名称) -&gt; 日志查询 日志内容包含的内容如：接口url、报错信息 ¶3、配置导出 操作路径：控制台 -&gt; 函数计算 -&gt; 服务/函数 -&gt; (选择一个函数)函数列表 -&gt; 函数名称(点击函数名称) -&gt; 概览 -&gt; 导出 -&gt; 导出配置 将导出的 template.yml 文件放到项目中，这样控制台配置的配置项就不会被 deploy 覆盖掉。 注意 控制台导出的配置文件可能有部分缺失，需要和本地已有的 template.yml 文件对比，保留部分字段，如：CodeUri ¶4、版本管理 操作路径：控制台 -&gt; 函数计算 -&gt; 服务/函数 -&gt; (选择一个函数)版本管理 -&gt; 别名 （1）上线时可以新建一个版本，并对该版本新建别名且设置别名对应的版本占比，用来在自定义域名中使用(每个路径都选择该别名)，在 版本管理 -&gt; 别名 中可对该别名进行版本占比控制，达到灰度发布的效果。 （2）后续迭代时，deploy 后可在 版本管理 中新建一个版本，并在别名中选择该版本的占比。 ¶5、环境变量 待补充 https://help.aliyun.com/document_detail/164217.html?spm=a2c4g.11186623.6.629.3e0a283bkc5bnN ¶6、请求环境区分 调用请求时需要区分生产环境和测试环境，可以发布不同的版本，并创建多个触发器，设置触发器指向不同的版本，如下图： 自定义域名中创建两个域名，用来区分环境，路径可按下方示例填写，生产和测试选择不同的版本/别名即可。 ¶四、遇到的问题 ¶1、regeneratorRuntime is not defined 在代码中使用 async/await 时报错，是 babel 编译的问题，安装babel-plugin-transform-runtime， 1npm i babel-plugin-transform-runtime -D 然后在 .babelrc 中添加 plugins，重新运行即可。 1234&#123; ..., \"plugins\": [\"transform-runtime\"]&#125; ¶2、使用 … 扩展符 在代码中使用 … 扩展符时本地运行报错，是 babel 编译的问题，安装babel-plugin-transform-object-rest-spread， 1npm i babel-plugin-transform-object-rest-spread -D 然后在 .babelrc 中添加 plugins，重新运行即可。 1234&#123; ..., \"plugins\": [\"transform-object-rest-spread\"]&#125; ¶3、load code for handler:index.handler 本地运行时项目刚启动，调用 POST 接口可能导致程序阻塞（deploy到线上不会阻塞），先调用一次 GET 接口再调用 POST 接口就不会阻塞，原因未知。 ¶4、静态文件使用自定义域名 需要每个文件都添加记录，等待后续必须上传到函数计算时，使用打包到 OSS 尝试解决。 ¶5、目录过深，运行报错 将项目拷贝到桌面，运行。","categories":[{"name":"Serverless","slug":"Serverless","permalink":"https://liuxianyu.cn/categories/Serverless/"}],"tags":[{"name":"函数计算","slug":"函数计算","permalink":"https://liuxianyu.cn/tags/函数计算/"},{"name":"Serverless","slug":"Serverless","permalink":"https://liuxianyu.cn/tags/Serverless/"}],"author":"liuxy0551"},{"title":"koa2 中解决跨域","slug":"2020-11-03-koa2-cors","date":"2020-11-03T10:29:12.000Z","updated":"2020-11-03T10:29:12.000Z","comments":true,"path":"article/koa2-cors.html","link":"","permalink":"https://liuxianyu.cn/article/koa2-cors.html","excerpt":"最近在宜搭中有请求接口的场景，需要 https (在阿里云通过 SSL证书和 nginx 配置 https)，使用之前写的接口遇到了跨域问题，记录一下。","text":"最近在宜搭中有请求接口的场景，需要 https (在阿里云通过 SSL证书和 nginx 配置 https)，使用之前写的接口遇到了跨域问题，记录一下。 ¶一、安装 koa2-cors koa2-cors 1npm i koa2-cors -S ¶二、引入 koa2-cors 并配置中间件 12345678const Koa = require('koa')const cors = require('koa2-cors')const app = new Koa()app.use(cors(&#123; origin: ctx =&gt; ctx.header.origin, credentials: true&#125;)) 报错信息中提到的Access-Control-Allow-Credentials，表示是否允许发送 Cookie。 注意 如果要发送 Cookie，Access-Control-Allow-Origin就不能设置为*，需要设置为请求网页一致的域名。同时，Cookie 遵循同源政策。","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Koa2","slug":"node/Koa2","permalink":"https://liuxianyu.cn/categories/node/Koa2/"}],"tags":[{"name":"Koa2","slug":"Koa2","permalink":"https://liuxianyu.cn/tags/Koa2/"}],"author":"liuxy0551"},{"title":"微信小程序实现左右滑动功能","slug":"2020-10-16-wechat-scroll-left-right","date":"2020-10-16T17:13:38.000Z","updated":"2020-10-16T17:13:38.000Z","comments":true,"path":"article/wechat-scroll-left-right.html","link":"","permalink":"https://liuxianyu.cn/article/wechat-scroll-left-right.html","excerpt":"最近写了个教育机构的微信小程序，其中有个批阅的功能，产品希望切换题目的时候能通过左右滑动切换上一题下一题，说是客户抖音玩多了，记录一下实现方法。","text":"最近写了个教育机构的微信小程序，其中有个批阅的功能，产品希望切换题目的时候能通过左右滑动切换上一题下一题，说是客户抖音玩多了，记录一下实现方法。 ¶一、实现效果 ¶二、实现方法 在需要滑动的区域加上触摸事件的监听，文档可参考 事件详解。主要使用到三个事件touchstart、touchmove、touchend，思路是： touchstart 记录开始的位置，标识已开始移动；touchmove 记录移动的距离，超过设定的移动距离即认为进行了滑动操作；touchend 标识结束移动 代码如下： 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;template&gt; &lt;div @touchstart=\"touchStart\" @touchmove=\"touchMove\" @touchend=\"touchEnd\"&gt; &lt;!--监听滑动的区域--&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import wepy from '@wepy/core' wepy.page(&#123; data: &#123; // 监听左右滑动 startX: '', // 横向移动开始的位置 endX: '', // 横向移动结束的位置 moveFlag: true // 判断是否在滑动 &#125;, methods: &#123; // 手指触摸动作开始 touchStart (e) &#123; this.startX = e.touches[0].pageX // 开始触摸时的原点 this.moveFlag = true &#125;, // 手指触摸后移动 50 为设定的移动距离 touchMove (e) &#123; this.endX = e.touches[0].pageX // 结束触摸时的原点 if (this.moveFlag) &#123; if (this.endX - this.startX &gt; 50) &#123; console.log('上一题') this.moveFlag = false &#125; if (this.startX - this.endX &gt; 50) &#123; console.log('下一题') this.moveFlag = false &#125; &#125; &#125;, // 手指触摸动作结束 touchEnd () &#123; this.moveFlag = true &#125; &#125; &#125;)&lt;/script&gt; 注意 touchstart、touchmove、touchend 为微信官方提供的 api，均为小写，对应的方法按习惯使用了驼峰命名。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"}],"author":"liuxy0551"},{"title":"html2canvas 配合 jspdf 导出含有 echarts 图表的 pdf","slug":"2020-10-11-html2canvas-jspdf","date":"2020-10-11T17:39:04.000Z","updated":"2020-10-11T17:39:04.000Z","comments":true,"path":"article/html2canvas-jspdf.html","link":"","permalink":"https://liuxianyu.cn/article/html2canvas-jspdf.html","excerpt":"最近有个导出 pdf 的需求，内容区域含有 echarts 图表，记录一下处理的代码。","text":"最近有个导出 pdf 的需求，内容区域含有 echarts 图表，记录一下处理的代码。 本篇随笔和另一篇 使用 window.print() 时将 DOM 中的 canvas 转为 image 是同一个问题的处理记录。 1234567891011121314151617181920212223242526272829303132333435363738394041// 导出页面为PDF格式import html2Canvas from 'html2canvas'import JsPDF from 'jspdf'export default&#123; install (Vue, options) &#123; Vue.prototype.getPdf = title =&gt; &#123; let target = document.querySelector('#pdfDom') html2Canvas(target, &#123; allowTaint: true, scale: 1.2 // 用于渲染的比例尺，默认为浏览器设备像素比率。 &#125;).then(canvas =&gt; &#123; let contentWidth = canvas.width let contentHeight = canvas.height // A4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高 let pageHeight = contentWidth / 595.28 * 841.89 let leftHeight = contentHeight let position = 0 let imgWidth = 505 let imgHeight = 505 / contentWidth * contentHeight let pageData = canvas.toDataURL('image/jpeg', 1.0) let PDF = new JsPDF('', 'pt', 'a4') if (leftHeight &lt; pageHeight) &#123; // 单页 PDF.addImage(pageData, 'JPEG', 45, 60, imgWidth, imgHeight) // 45 left, 60 top &#125; else &#123; // 多页 while (leftHeight &gt; 0) &#123; PDF.addImage(pageData, 'JPEG', 0, position, imgWidth, imgHeight) leftHeight -= pageHeight position -= 841.89 if (leftHeight &gt; 0) &#123; PDF.addPage() &#125; &#125; &#125; PDF.save(`$&#123; title &#125;.pdf`) &#125;) &#125; &#125;&#125; 注意 使用html2canvas时可参考官方文档 http://html2canvas.hertzen.com/configuration","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"}],"tags":[{"name":"导出pdf","slug":"导出pdf","permalink":"https://liuxianyu.cn/tags/导出pdf/"}],"author":"liuxy0551"},{"title":"使用 window.print() 时将 DOM 中的 canvas 转为 image","slug":"2020-09-30-window-print-canvas-image","date":"2020-09-30T17:32:40.000Z","updated":"2020-09-30T17:32:40.000Z","comments":true,"path":"article/window-print-canvas-image.html","link":"","permalink":"https://liuxianyu.cn/article/window-print-canvas-image.html","excerpt":"最近有个导出 pdf 的需求，尝试过程中遇到了 window.print() 导出时，内容区域有 echarts 图表，图表区域是个 canvas，导出后的 pdf 文件中 canvas 区域空白，记录一下解决方法。","text":"最近有个导出 pdf 的需求，尝试过程中遇到了 window.print() 导出时，内容区域有 echarts 图表，图表区域是个 canvas，导出后的 pdf 文件中 canvas 区域空白，记录一下解决方法。 ¶一、代码 12345678910111213141516171819const oldInnerHtml = window.document.body.innerHTMLconst mainCanvas = document.getElementsByTagName('canvas')[0]const mainRef = this.$refs['mainRef']// 将 canvas 转为图片const mainImg = new Image()const mainImgSrc = mainCanvas.toDataURL('image/png')mainImg.src = mainImgSrc// 图片加载完成后mainImg.onload = () =&gt; &#123; mainRef.innerHTML = `&lt;img src=$&#123; mainImgSrc &#125;&gt;` // 用图片替换 canvas window.document.body.innerHTML = this.$refs['reportPdfRef'].innerHTML window.print() window.document.body.innerHTML = oldInnerHtml // window.location.reload() // 或者刷新页面&#125; ¶注意事项 注意 1、导出正常 pdf 后原先的 canvas 区域会空白 2、通过window.location.reload()可解决上一条问题，但是会刷新页面","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"}],"tags":[{"name":"canvas","slug":"canvas","permalink":"https://liuxianyu.cn/tags/canvas/"}],"author":"liuxy0551"},{"title":"在阿里云通过 SSL证书和 nginx 配置 https","slug":"2020-09-30-nginx-https","date":"2020-09-30T15:47:59.000Z","updated":"2020-09-30T15:47:59.000Z","comments":true,"path":"article/nginx-https.html","link":"","permalink":"https://liuxianyu.cn/article/nginx-https.html","excerpt":"前几天部署了一个 node 项目，在各个小程序配置中，基本都要求 https 请求，记录一下在阿里云通过 SSL证书和 nginx 配置 https。","text":"前几天部署了一个 node 项目，在各个小程序配置中，基本都要求 https 请求，记录一下在阿里云通过 SSL证书和 nginx 配置 https。 ¶一、购买、下载、上传 SSL 证书 登录阿里云后在控制台搜索进入SSL 证书，点击购买证书，选择单个域名、DV域名级SSL、免费版、1年，支付0元购买。在证书列表页点击证书申请按钮，填入证书绑定域名api.koa-app.liuxianyu.cn，下一步（在阿里云购买的域名会自动在域名解析处添加域名验证信息，https 生效后可删除该条解析），下载证书（Nginx）。解压后将证书上传到/etc/nginx/cert目录下，建议将文件名都改为对应域名以作区分。 ¶二、配置 nginx 编辑已有的koa-app.conf，新的配置如下： 12345678910111213141516171819202122232425262728# 学习 koa-app 的 nginx 配置# http#server &#123;# listen 80;# server_name api.koa-app.liuxianyu.cn;## location / &#123;# proxy_pass http://localhost:9000/;# &#125;#&#125;# httpsserver &#123; listen 443 ssl; server_name api.koa-app.liuxianyu.cn; client_max_body_size 50M; client_body_timeout 10m; ssl_certificate cert/api.koa-app.liuxianyu.cn.pem; ssl_certificate_key cert/api.koa-app.liuxianyu.cn.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location / &#123; proxy_pass http://localhost:9000/; &#125;&#125; 配置名 含义 client_max_body_size 限制上传文件的大小，默认 1M client_body_timeout 客户端与服务端建立连接后发送 request body 的超时时间，默认 60s ssl_certificate 证书文件目录 ssl_certificate_key 私钥文件目录 ssl_session_timeout 指定客户端可以重用会话参数的时间（超时之后不可使用） ssl_ciphers 密码加密方式 ssl_protocols 指定密码为 openssl 支持的格式 ssl_prefer_server_ciphers 依赖SSLv3和TLSv1协议的服务器密码将优先于客户端密码 注意 放开 80 的 server 注释，通过 http 也可以访问（vim 中的取消一行的注释快捷键是 X）","categories":[{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/categories/nginx/"},{"name":"https-SSL","slug":"nginx/https-SSL","permalink":"https://liuxianyu.cn/categories/nginx/https-SSL/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/tags/nginx/"},{"name":"https-SSL","slug":"https-SSL","permalink":"https://liuxianyu.cn/tags/https-SSL/"}],"author":"liuxy0551"},{"title":"node 服务渲染支持 Markdown 中的数字公式 LaTeX、yUML 流程图支持","slug":"2020-09-28-node-markdown","date":"2020-09-28T11:47:25.000Z","updated":"2020-09-28T11:47:25.000Z","comments":true,"path":"article/node-markdown.html","link":"","permalink":"https://liuxianyu.cn/article/node-markdown.html","excerpt":"最近在微信小程序中遇到了数学公式的显示，后端不好处理成图片，记录一下通过 node 生成 svg。","text":"最近在微信小程序中遇到了数学公式的显示，后端不好处理成图片，记录一下通过 node 生成 svg。 ¶一、获取项目 1git clone https://github.com/liuxy0551/markdown-server 项目结构比较简洁，如下： 12345markdown-server├─LICENSE├─README.md├─index.js└─package.json ¶二、运行项目 ¶1、安装依赖 1npm i 或 yarn install ¶2、改变端口 出于个人偏好，将项目本身的 8001 端口改为了 9001。 ¶3、运行服务 1node index ¶三、配置 nginx 内容如下： 12345678server &#123; listen 80; server_name markdown.liuxianyu.cn; location / &#123; proxy_pass http://localhost:9001/; &#125;&#125; 重启 nginx： 1nginx -s reload ¶四、查看效果 http://markdown.liuxianyu.cn/?tex=r=%5Csqrt%7Bx2+y2%7D ¶参考资料 1、https://github.com/sbfkcel/markdown-server 2、https://github.com/sbfkcel/towxml 3、3.0 数字公式&amp;yuml流程图支持","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"LaTeX","slug":"LaTeX","permalink":"https://liuxianyu.cn/tags/LaTeX/"},{"name":"yUML","slug":"yUML","permalink":"https://liuxianyu.cn/tags/yUML/"}],"author":"liuxy0551"},{"title":"Linux 中的一些命令","slug":"2020-09-25-linux-command","date":"2020-09-25T20:26:42.000Z","updated":"2023-03-16T17:25:03.000Z","comments":true,"path":"article/linux-command.html","link":"","permalink":"https://liuxianyu.cn/article/linux-command.html","excerpt":"记录 Linux 中的一些命令。","text":"记录 Linux 中的一些命令。 ¶1、netstat - 查看端口 查看是否在监听项目端口，无 PID： 1netstat -tpln ¶2、lsof - 查看进程 查看指定端口的进程，会返回 PID： 1lsof -i:9000 ¶3、kill - 杀死进程 关闭某个进程： 1kill 9127 -9 表明立即关闭： 1kill -9 9127 ¶4、tailf - 查看日志 1tailf -100 pm2/logs/pm2-out.log ¶5、cp - 复制文件、目录 12cp start.sh ../markdown-server/cp -r node_modules ../markdown-server/ ¶6、mv - 移动文件、重命名 12mv start.sh ../markdown-server/mv start.sh new-start.sh ¶7、ssh-copy-id - 添加本机的 SSH 公钥到服务器 1ssh-copy-id deploy@47.65.55.62 或 1ssh-copy-id -i .ssh/id_rsa_liuxy0551 deploy@47.65.55.62 ¶8、du - 查看文件夹空间占用 1du -h --max-depth=1 /home MacOS 系统下在当前文件夹下执行： 1du -h -d 1 或 1find . -size +10M | xargs ls -lah ¶9、ls - 查看文件列表 1ls -lahS -l 每个文件一行列出 -a 所有文件，包含隐藏文件 -h 将文件内容大小以GB、KB等易读的方式显示 -S 以文件大小排序 ¶10、查看 CentOS 的 CPU、内存、磁盘等信息 查看每个物理CPU中core的个数(即核数) 1cat /proc/cpuinfo| grep &quot;cpu cores&quot;| uniq 查看内存信息 1free -m 查看磁盘空间 1df ¶11、tar 压缩 压缩 1tar -czf fileName.tar.gz /dist 解压 1tar -xzf fileName.tar.gz tar 打包压缩命令","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"Cent OS","slug":"Linux/Cent-OS","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/tags/Linux/"},{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"}],"author":"liuxy0551"},{"title":"使用 pm2 部署 node 项目","slug":"2020-09-25-node-pm2","date":"2020-09-25T15:35:42.000Z","updated":"2020-09-25T15:35:42.000Z","comments":true,"path":"article/node-pm2.html","link":"","permalink":"https://liuxianyu.cn/article/node-pm2.html","excerpt":"最近在学习 node，写了个测试接口，想着学习一下如何部署 node 项目，这样方便日后写正式一点的项目好自行部署，这里记录下 pm2 的一些知识点。","text":"最近在学习 node，写了个测试接口，想着学习一下如何部署 node 项目，这样方便日后写正式一点的项目好自行部署，这里记录下 pm2 的一些知识点。 ¶一、常用命令 含义 命令 启动服务 pm2 start app.js 指定名称启动服务 pm2 start app.js --name markdown 当文件变化时自动重启 pm2 start app.js --watch 查看服务列表 pm2 list 重启某个服务 pm2 restart 0 / app.js 停止某个服务 pm2 stop 0 / app.js 显示每个应用程序的 CPU 和内存占用情况 pm2 monit 查看某个应用程序的详细信息 pm2 describe 0 查看输出的日志 pm2 logs 热更新，不停机 pm2 reload all 停止所有服务 pm2 stop all 删除某个服务 pm2 delete 0 删除所有服务 pm2 delete all 更多命令可参考：pm2 常用命令 开机自启 ¶二、配置文件 在/pm2下新建文件config.json，简单示例（单台服务器，非集群）： 123456789&#123; &quot;name&quot;: &quot;koa-app&quot;, &quot;script&quot;: &quot;./app.js&quot;, &quot;cwd&quot; : &quot;./&quot;, &quot;log_date_format&quot;: &quot;YYYY-MM-DD HH:mm:ss&quot;, &quot;max_memory_restart&quot;: &quot;500M&quot;, &quot;out_file&quot; : &quot;./pm2/logs/pm2-out.log&quot;, &quot;error_file&quot; : &quot;./pm2/logs/pm2-err.log&quot;&#125; 含义 命令 name 项目名称 script 主程序入口 cwd 启动目录 log_date_format 日志的日期格式 max_memory_restart 程序超过指定内存就重新启动 out_file 输出文件路径 error_file 错误日志路径 ¶三、部署文件 ¶1、通过 IP 地址请求 在项目内新建一个start.sh文件，在服务器端可执行./start.sh更新服务。服务启用后，可通过 ip + 端口号访问。脚本文件内容如下： 1234git pull origin mastercnpm ipm2 restart ./pm2/config.jsonpm2 monit 注意 start.sh需要有 x 权限，提示权限不够时可执行chmod a+x start.sh ¶2、通过域名请求 先在阿里云控制台解析一个域名，因为服务使用的是 9000 端口，所以搭配 nginx 使用。在/etc/nginx/conf下新建一个配置文件koa-app.conf，内容如下： 12345678server &#123; listen 80; server_name api.koa-app.liuxianyu.cn; location / &#123; proxy_pass http://localhost:9000/; &#125;&#125; ¶四、项目代码 https://github.com/liuxy0551/koa-app 注意 本项目使用的端口是 9000，通过 IP 地址请求时记得在阿里云安全组中添加对应规则","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"pm2","slug":"node/pm2","permalink":"https://liuxianyu.cn/categories/node/pm2/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"pm2","slug":"pm2","permalink":"https://liuxianyu.cn/tags/pm2/"}],"author":"liuxy0551"},{"title":"nuxt 中使用 vue-lazyload 进行图片懒加载","slug":"2020-09-16-nuxt-vue-lazy-load","date":"2020-09-16T15:44:46.000Z","updated":"2020-09-16T15:44:46.000Z","comments":true,"path":"article/nuxt-vue-lazy-load.html","link":"","permalink":"https://liuxianyu.cn/article/nuxt-vue-lazy-load.html","excerpt":"最近用 nuxt 写了个 SSR 的页面，有很多图片展示，使用了图片懒加载，记录一下。","text":"最近用 nuxt 写了个 SSR 的页面，有很多图片展示，使用了图片懒加载，记录一下。 ¶一、依赖版本 1、nuxt v2.14.5 2、vue-lazyload v1.3.3 ¶二、实现过程 ¶1、安装 1npm i vue-lazyload -D ¶2、引入 在plugins目录下新建一个vueLazyLoad.js，内容如下： 123456789import Vue from &apos;vue&apos;import VueLazyLoad from &apos;vue-lazyload&apos;Vue.use(VueLazyLoad, &#123; preLoad: 1.33, // 预加载的宽高比，4:3 error: &apos;/default.jpg&apos;, // 加载失败时使用的图片 loading: &apos;/default.jpg&apos;, // 加载时的loading图 attempt: 2 //尝试加载次数&#125;) 在nuxt.config.js中配置插件： 123plugins: [ &#123; src: &apos;~plugins/vueLazyLoad&apos;, ssr: false &#125;] ¶3、使用 将需要懒加载处的:src属性改为v-lazy，刷新页面，即可看到效果。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"nuxt","slug":"前端/nuxt","permalink":"https://liuxianyu.cn/categories/前端/nuxt/"}],"tags":[{"name":"nuxt","slug":"nuxt","permalink":"https://liuxianyu.cn/tags/nuxt/"},{"name":"图片懒加载","slug":"图片懒加载","permalink":"https://liuxianyu.cn/tags/图片懒加载/"}],"author":"liuxy0551"},{"title":"node 自动编译","slug":"2020-09-15-node-auto-compile","date":"2020-09-15T14:38:03.000Z","updated":"2020-09-15T14:38:03.000Z","comments":true,"path":"article/node-auto-compile.html","link":"","permalink":"https://liuxianyu.cn/article/node-auto-compile.html","excerpt":"node 开发中自动编译无需重启是件很重要的事，记录一下几个工具。","text":"node 开发中自动编译无需重启是件很重要的事，记录一下几个工具。 nodemon推荐 supervisor 全局安装： 1npm i nodemon -g 项目根目录运行： 1nodemon app.js","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"vue 中使用 $once 清除定时器","slug":"2020-09-07-vue-$once","date":"2020-09-07T11:33:34.000Z","updated":"2020-09-07T11:33:34.000Z","comments":true,"path":"article/vue-$once.html","link":"","permalink":"https://liuxianyu.cn/article/vue-$once.html","excerpt":"记录一下 vue 中使用 $once 清除定时器，this.$once(‘hook:beforeDestroy’, () =&gt; { })，官方文档。","text":"记录一下 vue 中使用 $once 清除定时器，this.$once(‘hook:beforeDestroy’, () =&gt; { })，官方文档。 12345678const timer = setInterval(() =&gt; &#123; this.time = new this.ExtDate().strftime('%M月%d日 %H:%m:%s')&#125;, 1000)// 通过 $once 来监听定时器，在 beforeDestroy 钩子可以被清除this.$once('hook:beforeDestroy', () =&gt; &#123; clearInterval(timer)&#125;) 注意 另一种使用方法： 1、需要在 Vue 实例中创建定时器的实例，较为多余 2、创建和销毁定时器的代码不在一起，容易遗忘这个定时器，不易维护","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"通过 node 将本地 json 文件中的数据存储到 mysql","slug":"2020-08-28-node-mysql","date":"2020-08-28T17:39:40.000Z","updated":"2020-08-28T17:39:40.000Z","comments":true,"path":"article/node-mysql.html","link":"","permalink":"https://liuxianyu.cn/article/node-mysql.html","excerpt":"最近从 wepy 的案例 中看到了一款诗词墨客的小程序，风格很喜欢，在这个小程序的README.md中又发现了中华古诗词数据库 chinese-poetry，便想着拿这些数据通过 node 导入 mysql 练练手，https://github.com/liuxy0551/node-chinese-poetry，node 代码：node-mysql。","text":"最近从 wepy 的案例 中看到了一款诗词墨客的小程序，风格很喜欢，在这个小程序的README.md中又发现了中华古诗词数据库 chinese-poetry，便想着拿这些数据通过 node 导入 mysql 练练手，https://github.com/liuxy0551/node-chinese-poetry，node 代码：node-mysql。 这些 json 文件的获取建议直接 clone chinese-poetry的仓库，我是使用cnpm install chinese-poetry -D后从node_modules中复制的文件内容，作了一些筛选。 ¶一、整理数据 将本地文件名和数据库表名对应：/node-mysql/index.js ¶二、读取文件 拼接路径和文件名，读取本地的 json 文件：/node-mysql/file.js ¶三、mysql 存储到 mysql 数据库主要使用sequelize模块：/node-mysql/mysql.js sequelize模块有一些注意事项，如下： ¶1、区分版本 注意 sequelize 的版本和 mysql 版本的对应关系：sequelize 版本 v6 版本 引擎 支持的最低版本 Postgre 9.5 mysql 5.7 MariaDB 10.1 Microsoft SQL 12.0.2000 SQLite 3.0 ¶2、mysql2 需要同时安装mysql2： 1npm i mysql2 -S ¶3、插入数据 create 接收 logging 参数，是否显示 sql 语句日志： 1234567891011async function insertData (k) &#123; return new Promise(async resolve =&gt; &#123; await Table.create(&#123; id: new Date().getTime(), title: k.title, paragraphs: k.paragraphs.toString(), isDelete: 0 &#125;, &#123; logging: false &#125;) // 不打印日志 resolve() &#125;)&#125; ¶参考资料 1、chinese-poetry 2、Sequelize 中文API文档","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"mysql","slug":"node/mysql","permalink":"https://liuxianyu.cn/categories/node/mysql/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"node 爬虫尝试使用动态代理 IP","slug":"2020-08-28-node-data-crawler-proxy-ip","date":"2020-08-28T14:58:30.000Z","updated":"2020-08-28T14:58:30.000Z","comments":true,"path":"article/node-data-crawler-proxy-ip.html","link":"","permalink":"https://liuxianyu.cn/article/node-data-crawler-proxy-ip.html","excerpt":"这两天在学习 node 爬虫，考虑到 IP 被封的可能性以及被豆瓣间歇性限制 IP，先记录一下如何使用代理 IP。","text":"这两天在学习 node 爬虫，考虑到 IP 被封的可能性以及被豆瓣间歇性限制 IP，先记录一下如何使用代理 IP。 Github：data-crawler-proxy-ip 其实代理就是在request中把 options 写完整： 123456789let options = &#123; method: 'GET', url: 'https://movie.douban.com/chart', gzip: true, encoding: null, proxy: `http://$&#123; proxyIp &#125;`, // proxyIp 是动态获取到的代理 IP 及端口号 headers: &#123; 'User-Agent': userAgent &#125;, // 随机的请求头 timeout: 5000&#125; ¶一、代码 ¶1、index.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374const request = require('request')const userAgents = require('./commons/userAgents')main()async function main () &#123; let proxyIPs = await getProxyIPs() // for (let proxyIP of proxyIPs) &#123; // let IPCanUse = await testProxyIP(proxyIP) // console.log(proxyIp, IPCanUse) // &#125; let proxyIP = proxyIPs[Math.floor(Math.random() * proxyIPs.length)] let IPCanUse = await testProxyIP(proxyIP) console.log(proxyIp, IPCanUse)&#125;// 获取一批代理 IPasync function getProxyIPs () &#123; let url = 'http://www.66ip.cn/mo.php?sxb=&amp;tqsl=100&amp;port=&amp;export=&amp;ktip=&amp;sxa=&amp;submit=%CC%E1++%C8%A1&amp;textarea=http%3A%2F%2Fwww.66ip.cn%2F%3Fsxb%3D%26tqsl%3D100%26ports%255B%255D2%3D%26ktip%3D%26sxa%3D%26radio%3Dradio%26submit%3D%25CC%25E1%2B%2B%25C8%25A1' let options = &#123; method: 'GET', url, gzip: true, encoding: null, headers: &#123; 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate', 'Accept-Language': 'zh-CN,zh;q=0.8,en;q=0.6,zh-TW;q=0.4', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36', 'referer': 'http://www.66ip.cn/' &#125; &#125; return new Promise((resolve, reject) =&gt; &#123; request(options, (error, response, body) =&gt; &#123; if (!error &amp;&amp; response.statusCode === 200) &#123; resolve(body.toString().match(/\\d&#123;1,3&#125;\\.\\d&#123;1,3&#125;\\.\\d&#123;1,3&#125;\\.\\d&#123;1,3&#125;:\\d&#123;1,4&#125;/g)) &#125; else &#123; console.log('getProxyIPs error', error) reject(error) &#125; &#125;) &#125;).catch(console.log)&#125;// 测试代理 IP 是否可用async function testProxyIP (proxyIp) &#123; let userAgent = userAgents[Math.floor(Math.random() * userAgents.length)] return new Promise((resolve, reject) =&gt; &#123; //这里修改成你要访问的目标网站 console.log(`开始测试这个IP $&#123; proxyIp &#125;`) let options = &#123; method: 'GET', url: 'https://movie.douban.com/chart', gzip: true, encoding: null, proxy: `http://$&#123; proxyIp &#125;`, headers: &#123; 'User-Agent': userAgent &#125;, timeout: 5000 &#125; request(options, (error, response, body) =&gt; &#123; console.log(11111111, body) if (!error &amp;&amp; response.statusCode === 200) &#123; console.log(body) resolve(true) &#125; else &#123; console.log('testProxyIP error', error) reject(false) &#125; &#125;) &#125;).catch(console.log)&#125; ¶2、userAgents.js 1234567891011121314151617181920212223const userAgents = [ 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.0.12) Gecko/20070731 Ubuntu/dapper-security Firefox/1.5.0.12', 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)', 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6', 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.71 Safari/537.1 LBBROWSER', 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0) ,Lynx/2.8.5rel.1 libwww-FM/2.14 SSL-MM/1.4.1 GNUTLS/1.2.9', 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)', 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; QQBrowser/7.0.3698.400)', 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)', 'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:2.0b13pre) Gecko/20110307 Firefox/4.0b13pre', 'Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.0.12) Gecko/20070731 Ubuntu/dapper-security Firefox/1.5.0.12', 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; LBBROWSER)', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6', 'Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6', 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; QQBrowser/7.0.3698.400)', 'Opera/9.25 (Windows NT 5.1; U; en), Lynx/2.8.5rel.1 libwww-FM/2.14 SSL-MM/1.4.1 GNUTLS/1.2.9', 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36']module.exports = userAgents ¶参考资料 1、node.js 爬虫动态代理 ip 2、nodejs 代理 IP 发送 HTTP 请求","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"爬虫","slug":"node/爬虫","permalink":"https://liuxianyu.cn/categories/node/爬虫/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"使用 node 进行简单爬虫学习","slug":"2020-08-28-node-data-crawler","date":"2020-08-28T09:44:17.000Z","updated":"2020-08-28T09:44:17.000Z","comments":true,"path":"article/node-data-crawler.html","link":"","permalink":"https://liuxianyu.cn/article/node-data-crawler.html","excerpt":"最近在公众号看到篇 node 爬虫的文章，比较简单，本着学习的态度看完觉得可以加大点难度试一试。","text":"最近在公众号看到篇 node 爬虫的文章，比较简单，本着学习的态度看完觉得可以加大点难度试一试。 Github：data-crawler ¶一、Top250 - 爬取页面 豆瓣电影 Top250 是基于网页爬取，每页25条数据，访问 URL 有一定规律。思路是获取 DOM 节点的内容，写入到 json 文件，下载电影的封面图片。cheerio用来解析 html 非常方便，写法可参考 抓取当前页面。 ¶1、入口文件 1234567891011121314151617181920const getFilmsInfo = require('./tools/getFilmsInfo')const downloadImages = require('./tools/downloadImages')getAllFilms()/** * https://movie.douban.com/top250 页面分页的规则 * get 请求，参数为 start，含义是每页25条数据，从第几条开始 * 如 https://movie.douban.com/top250?start=25, https://movie.douban.com/top250?start=100 */// 根据 url 抓取当前页面所有电影的信息async function getAllFilms () &#123; for (let pageNum = 0; pageNum &lt; 10; pageNum++) &#123; // 爬取数据并将需要的数据写到 json 文件 let films = await getFilmsInfo(`https://movie.douban.com/top250?start=$&#123; pageNum * 25 &#125;`, pageNum) // 下载图片 await downloadImages(films.map(i =&gt; i.pic), pageNum) &#125;&#125; ¶2、抓取当前页面 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * 根据 url 抓取当前页面所有电影的信息 */const fs = require('fs')const https = require('https')const cheerio = require('cheerio')// url 爬取的网址，pageNum 已存在多少条数据module.exports = async function getFilmsInfo (url, pageNum) &#123; return new Promise((resolve, reject) =&gt; &#123; https.get(url, res =&gt; &#123; // 分段返回的 自己拼接 let html = '' // 有数据产生的时候 拼接 res.on('data', chunk =&gt; &#123; html += chunk &#125;) // 拼接完成 res.on('end', async () =&gt; &#123; const $ = cheerio.load(html) let films = [] $('li .item').each(function () &#123; const sort = pageNum * 25 + films.length + 1 const title = $('.title', this).text() const star = $('.rating_num', this).text() const slogan = $('.inq', this).text() const pic = $('.pic img', this).attr('src') films.push(&#123; sort, title, star, slogan, pic &#125;) &#125;) // 按页码写入 json 文件 let fileName = pageNum + 1 await fs.writeFile(`./result/top250/page-$&#123; fileName &#125;.json`, JSON.stringify(films, null, 2), err =&gt; &#123; if (err) &#123; reject(err) &#125; else &#123; console.log(`第$&#123; fileName &#125;页数据保存成功`) resolve(films) &#125; &#125;) &#125;) &#125;) &#125;)&#125; ¶3、下载电影封面图片 1234567891011121314151617181920212223/** * 下载图片 */const fs = require('fs')const https = require('https')module.exports = function downloadImage (pics, pageNum) &#123; for (let i in pics) &#123; https.get(pics[i], res =&gt; &#123; res.setEncoding('binary') let str = '' res.on('data', chunk =&gt; &#123; str += chunk &#125;) res.on('end', function () &#123; fs.writeFile(`./result/top250/images/page-$&#123; pageNum + 1 &#125;-$&#123; Number(i) + 1 &#125;.jpg`, str, 'binary', err =&gt; &#123; err &amp;&amp; console.log(err) &#125;) &#125;) &#125;) &#125;&#125; ¶二、电影列表 - 调用接口 豆瓣电影全量列表（9900+条信息） 是通过接口去请求的 123456789101112131415161718192021222324252627282930313233343536373839404142434445const fs = require('fs')const request = require('request')let sleepTime = 5000 // 过指定时间后返回结果，可以实现相邻请求有间隔时间let errorCount = 0 // 失败计数let errorMaxCount = 2 // 失败后尝试指定次数，依旧失败则停止asyncGetAllFilms()async function asyncGetAllFilms () &#123; for (let i = 127; i &lt; 500; i++) &#123; let res = await getAllFilms(`https://movie.douban.com/j/new_search_subjects?start=$&#123; i * 20 &#125;`) // 保存数据到 json 文件 await fs.writeFile(`./result/douban/page-$&#123; i + 1 &#125;.json`, JSON.stringify(res.data, null, 2), err =&gt; &#123; if (err) &#123; console.log('writeFile', err) &#125; else &#123; console.log(`第$&#123; i + 1 &#125;页数据保存成功`) &#125; &#125;) &#125;&#125;// 获取所有电影async function getAllFilms (url) &#123; return new Promise((resolve, reject) =&gt; &#123; request(url, (error, res, body) =&gt; &#123; if (!error &amp;&amp; res.statusCode === 200) &#123; setTimeout(() =&gt; &#123; resolve(JSON.parse(body)) &#125;, sleepTime) &#125; else &#123; console.log('error', error) if (errorCount &lt; errorMaxCount) &#123; setTimeout(() =&gt; &#123; errorCount++ getAllFilms(url) &#125;, sleepTime) &#125; else &#123; reject(error) &#125; &#125; &#125;) &#125;).catch(console.log)&#125; ¶参考资料 你不知道的 node 爬虫原来这么简单","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"爬虫","slug":"node/爬虫","permalink":"https://liuxianyu.cn/categories/node/爬虫/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"目录结构小工具 treer","slug":"2020-08-25-project-treer","date":"2020-08-25T15:57:57.000Z","updated":"2020-08-25T15:57:57.000Z","comments":true,"path":"article/project-treer.html","link":"","permalink":"https://liuxianyu.cn/article/project-treer.html","excerpt":"最近写了几个 npm 包，发现了一个比较好用的目录结构小工具 treer。","text":"最近写了几个 npm 包，发现了一个比较好用的目录结构小工具 treer。 ¶1、安装 建议在全局安装，无需写到 package.json。 1npm i treer -g ¶2、使用 项目路径内，输入： 1treer -e ./result.txt -i '/node_modules|.git|.idea|.DS_Store/' ¶3、处理 会在项目路径下生成一个result.txt文件，稍微处理一下即可得到美观的目录结构 123456789101112syvue-cli├─.gitignore├─README.md├─package-lock.json├─package.json├─bin| ├─index.js| ├─tools| | ├─index.js| | └templateConfig.js| ├─actions| | └create.js","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://liuxianyu.cn/tags/npm/"}],"author":"liuxy0551"},{"title":"写一个快速创建 vue 项目的脚手架","slug":"2020-08-25-syvue-cli","date":"2020-08-25T15:52:57.000Z","updated":"2020-08-25T15:52:57.000Z","comments":true,"path":"article/syvue-cli.html","link":"","permalink":"https://liuxianyu.cn/article/syvue-cli.html","excerpt":"最近新建项目挺多，刚好有现成的模板，就写了个适用于公司内部的脚手架工具，基于 vue cli 3.x + 快速生成 vue 项目基础结构。","text":"最近新建项目挺多，刚好有现成的模板，就写了个适用于公司内部的脚手架工具，基于 vue cli 3.x + 快速生成 vue 项目基础结构。 具体如何使用，可移步 syvue-cli 查看。这里不过多介绍使用方法，主要记录一下遇到的一些点。 ¶一、node 模块 ¶1、commander 用来接收终端输入的命令 123456789const &#123; program &#125; = require(&apos;commander&apos;)const packageJson = require(&apos;../package.json&apos;)program.version(packageJson.version, &apos;-V, -v, --version&apos;)// createprogram.command(&apos;create&apos;).arguments(&apos;&lt;project-name&gt;&apos;).description(&apos;create project&apos;).action(require(&apos;./actions/create&apos;))// 解析参数这一行要放到定义的命令最后面program.parse(process.argv) ¶2、chalk 用来输出不同颜色的信息内容到终端，起到不同的提示作用，不同软件可能输出的颜色有色差，主要集中在 blue 和 cyan。 1console.log(chalk.cyan(&apos;hello deployvue&apos;)) ¶3、inquirer 在命令行和用户互动 12345678let answer = await inquirer.prompt([ &#123; type: &apos;list&apos;, name: &apos;template&apos;, message: `$&#123; chalk.bold(&apos;Please pick template type: &apos;) &#125;`, choices: [`admin ($&#123; chalk.yellow(&apos;management template&apos;) &#125;)`, `mobile ($&#123; chalk.yellow(&apos;mobile template&apos;) &#125;)`] &#125;]) ¶4、ora 命令行加载中的动画效果 ora 1234let cnpmSpinner = ora(`Installing npm plugins. This might take a while` + &apos;...&apos;)cnpmSpinner.start()shell.exec(`cd $&#123; process.cwd() &#125;/$&#123; projectName &#125;; cnpm i`, &#123; silent: true &#125;)cnpmSpinner.stop() ¶5、shelljs 用来在本地执行命令、结束程序，将 silent 设为 true 可隐藏在终端的内容输出 123456789for (let command of buildCommands) &#123; console.log(`+ $&#123; command &#125;`) if (shell.exec(`$&#123; command &#125;`).code !== 0) &#123; shell.echo(`Run: $&#123; command &#125; Error`) shell.exit(1) return &#125; console.log(chalk.cyan(`DONE $&#123; command &#125; complete`))&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"脚手架","slug":"前端/Vue/脚手架","permalink":"https://liuxianyu.cn/categories/前端/Vue/脚手架/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"npm","slug":"npm","permalink":"https://liuxianyu.cn/tags/npm/"},{"name":"脚手架","slug":"脚手架","permalink":"https://liuxianyu.cn/tags/脚手架/"}],"author":"liuxy0551"},{"title":"vue-cli3 打包时去除 console.log","slug":"2020-08-21-vue-cli3-build-console","date":"2020-08-21T11:39:22.000Z","updated":"2020-08-21T11:39:22.000Z","comments":true,"path":"article/vue-cli3-build-console.html","link":"","permalink":"https://liuxianyu.cn/article/vue-cli3-build-console.html","excerpt":"通过 terser-webpack-plugin 可以在打包时去除 console.log，记录一下实现。","text":"通过 terser-webpack-plugin 可以在打包时去除 console.log，记录一下实现。 ¶1、安装 1npm i terser-webpack-plugin -D ¶2、配置 在vue.config.js中添加如下配置： 12345module.export = &#123; configureWebpack: config =&gt; &#123; config.optimization.minimizer[0].options.terserOptions.compress.drop_console = process.env.NODE_ENV === 'production' &#125;&#125; configureWebpack 加上 config 的写法会影响到 vue.config.js 中 externals 的使用，更改写法即可： 123456789configureWebpack: config =&gt; &#123; config.externals = &#123; vue: 'Vue', 'vue-router': 'VueRouter', vuex: 'Vuex', axios: 'axios', vant: 'vant' &#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"使用 vuex-persistedstate 持久化 vuex","slug":"2020-08-18-vuex-persistedstate","date":"2020-08-18T13:25:29.000Z","updated":"2020-08-18T13:25:29.000Z","comments":true,"path":"article/vuex-persistedstate.html","link":"","permalink":"https://liuxianyu.cn/article/vuex-persistedstate.html","excerpt":"vuex 的持久化可避免刷新页面就更新状态，记录一下简单使用。","text":"vuex 的持久化可避免刷新页面就更新状态，记录一下简单使用。 ¶一、所有模块持久化 12345678910111213141516import Vue from 'vue'import Vuex from 'vuex'import createPersistedState from 'vuex-persistedstate'Vue.use(Vuex)let moduleFiles = require.context('./modules', true, /\\.js$/)let modules = &#123;&#125;moduleFiles.keys().forEach(modulePath =&gt; &#123; const moduleName = modulePath.replace(/^\\.\\/(.*)\\.\\w+$/, '$1') modules[moduleName] = moduleFiles(modulePath).default&#125;)export default new Vuex.Store(&#123; plugins: [createPersistedState()], modules&#125;) ¶二、部分模块持久化 仅针对某个模块持久化时，代码如下： 1234567891011121314151617181920212223242526import Vue from 'vue'import Vuex from 'vuex'import createPersistedState from 'vuex-persistedstate'import user from './modules/user'import app from './modules/app'Vue.use(Vuex)export default new Vuex.Store(&#123; // state 持久化，防止f5刷新，导致数据消失 plugins: [createPersistedState(&#123; storage: window.localStorage, reducer (val) &#123; return &#123; // 只保存module user内部所有变量持久化 user: val.user &#125; &#125; &#125;)], state: &#123;&#125;, mutations: &#123;&#125;, actions: &#123;&#125;, modules: &#123; app, user &#125;&#125;) ¶三、/modules/user.js 12345678910111213141516171819202122232425export default &#123; namespaced: true, state: &#123; accessToken: '', userInfo: null, bayonet: null, corpId: '', &#125;, getters: &#123;&#125;, mutations: &#123; setUserInfo: (state, userInfo) =&gt; &#123; state.userInfo = userInfo &#125;, setAccessToken: (state, accessToken) =&gt; &#123; state.accessToken = accessToken &#125;, setCorpId: (state, corpId) =&gt; &#123; state.corpId = corpId &#125;, setBayonet: (state, bayonet) =&gt; &#123; state.bayonet = bayonet &#125; &#125;, actions: &#123;&#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Vuex","slug":"前端/Vue/Vuex","permalink":"https://liuxianyu.cn/categories/前端/Vue/Vuex/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"使用 webpack 的 require.context 函数实现前端自动化引入","slug":"2020-08-18-require-context","date":"2020-08-18T11:11:32.000Z","updated":"2020-08-18T11:11:32.000Z","comments":true,"path":"article/require-context.html","link":"","permalink":"https://liuxianyu.cn/article/require-context.html","excerpt":"require.context是 webpack 中用于生成上下文模块的一个方法，传入要搜索的目录，将目录下所有模块通过正则表达式匹配后 require 进来，新增模块时无需再依次引入。可参考 官方文档","text":"require.context是 webpack 中用于生成上下文模块的一个方法，传入要搜索的目录，将目录下所有模块通过正则表达式匹配后 require 进来，新增模块时无需再依次引入。可参考 官方文档 ¶一、require.context 官方示例接收四个参数： 1require.context(directory, useSubdirectories = true, regExp = /^\\.\\/.*$/, mode = 'sync'); 参数名 含义 directory 要查询的目录 useSubdirectories 是否要查询子孙目录，默认值为 false regExp 要匹配的文件的后缀，是一个正则表达式 mode 模块加载模式，常用值为 sync、lazy、lazy-once、eager ¶二、使用 require.context 1234567891011121314import Vue from 'vue'import Vuex from 'vuex'Vue.use(Vuex)let moduleFiles = require.context('./modules', true, /\\.js$/)let modules = &#123;&#125;moduleFiles.keys().forEach(modulePath =&gt; &#123; const moduleName = modulePath.replace(/^\\.\\/(.*)\\.\\w+$/, '$1') modules[moduleName] = moduleFiles(modulePath).default&#125;)export default new Vuex.Store(&#123; modules&#125;) ¶三、未使用 require.context 1234567891011121314151617import Vue from 'vue'import Vuex from 'vuex'import permission from './modules/permission'import settings from './modules/settings'import tagsView from './modules/tagsView'import user from './modules/user'Vue.use(Vuex)export default new Vuex.Store(&#123; modules: &#123; permission, settings, tagsView, user &#125;&#125;)","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"webpack","slug":"前端/webpack","permalink":"https://liuxianyu.cn/categories/前端/webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"https://liuxianyu.cn/tags/webpack/"}],"author":"liuxy0551"},{"title":"基于钉钉 JSAPI 封装 DingTalk 类","slug":"2020-08-18-dingtalk-jsapi","date":"2020-08-18T10:35:32.000Z","updated":"2020-08-18T10:35:32.000Z","comments":true,"path":"article/dingtalk-jsapi.html","link":"","permalink":"https://liuxianyu.cn/article/dingtalk-jsapi.html","excerpt":"钉钉 JSAPI 为 H5 微应用开发提供了调用钉钉控件的能力，这里记录一下自己封装的 DingTalk 类，方便开发。可参考 钉钉开发文档","text":"钉钉 JSAPI 为 H5 微应用开发提供了调用钉钉控件的能力，这里记录一下自己封装的 DingTalk 类，方便开发。可参考 钉钉开发文档 ¶一、钉钉 JSAPI 封装的 DingTalk 类也是基于钉钉 JSAPI，所以项目中需要安装钉钉的 JSAPI： ¶1、npm 1npm i dingtalk-jsapi -S ¶2、CDN 引入 详见 前端项目优化之旅（六）—— 引入并使用 CDN ¶二、DingTalk 类 ¶1、封装 新建/src/utils/DingTalk/index.js，内容如下： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102import * as dd from 'dingtalk-jsapi'import Vue from 'vue'import store from '@/store'class DingTalk &#123; // dd.ready static ready () &#123; return new Promise(resolve =&gt; &#123; dd.ready(() =&gt; &#123; resolve() &#125;) &#125;) &#125; // 钉钉 JSAPI 鉴权 static async getJsApiTicket () &#123; let params = &#123; corpId: store.state.user.corpId, url: location.origin + '/' &#125; const jsApiList = [ // 必填，需要使用的jsapi列表，注意：不要带dd。 'biz.contact.complexPicker' ] return new Promise((resolve, reject) =&gt; &#123; Vue.prototype.axios.post(`$&#123; process.env.VUE_APP_BASE_API || '' &#125;/api/getJsApiTicket`, params).then(res =&gt; &#123; if (res.data.code === 200) &#123; let config = &#123; agentId: res.data.data.agentId, corpId: res.data.data.corpId, timeStamp: res.data.data.timeStamp, nonceStr: res.data.data.nonceStr, signature: res.data.data.signature, jsApiList: jsApiList &#125; dd.config(config) &#125; resolve(res) &#125;).catch(err =&gt; &#123; reject(err) &#125;) &#125;) &#125; // 获取 authCode static async requestAuthCode (corpId) &#123; return new Promise(async (resolve, reject) =&gt; &#123; await DingTalk.ready() dd.runtime.permission.requestAuthCode(&#123; corpId, onSuccess: res =&gt; &#123; resolve(res) &#125;, onFail: err =&gt; &#123; console.log('error: ' + JSON.stringify(err)) reject(err) &#125; &#125;) &#125;) &#125; // 通讯录选人 - 选人和选部门 static async complexPicker (options = &#123;&#125;) &#123; return new Promise(async (resolve, reject) =&gt; &#123; await DingTalk.ready() dd.biz.contact.complexPicker(&#123; title: options.title || '请选择', // 标题 corpId: options.corpId || store.state.user.corpId, // 企业 id，corpId 必须是用户所属的企业的 corpId multiple: options.multiple || false, // 是否多选 maxUsers: options.maxUsers || 1, // 人数限制，当 multiple 为 true 才生效，可选范围 1-1500 limitTips: options.limitTips || '仅需选择一个审批人', // 超出选人的人数限制之后的提示 pickedUsers: options.pickedUsers || [], // 已选用户 pickedDepartments: options.pickedDepartments || [], // 已选部门 disabledUsers: options.disabledUsers || [], // 不可选用户 disabledDepartments: options.disabledDepartments || [], // 不可选部门 requiredUsers: options.requiredUsers || [], // 必选用户（不可取消选中状态） requiredDepartments: options.requiredDepartments || [], // 必选部门（不可取消选中状态） appId: options.appId, // 微应用的Id permissionType: options.permissionType || 'GLOBAL', // 选人权限，目前只有GLOBAL这个参数，非必填 responseUserOnly: options.responseUserOnly || true, // true: 返回人员信息 false: 返回人员和部门信息 startWithDepartmentId: options.startWithDepartmentId || 0, // 0: 表示从企业最上层开始 -1: 表示从自己所在部门开始 onSuccess: res =&gt; &#123; resolve(res) &#125;, onFail: err =&gt; &#123; console.log('error: ' + JSON.stringify(err)) reject(err) &#125; &#125;) &#125;) &#125; static install (Vue) &#123; Vue.prototype.isDingTalk = dd?.env?.platform !== 'notInDingTalk' Vue.prototype.DingTalk = DingTalk &#125; constructor () &#123; &#125;&#125;export default DingTalk ¶2、引入 在/src/utils/index.js中添加如下引入： 1234567import DingTalk from './DingTalk'export default &#123; install (Vue) &#123; Vue.use(DingTalk) &#125;&#125; ¶3、使用 123456789101112methods: &#123; // 获取 authCode async getAuthCode () &#123; let res = await this.DingTalk.requestAuthCode(this.corpId) &#125;&#125;或mounted () &#123; this.DingTalk.getJsApiTicket() // 钉钉鉴权&#125; ¶4、判断是否是钉钉环境 123import * as dd from &apos;dingtalk-jsapi&apos;...console.log(dd.env.platform === &apos;notInDingTalk&apos;)","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"钉钉","slug":"前端/钉钉","permalink":"https://liuxianyu.cn/categories/前端/钉钉/"}],"tags":[{"name":"钉钉","slug":"钉钉","permalink":"https://liuxianyu.cn/tags/钉钉/"}],"author":"liuxy0551"},{"title":"写一个 Vue 项目的自动化部署插件 —— deployvue","slug":"2020-08-13-deployvue","date":"2020-08-13T16:20:39.000Z","updated":"2020-08-18T15:54:14.000Z","comments":true,"path":"article/deploy-vue.html","link":"","permalink":"https://liuxianyu.cn/article/deploy-vue.html","excerpt":"最近抽空写了个 Vue 项目的部署插件deployvue，设置部署参数后可以实现npm run deploy一条命令完成部署更新。","text":"最近抽空写了个 Vue 项目的部署插件deployvue，设置部署参数后可以实现npm run deploy一条命令完成部署更新。 具体如何使用，可移步 README.md 查看。这里不过多介绍使用方法，主要记录一下遇到的一些点。 ¶一、部署流程 公司的部署发布流程是： 1、git 提交代码到远程仓库 2、用 Jenkins 点击对应工程的 Build 按钮，执行脚本 3、运维服务器端执行 git pull 拉取对应分支的代码 4、npm install 5、npm run build 6、在运维服务器通过 scp 命令将打包后的文件夹传输到（多台，做了负载均衡）部署服务器。 deployvue的部署流程是： 1、执行 build 命令 2、自动压缩打包后的文件夹 3、连接服务器，创建部署目录及备份目录（用于回退版本） 4、scp 将打包后的压缩包上传到服务器指定路径 5、利用已有的服务器连接，在服务器端解压压缩包 6、删除本地的打包文件及压缩包，部署完成。 相较于公司当前的部署方式，有个优点就是不需要在服务器存放代码，主要是不需要在服务器存储node_modules，毕竟node_modules文件夹动辄200M+，公用本地的node_modules可以减少服务器磁盘占用。 ¶二、node 模块 ¶1、commander 用来接收终端输入的命令 123456789const &#123; program &#125; = require(&apos;commander&apos;)const packageJson = require(&apos;../package.json&apos;)program.version(packageJson.version, &apos;-V, --version&apos;)program.command(&apos;build&apos;).description(&apos;build code&apos;).option(&apos;-e, --env &lt;env&gt;&apos;, &apos;environment&apos;, &apos;&apos;).action(require(&apos;./actions/build&apos;))...// 解析参数这一行要放到定义的命令最后面program.parse(process.argv) ¶2、archiver 用来压缩打包后的文件夹 1archive.directory(`$&#123; process.cwd() &#125;/$&#123; deployConfig.archiveRootDir &#125;`, false) ¶3、chalk 用来输出不同颜色的信息内容到终端，起到不同的提示作用，不同软件可能输出的颜色有色差，主要集中在 blue 和 cyan。 1console.log(chalk.cyan(&apos;hello deployvue&apos;)) ¶4、node-ssh 用来连接服务器，需要在指定目录下操作的，需要把命令连起来，因为 execCommand 执行时都是从 ~ 路径下开始执行的 1234// 把压缩包 move 到备份文件夹await ssh.execCommand(`cd $&#123; deployConfig.deployTo &#125;; $&#123; unArchiveCommand &#125;; mv $&#123; deployConfig.archiveRootDir &#125;-$&#123; date &#125;.tar $&#123; deployConfig.archiveRootDir &#125;-history`)// 仅保留特定数量的压缩包文件 - 保留文件夹下最新的特定数量文件await ssh.execCommand(`cd $&#123; deployConfig.deployTo &#125;/$&#123; deployConfig.archiveRootDir &#125;-history; ls -t | awk &apos;NR &gt; $&#123; deployConfig.keepReleases + 1 &#125; &#123;print &quot;rm -rf &quot;$0&#125;&apos; | sh`) ¶5、shelljs 用来在本地执行命令、结束程序 123456789for (let command of buildCommands) &#123; console.log(`+ $&#123; command &#125;`) if (shell.exec(`$&#123; command &#125;`).code !== 0) &#123; shell.echo(`Run: $&#123; command &#125; Error`) shell.exit(1) return &#125; console.log(chalk.cyan(`DONE $&#123; command &#125; complete`))&#125; ¶三、npm link 在本地开发 npm 命令行工具时，可以使用npm link将开发模块指向到对应的运行项目中，方便调试。 ¶1、绑定指向 在deployvue项目目录下执行： 1npm link （Mac OS）会在/usr/local/lib/node_modules下新增deployvue整体项目的快捷方式 （Mac OS）会在/usr/local/bin下新增deployvue/bin/index.js的快捷方式 ¶2、解除绑定指向 在deployvue项目目录下执行： 1npm unlink ¶四、npm 删除发布 在deployvue项目目录下执行： 1npm unpublish deployvue --force 在删除 npm 包的24小时内不可再次发布该 npm 包。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"自动化部署","slug":"前端/Vue/自动化部署","permalink":"https://liuxianyu.cn/categories/前端/Vue/自动化部署/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"npm","slug":"npm","permalink":"https://liuxianyu.cn/tags/npm/"},{"name":"自动化部署","slug":"自动化部署","permalink":"https://liuxianyu.cn/tags/自动化部署/"}],"author":"liuxy0551"},{"title":"通过 CDN 引入 element-ui 时，如何改变其全局配置 (size, z-index)","slug":"2020-08-06-element-cdn-global-settings","date":"2020-08-06T13:17:54.000Z","updated":"2020-08-06T13:17:54.000Z","comments":true,"path":"article/element-cdn-global-settings.html","link":"","permalink":"https://liuxianyu.cn/article/element-cdn-global-settings.html","excerpt":"最近在写一个后台管理的项目，自己觉得按钮默认的尺寸比较大，遂加上了size=&quot;small&quot;，但是发现每个页面的按钮都需要加上才够统一、协调，想起了 Element 官方有推荐全局配置，改之。","text":"最近在写一个后台管理的项目，自己觉得按钮默认的尺寸比较大，遂加上了size=&quot;small&quot;，但是发现每个页面的按钮都需要加上才够统一、协调，想起了 Element 官方有推荐全局配置，改之。 以上是通过 npm 引入 Element 的写法，为提升加载速度，项目中大部分基本库都是通过 CDN 引入的，Element 亦然。那么通过 CDN 引入 element-ui 时，如何改变其全局配置 (size, z-index)呢，记录如下： ¶一、官方推荐（npm 安装法） size 的值有：medium、small、mini，默认值为空字符串，比 medium 大。 ¶二、编译源码，CDN 引入 拉取 element-ui 源码(master 分支)，在package.json中查找如何编译出 js，注意dist命令。 在/build/bin/build-entry.js中将： 1234Vue.prototype.$ELEMENT = &#123; size: opts.size || &apos;&apos;, zIndex: opts.zIndex || 2000&#125;; 改为 1234Vue.prototype.$ELEMENT = &#123; size: opts.size || &apos;small&apos;, zIndex: opts.zIndex || 3000&#125;; 接着执行npm run dist，上传/lib/index.js到 OSS 并引用，再次刷新，页面上的按钮就变小啦！ 注意 npm run dist也会打包样式文件 至于如何在众多命令中使用正确合适的命令，可以通过全局搜索Vue.prototype.$ELEMENT，一层一层地去发现查找到的各个文件之间的关联，不难发现/src/index.js中的代码是依据build-entry.js来生成的。 ¶三、类似随笔 通过 CDN 引入 element-ui 时，如何改变其主题色","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"CDN","slug":"前端/Vue/CDN","permalink":"https://liuxianyu.cn/categories/前端/Vue/CDN/"}],"tags":[{"name":"Element UI","slug":"Element-UI","permalink":"https://liuxianyu.cn/tags/Element-UI/"},{"name":"CDN","slug":"CDN","permalink":"https://liuxianyu.cn/tags/CDN/"}],"author":"liuxy0551"},{"title":"Vue 项目中使用友盟埋点","slug":"2020-07-29-vue-umeng","date":"2020-07-29T14:11:54.000Z","updated":"2020-07-29T14:11:54.000Z","comments":true,"path":"article/vue-umeng.html","link":"","permalink":"https://liuxianyu.cn/article/vue-umeng.html","excerpt":"产品给用户使用后，想要感知项目的 PV（浏览次数）、UV（独立访客），可以使用第三方埋点，这里记录的是 Vue 项目（hash 路由）基于友盟的埋点方法，包含事件统计。","text":"产品给用户使用后，想要感知项目的 PV（浏览次数）、UV（独立访客），可以使用第三方埋点，这里记录的是 Vue 项目（hash 路由）基于友盟的埋点方法，包含事件统计。 ¶一、PV、UV 新建一个/src/mixins/mixUmeng.js文件，内容如下： 12345678910111213141516/* eslint-disable *//******************* 友盟埋点 *******************/const SITE_ID = 1234567890 // 替换成自己的站点ID export default &#123; mounted () &#123; this.$nextTick(() =&gt; &#123; const script = document.createElement('script') script.src = `https://v1.cnzz.com/z_stat.php?id=$&#123; SITE_ID &#125;&amp;web_id=$&#123; SITE_ID &#125;` script.language = 'JavaScript' script.id = 'cnzz' document.body.appendChild(script) &#125;) &#125;&#125; 接下来在App.vue中引入该 mixins 即可： 1234567&lt;script&gt; import mixUmeng from &apos;@/mixins/mixUmeng&apos; export default &#123; mixins: [mixUmeng] &#125;&lt;/script&gt; ¶二、事件统计 事件埋点可用来统计页面上的一些交互动作，如播放、暂停、跳往第三方页面前的次数统计等。友盟事件统计官方文档链接：https://open.cnzz.com/a/api/trackevent。 使用 vue 的自定义指令 来注册一下埋点指令v-log，如下： 新建一个 /src/utils/directive/eventLog.js 文件，内容如下： 123456789101112131415/***************** 埋点自定义指令 *******************/// readme: https://open.cnzz.com/a/api/trackevent/export default &#123; install (Vue) &#123; Vue.directive('log', &#123; bind (el, binding) &#123; el.addEventListener('click', () =&gt; &#123; window._czc.push(['_trackEvent', ...binding.value]) &#125;, false) &#125;, unbind (el) &#123; el.removeEventListener('click', () =&gt; &#123; console.log('remove') &#125;) &#125; &#125;) &#125;&#125; 在main.js中引用该文件： 123// main.jsimport eventLog from '@utils/directive/eventLog.js'Vue.use(eventLog) 接下来在 dom 元素加上自定义指令： 12&lt;van-button plain type=\"info\" :disabled=\"cameraStatus !== 'ready'\" @click=\"startCamera\" v-log=\"['H5 页面调用摄像头与拾音器', '开始']\"&gt;开 始&lt;/van-button&gt; 注意 v-log 后的数组最少需要两个元素，否则统计不到该事件，友盟默认3个","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"埋点","slug":"前端/Vue/埋点","permalink":"https://liuxianyu.cn/categories/前端/Vue/埋点/"}],"tags":[{"name":"埋点","slug":"埋点","permalink":"https://liuxianyu.cn/tags/埋点/"}],"author":"liuxy0551"},{"title":"使用 PhotoShop 把图片裁剪成圆形","slug":"2020-07-28-ps-img-round","date":"2020-07-28T11:49:29.000Z","updated":"2020-07-28T11:49:29.000Z","comments":true,"path":"article/ps-img-round.html","link":"","permalink":"https://liuxianyu.cn/article/ps-img-round.html","excerpt":"最近经常使用 logo，但是给到的不是圆形，本着学习和做笔记的态度，记录一下使用 PS 把图片裁剪成圆形。","text":"最近经常使用 logo，但是给到的不是圆形，本着学习和做笔记的态度，记录一下使用 PS 把图片裁剪成圆形。 ¶一、前后效果对比 ¶二、操作步骤 1、PS 打开需要处理的图片，在左侧工具栏，选择椭圆选框工具 2、按住 shift 可以画圆，框出需要的部位，如果贴边的话 PS 会有提示线 3、按 ⌘ + J 拷贝图层（图层 -&gt; 新建 -&gt; 通过拷贝的图层），并删除之前的图层 4、保存即可","categories":[{"name":"PhotoShop","slug":"PhotoShop","permalink":"https://liuxianyu.cn/categories/PhotoShop/"}],"tags":[{"name":"PhotoShop","slug":"PhotoShop","permalink":"https://liuxianyu.cn/tags/PhotoShop/"}],"author":"liuxy0551"},{"title":"nginx 部署 vue 项目","slug":"2020-07-14-nginx-vue","date":"2020-07-14T18:43:10.000Z","updated":"2020-07-14T18:43:10.000Z","comments":true,"path":"article/nginx-vue.html","link":"","permalink":"https://liuxianyu.cn/article/nginx-vue.html","excerpt":"记录一下自己在阿里云服务器上部署 vue 项目的一些点。","text":"记录一下自己在阿里云服务器上部署 vue 项目的一些点。 这里以 my-vue 为例进行打包部署，准备内容：服务器（阿里云 Cent OS）、域名（阿里云）。 ¶1、打包上传 将打包后的 dist 文件夹上传到服务器的/mnt/projects/my-vue路径下。 ¶2、安装 nginx 参考 Cent OS 基础环境搭建 - 安装 nginx ¶3、解析域名 ¶4、配置 nginx 12cd /etc/nginx/conf.dvim my-vue.conf 输入以下内容并保存： 12345678910111213server &#123; listen 80; server_name my-vue.liuxianyu.cn; root /mnt/projects/my-vue; location / &#123; try_files $uri $uri/ /index.html; &#125; location /api &#123; client_max_body_size 15m; proxy_pass http://localhost:8081/api; &#125;&#125; location /api是通过 nginx 转发网络请求，无请求的项目可不添加。 ¶5、检查、重启 nginx 12// 检测配置文件是否有语法错误，然后退出nginx -t 12// 重新加载配置nginx -s reload","categories":[{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/categories/nginx/"},{"name":"Vue","slug":"nginx/Vue","permalink":"https://liuxianyu.cn/categories/nginx/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/tags/nginx/"}],"author":"liuxy0551"},{"title":"Vue 项目打包时自动把所有图片的本地路径改为 CDN 路径","slug":"2020-07-11-vue-build-img-cdn","date":"2020-07-11T17:09:56.000Z","updated":"2020-07-11T17:09:56.000Z","comments":true,"path":"article/vue-build-img-cdn.html","link":"","permalink":"https://liuxianyu.cn/article/vue-build-img-cdn.html","excerpt":"vue-cli 3 + 在项目优化的时候，可以考虑把图片资源放到 CDN 上，减少对服务器带宽的压力。","text":"vue-cli 3 + 在项目优化的时候，可以考虑把图片资源放到 CDN 上，减少对服务器带宽的压力。 开发时，写的图片路径通常是相对路径，在 webpack 的配置中可以进行配置，配置后在打包时就可以自动将我们写的相对路径转换成 CDN 路径： @/assets/images/logo.png或../../assets/images/logo.png -&gt; https://images-hosting.liuxianyu.cn/images。 ¶1、vue.config.js 1、process.env.NODE_ENV 判断项目环境 2、相关选项写在了 url-loader 里, url-loader 的作用是将图片引用方式转换为 base64 的内联引用方式 3、配置 limit (默认 10000)，可使文件大小小于此 limit 值(单位为 byte)的文件转换为 base64 格式, 大于此 limit 的, 会执行 options 中的 fallback 配置项 4、fallback 默认值为 file-loader, 而且 url-loader 的 options 配置项也会被传递给 file-loader 123456789101112131415161718// vue.config.jsmodule.exports = &#123; chainWebpack: config =&gt; &#123; config .module .rule(\"images\") .test(/\\.(jpe?g|png|gif)$/i) .use(\"url-loader\") .loader(\"url-loader\") .options(&#123; limit: 10000, publicPath: process.env.NODE_ENV === 'production' ? 'https://images-hosting.liuxianyu.cn/images' : '', outputPath: 'img', name: '[name].[ext]' &#125;) .end() &#125;&#125; ¶参考资料 1、配置vue项目将打包后图片文件的引用路径改为cdn路径? 2、webpack url-loader 3、webpack file-loader","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"CDN","slug":"前端/Vue/CDN","permalink":"https://liuxianyu.cn/categories/前端/Vue/CDN/"}],"tags":[{"name":"项目优化","slug":"项目优化","permalink":"https://liuxianyu.cn/tags/项目优化/"},{"name":"CDN","slug":"CDN","permalink":"https://liuxianyu.cn/tags/CDN/"}],"author":"liuxy0551"},{"title":"微信分享第三方页面时设置标题和缩略图（非微信开发）","slug":"2020-07-07-wechat-share-others","date":"2020-07-07T16:51:17.000Z","updated":"2020-07-07T16:51:17.000Z","comments":true,"path":"article/wechat-share-others.html","link":"","permalink":"https://liuxianyu.cn/article/wechat-share-others.html","excerpt":"之前做过微信的自定义分享，是基于微信开发，这次是钉钉内开发，分享页面时标题和缩略图有点问题，记录一下。","text":"之前做过微信的自定义分享，是基于微信开发，这次是钉钉内开发，分享页面时标题和缩略图有点问题，记录一下。 ¶一、非 vue 项目 ¶1、标题 自动生成：获取当前页的 title 自定义：设置页面标题，也可以使用document.title = '微信分享第三方页面时设置标题和缩略图（非微信开发）'动态设置标题 ¶2、缩略图 自动生成：默认取当前页面，从顶部开始，高度为屏幕宽度 80%的图片作为缩略图，若页面中没有符合该规则的图片，则显示灰色的链接 icon 自定义：在 body 标签的最前面放入一张高度为屏幕宽度 80%的正方形图片，放在 body 标签的最前面。 1234&lt;body&gt; &lt;img style=\"position:fixed;width:80%;opacity:0;z-index:-1\" src=\"http://zju123.oss-cn-hangzhou.aliyuncs.com/zju_graduate/images/zju-logo.jpg\"&gt;&lt;/body&gt; ¶二、vue 项目 基于vue-cli 3.x +，在public/index.html中的 head 中设置： 12345678&lt;head&gt; &lt;meta name=\"description\" content=\"庆祝中国科学院海洋研究所建所70周年\"&gt; &lt;meta property=\"og:title\" content=\"庆祝中国科学院海洋研究所建所70周年\"&gt; &lt;meta property=\"og:image\" content=\"http://159.226.158.199/media/logo.png\"&gt; &lt;meta property=\"og:description\" content=\"庆祝中国科学院海洋研究所建所70周年\"&gt; &lt;title&gt;庆祝中国科学院海洋研究所建所70周年&lt;/title&gt;&lt;/head&gt; 注意 1、标题长度尽量不要超过15个字 2、内容简介尽量不要超过30个字，不能含敏感词违规字眼","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信","slug":"前端/微信","permalink":"https://liuxianyu.cn/categories/前端/微信/"}],"tags":[{"name":"微信","slug":"微信","permalink":"https://liuxianyu.cn/tags/微信/"}],"author":"liuxy0551"},{"title":"跳到钉钉并打开指定 URL","slug":"2020-07-07-dingtalk-open-url","date":"2020-07-07T16:40:23.000Z","updated":"2020-07-07T16:40:23.000Z","comments":true,"path":"article/dingtalk-open-url.html","link":"","permalink":"https://liuxianyu.cn/article/dingtalk-open-url.html","excerpt":"平常公司开发中一直围绕钉钉，这里记录一下如何在浏览器访问特定地址可以跳到钉钉并打开指定 URL，适用部分业务场景。","text":"平常公司开发中一直围绕钉钉，这里记录一下如何在浏览器访问特定地址可以跳到钉钉并打开指定 URL，适用部分业务场景。 ¶1、移动端 12const url = 'https://www.baidu.com/'location.href = `http://qr.dingtalk.com/page/link?url=$&#123; encodeURIComponent(url) &#125;` ¶2、PC 端 12const url = 'https://www.baidu.com/'location.href = `dingtalk://dingtalkclient/page/link?url=$&#123; encodeURIComponent(url) &#125;` ¶3、消息链接在PC 客户端侧边栏打开 在PC 客户端点击消息中的 URL 链接时，希望控制链接的打开方式，可以使用以下方式： 12const url = 'https://www.baidu.com/'`dingtalk://dingtalkclient/page/link?url=$&#123; encodeURIComponent(url) &#125;&amp;pc_slide=true` 参数 说明 url 表示要打开的链接，必须urlEncode pc_slide true 表示在PC 客户端侧边栏打开，false 表示在浏览器打开 ¶4、消息链接在PC 客户端工作台打开 当消息中的 URL 链接是某个微应用链接时，希望在PC 客户端工作台打开，可以使用以下方式: 12const url = &apos;https://www.baidu.com/&apos;`dingtalk://dingtalkclient/action/openapp?corpid=$&#123; 免登企业 corpId &#125;&amp;container_type=work_platform&amp;app_id=0_$&#123; 应用 agentid &#125;&amp;redirect_type=jump&amp;redirect_url=$&#123; encodeURIComponent(url) &#125;` 参数 说明 corpid 表示免登微应用用户的所属企业 container_type 表示使用哪种方式打开链接 work_platform 表示用工作台打开 app_id 由数字 0、下划线、agentid 拼接组成；agentid 是企业内部应用 id，获取 agentid 查看文档 redirect_type 只能填写 jump redirect_url 表示要跳转的地址，必须 urlEncode 消息链接说明","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"钉钉","slug":"前端/钉钉","permalink":"https://liuxianyu.cn/categories/前端/钉钉/"}],"tags":[{"name":"钉钉","slug":"钉钉","permalink":"https://liuxianyu.cn/tags/钉钉/"}],"author":"liuxy0551"},{"title":"ngrok 出现 Invalid Host header 的解决方案","slug":"2020-07-05-ngrok-disable-host-check","date":"2020-07-05T21:23:32.000Z","updated":"2020-07-05T21:23:32.000Z","comments":true,"path":"article/ngrok-disable-host-check.html","link":"","permalink":"https://liuxianyu.cn/article/ngrok-disable-host-check.html","excerpt":"最近有个公司的甲方拿了个项目来让我们改改再用，不是熟悉的 vue 项目，记录一些点。","text":"最近有个公司的甲方拿了个项目来让我们改改再用，不是熟悉的 vue 项目，记录一些点。 使用 ngrok 工具，在浏览器访问给出的地址，出现了Invalid Host header字样。这是因为新版的 webpack-dev-server 出于安全考虑，默认检查 hostname，如果 hostname 不是配置内的就不能访问。 ¶一、ngrok.com 优点：启动方便 缺点：网速慢，不能自定义域名 官网的工具包链接: https://pan.baidu.com/s/1r8noo1iQbEt3DJJRkdJhbQ 密码:vcvj ¶二、ngrok.cc 优点：网速好一点，自定义域名 缺点：配置麻烦 ¶三、解决办法 因为不是熟悉的 vue 项目，所以记录一下，vue 项目中解决较为简单，不做赘述。 ¶1、修改 node_modules 进入/node_modules/_webpack-dev-server@2.11.5@webpack-dev-server/lib，在Server.js中查找，将 1if (this.disableHostCheck) return true; 改为： 1return true; 即可，不对 hostname 做检查就返回通过。 ¶2、修改启动命令推荐 修改 script 中的启动命令，添加参数：--disableHostCheck=true 123456789&quot;scripts&quot;: &#123; &quot;dev&quot;: &quot;npm run development&quot;, &quot;development&quot;: &quot;cross-env NODE_ENV=development node_modules/webpack/bin/webpack.js --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js&quot;, &quot;watch&quot;: &quot;cross-env NODE_ENV=development node_modules/webpack/bin/webpack.js --watch --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js&quot;, &quot;watch-poll&quot;: &quot;npm run watch -- --watch-poll&quot;, &quot;hot&quot;: &quot;cross-env NODE_ENV=development node_modules/webpack-dev-server/bin/webpack-dev-server.js --disableHostCheck=true --inline --hot --config=node_modules/laravel-mix/setup/webpack.config.js&quot;, &quot;prod&quot;: &quot;npm run production&quot;, &quot;production&quot;: &quot;cross-env NODE_ENV=production node_modules/webpack/bin/webpack.js --no-progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js&quot;&#125;","categories":[{"name":"ngrok","slug":"ngrok","permalink":"https://liuxianyu.cn/categories/ngrok/"}],"tags":[{"name":"ngrok","slug":"ngrok","permalink":"https://liuxianyu.cn/tags/ngrok/"}],"author":"liuxy0551"},{"title":"PC 和移动端实现长按效果","slug":"2020-06-20-long-press","date":"2020-06-20T14:26:02.000Z","updated":"2020-06-20T14:26:02.000Z","comments":true,"path":"article/long-press.html","link":"","permalink":"https://liuxianyu.cn/article/long-press.html","excerpt":"最近公司有个项目甲方想要个点赞的效果，有长按事件的身影，记录一下。","text":"最近公司有个项目甲方想要个点赞的效果，有长按事件的身影，记录一下。 ¶1、实现效果 ¶2、HTML 1234567891011&lt;div class=\"thumb-up-icon\" oncontextmenu='self.event.returnValue=false' @touchstart=\"addStart\" @touchend=\"addStop\" @touchmove=\"addStop\" @mousedown=\"addStart\" @mouseup=\"addStop\" @mouseout=\"addStop\" @click=\"thumbUp\"&gt;&lt;/div&gt; 注意 oncontextmenu='self.event.returnValue=false'禁用右键点击 touch是移动端的方法 mouse是 PC 端的方法 ¶3、Script 123456789101112131415161718192021222324252627282930313233&lt;script&gt; import ThumbsUpAni from '../portal/canvas' export default &#123; name: 'ThumbUp', data() &#123; return &#123; thumbsUpAni: null, timer: null &#125; &#125;, methods: &#123; // 添加 icon thumbUp () &#123; this.thumbsUpAni.start() &#125;, // 持续添加 icon addStart () &#123; this.timer &amp;&amp; this.addStop() this.timer = setInterval(() =&gt; &#123; this.thumbUp() &#125;, 80) &#125;, // 停止添加 icon addStop () &#123; clearInterval(this.timer) &#125; &#125;, mounted () &#123; this.thumbsUpAni = new ThumbsUpAni() &#125; &#125;&lt;/script&gt; ¶4、附件 1、点赞的 canvas 文件：canvas.js 2、点赞的组件代码：ThumbUp.vue 3、点赞图标：thumb-up.png","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"HTML","slug":"前端/HTML","permalink":"https://liuxianyu.cn/categories/前端/HTML/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"},{"name":"HTML","slug":"HTML","permalink":"https://liuxianyu.cn/tags/HTML/"}],"author":"liuxy0551"},{"title":"Git 常用命令（十）—— github Fork 的代码如何更新并新建 pull request","slug":"2018-10-20-Git-Order-J","date":"2020-06-07T15:09:16.000Z","updated":"2020-06-18T10:46:52.000Z","comments":true,"path":"article/git-order-j.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-j.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下github Fork 的代码如何更新并新建 pull request：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下github Fork 的代码如何更新并新建 pull request： ¶1、拉取 Fork 后的代码 1git clone https://github.com/liuxy0551/vue-base-structrue.git ¶2、将原项目和本地项目关联 1git remote add author https://github.com/vue-quick-framework/vue-base-structrue.git 此时可以使用git remote -v查看远程仓库信息： ¶3、fetch 原项目的最新代码到本地 1git fetch author 从原项目 fetch 来的内容，会被存储在本地分支author/master ¶4、合并author/master和master 1git merge author/master ¶5、推送到 fork 的项目中 1git push origin master ¶6、新建 pull request 在自己的项目中，点击New pull request -&gt; Create pull request","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"},{"name":"github","slug":"github","permalink":"https://liuxianyu.cn/tags/github/"}],"author":"liuxy0551"},{"title":"通过 CDN 引入 element-ui 时，如何改变其主题色","slug":"2020-06-05-build-element-ui","date":"2020-06-05T19:03:48.000Z","updated":"2020-06-05T20:04:37.000Z","comments":true,"path":"article/build-element-ui.html","link":"","permalink":"https://liuxianyu.cn/article/build-element-ui.html","excerpt":"最近公司有个项目，使用了 element-ui，而且使用了自己项目的主题色 —— 橙色。 按照 Element UI -&gt; 自定义主题 -&gt; 在项目中改变 SCSS 变量 中的设置就可以把项目中的 element-ui 的主题色改为橙色了。","text":"最近公司有个项目，使用了 element-ui，而且使用了自己项目的主题色 —— 橙色。 按照 Element UI -&gt; 自定义主题 -&gt; 在项目中改变 SCSS 变量 中的设置就可以把项目中的 element-ui 的主题色改为橙色了。 然而，在我根据 前端项目优化之旅（六）—— 引入并使用 CDN 优化项目的时候，通过 CDN 引入 element-ui 的 js 和 css 文件(/element-ui/lib/theme-chalk/index.css)，这个时候问题就来了，项目的主题色全变为默认的蓝色了，吓死人了。赶紧来解决吧： ¶一、第一次尝试 element-ui 的 css 文件是经过编译的，$--color-primary早已被编译成了蓝色(#409EFF)，那就全局替换吧，替换成我的橙色，上传 OSS，一气呵成。 一刷新，咦，怎么按钮边线有股淡淡的蓝色，到其他页面一看，事情并不简单，一片淡蓝色，想起主题色带透明的颜色都没有进行替换。如果替换的话，还得挨个计算加上透明度后色号是多少再替换，还可能遗漏，而且很显然，这不是程序员干的事儿。那么，第二种解法来了： ¶二、第二次尝试 正解 好嘛，你是经过编译的嘛，来，编译你。拉取 element-ui 源码(master 分支)。拿到一个项目，如何直击灵魂呢，查看package.json即可，还别说，大厂就是大厂，代码写得让人很舒服。 可以看到，script 中的build:theme就是我们想要的命令，命令行先走一个试一下： 1npm run build:theme 报错了，仔细一看，sass-loader 要求 node 版本为 11.x 了，那当前的 13.x 咋办呢，学一下 Mac OS 中管理 node 版本的工具 —— n 吧。 整好环境后，再来一次吧，结果还凑合。 那找到 element-ui 设置的$--color-primary改为我的橙色再编译一下，不就可以了嘛，机智，说干就干。全局搜索$--color-primary，发现 element-ui 是在/element-ui/packages/theme-chalk/src/common/var.scss中设置主题色的，找到$--color-primary，将色号从默认的#409EFF改为橙色就可以了，连带着透明度的颜色变量都会在编译后改变，SASS 的美妙。 这个时候再npm run build:theme一次，上传/element-ui/lib/theme-chalk/index.css到 OSS，再次刷新，就是特别好看的橙色啦! ¶三、新遇到的问题 最近再次编译的时候发现会报如下错误：意思是postcss版本高了，引用需要修改，将/packages/theme-thalk/gulpfile.js中的browsers改为overrideBrowserslist再次编译即可。 ¶四、类似随笔 通过 CDN 引入 element-ui 时，如何改变其全局配置 (size, z-index)","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"CDN","slug":"前端/Vue/CDN","permalink":"https://liuxianyu.cn/categories/前端/Vue/CDN/"}],"tags":[{"name":"Element UI","slug":"Element-UI","permalink":"https://liuxianyu.cn/tags/Element-UI/"},{"name":"CDN","slug":"CDN","permalink":"https://liuxianyu.cn/tags/CDN/"}],"author":"liuxy0551"},{"title":"Mac OS 中的 brew 长时间停留在 Updating Homebrew 这个步骤","slug":"2020-06-05-mac-brew","date":"2020-06-05T14:43:58.000Z","updated":"2020-06-05T14:43:58.000Z","comments":true,"path":"article/mac-brew.html","link":"","permalink":"https://liuxianyu.cn/article/mac-brew.html","excerpt":"国内的网络环境对于 brew 不太友好，使用 brew 命令时经常会卡在 Updating Homebrew 这个步骤，记录一下处理方法。","text":"国内的网络环境对于 brew 不太友好，使用 brew 命令时经常会卡在 Updating Homebrew 这个步骤，记录一下处理方法。 ¶一、临时取消本次更新 按住 control + c 取消本次更新操作，按下快捷键后会出现^C，代表已经取消了Updating Homebrew操作，大概一两秒后就会执行我们需要进行的安装操作了。 ¶二、使用国内的镜像源进行加速（阿里云） 执行 brew 命令安装软件的时候，跟以下三部分有关：本体 brew.git、核心 homebrew-core.git、二进制预编译包 homebrew-bottles ¶1、替换 / 还原 brew.git 仓库地址 1、替换成阿里云的 brew.git 仓库地址 12cd \"$(brew --repo)\"git remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git 2、还原成官方的 brew.git 仓库地址 12cd \"$(brew --repo)\"git remote set-url origin https://github.com/Homebrew/brew.git ¶2、替换 / 还原 homebrew-core.git 仓库地址 1、替换成阿里云的 homebrew-core.git 仓库地址 12cd \"$(brew --repo)/Library/Taps/homebrew/homebrew-core\"git remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git 2、还原成官方的 homebrew-core.git 仓库地址 12cd \"$(brew --repo)/Library/Taps/homebrew/homebrew-core\"git remote set-url origin https://github.com/Homebrew/homebrew-core.git ¶3、替换 / 还原 homebrew-bottles 仓库地址（zsh） 1、替换成阿里云的 homebrew-bottles 仓库地址 12echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles' &gt;&gt; ~/.zshrcsource ~/.zshrc 2、还原成官方的 homebrew-bottles 仓库地址 123vim ~/.zshrc# 然后，删除 HOMEBREW_BOTTLE_DOMAIN 这一行配置source ~/.zshrc 刷新源的命令： 1brew update ¶三、附录（中科大、清华大学） 12345678910111213141516171819# 替换brew.git:$ cd \"$(brew --repo)\"# 中国科大:$ git remote set-url origin https://mirrors.ustc.edu.cn/brew.git# 清华大学:$ git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git# 替换homebrew-core.git:$ cd \"$(brew --repo)/Library/Taps/homebrew/homebrew-core\"# 中国科大:$ git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git# 清华大学:$ git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git# 替换homebrew-bottles:# 中国科大:$ echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' &gt;&gt; ~/.bash_profile$ source ~/.bash_profile# 清华大学:$ echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles' &gt;&gt; ~/.bash_profile$ source ~/.bash_profile","categories":[{"name":"Mac OS","slug":"Mac-OS","permalink":"https://liuxianyu.cn/categories/Mac-OS/"}],"tags":[{"name":"Mac OS","slug":"Mac-OS","permalink":"https://liuxianyu.cn/tags/Mac-OS/"}],"author":"liuxy0551"},{"title":"Mac OS 中管理 node 版本的工具 —— n","slug":"2020-06-05-node-n","date":"2020-06-05T14:07:28.000Z","updated":"2021-02-20T23:57:46.000Z","comments":true,"path":"article/node-n.html","link":"","permalink":"https://liuxianyu.cn/article/node-n.html","excerpt":"有时候项目中需要老版本的 node 支持，所以记录一下如何管理多个 node 版本。","text":"有时候项目中需要老版本的 node 支持，所以记录一下如何管理多个 node 版本。 淘宝 Node.js 镜像 node 以往的版本 ¶一、管理工具 —— n ¶1、通过 brew 安装n： 12brew install nn -V ¶2、通过 npm 安装n： 12npm i -g nn -V ¶二、使用淘宝镜像 n 安装 node 版本时是从 nodejs 官网进行下载的，鉴于国内的网络环境，可以配置使用淘宝镜像： 1vim ~/.zshrc 或 ~/.bashrc 在上述配置文件尾添加以下内容： 12# node n taobao 镜像export N_NODE_MIRROR=https://npm.taobao.org/dist/ 1source ~/.zshrc 或 ~/.bashrc 配置后地址显示不变，但速度明显有提升。 ¶三、常用命令 ¶1、安装、激活版本： 只需执行n &lt;version&gt;即可安装对应版本的 node。如果&lt;version&gt;已经安装（通过 n），n 将激活该版本。 1sudo n 13.5.0 ¶2、查看当前安装的版本： 1n ls ¶3、选取已安装的版本： 1n 键盘上下键选择版本后回车确认 ¶4、运行脚本时选择版本： 1n use 13.5.0 app.js ¶6、删除版本： 123sudo n rm 12.20.2sudo n rm v12.20.2sudo n - 12.20.2 注意 如果删除不成功，可进入/usr/local/n/versions/node目录删除版本 12cd /usr/local/n/versions/nodesudo rm -rf 12.20.2 ¶参考资料 以下两篇结合着看： linux 下使用&quot;n&quot;配置使用淘宝镜像 更换node版本切换工具n模块的镜像源","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"版本管理","slug":"node/版本管理","permalink":"https://liuxianyu.cn/categories/node/版本管理/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Mac OS","slug":"Mac-OS","permalink":"https://liuxianyu.cn/tags/Mac-OS/"}],"author":"liuxy0551"},{"title":"WebStorm、vscode 配置识别 vue 项目的别名 alias @","slug":"2020-05-29-webstorm-vscode-alias","date":"2020-05-29T11:40:21.000Z","updated":"2020-05-29T11:40:21.000Z","comments":true,"path":"article/webstorm-vscode-alias.html","link":"","permalink":"https://liuxianyu.cn/article/webstorm-vscode-alias.html","excerpt":"记录一下如何配置可以让 WebStorm 和 vscode 识别 Vue CLI 3 项目中的别名 alias @。","text":"记录一下如何配置可以让 WebStorm 和 vscode 识别 Vue CLI 3 项目中的别名 alias @。 ¶一、WebStorm ¶1、全局设置 推荐 可以在 WebStorm 的项目空间中添加一个alias.config.js文件，然后使用该文件。 1/Users/liuyi/Library/Preferences/WebStorm2019.3/alias.config.js 1234567891011121314/** * 由于 Vue CLI 3 不再使用传统的 webpack 配置文件，故 WebStorm 无法识别别名 * 本文件对项目无任何作用，仅作为 WebStorm 识别别名用 * 进入 WebStorm preferences -&gt; Language &amp; Framework -&gt; JavaScript -&gt; Webpack，选择这个文件即可 * */const resolve = dir =&gt; require('path').join(__dirname, dir)module.exports = &#123; resolve: &#123; alias: &#123; '@': resolve('src') &#125; &#125;&#125; ¶2、项目单独设置 参考 在 WebStorm 中，配置能够识别 Vue CLI 3 创建的项目的别名 alias @ 进入 WebStorm -&gt; Preferences -&gt; Language &amp; Framework -&gt; JavaScript -&gt; Webpack，选择项目目录\\node_modules\\@vue\\cli-service\\webpack.config.js即可。 1/Users/liuyi/Desktop/Projects/Shengya/zjedu-sky-admin/node_modules/@vue/cli-service/webpavk.config.js ¶二、vscode vscode 中 vue 项目的@不会提示，在根目录添加一个jsconfig.json文件，即可在 script 标签中使用@。 12345678910111213&#123; &quot;compilerOptions&quot;: &#123; &quot;baseUrl&quot;: &quot;.&quot;, &quot;paths&quot;: &#123; &quot;@/*&quot;: [&quot;src/*&quot;] &#125;, &quot;target&quot;: &quot;ES6&quot;, &quot;module&quot;: &quot;commonjs&quot;, &quot;allowSyntheticDefaultImports&quot;: true &#125;, &quot;include&quot;: [&quot;src/**/*&quot;], &quot;exclude&quot;: [&quot;node_modules&quot;]&#125;","categories":[{"name":"开发工具","slug":"开发工具","permalink":"https://liuxianyu.cn/categories/开发工具/"},{"name":"vscode","slug":"开发工具/vscode","permalink":"https://liuxianyu.cn/categories/开发工具/vscode/"}],"tags":[{"name":"vscode","slug":"vscode","permalink":"https://liuxianyu.cn/tags/vscode/"},{"name":"WebStorm","slug":"WebStorm","permalink":"https://liuxianyu.cn/tags/WebStorm/"}],"author":"liuxy0551"},{"title":"eslint 的配置","slug":"2020-05-29-eslintrc","date":"2020-05-29T11:18:59.000Z","updated":"2020-05-29T11:18:59.000Z","comments":true,"path":"article/eslintrc.html","link":"","permalink":"https://liuxianyu.cn/article/eslintrc.html","excerpt":"记录一下 eslint 的配置，不定时更新。","text":"记录一下 eslint 的配置，不定时更新。 参考：https://github.com/PanJiaChen/vue-element-admin/edit/master/.eslintrc.js 中文注释可参考：https://blog.csdn.net/weixin_41767649/article/details/90115453。 腾讯云 eslint Rules（全量详解）：https://cloud.tencent.com/developer/chapter/12618 ¶我的常用 12345678910111213141516171819202122232425262728293031323334353637module.exports = &#123; root: true, env: &#123; node: true &#125;, extends: [ 'plugin:vue/essential', '@vue/standard' ], parserOptions: &#123; parser: 'babel-eslint' &#125;, rules: &#123; 'no-console': process.env.NODE_ENV === 'production' ? 'error' : 'off', 'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off', 'dot-notation': [0, &#123; allowKeywords: true &#125;], // 支持 $refs['form] 'space-before-function-paren': [2, 'never'], // 方法名与括号之间没有空格 'template-curly-spacing': [2, 'always'], // 模板字符串需要空格，$&#123; name &#125; 'no-useless-catch': 'off', // 可以使用不必要的 catch 语句 'no-unused-vars': 'off', // 封装 js class 时可能需要 'no-async-promise-executor': 'off', // 将 async 函数做为 new Promise 的回调函数 'prefer-const': 0, // 不使用 const 'vue/script-indent': ['error', 2, &#123; // vue script 标签缩进设置，数字2表示统一缩进2个空格，数字1表示1倍缩进 'baseIndent': 1, 'switchCase': 0, 'ignores': [] &#125;] &#125;, overrides: [ &#123; // vue script 标签缩进设置 \"files\": [\"*.vue\"], \"rules\": &#123; \"indent\": \"off\", &#125; &#125; ]&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"eslint","slug":"前端/eslint","permalink":"https://liuxianyu.cn/categories/前端/eslint/"}],"tags":[{"name":"vscode","slug":"vscode","permalink":"https://liuxianyu.cn/tags/vscode/"},{"name":"eslint","slug":"eslint","permalink":"https://liuxianyu.cn/tags/eslint/"}],"author":"liuxy0551"},{"title":"Prettier 的配置","slug":"2020-05-28-prettierrc","date":"2020-05-28T17:05:57.000Z","updated":"2020-05-28T17:05:57.000Z","comments":true,"path":"article/prettierrc.html","link":"","permalink":"https://liuxianyu.cn/article/prettierrc.html","excerpt":"代码格式化插件，记录一下自定义配置。","text":"代码格式化插件，记录一下自定义配置。 ¶一、vscode 中使用 Prettier ¶1、安装插件 搜索并安装插件Prettier - Code formatter ¶2、添加配置文件 在项目根目录添加配置文件.prettierrc，如下： 1234567&#123; \"printWidth\": 140, \"semi\": false, \"singleQuote\": true, \"trailingComma\": \"none\", \"arrowParens\": \"avoid\"&#125; 序号 配置项 参数值 代表意义 1 printWidth 140 int，达到该宽度即换行 2 semi false bool，在语句末尾添加分号 3 singleQuote true bool，使用单引号而非双引号 4 trailingComma ‘none’ ‘none’/‘es5’/‘all’，在任何可能的多行中输入尾逗号 5 arrowParens ‘avoid’ (x) =&gt; {} 箭头函数参数只有一个时是否要有小括号。avoid：省略括号 ¶3、保存自动格式化代码 可选 在settings.json中添加如下代码： 1&quot;editor.formatOnSave&quot;: false","categories":[{"name":"开发工具","slug":"开发工具","permalink":"https://liuxianyu.cn/categories/开发工具/"},{"name":"vscode","slug":"开发工具/vscode","permalink":"https://liuxianyu.cn/categories/开发工具/vscode/"}],"tags":[{"name":"vscode","slug":"vscode","permalink":"https://liuxianyu.cn/tags/vscode/"}],"author":"liuxy0551"},{"title":"H5 中的高德地图开发","slug":"2020-05-25-h5-amap","date":"2020-05-25T13:23:16.000Z","updated":"2020-05-25T13:23:16.000Z","comments":true,"path":"article/h5-amap.html","link":"","permalink":"https://liuxianyu.cn/article/h5-amap.html","excerpt":"最近写了个浙大校庆的活动页 https://123.zju.edu.cn，里面涉及到了一些高德地图的开发，记录一下。","text":"最近写了个浙大校庆的活动页 https://123.zju.edu.cn，里面涉及到了一些高德地图的开发，记录一下。 ¶一、注册开发账号 公司项目一定要使用企业开发者，各类服务的调用配额会有很多差别。个人兴趣项目可以使用个人开发者账号。 ¶二、https 目前已经有很多浏览器禁止 http 站点使用定位，所以建议使用 https，同时使用 https 也是保障网站安全的一种手段。 ¶三、Web 端 和 Web 服务 Web 端是给 h5 页面使用的，Web 服务一般是给后端同学调用接口如：逆地理编码、搜索 POI 等。 ¶四、加载地图 js 文件 可以参考 动态加载 js 文件 的写法，在 js 文件加载完毕后初始化地图。 123456789101112131415161718// 地图 js 动态加载function loadMap (callback) &#123; let head = document.getElementsByTagName('head')[0] let script = document.createElement('script') script.charset = 'utf-8' script.type = 'text/javascript' script.src = amapUrl if (typeof callback == 'function') &#123; script.onload = script.onreadystatechange = function () &#123; if (!this.readyState || this.readyState === \"loaded\" || this.readyState === \"complete\") &#123; // 动态 script 加载完毕 callback() script.onload = script.onreadystatechange = null &#125; &#125; &#125; head.appendChild(script)&#125; 1234567891011121314151617181920// mapStyle 是自定义地图let mapConfig = &#123; mapStyle: 'amap://styles/a22f2eb96ee3725363b7bc7b0f162599', zoom: 4, zooms: [3, 6], features: ['bg', 'road'], // 'bg'（地图背景，必需）、'point'（POI点）、'road'（道路）、'building'（建筑物） center: ['104.964785', '34.049395'], // 中国中心 viewMode: '3D', // 2D, 3D pitch: 30 // 仰角&#125;// 初始化地图loadMap(() =&gt; &#123; this.map = new AMap.Map('map', mapConfig) this.map.on('complete', () =&gt; &#123; // 地图加载成功 // 海量点 this.loadMassMarks(this.map).then(count =&gt; &#123; this.count = count &#125;) &#125;)&#125;) PointSimplifier（海量点展示） 12345678910111213141516171819202122232425// 海量点async loadMassMarks (map) &#123; let style = &#123; // 设置样式对象 url: require('../assets/images/map/1.png'), // 图标地址 size: new AMap.Size(4, 4), // 图标大小 anchor: new AMap.Pixel(2, 2) // 图标显示位置偏移量，基准点为图标左上角 &#125; let massMarks = new AMap.MassMarks([], &#123; zIndex: 5, // 海量点图层叠加的顺序 alwaysRender: false, // 表示是否在拖拽缩放过程中实时重绘，默认true，建议超过10000的时候设置false style &#125;) // 绘制海量点 let res = await this.api.getLngLatAll() if (res.data.IP 城市定位data.url) &#123; this.api.getDataByUrl(res.data.data.url).then(res =&gt; &#123; massMarks.setData(res.data) &#125;) &#125; else &#123; massMarks.setData(res.data.data.addr) &#125; massMarks.setMap(map) return res.data.data.count || 1&#125; ¶五、定位 ¶1、精确定位 AMap.Geolocation, getCurrentPosition ¶2、IP 城市定位 AMap.CitySearch, getLocalCity ¶3、H5 自带的定位 navigator.geolocation.getCurrentPosition","categories":[{"name":"高德地图","slug":"高德地图","permalink":"https://liuxianyu.cn/categories/高德地图/"}],"tags":[{"name":"高德地图","slug":"高德地图","permalink":"https://liuxianyu.cn/tags/高德地图/"}],"author":"liuxy0551"},{"title":"微信 H5 自动播放视频防止全屏","slug":"2020-05-14-wechat-video-autoplay","date":"2020-05-14T19:07:09.000Z","updated":"2020-05-14T19:07:09.000Z","comments":true,"path":"article/wechat-video-autoplay.html","link":"","permalink":"https://liuxianyu.cn/article/wechat-video-autoplay.html","excerpt":"记录一下微信 H5 中如何防止自动播放视频时打开全屏。","text":"记录一下微信 H5 中如何防止自动播放视频时打开全屏。 12345678910&lt;video ref=\"videoRef\" controls preload :src=\"videoUrl\" x5-video-player-type=\"h5-page\" playsinline=\"true\" x5-playsinline=\"\" webkit-playsinline=\"true\"&gt;&lt;/video&gt;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"HTML","slug":"前端/HTML","permalink":"https://liuxianyu.cn/categories/前端/HTML/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"https://liuxianyu.cn/tags/HTML/"}],"author":"liuxy0551"},{"title":"动态加载 js 文件","slug":"2020-05-13-load-js","date":"2020-05-13T18:12:43.000Z","updated":"2020-05-13T18:12:43.000Z","comments":true,"path":"article/load-js.html","link":"","permalink":"https://liuxianyu.cn/article/load-js.html","excerpt":"记录一下 vue 中动态加载 js 文件的写法。","text":"记录一下 vue 中动态加载 js 文件的写法。 ¶一、load 123456789101112131415161718function loadJS (callback) &#123; let head = document.getElementsByTagName('head')[0] let script = document.createElement('script') script.charset = 'utf-8' script.type = 'text/javascript' script.src = 'https://webapi.amap.com/ui/1.1/main-async.js' if (typeof callback == 'function') &#123; script.onload = script.onreadystatechange = () =&gt; &#123; // 动态 script 加载完毕 if (!script.readyState || script.readyState === \"loaded\" || script.readyState === \"complete\") &#123; callback() script.onload = script.onreadystatechange = null &#125; &#125; &#125; head.appendChild(script)&#125; ¶二、loaded 1234// js 加载完成loadJS(() =&gt; &#123; console.log('js 加载完成')&#125;)","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"前端项目优化之旅（六）—— 引入并使用 CDN","slug":"2020-04-24-vue-cli3-cdn","date":"2020-04-24T20:13:53.000Z","updated":"2020-04-24T20:13:53.000Z","comments":true,"path":"article/vue-cli3-cdn.html","link":"","permalink":"https://liuxianyu.cn/article/vue-cli3-cdn.html","excerpt":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下引入和使用 CDN 的过程。","text":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下引入和使用 CDN 的过程。 ¶一、为什么 当引入的组件越来越多时，运用 webpack 打包后的 app.js 文件容易变得过大，对首屏加载很不友好。 ¶二、怎么办 ¶1、package.json 在package.json中删除即将通过 CDN 引入的组件，主要在 dependencies 和 devDependencies 中，删除 node_modules 后重新安装 ¶2、vue.config.js 引入 CDN 文件并配置 webpack，可以有效缓解加载速度慢的问题。 123456789101112131415161718192021222324252627282930313233343536373839// vue.config.jsmodule.exports = &#123; configureWebpack: &#123; externals: &#123; vue: 'Vue', 'vue-router': 'VueRouter', vuex: 'Vuex', axios: 'axios', vant: 'vant', 'element-ui': 'ELEMENT', 'dingtalk-jsapi': 'dd', echarts: 'echarts' &#125; &#125;, chainWebpack: config =&gt; &#123; const cdn = &#123; css: [ '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vant/index.css', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/element-ui/element-ui-index.css' ], js: [ process.env.NODE_ENV === 'development' ? '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vue/v2.6.11.js' : '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vue/v2.6.11.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vue-router/v3.1.6.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vant/vant.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vuex/v3.1.2.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/axios/v0.19.2.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/dingtalk-jsapi/dingtalk.open.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/element-ui/index.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/echarts/echarts.min.js' ] &#125; // 如果使用多页面打包，使用 vue inspect --plugins 查看 html 是否在结果数组中 config.plugin('html').tap(args =&gt; &#123; // html中添加cdn args[0].cdn = cdn return args &#125;) &#125;&#125; ¶3、public/index.html 在&lt;head&gt;&lt;/head&gt;标签中添加以下代码使用： 123456789&lt;!-- 使用CDN的CSS文件 --&gt;&lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp; htmlWebpackPlugin.options.cdn.css) &#123; %&gt;&lt;link rel=\"stylesheet\" href=\"&lt;%= htmlWebpackPlugin.options.cdn.css[i] %&gt;\" /&gt;&lt;% &#125; %&gt;&lt;!-- 使用CDN的JS文件 --&gt;&lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp; htmlWebpackPlugin.options.cdn.js) &#123; %&gt;&lt;script type=\"text/javascript\" src=\"&lt;%= htmlWebpackPlugin.options.cdn.js[i] %&gt;\"&gt;&lt;/script&gt;&lt;% &#125; %&gt; ¶4、main.js main.js 中可能有引入相关组件的 css 文件，当使用了 css 文件的 CDN 时，无需在 main.js 中继续引用。如： 12345678// main.jsimport Vant from 'vant';// import 'vant/lib/index.css'; // 使用了该 css 文件的 CDN 时，无需在 main.js 中引用Vue.use(Vant);// import 'element-ui/lib/theme-chalk/index.css'// import Element from 'element-ui'// Vue.use(Element, &#123; size: 'small' &#125;)","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"CDN","slug":"前端/Vue/CDN","permalink":"https://liuxianyu.cn/categories/前端/Vue/CDN/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"项目优化","slug":"项目优化","permalink":"https://liuxianyu.cn/tags/项目优化/"},{"name":"CDN","slug":"CDN","permalink":"https://liuxianyu.cn/tags/CDN/"}],"author":"liuxy0551"},{"title":"vue 项目在 360 浏览器中设置默认内核","slug":"2020-04-18-360-browser-default-kernel","date":"2020-04-18T13:13:11.000Z","updated":"2020-04-18T13:13:11.000Z","comments":true,"path":"article/360-browser-default-kernel.html","link":"","permalink":"https://liuxianyu.cn/article/360-browser-default-kernel.html","excerpt":"测试同学说项目在 360 浏览器中白屏，了解了下是 360 浏览器内核设置的原因，记录下解决方法。","text":"测试同学说项目在 360 浏览器中白屏，了解了下是 360 浏览器内核设置的原因，记录下解决方法。 ¶1、解决办法 请用域名测试为准，不要用IP地址测试。在&lt;head&gt;&lt;/head&gt;标签中增加meta标签： 1&lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot;&gt; ¶2、官方文档 360 浏览器自定义设置内核模式说明","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"设置 Host 解决 GitHub 头像不显示","slug":"2020-06-20-github-avatar-host","date":"2020-04-15T14:26:02.000Z","updated":"2020-04-15T14:26:02.000Z","comments":true,"path":"article/github-avatar-host.html","link":"","permalink":"https://liuxianyu.cn/article/github-avatar-host.html","excerpt":"GitHub 头像和 icon 大部分时间不能正常显示，很影响使用感受，可以通过设置 hosts 文件来解决。","text":"GitHub 头像和 icon 大部分时间不能正常显示，很影响使用感受，可以通过设置 hosts 文件来解决。 编辑 hosts 文件： 1vim /etc/hosts 在原有配置后追加即可： 123456789101112131415161718# GitHub Avatar Start 192.30.253.112 Build software better, together 192.30.253.119 gist.github.com151.101.184.133 assets-cdn.github.com151.101.184.133 raw.githubusercontent.com151.101.184.133 gist.githubusercontent.com151.101.184.133 cloud.githubusercontent.com151.101.184.133 camo.githubusercontent.com151.101.184.133 avatars0.githubusercontent.com151.101.184.133 avatars1.githubusercontent.com151.101.184.133 avatars2.githubusercontent.com151.101.184.133 avatars3.githubusercontent.com151.101.184.133 avatars4.githubusercontent.com151.101.184.133 avatars5.githubusercontent.com151.101.184.133 avatars6.githubusercontent.com151.101.184.133 avatars7.githubusercontent.com151.101.184.133 avatars8.githubusercontent.com# GitHub Avatar End 以下为老版，效果自测 123456789101112131415# github avatar199.232.28.133 assets-cdn.github.com199.232.28.133 raw.githubusercontent.com199.232.28.133 gist.githubusercontent.com199.232.28.133 cloud.githubusercontent.com199.232.28.133 camo.githubusercontent.com199.232.28.133 avatars0.githubusercontent.com199.232.28.133 avatars1.githubusercontent.com199.232.28.133 avatars2.githubusercontent.com199.232.28.133 avatars3.githubusercontent.com199.232.28.133 avatars4.githubusercontent.com199.232.28.133 avatars5.githubusercontent.com199.232.28.133 avatars6.githubusercontent.com199.232.28.133 avatars7.githubusercontent.com199.232.28.133 avatars8.githubusercontent.com","categories":[{"name":"Hosts","slug":"Hosts","permalink":"https://liuxianyu.cn/categories/Hosts/"}],"tags":[{"name":"github","slug":"github","permalink":"https://liuxianyu.cn/tags/github/"},{"name":"Hosts","slug":"Hosts","permalink":"https://liuxianyu.cn/tags/Hosts/"}],"author":"liuxy0551"},{"title":"Vue 项目初始化（三）—— 开发环境设置 proxy 代理","slug":"2020-04-11-vue-init-c","date":"2020-04-11T14:21:37.000Z","updated":"2020-04-11T14:21:37.000Z","comments":true,"path":"article/vue-init-c.html","link":"","permalink":"https://liuxianyu.cn/article/vue-init-c.html","excerpt":"Vue 移动端项目使用了 scss 的话，可以设置自动转换 px 为 rem。","text":"Vue 移动端项目使用了 scss 的话，可以设置自动转换 px 为 rem。 ¶axios.js 123const instance = axios.create(&#123; baseURL: process.env.NODE_ENV === 'development' ? '' : process.env.VUE_APP_BASE_URL&#125;) ¶vue.config.js 123456789101112131415module.exports = &#123; devServer: &#123; proxy: &#123; '/api': &#123; target: `$&#123; process.env.VUE_APP_BASE_URL &#125;`, secure: false, // 如果是 https 接口，需要配置这个参数 changeOrigin: true, // 开启代理，在本地创建一个虚拟服务端，如果接口跨域，需要进行这个参数配置 ws: false, // 是否启用websockets pathRewrite: &#123; // 如果接口本身没有/api需要通过pathRewrite来重写了地址 \"^/api\": \"/\" &#125; &#125; &#125; &#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"Vue 项目初始化（二）—— 移动端支持 rem","slug":"2020-04-10-vue-init-b","date":"2020-04-10T21:17:59.000Z","updated":"2020-04-10T21:17:59.000Z","comments":true,"path":"article/vue-init-b.html","link":"","permalink":"https://liuxianyu.cn/article/vue-init-b.html","excerpt":"Vue 移动端项目使用了 scss 的话，可以设置自动转换 px 为 rem。","text":"Vue 移动端项目使用了 scss 的话，可以设置自动转换 px 为 rem。 ¶一、创建项目 1vue create my-vue-wap ¶二、Rem support ¶1、安装postcss-pxtorem、amfe-flexible 12cnpm i amfe-flexible -Scnpm i postcss-pxtorem -D ¶2、src/main.js 1import 'amfe-flexible' ¶3、vue.config.js 12345678910111213141516171819202122232425module.exports = &#123; css: &#123; loaderOptions: &#123; // pass options to sass-loader sass: &#123; // @/ is an alias to src/ // before key is 'data', now change to 'prependData' so this assumes you have a file named `src/variables.scss` prependData: `@import \"@/assets/stylesheets/mixins/_variables.scss\";` &#125;, postcss: &#123; plugins: [ require('postcss-pxtorem')(&#123; rootValue: 37.5, // 效果图375，动态基准值可以传入function propList: ['*'], // 属性的选择器，*表示通用 selectorBlackList: ['.px-'] // 忽略的选择器 .ig- 表示 .ig- 开头的都不会转换 &#125;) ], /* ** You can extend webpack config here */ extend(config, ctx) &#123;&#125; &#125; &#125; &#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"Vue 项目初始化（一）—— 常用配置","slug":"2020-04-06-vue-init-a","date":"2020-04-06T11:02:26.000Z","updated":"2020-04-16T11:02:26.000Z","comments":true,"path":"article/vue-init-a.html","link":"","permalink":"https://liuxianyu.cn/article/vue-init-a.html","excerpt":"Vue 项目初始化较为简单，常用的基础配置可参考 https://github.com/staven630/vue-cli4-config。","text":"Vue 项目初始化较为简单，常用的基础配置可参考 https://github.com/staven630/vue-cli4-config。 ¶常用参考 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172var path = require('path')function resolve (dir) &#123; return path.join(__dirname, dir)&#125;module.exports = &#123; transpileDependencies: [/shengya-ui/], productionSourceMap: false, // 生产环境的 source map devServer: &#123; host: '0.0.0.0', port: '9000', disableHostCheck: true // 解决127.0.0.1指向其他域名时出现\"Invalid Host header\"问题 &#125;, configureWebpack: &#123; externals: &#123; vue: 'Vue', 'vue-router': 'VueRouter', vuex: 'Vuex', axios: 'axios', vant: 'vant', 'dingtalk-jsapi': 'dd' &#125; &#125;, publicPath: process.env.NODE_ENV !== 'development' ? './' : '/', outputDir: 'dist', chainWebpack: config =&gt; &#123; // key, value自行定义，比如.set('@@', resolve('src/components')) config.resolve.alias.set('vue$', 'vue/dist/vue.common.js') .set('@', resolve('src')) .set('mixData', resolve('src/mixins/mixData')) const cdn = &#123; css: ['//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vant/index.css'], js: [ '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vue/v2.6.11.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vue-router/v3.1.6.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vant/v2.9.0.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vuex/v3.1.2.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/axios/v0.19.2.min.js', '//wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/dingtalk-jsapi/dingtalk.open.js' ] &#125; // 如果使用多页面打包，使用vue inspect --plugins查看html是否在结果数组中 config.plugin('html').tap(args =&gt; &#123; // html中添加cdn args[0].cdn = cdn return args &#125;) &#125;, css: &#123; loaderOptions: &#123; // pass options to sass-loader sass: &#123; // @/ is an alias to src/ // so this assumes you have a file named `src/variables.scss` data: `@import '@/assets/stylesheets/scss/mixins/_variables.scss';` &#125;, postcss: &#123; plugins: [ require('postcss-pxtorem')(&#123; rootValue: 37.5, // 效果图375 propList: ['*'], // 属性的选择器，*表示通用 selectorBlackList: ['.px-'] // 忽略的选择器 .ig- 表示 .ig- 开头的都不会转换 &#125;) ], /* ** You can extend webpack config here */ extend(config, ctx) &#123; &#125; &#125; &#125; &#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"Git Submodules 的使用","slug":"2020-03-25-Git-Submodules","date":"2020-03-25T12:40:38.000Z","updated":"2020-03-25T12:40:38.000Z","comments":true,"path":"article/git-submodules.html","link":"","permalink":"https://liuxianyu.cn/article/git-submodules.html","excerpt":"git submodules 是为了多个项目（模块）都能够及时更新到最新的公共资源，解决需要把最新代码拷贝到各个项目的痛点。刚好最近公司开发的产品需要分为各个版本，但是主体功能一致，所以点上 git submodules 的技能点。对于 vue 项目，公共库可以分为 pages、components、styles 等几个目录。","text":"git submodules 是为了多个项目（模块）都能够及时更新到最新的公共资源，解决需要把最新代码拷贝到各个项目的痛点。刚好最近公司开发的产品需要分为各个版本，但是主体功能一致，所以点上 git submodules 的技能点。对于 vue 项目，公共库可以分为 pages、components、styles 等几个目录。 ¶一、准备项目 这篇随笔暂时只记录多个项目使用一个公共库的过程。 准备好公共库（以 git-public 为例，称为子模块），准备好使用子模块的项目若干（以 git-a 和 git-b 为例，称为主项目）。 ¶二、为主项目添加 submodules ¶2.1、主项目初次引入 在 git-a 主项目下执行：git submodules add &lt;url&gt; &lt;path&gt; 1git submodules add https://github.com/liuxy0551/git-public.git src/submodules ¶2.2、多人协同 ¶2.2.1、clone 如果你是第一次在项目中引入子模块的开发人员，那么项目新加入的成员可以按照以下方法 clone 带有 submodules 的项目： 123git clone https://github.com/liuxy0551/git-a.gitgit submodule initgit submodule update 或： 1git clone --recursive https://github.com/liuxy0551/git-a.git --recursive代表 clone 项目的同时 clone 关联的 submodules。 ¶2.2.2、pull 如果你是第一次在项目中引入子模块的开发人员，那么项目的其他成员可以按照以下方法 pull 到带有 submodules 的项目： 1git pull origin &lt;当前分支&gt; ¶三、获取、更新子模块代码 ¶3.1、获取子模块代码 在主项目中的子模块路径下执行： 1git pull origin master 多个子模块可在主项目路径下执行： 1git submodule foreach git pull origin master ¶3.2、更新子模块代码 ¶3.2.1、在子模块项目中更新 按照正常的 git 项目更新提交代码，其他开发成员获取参照3.1、获取子模块代码 ¶3.2.2、在主项目中更新子模块的代码 在子模块路径下按照正常的 git 项目更新提交代码，其他开发成员获取参照3.1、获取子模块代码。主项目的代码应在子模块的代码提交后再提交，否则主项目检测不到子模块具体的变动。 ¶四、删除 git submodules 删除公共库的步骤较为复杂，如下： ¶1、删除公共库目录及代码 1rm -rf src/submodules ¶2、删除（更改）子项目根目录下的 .gitmodules 1rm -rf .gitmodules ¶3、删除（更改）.git/config 文件中的公共库部分 1234// .git/config[submodule &quot;src/submodules&quot;] url = https://github.com/liuxy0551/git-public.git active = true ¶4、删除模块下的公共库目录 1rm -rf .git/modules/src ¶参考资料 1、Git Submodule使用完整教程 2、git submodules学习笔记","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"深拷贝和浅拷贝","slug":"2020-03-19-deep-copy-shallow-copy","date":"2020-03-19T21:12:49.000Z","updated":"2020-03-19T21:12:49.000Z","comments":true,"path":"article/deep-copy-shallow-copy.html","link":"","permalink":"https://liuxianyu.cn/article/deep-copy-shallow-copy.html","excerpt":"深拷贝、浅拷贝在实际开发中经常应用到，这里记录一些理解。","text":"深拷贝、浅拷贝在实际开发中经常应用到，这里记录一些理解。 ¶一、内存中的堆栈（heap、stack） JavaScript 中的数据类型以及内存分配 堆和栈都是内存中用来存储的区域：栈是自动分配的内存，由系统自动释放；堆是动态分配的内存，大小不定同时也不会自动释放。深拷贝和浅拷贝的区别也在于两者在内存中的存储类型有所不同。 介绍一下基本数据类型和引用数据类型的概念，基本数据类型包括：String、Number、Boolean、null、undefined 五类（es6 新引入 Symbol，代表独一无二的值），引用数据类型统称为 Object 类型，包括：对象、数组、Date、RefExp、函数等。 栈：基本数据类型存放在栈里面，数据段简单，数据大小也确定，占用内存空间大小确定，是直接按值存放的，可以直接访问。 堆：引用数据类型存放在堆里面，object 实际上是一个存放在栈内存的指针，这个指针指向的是堆内存中的地址。 注意 1、js 中基本数据类型的值不可变、引用数据类型的值可变 2、操作字符串返回的都是新字符串，并没有改变原有的字符串 3、基本数据类型比较值，引用数据类型比较引用是否指向同一个对象 ¶二、赋值（Copy） 基本数据类型：赋值，赋值之后两个变量互不影响 引用数据类型：赋址，两个变量具有相同的引用，指向同一个对象，相互之间有影响。 举个赋值的例子： 1234let a = 'old'let b = aa = 'new'console.log(a, b) // 'new', 'old' 举个赋址的例子： 1234let a = [1, 2, 3, 4, 5, 6]let b = aa[0] = 0console.log(a, b) // [0, 2, 3, 4, 5, 6], [0, 2, 3, 4, 5, 6] ¶三、浅拷贝（ShallowCopy） 拷贝原始对象，如果原始对象的属性是基本数据类型，拷贝的就是基本数据类型的值；如果原始对象的属性是引用数据类型，那么拷贝的就是引用数据类型的内存地址，如果两个对象中的某一个改变属性值从而影响内存地址，则另一个对象也会受到影响。 ¶1、Object.assign() Object.assign() 可以将多个对象的属性复制到目标对象，返回目标对象。下面的代码中，改变对象 a 之后，b 对象的属性中，基本数据类型保持不变，但是引用数据类型发生了对应的变化。 1234567891011121314let a = &#123; name: 'old', info: &#123; sex: 1, height: 170 &#125;&#125;let b = Object.assign(&#123;&#125;, a)console.log(b) // &#123; name: 'old', info: &#123; sex: 1, height: 170 &#125;&#125;a.name = 'new'a.info.height = 185console.log(a) // &#123; name: 'new', info: &#123; sex: 1, height: 185 &#125;&#125;console.log(b) // &#123; name: 'old', info: &#123; sex: 1, height: 185 &#125;&#125; ¶2、… 解构 展开语法(Spread syntax) 通过实验可以看出效果和Object.assgin()一致。 1234567891011121314let a = &#123; name: 'old', info: &#123; sex: 1, height: 170 &#125;&#125;let b = &#123; ...a &#125;console.log(b) // &#123; name: 'old', info: &#123; sex: 1, height: 170 &#125;&#125;a.name = 'new'a.info.height = 185console.log(a) // &#123; name: 'new', info: &#123; sex: 1, height: 185 &#125;&#125;console.log(b) // &#123; name: 'old', info: &#123; sex: 1, height: 185 &#125;&#125; ¶3、Array.slice() slice() 方法的效果可以说明slice()方法是浅拷贝。 12345let a = ['old', true, [0, 1]]let b = a.slice()b[0] = 'new'b[2][0] = 1console.log(a, b) // ['old', true, [1, 1]], ['new', true, [1, 1]] ¶4、Array.concat() concat() 方法也是浅拷贝，同slice()。 ¶四、深拷贝（DeepCopy） 在深拷贝时，会复制原始对象所有的属性，并分配新的内存地址，相比浅拷贝性能消耗较大且速度较慢。拷贝前后的两个对象互不影响。 ¶1、JSON.parse(JSON.stringify(object)) JSON.parse()、JSON.stringify() 可以达到下述代码中的完全改变 a 而不影响 b 的效果。 1234567891011121314let a = &#123; name: 'old', info: &#123; sex: 1, height: 170 &#125;&#125;let b = JSON.parse(JSON.stringify(a))console.log(b) // &#123; name: 'old', info: &#123; sex: 1, height: 170 &#125;&#125;a.name = 'new'a.info.height = 185console.log(a) // &#123; name: 'new', info: &#123; sex: 1, height: 185 &#125;&#125;console.log(b) // &#123; name: 'old', info: &#123; sex: 1, height: 170 &#125;&#125; 数组的深拷贝也可以进行，但是JSON.parse(JSON.stringify(object))有几个问题： 会忽略 undefined、symbol 和 function 处理循环引用的对象会报错 new Date() 的转换结果不正确，可以考虑转换成字符串或者时间戳再深拷贝 不能处理正则 ¶2、递归写法 基础类型 引用类型 RegExp、Date、函数 不是 JSON 安全的 会丢失 constructor，所有的构造函数都指向 Object 破解循环引用 1234567891011121314function deepCopy (obj) &#123; let result if (typeof obj === 'object') &#123; result = obj.constructor === Array ? [] : &#123;&#125; for (var i in obj) &#123; result[i] = typeof obj[i] === 'object' ? deepCopy(obj[i]) : obj[i] &#125; &#125; else &#123; result = obj &#125; return result&#125; ¶3、jQuery.extend() 中文文档、英文文档 ¶4、lodash.cloneDeep() lodash.cloneDeep() ¶参考资料 1、详细解析赋值、浅拷贝和深拷贝的区别 2、js 深拷贝 vs 浅拷贝 3、JavaScript专题之深浅拷贝","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"wepy 常用指令","slug":"2020-03-06-wepy-command","date":"2020-03-06T20:44:30.000Z","updated":"2020-03-06T20:44:30.000Z","comments":true,"path":"article/wepy-command.html","link":"","permalink":"https://liuxianyu.cn/article/wepy-command.html","excerpt":"记录一下 wepy 框架常用指令","text":"记录一下 wepy 框架常用指令 wepy 1.x 文档、wepy 2.x 文档、微信小程序wepy框架开发资源汇总 ¶1、全局安装指定版本（2.x） 1npm i @wepy/cli@2.0.0-alpha.20 -g ¶2、查看当前项目 wepy 版本 1npx wepy -v ¶3、生成开发实例（2.x） 因为 wepy 2.x 是 alpha 版本，所以一直不是很稳定，可能创建失败，临时解决方法见 修改 Hosts 文件临时解决 raw.githubusercontent.com 无法访问的问题 1wepy init standard myproject ¶4、开发实时编译（更新缓存） 1wepy build --no-cache --watch","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"wepy","slug":"wepy","permalink":"https://liuxianyu.cn/tags/wepy/"}],"author":"liuxy0551"},{"title":"修改 Hosts 文件临时解决 raw.githubusercontent.com 无法访问的问题","slug":"2020-03-06-hosts-githubusercontent","date":"2020-03-06T19:20:07.000Z","updated":"2020-03-06T19:20:07.000Z","comments":true,"path":"article/hosts-githubusercontent.html","link":"","permalink":"https://liuxianyu.cn/article/hosts-githubusercontent.html","excerpt":"最近利用 wepy 2.x 创建项目的时候发现，因为 wepy 2.x 是 alpha 版本，所以一直不是很稳定，无法访问 https://raw.githubusercontent.com 。","text":"最近利用 wepy 2.x 创建项目的时候发现，因为 wepy 2.x 是 alpha 版本，所以一直不是很稳定，无法访问 https://raw.githubusercontent.com 。 ¶1、查询真实 IP 通过 https://www.ipaddress.com/ 查询到raw.githubusercontent.com的真实 IP 地址： ¶2、修改 Hosts 文件 1vim /etc/hosts 添加如下内容保存即可。 1199.232.68.133 raw.githubusercontent.com","categories":[{"name":"Hosts","slug":"Hosts","permalink":"https://liuxianyu.cn/categories/Hosts/"}],"tags":[{"name":"github","slug":"github","permalink":"https://liuxianyu.cn/tags/github/"},{"name":"Hosts","slug":"Hosts","permalink":"https://liuxianyu.cn/tags/Hosts/"}],"author":"liuxy0551"},{"title":"JS 实现数组元素交换","slug":"2020-03-04-array-swap","date":"2020-03-04T14:03:00.000Z","updated":"2020-03-04T14:03:00.000Z","comments":true,"path":"article/array-swap.html","link":"","permalink":"https://liuxianyu.cn/article/array-swap.html","excerpt":"最近涉及到试卷出题的业务需求，其实去年3月份也做过类似的需求。在一套试卷中，题目需要可以上下移动位置，记录一下实现的原理。","text":"最近涉及到试卷出题的业务需求，其实去年3月份也做过类似的需求。在一套试卷中，题目需要可以上下移动位置，记录一下实现的原理。 ¶一、实现效果 ¶二、实现原理 1234567891011swapArray (arr, index1, index2) &#123; arr[index1] = arr.splice(index2, 1, arr[index1])[0]&#125;,// 下移indexUp () &#123; this.swapArray(arr, index, index + 1)&#125;,// 上移indexDown () &#123; this.swapArray(arr, index, index - 1)&#125; 在线 Demo 实现效果中的代码 Github ¶参考资料 1、js 实现数组元素交换位置","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"初识钉钉小程序","slug":"2020-02-12-dingtalk","date":"2020-02-12T14:43:53.000Z","updated":"2020-02-12T14:43:53.000Z","comments":true,"path":"article/dingtalk.html","link":"","permalink":"https://liuxianyu.cn/article/dingtalk.html","excerpt":"之前接触过微信小程序，这次因公司业务需要，了解一下钉钉小程序。","text":"之前接触过微信小程序，这次因公司业务需要，了解一下钉钉小程序。 ¶一、实现效果 https://github.com/liuxy0551/DingTalk-ToDoList ¶二、文档、开发工具 钉钉开发文档、小程序开发工具 ¶三、理解与注意事项 1、和微信原生开发比较接近，一个页面四个文件 2、事件名需要 on 或者 catch 开头 … ¶四、源码 https://github.com/liuxy0551/DingTalk-ToDoList （一）、ToDoList 待解答的问题 1、axml 文件标签上如何使用 filter、map 2、onChange 方法中 setData 写法如何优化 3、onShow 如何调用自定义方法，目前是将自定义方法写在 Page.data 中 （二）、父子组件传值与事件调用 [x] 1、父传子 [x] 2、子传父 [x] 3、子组件调用父组件的方法 [ ] 4、父组件调用子组件的方法 （三）、封装网络请求 [x] 1、get [x] 2、post","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"钉钉小程序","slug":"前端/钉钉小程序","permalink":"https://liuxianyu.cn/categories/前端/钉钉小程序/"}],"tags":[{"name":"钉钉","slug":"钉钉","permalink":"https://liuxianyu.cn/tags/钉钉/"},{"name":"钉钉小程序","slug":"钉钉小程序","permalink":"https://liuxianyu.cn/tags/钉钉小程序/"}],"author":"liuxy0551"},{"title":"前端学习 Docker 之旅（四）—— 安装 mysql 并启动、连接，修改时区","slug":"2020-02-06-docker-c","date":"2020-02-06T12:04:22.000Z","updated":"2020-12-15T14:21:12.000Z","comments":true,"path":"article/docker-c.html","link":"","permalink":"https://liuxianyu.cn/article/docker-c.html","excerpt":"这两年 Docker 比较火，很多大厂都在使用。这里记录一下 Cent OS 中使用 Docker 安装 mysql 并启动、连接的过程。","text":"这两年 Docker 比较火，很多大厂都在使用。这里记录一下 Cent OS 中使用 Docker 安装 mysql 并启动、连接的过程。 建议切换 root 用户进行以下操作 ¶一、安装 mysql ¶1、查找镜像 在 Docker Hub 官网查找自己需要的版本 https://hub.docker.com/_/mysql?tab=tags ¶2、下载镜像 我选择的是 5.7 版本： 1docker pull mysql:5.7 ¶3、创建项目文件夹并进入 仅限服务器端本地创建一个文件夹用来存放 mysql 的配置文件、日志以及数据等（也就是挂载目录，作用是将此目录中的文件或文件夹覆盖掉容器内部的文件或文件夹） 12mkdir -p /mnt/docker/mysqlcd /mnt/docker/mysql ¶二、运行 mysql ¶1、使用镜像创建容器并运行 1docker run -p 6033:3306 -d --name mysql-5.7 -v $PWD/conf:/etc/mysql/conf.d -v $PWD/logs:/logs -v $PWD/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7 指令解释： -p 表示端口映射，-p 宿主机 port:容器 port -d 表示后台运行并返回容器 id，只有在父进程即 docker 进程退出的时候才会去把容器退出，除非你使用了--rm选项。如果你在运行容器时将-d和--rm两个选项一起使用，那么容器会在退出或者后台进程停止的的时候自动移除掉（只要一个情况便会自动移除镜像） --name 表示给容器指定的名称 -v $PWD/conf:/etc/mysql/conf.d 表示将主机上当前目录下的 conf/my.cnf 文件挂载到容器的 /etc/mysql/my.cnf -v $PWD/logs:/logs 表示将主机上当前目录下的 logs 目录挂载到容器的 /logs -v $PWD/data:/var/lib/mysql 表示将主机上当前目录下的 data 目录挂载到容器的 /var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 表示初始化 root 用户的密码 注意 本地 Docker 安装 mysql 时可以不使用 -v 挂载文件夹，如下： 1docker run -p 3306:3306 -d --name mysql-5.7 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7 ¶2、进入容器 1docker exec -it mysql-5.7 bash ¶3、进入 mysql 1mysql -uroot -p123456 ¶4、可能用到的命令 1mysql_upgrade -u root -p --force ¶5、mysql 修改密码 需要先进入 mysql 再执行： 12update mysql.user set authentication_string=password('newPassword') where user='root';flush privileges; ¶三、Linux 修改时间及时区 ¶1、查看本机时间 1date 在 Linux 中与时间相关的文件有：/etc/localtime、/etc/timezone ¶2、修改本机时间 1cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime 在/usr/share/zoneinfo下存放着不同时区格式的时间文件，执行以上命令，可以将本机时间调整至目标时区的时间格式。但是调整了时间格式，本机所属的时区是保持不变的！ ¶3、修改本机时区 在 Linux 中，有一些程序会自己计算时间，不会直接采用带有时区的本机时间格式，会根据 UTC 时间和本机所属的时区等计算出当前的时间，new 出来的时间还是 UTC 时间，所以必须得修正本机的时区。 1echo &apos;Asia/Shanghai&apos; &gt;/etc/timezone ¶四、mysql 修改时间 1select now(); 执行 yum install vim -y 然后执行 vim /etc/my.cnf 在 [mysqld] 区域中加上 default-time_zone = '+8:00' 12docker stop mysql-5.7docker start mysql-5.7 ¶五、egg 中连接 mysql 的 docker 容器报错 egg 连接 mysql 的 docker 容器，报错：Client does not support authentication protocol requested by server; consider upgrading MySQL client ¶解决办法 mysql 中执行如下语句： 1ALTER USER &apos;root&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;你的密码&apos;; % 表示允许来自任何 ip 的连接 localhost 表示允许本机的连接","categories":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/categories/Docker/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://liuxianyu.cn/tags/mysql/"},{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/tags/Docker/"}],"author":"liuxy0551"},{"title":"前端学习 Docker 之旅（三）—— Cent OS 中安装 Docker","slug":"2020-02-05-cent-os-docker","date":"2020-02-05T20:21:58.000Z","updated":"2020-02-05T20:21:58.000Z","comments":true,"path":"article/cent-os-docker.html","link":"","permalink":"https://liuxianyu.cn/article/cent-os-docker.html","excerpt":"Docker 官方要求 Linux 内核版本至少3.8以上。","text":"Docker 官方要求 Linux 内核版本至少3.8以上。 ¶一、Cent OS 版本 1cat /etc/redhat-release 1uname -r ¶二、设置 yum 源 可选 选择其中一个：阿里仓库【推荐】、中央仓库 阿里仓库1yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo 中央仓库1yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo ¶三、安装 Docker 1yum install docker-ce -y ¶四、启动 Docker 1、root 用户操作： 开机自启动 Docker1systemctl enable docker 启动 Docker1systemctl start docker 2、查看 Docker 是否安装成功： 1docker -v 附：前端学习 Docker 之旅（二）—— 常用指令","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"Cent OS","slug":"Linux/Cent-OS","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/"}],"tags":[{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"},{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/tags/Docker/"}],"author":"liuxy0551"},{"title":"前端学习 Docker 之旅（二）—— 常用指令","slug":"2020-02-05-docker-b","date":"2020-02-05T11:07:16.000Z","updated":"2024-01-08T10:37:16.000Z","comments":true,"path":"article/docker-b.html","link":"","permalink":"https://liuxianyu.cn/article/docker-b.html","excerpt":"这两年 Docker 比较火，很多大厂都在使用。这里记录一下常用的指令。","text":"这两年 Docker 比较火，很多大厂都在使用。这里记录一下常用的指令。 ¶1、docker run docker 进程运行于独立的容器中，而容器是宿主机的一个进程，宿主机可以是本地的也可以是远程的。每当执行docker run之后，容器进程是独立运行的，它有自己的文件系统、网络以及与宿主机隔离的进程。原文 ¶2、docker run 和 docker start 的区别 docker run docker run 只在第一次运行时使用，根据镜像生成容器，以后再次启动这个容器时，只需要使用命令 docker start 即可。docker run 相当于执行了两步操作：根据镜像生成容器，然后将容器启动，使之变成运行时容器（docker start） docker start docker start 的作用是重新启动已存在的镜像。也就是说，如果使用这个命令，我们必须事先知道这个容器的 container_id 或 container_name，可以使用 docker ps 找到这个容器的信息 ¶3、查看镜像列表 1docker images ¶4、删除某个镜像 1docker rmi -f [image_id]/[image_name] ¶5、查看容器列表 1docker ps -a 或 docker container ls -a ¶6、删除某个容器 1docker rm -f [container_id]/[container_name] ¶7、查看正在运行的容器列表 1docker ps 或 docker container ls ¶8、复制主机的文件到容器内 1docker cp test.sh [container_id]:/mnt/ ¶9、进入容器 1docker exec -it [container_id]/[container_name] /bin/bash ¶10、进入容器并执行脚本 1docker exec -it [container_id]/[container_name] /bin/bash /mnt/test.sh ¶11、开始/停止某个容器 1docker start/stop [container_id]/[container_name] ¶12、重命名容器 1docker rename old_name new_name ¶13、停止所有容器 1docker-compose stop ¶14、docker cp 123456789101112131415# docker cp --helpUsage: docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-从容器中复制文件或目录到执行命令所在机器的指定路径 docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH从执行命令所在的机器复制文件或目录到容器内部的指定路径Copy files/folders between a container and the local filesystem在容器和本地文件系统之间复制文件/文件夹Options: -a, --archive Archive mode (copy all uid/gid information) 归档模式（复制所有UID / GID信息） -L, --follow-link Always follow symbol link in SRC_PATH 总是跟在源地址符号链接 ¶14、基于 Dockerfile 创建镜像 注意 不要丢失 build 命令后的. 1docker build -t IMAGE_REPOSITORY:IMAGE_TAG . 或 1docker build -f DockerfilePHP -t IMAGE_REPOSITORY:IMAGE_TAG . 指令解释： -t 指定镜像标签 -f 指定生成镜像默认的依赖文件，不使用时，默认依赖当前路径下的 Dockerfile 文件 运行完上述命令后可以运行docker images查看生成了新镜像","categories":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/tags/Docker/"}],"author":"liuxy0551"},{"title":"前端学习 Docker 之旅（一）—— 基础理解","slug":"2020-02-04-docker-a","date":"2020-02-04T20:19:09.000Z","updated":"2020-02-04T20:19:09.000Z","comments":true,"path":"article/docker-a.html","link":"","permalink":"https://liuxianyu.cn/article/docker-a.html","excerpt":"这两年 Docker 比较火，很多大厂都在使用。最近学习了点基础知识，记录一下。","text":"这两年 Docker 比较火，很多大厂都在使用。最近学习了点基础知识，记录一下。 ¶一、关于 Docker Docker 可以理解为高性能的虚拟机，主要用于 Linux 环境的虚拟化。Docker 专门为了服务器虚拟化，并支持镜像分享等功能。 ¶二、三个概念 ¶1、镜像（Image） Image 与 Container 的关系就像类与实例的关系，p 是容器，Person 是镜像： 1let p = new Person() ¶2、容器（Container） Docker 容器里存放着我们写的代码，然后 Docker 载着代码在宿主机里运行。 ¶3、仓库（Repository） 仓库用来存放镜像，类似于 GitHub。 ¶三、虚拟化的区别 Docker 的虚拟化是在系统层面实现 虚拟机的虚拟化是在硬件层面实现 ¶四、注意 创建镜像后，只要不启动就不会生成容器，更不会启动容器","categories":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/tags/Docker/"}],"author":"liuxy0551"},{"title":"mysql 入门 - 数据类型","slug":"2020-02-03-mysql-a","date":"2020-02-03T21:12:59.000Z","updated":"2020-02-03T21:12:59.000Z","comments":true,"path":"article/mysql-a.html","link":"","permalink":"https://liuxianyu.cn/article/mysql-a.html","excerpt":"最近在学习 node，先学习一下相关的基础，捡起以前的数据库知识，这里记录一下 mysql 的数据类型。","text":"最近在学习 node，先学习一下相关的基础，捡起以前的数据库知识，这里记录一下 mysql 的数据类型。 ¶一、常见数值类型 数据类型 占用大小 范围（有符号） 范围（无符号） 用途 TINYINT 1 字节 (-128, 127) (0, 255) 小整数值 INT 或 INTEGER 4 字节 (-2 147 483 648, 2 147 483 647) (0, 4 294 967 295) 大整数值 FLOAT 4 字节 (-3.402 823 466 E+38, -1.175 494 351 E-38), 0, (1.175 494 351 E-38, 3.402 823 466 351 E+38) 0, (1.175 494 351 E-38, 3.402 823 466 E+38) 单精度浮点数值 DOUBLE 8 字节 (-1.797 693 134 862 315 7 E+308, -2.225 073 858 507 201 4 E-308), 0, (2.225 073 858 507 201 4 E-308, 1.797 693 134 862 315 7 E+308) 0, (2.225 073 858 507 201 4 E-308, 1.797 693 134 862 315 7 E+308) 双精度浮点数值 有符号：默认为有符号，从负数到正数的取值范围 无符号（UNSIGNED）：没有负数，最低从 0 开始 对于平常开发来说，整数类型其实到 INT 的数值范围已经很大了。 建表时经常看到类似 INT(5) 后面有个 5，它表示显示宽度 (M)，M 的值不能大于取值范围长度。 举个例子： 如果 age 字段类型是 INT(5) UNSIGNED ZEROFILL，插入一条数据 age 为 99，最后显示为：00099 UNSIGNED 为无符号， ZEROFILL 的作用是用 0 填充没有数字的位置 ¶二、常见字符串类型 数据类型 占用大小 用途 CHAR 0-255 字节 定长字符串 VARCHAR 0-65535 字节 变长字符串 TINYTEXT 0-255 字节 短文本字符串 TEXT 0-65535 字节 长文本字符串 MEDIUMTEXT 0-16 777 215 字节 中等长度文本数据 LONGTEXT 0-4 294 967 295 字节 极大文本数据 通常情况下，用的比较多的就是 CHAR、VARCHAR、TEXT 了。在 mysql 的 UTF8 编码下： 1 个英文字母（包括大小写）占 1 个字节 1 个汉字占 3 个字节 ¶三、常见日期/时间类型 数据类型 占用大小 范围 格式 用途 DATE 3 字节 1000-01-01/9999-12-31 YYYY-MM-DD 日期值 TIME 3 字节 ‘-838:59:59’/‘838:59:59’ HH:MM:SS 时间值或持续时间 DATETIME 8 字节 1000-01-01 00:00:00/9999-12-31 23:59:59 YYYY-MM-DD HH:MM:SS 混合日期和时间值 TIMESTAMP 4 字节 1970-01-01 00:00:00/2038 （结束时间是第 2147483647 秒，北京时间 2038-1-19 11:14:07，格林尼治时间 2038年1月19日 凌晨 03:14:07） YYYYMMDD HHMMSS 混合日期和时间值，时间戳 在开发中，常用的是 DATETIME 和 TIMESTAMP。","categories":[{"name":"数据库","slug":"数据库","permalink":"https://liuxianyu.cn/categories/数据库/"},{"name":"mysql","slug":"数据库/mysql","permalink":"https://liuxianyu.cn/categories/数据库/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://liuxianyu.cn/tags/mysql/"}],"author":"liuxy0551"},{"title":"用 Koa2 写 GET、POST 测试接口","slug":"2020-02-02-koa-get-post","date":"2020-02-02T23:21:42.000Z","updated":"2020-02-02T23:21:42.000Z","comments":true,"path":"article/koa-get-post.html","link":"","permalink":"https://liuxianyu.cn/article/koa-get-post.html","excerpt":"刚接触 Koa2 框架，用 Koa2 写一下 GET 和 POST 接口，平常开发中可以测试使用。","text":"刚接触 Koa2 框架，用 Koa2 写一下 GET 和 POST 接口，平常开发中可以测试使用。 ¶1、新建文件夹，并初始化 123mkdir koa2-democd koa2-demonpm init -y ¶2、安装 koa、koa-router 1npm i koa koa-router koa-bodyparser -S ¶3、新增 app.js 通过vim app.js命令创建 app.js 文件并保存。代码见：koa-get-post-demo/app.js 123456789101112131415161718192021222324252627282930313233343536373839// 引入模块const Koa = require('koa')const router = require('koa-router')() // 引入并实例化const bodyParser = require('koa-bodyparser')// 实例化const app = new Koa()// 配置中间件，通过 bodyParser 获取 post 请求传递过来的参数app.use(bodyParser())// GET 接口router.get('/news', ctx =&gt; &#123; const &#123; search &#125; = ctx.query ctx.body = &#123; time: new Date(), data: [ &#123; title: `新闻标题 1 - $&#123; search &#125;` &#125;, &#123; title: `新闻标题 2 - $&#123; search &#125;` &#125; ] &#125;&#125;)// POST 接口router.post('/say', ctx =&gt; &#123; const &#123; name &#125; = ctx.request.body ctx.body = &#123; time: new Date(), reply: `Hello $&#123; name &#125;!` &#125;&#125;)app.use(router.routes()) // 启动路由app.listen(3000, () =&gt; &#123; console.log('Server is running on 3000')&#125;) // 启动服务 ¶4、启动服务 1node app.js 访问 http://localhost:3000/news?search=科技 查看效果。 启动服务推荐使用nodemon —— node 自动编译 ¶5、测试","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Koa2","slug":"node/Koa2","permalink":"https://liuxianyu.cn/categories/node/Koa2/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Koa2","slug":"Koa2","permalink":"https://liuxianyu.cn/tags/Koa2/"}],"author":"liuxy0551"},{"title":"接触 Koa2 框架","slug":"2020-02-02-learn-koa","date":"2020-02-02T22:46:03.000Z","updated":"2020-09-15T11:35:14.000Z","comments":true,"path":"article/learn-koa.html","link":"","permalink":"https://liuxianyu.cn/article/learn-koa.html","excerpt":"刚接触 Koa2 框架，记录一下基础知识。学习过程代码可在 Github - learn-koa 查看。","text":"刚接触 Koa2 框架，记录一下基础知识。学习过程代码可在 Github - learn-koa 查看。 ¶一、Koa ¶1、安装 Koa 框架 1npm i koa -S ¶2、引入 Koa 1234567891011// 引入模块const Koa = require('koa')const app = new Koa()// 配置中间件app.use(async ctx =&gt; &#123; ctx.body = '你好 koa'&#125;)// 监听端口app.listen(9000) ¶二、Koa 路由 ¶1、安装 Koa 路由 1npm i koa-router -S 路由就是根据不同的 URL 地址，加载不同的页面实现不同的功能。运行以下代码后在浏览器地址栏输入 localhost:9000 可以看到&quot;首页&quot;，输入 localhost:9000/news 可以看到&quot;新闻&quot;。 123456789101112131415161718192021222324252627282930313233343536373839404142// 引入模块const Koa = require('koa')const router = require('koa-router')() // 引入并实例化// 实例化let app = new Koa()// 配置路由// ctx 上下文 context，包含了 request 和 response 等信息router .get('/', async ctx =&gt; &#123; ctx.body = '首页' &#125;) .get('/news', async ctx =&gt; &#123; ctx.body = '新闻列表' &#125;) // get 传值 .get('/newscontent', async ctx =&gt; &#123; // 访问 http://localhost:9000/newscontent?aid=123&amp;name=zhangsan console.log(ctx.query) console.log(ctx.request.query) // &#123; aid: '123', name: 'zhangsan' &#125; 对象 ctx.body = '新闻详情' &#125;) // 动态路由 .get('/newsdetail/:id', async ctx =&gt; &#123; // 访问 http://localhost:9000/newsdetail/1234 console.log(ctx.params) // &#123; id: 1234 &#125; ctx.body = '新闻详情 - 动态路由' &#125;) // 动态路由可以传入多个值 .get('/newsdetail/:aid/:bid', async ctx =&gt; &#123; // 访问 http://localhost:9000/newsdetail/1234/5678 console.log(ctx.params) // &#123; aid: 1234, bid: 5678 &#125; ctx.body = '新闻详情 - 动态路由 - 传入多个值' &#125;)app .use(router.routes()) // 启动路由 .use(router.allowedMethods()) // router.allowedMethods() 用在路由匹配 router.routes() 之后，所以在当所有路由中间件最后调用，此时根据 ctx.status 设置 response 响应头app.listen(9000)console.log('请浏览器打开 http://localhost:9000 或 http://localhost:9000') ¶2、Koa 路由 get 传值 在 Koa2 中 GET 传值通过 ctx 或 ctx.request 接收；动态路由传值可通过 ctx.params 接收。代码见 Github - learn-koa/app03.js query 返回的是格式化好的参数对象推荐 queryString 返回的是请求字符串 ¶三、中间件 ¶1、应用级中间件 代码见 Github - learn-koa/app04.js ¶2、路由中间件 代码见 Github - learn-koa/app05.js ¶3、错误处理中间件 代码见 Github - learn-koa/app06.js ¶4、中间件处理顺序 - Koa2 的洋葱模型 代码见 Github - learn-koa/app07.js","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Koa2","slug":"node/Koa2","permalink":"https://liuxianyu.cn/categories/node/Koa2/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Koa2","slug":"Koa2","permalink":"https://liuxianyu.cn/tags/Koa2/"}],"author":"liuxy0551"},{"title":"node 学习笔记","slug":"2020-02-01-learn-node","date":"2020-02-01T14:59:49.000Z","updated":"2020-02-01T14:59:49.000Z","comments":true,"path":"article/learn-node.html","link":"","permalink":"https://liuxianyu.cn/article/learn-node.html","excerpt":"记录一下 node 的学习笔记，学习过程代码可在 Github 查看。","text":"记录一下 node 的学习笔记，学习过程代码可在 Github 查看。","categories":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"}],"tags":[{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"}],"author":"liuxy0551"},{"title":"JavaScript 中的原型和原型链","slug":"2020-01-07-js-prototype","date":"2020-01-07T12:17:36.000Z","updated":"2020-10-21T10:34:54.000Z","comments":true,"path":"article/js-prototype.html","link":"","permalink":"https://liuxianyu.cn/article/js-prototype.html","excerpt":"这里做做原型和原型链的笔记。","text":"这里做做原型和原型链的笔记。 文字理解： 每个函数都有一个prototype属性，当这个函数作为构造函数的时候，实例化出来的函数(以下称实例)会有一个__proto__属性，这个__proto__属性指向构造函数的prototype。 实例通过prototype来访问其父元素的属性和方法，依次迭代访问构成原型链，直到 Object 原型的prototype为null，此时位于原型链的顶端。 每个实例原型都有一个constructor属性指向关联的构造函数。 ¶一、构造函数创建对象 ¶1、prototype 每个函数都有一个 prototype 属性，如利用构造函数 Student 创建实例对象 stuA 和 stuB： 12345678function Student () &#123; &#125;Student.prototype.name = 'Simon'let stuA = new Student()let stuB = new Student()console.log(stuA.name) // Simonconsole.log(stuB.name) // Simon 函数的 prototype 属性指向调用该构造函数而创建的实例的原型，也就是上述代码中 stuA 和 stuB 的原型，如下图： ¶2、__proto__ 这是每一个 JavaScript 对象（除 null）都具有的一个属性，这个属性会指向该对象的原型。验证： 12345function Student () &#123; &#125;let stu = new Student()console.log(stu.__proto__ === Student.prototype) // true 实例对象和构造函数都可以指向原型，如下图： ¶3、constructor 12345function Student () &#123; &#125;let stu = new Student()console.log(Student === Student.prototype.constructor) // true 每个原型都有一个 constructor 属性指向关联的构造函数，如下图所示构造函数、实例原型和实例之间的关系： 综上可以得出： 1234567function Student () &#123; &#125;let stu = new Student()console.log(stu.__proto__ === Student.prototype) // trueconsole.log(Student.prototype.constructor === Student) // trueconsole.log(Object.getPrototypeOf(stu) === Student.prototype) // true, getPrototypeOf 可以获得对象的原型 ¶实例与原型 当读取实例对象的属性时，如果找不到，则查找与对象关联的原型中的该属性，如果还是找不到，则去查找原型的原型，一直找到最顶层。如： 123456789function Student () &#123; &#125;Student.prototype.name = 'zhangsan'let stu = new Student()stu.name = 'lisi'console.log(stu.name) // lisidelete stu.nameconsole.log(stu.name) // zhangsan 在 delete 了实例 stu 的 name 属性后，从 stu 就找不到 name 属性就会从 stu 的原型也就是stu.__proto__，也就是 Student.prototype 中查找 name 属性。 ¶原型的原型 如果在 stu 的原型没有找到 name 属性的话，就会在 stu 的原型的原型上查找 name 属性，那原型的原型是什么呢？ 前面有提到原型也是对象，其实原型对象就是通过 Object 构造函数创建的，实例的 proto 指向构造函数的 prototype，如下图： ¶原型链 那么 Object.prototype 的原型呢？ 1console.log(Object.prototype.__proto__) // null Object.prototype 的原型是 null，即 Object.prototype 没有原型。意味着查找属性的时候查到 Object.prototype 就可以停止查找了。 上图中相互关联的原型组成的链状结构就是原型链，也就是上图中蓝色的线。","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"H5 中的 Audio","slug":"2019-12-23-h5-audio","date":"2019-12-23T19:57:46.000Z","updated":"2019-12-23T19:57:46.000Z","comments":true,"path":"article/h5-audio.html","link":"","permalink":"https://liuxianyu.cn/article/h5-audio.html","excerpt":"最近这个项目中在做题的时候需要播放语音，浏览器上自动播放 audio 或者 video 一直有这样或那样的限制和兼容问题。这里记录一下实现过程。","text":"最近这个项目中在做题的时候需要播放语音，浏览器上自动播放 audio 或者 video 一直有这样或那样的限制和兼容问题。这里记录一下实现过程。 属性 描述 src 音频 URL muted 规定音频输出时应该被静音 autoplay 音频在就绪后马上播放 controls 向用户显示控件，如播放按钮 loop 每当音频结束时重新开始播放 preload 音频在页面加载时进行加载，并预备播放。如果同时使用了 autoplay，则忽略该属性 浏览器为了提高用户体验，减少数据消耗，audio 的 autoplay 实现需要绕弯子： 1、发生了用户行为，如：click、tap、etc 2、监听最外层 div 的鼠标移入事件，&lt;div (mouseenter)=“play()”&gt; 待验证 否则，在 mounted 中直接调用this.Player.play()时 Chrome 会报错Uncaught (in promise) DOMException: play() failed because the user didn't interact with the document first. ¶一、封装 js 方法 先写一个公用 js 文件：AudioPlayer.js 1234567891011121314151617181920212223class AudioPlayer &#123; constructor (audioList = [], options = null) &#123; options = Object.assign(&#123; speed: 1.0, onEnd: null &#125;, options) this.onEnd = options.onEnd if (audioList) &#123; this.audio = document.createElement('audio') this.audio.src = audioList[0] || audioList[1] // this.audio.muted = true // this.audio.autoplay = 'autoplay' // 播放速度 this.audio.playbackRate = options.speed &#125; &#125; // 开始播放 play () &#123; this.audio.play() this.onEnd &amp;&amp; this.audio.addEventListener('ended', () =&gt; &#123; this.onEnd() &#125;) &#125;&#125;export default AudioPlayer ¶二、使用 12345678910111213141516171819import AudioPlayer from '../utils/media/AudioPlayer'export default &#123; data () &#123; return &#123; Player: null &#125; &#125;, methods: &#123; // 点击播放按钮 playBtn () &#123; this.Player.audio.muted = false this.Player.play() &#125; &#125;, mounted () &#123; this.Player = new AudioPlayer(audioList, &#123; speed: 1.25 &#125;) &#125;&#125; ¶参考资料 1、Chrome 66禁止声音自动播放之后","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"HTML","slug":"前端/HTML","permalink":"https://liuxianyu.cn/categories/前端/HTML/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"https://liuxianyu.cn/tags/HTML/"}],"author":"liuxy0551"},{"title":"使用 CSS 绘制内外不同圆角的矩形、钝角三角形","slug":"2019-12-20-CSS-rectangle-triangle","date":"2019-12-20T14:59:49.000Z","updated":"2019-12-20T14:59:49.000Z","comments":true,"path":"article/css-rectangle-triangle.html","link":"","permalink":"https://liuxianyu.cn/article/css-rectangle-triangle.html","excerpt":"最近做的项目中 UI 同学给了个内外不同圆角的矩形和钝角三角形的设计，这里记录一下完成过程。","text":"最近做的项目中 UI 同学给了个内外不同圆角的矩形和钝角三角形的设计，这里记录一下完成过程。 ¶一、实现效果 矩形内部圆角和外部圆角不一致，钝角三角形上不完全覆盖另一个钝角三角形的图案，且两个钝角处圆润程度不一致。 前期项目赶时间的时候用直角三角形实现了，本着不偷工减料及钻研的态度，利用伪类按照设计图实现了一下。蓝色为设计图部分，绿色为实现部分。 ¶二、矩形代码 具体实现代码可参考：rectangle.vue 1、HTML 1&lt;div class=\"rectangle\"&gt;&lt;/div&gt; 2、CSS 123456789101112131415161718192021.rectangle &#123; position: relative; &amp;:before, &amp;:after &#123; content: ''; position: absolute; &#125; &amp;:before &#123; width: 325px; height: 180px; border-radius: 15px; background-color: #41b883; &#125; &amp;:after &#123; width: 305px; height: 160px; top: 10px; left: 10px; border-radius: 5px; background-color: #fff; &#125;&#125; ¶三、钝角三角形代码 具体实现代码可参考：triangle.vue 1、HTML 1&lt;div class=\"triangle\"&gt;&lt;/div&gt; 2、CSS 12345678910111213141516171819202122232425.triangle &#123; width: 30px; height: 90px; overflow: hidden; position: relative; &amp;:before, &amp;:after &#123; content: ''; width: 50px; height: 50px; position: absolute; transform: scaleY(1.3) translate(30%, -30px) rotate(45deg); &#125; &amp;:before &#123; left: -7px; top: 59px; border-radius: 10px; background-color: #41b883; &#125; &amp;:after &#123; left: 7px; top: 59px; border-radius: 5px; background-color: #fff; &#125;&#125; ¶四、气泡对话框 具体实现代码可参考：bubble.vue","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"CSS","slug":"前端/CSS","permalink":"https://liuxianyu.cn/categories/前端/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://liuxianyu.cn/tags/CSS/"}],"author":"liuxy0551"},{"title":"在 VMware 中安装体验 UOS","slug":"2019-12-17-VMware-UOS","date":"2019-12-17T17:01:26.000Z","updated":"2019-12-17T17:01:26.000Z","comments":true,"path":"article/vmware-uos.html","link":"","permalink":"https://liuxianyu.cn/article/vmware-uos.html","excerpt":"最近看到国产系统UOS在进行内测，以诚恳的言辞申请并加入了内测，这里有一些虚拟机的体验截图。","text":"最近看到国产系统UOS在进行内测，以诚恳的言辞申请并加入了内测，这里有一些虚拟机的体验截图。 官网：https://www.chinauos.com/。 简单体验十几分钟后，有以下几点感受： 1、随处可见的 deepin 标记 2、左下角抽屉有 Windows 的痕迹，展开抽屉有 MacOS 的痕迹 3、展开抽屉后滚动时不是很流畅，这对于天天与电脑打交道的人来说很难受 4、终端不是很美观 5、应用商店似乎还是不能用的 6、文件管理器文件夹之间的大小有点不太合适 7、设置中的各个模块长的似乎是为了在平板上看着舒服点 8、毛玻璃效果我很喜欢 总结来说：国产系统任重道远，加油。","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"UOS","slug":"Linux/UOS","permalink":"https://liuxianyu.cn/categories/Linux/UOS/"}],"tags":[{"name":"VMware","slug":"VMware","permalink":"https://liuxianyu.cn/tags/VMware/"},{"name":"UOS","slug":"UOS","permalink":"https://liuxianyu.cn/tags/UOS/"}],"author":"liuxy0551"},{"title":"前端项目优化之旅（五）—— Vue 路由懒加载、组件懒加载","slug":"2019-12-06-vue-cli3-router-load-lazy","date":"2019-12-06T11:34:19.000Z","updated":"2019-12-06T11:34:19.000Z","comments":true,"path":"article/vue-cli3-router-load-lazy.html","link":"","permalink":"https://liuxianyu.cn/article/vue-cli3-router-load-lazy.html","excerpt":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下 Vue 中的路由懒加载。","text":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下 Vue 中的路由懒加载。 可以看看官方文档：Vue Router 路由懒加载，写得浅显易懂。 ¶一、为什么 打包构建后，运用 webpack 打包后的文件变得非常大，在用户进入首页时，需要加载整个项目的资源，时间过长。即使做了 loading 或者骨架屏也不利于用户体验。 ¶二、路由懒加载 如果能把不同路由对应的组件分割成不同的代码块，在路由被访问时才加载对应组件，能有效减小首页的加载压力。但是当跳转到新页面的时候，需要等待新页面 js 文件的加载，体验会变差。 router.js： 12345export default new VueRouter(&#123; routes: [ &#123; path: '/', component: () =&gt; import(/* webpackChunkName: 'home-group' */ '../views/home') &#125; ]&#125;) 搭配 Vue 异步组件和 Webpack 的代码分割功能webpackChunkName实现懒加载，参考：router.js。 ¶三、组件懒加载 123const Navigator = () =&gt; import(/* webpackChunkName: 'home-group' */ '../components/Navigator')...components: &#123; Navigator &#125; ¶四、webpackPrefetch 在 Vue CLI 3 中我们还可以再做一步：因为 Vue CLI 3 默认开启了prefetch（预加载模块），用来告诉浏览器在页面加载完成后，利用空闲时间提前获取用户未来可能会访问的内容。可以考虑关闭这个功能，在vue.config.js中设置： 1234567891011121314module.exports = &#123; chainWebpack: config =&gt; &#123; // 移除 prefetch 插件 config.plugins.delete('prefetch') // 或者 // 修改 prefetch 的选项： config.plugin('prefetch').tap(options =&gt; &#123; options[0].fileBlacklist = options[0].fileBlacklist || [] options[0].fileBlacklist.push(/myasyncRoute(.)+?\\.js$/) return options &#125;) &#125;&#125; 当prefetch插件被禁用时，可以通过 webpack 的内联注释手动选定要提前获取的代码区块： 1&#123; path: '/element', name: 'Element', component: () =&gt; import(/* webpackPrefetch: true */ '../src/pages/element') &#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"路由懒加载","slug":"前端/Vue/路由懒加载","permalink":"https://liuxianyu.cn/categories/前端/Vue/路由懒加载/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"项目优化","slug":"项目优化","permalink":"https://liuxianyu.cn/tags/项目优化/"}],"author":"liuxy0551"},{"title":"前端项目优化之旅（四）—— Element 按需引入组件","slug":"2019-12-05-vue-cli3-element-load-on-demand","date":"2019-12-05T19:04:17.000Z","updated":"2019-12-05T19:04:17.000Z","comments":true,"path":"article/vue-cli3-element-load-on-demand.html","link":"","permalink":"https://liuxianyu.cn/article/vue-cli3-element-load-on-demand.html","excerpt":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下 Vue CLI 3 项目中如何让 Element 按需引入组件。","text":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下 Vue CLI 3 项目中如何让 Element 按需引入组件。 ¶一、安装 Element 1npm i element-ui -S ¶二、完整引入 在 main.js 中写入以下内容： 123import ElementUI from 'element-ui'import 'element-ui/lib/theme-chalk/index.css'Vue.use(ElementUI) ¶三、按需引入 1、在src/components下新建element.js文件，具体代码见 src/components/element.js 123456789101112// 按需引入 Element 组件import &#123; Input, Select, Option &#125; from 'element-ui'let elementUIs = [Input, Select, Option]export default &#123; install (Vue) &#123; elementUIs.forEach(elementUI =&gt; [ Vue.component(elementUI.name, elementUI) // Vue.use(elementUI) // 也可以使用 Vue.use() ]) &#125;&#125; 2、在main.js中引入src/components/element.js： 12import element from './components/element'Vue.use(element) 3、页面使用组件： 1&lt;el-input v-model.trim=\"msg\" placeholder=\"请输入，最长 20 位，无空格\" maxlength=\"20\" clearable&gt;&lt;/el-input&gt; 主要体现在 element 文件大小减少了约1.5 MB","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Element UI","slug":"前端/Vue/Element-UI","permalink":"https://liuxianyu.cn/categories/前端/Vue/Element-UI/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"Element UI","slug":"Element-UI","permalink":"https://liuxianyu.cn/tags/Element-UI/"},{"name":"项目优化","slug":"项目优化","permalink":"https://liuxianyu.cn/tags/项目优化/"}],"author":"liuxy0551"},{"title":"前端项目优化之旅（三）—— Lodash 单独引入函数","slug":"2019-12-04-vue-cli3-lodash","date":"2019-12-04T20:39:58.000Z","updated":"2019-12-04T20:39:58.000Z","comments":true,"path":"article/vue-cli3-lodash.html","link":"","permalink":"https://liuxianyu.cn/article/vue-cli3-lodash.html","excerpt":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下在 Vue CLI 3 项目中单独引用 Lodash 函数。","text":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下在 Vue CLI 3 项目中单独引用 Lodash 函数。 ¶一、安装 lodash Lodash 经常用来处理一些复杂的数据逻辑，比如常见的：数组去重、数组删除元素等等，可以有效减少项目中的复杂逻辑代码。 1npm i lodash -S ¶二、完全引入 lodash 举例：拆分数组（生成二维数组） 1234import _ from 'lodash'_.chunk(['a', 'b', 'c', 'd'], 2)// =&gt; [['a', 'b'], ['c', 'd']] ¶三、单独引入 lodash 推荐 举例：拆分数组（生成二维数组） 1234import chunk from 'lodash/chunk'chunk(['a', 'b', 'c', 'd'], 2)// =&gt; [['a', 'b'], ['c', 'd']] 主要体现在 element 文件大小减少了约550+ KB","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Lodash","slug":"前端/Vue/Lodash","permalink":"https://liuxianyu.cn/categories/前端/Vue/Lodash/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"项目优化","slug":"项目优化","permalink":"https://liuxianyu.cn/tags/项目优化/"},{"name":"Lodash","slug":"Lodash","permalink":"https://liuxianyu.cn/tags/Lodash/"}],"author":"liuxy0551"},{"title":"前端项目优化之旅（二）—— Vant 自动按需引入组件","slug":"2019-12-03-vue-cli3-vant-load-on-demand","date":"2019-12-03T11:21:21.000Z","updated":"2019-12-03T11:21:21.000Z","comments":true,"path":"article/vue-cli3-vant-load-on-demand.html","link":"","permalink":"https://liuxianyu.cn/article/vue-cli3-vant-load-on-demand.html","excerpt":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下 Vue CLI 3 项目中如何让 Vant 自动按需引入组件。","text":"前端项目优化之旅系列随笔主要记录工作中遇到的一些优化方案，这里记录一下 Vue CLI 3 项目中如何让 Vant 自动按需引入组件。 ¶一、安装 Vant 1npm i vant -S ¶二、完整引入 在 main.js 中写入以下内容： 123import Vant from 'vant'import 'vant/lib/index.css'Vue.use(Vant) ¶三、自动按需引入组件推荐 1、babel-plugin-import 是一款 babel 插件，它能在编译的过程中将 import 写法自动转换为按需引入的方式。 1npm i babel-plugin-import -D 2、babel 7 在babel.config.js中配置 123456module.exports = &#123; // 自动按需引入 Vant 组件 plugins: [ ['import', &#123; libraryName: 'vant', libraryDirectory: 'es', style: true &#125;, 'vant'] ]&#125; 3、在src/components下新建vant.js文件，具体代码见 src/components/vant.js 123456789101112// 自动按需引入 Vant 组件import &#123; Tabbar, TabbarItem, Button &#125; from 'vant'let vantUIs = [Tabbar, TabbarItem, Button]export default &#123; install (Vue) &#123; vantUIs.forEach(vantUI =&gt; &#123; Vue.component(vantUI.name, vantUI) // Vue.use(vantUI) // 也可以使用 Vue.use() &#125;) &#125;&#125; 4、在main.js中引入src/components/vant.js： 12import vant from './components/vant'Vue.use(vant) 5、页面使用组件： 1&lt;van-button type=\"default\"&gt;默认按钮&lt;/van-button&gt; 主要体现在 vant 文件大小减少了约384 KB","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Vant","slug":"前端/Vue/Vant","permalink":"https://liuxianyu.cn/categories/前端/Vue/Vant/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"项目优化","slug":"项目优化","permalink":"https://liuxianyu.cn/tags/项目优化/"},{"name":"Vant","slug":"Vant","permalink":"https://liuxianyu.cn/tags/Vant/"}],"author":"liuxy0551"},{"title":"前端项目优化之旅（一）—— 分析插件","slug":"2019-12-02-vue-cli3-analyzer","date":"2019-12-02T13:06:10.000Z","updated":"2019-12-02T13:06:10.000Z","comments":true,"path":"article/vue-cli3-analyzer.html","link":"","permalink":"https://liuxianyu.cn/article/vue-cli3-analyzer.html","excerpt":"上个月有好几个项目需要部署上线，其中有一个项目需要在钉钉第三方应用市场上线，而钉钉对于页面性能、白屏率等有硬性要求，所以对这个项目做了很多打包优化。 前端项目优化之旅将以基于 Vue CLI 3 新写的 vue-cli3-build-optimization 作为记录对象，记录一些优化方法：","text":"上个月有好几个项目需要部署上线，其中有一个项目需要在钉钉第三方应用市场上线，而钉钉对于页面性能、白屏率等有硬性要求，所以对这个项目做了很多打包优化。 前端项目优化之旅将以基于 Vue CLI 3 新写的 vue-cli3-build-optimization 作为记录对象，记录一些优化方法： ¶分析工具 在优化之前，我们需要知道项目构建后，哪里显得臃肿、哪些文件过大、哪些可以删除等等。这个时候，可视化的分析工具就显得很重要了。 ¶1、安装分析插件 安装webpack-bundle-analyzer： 1npm i webpack-bundle-analyzer 有以下两种配置方案，推荐第一种 ¶2、运行指定命令查看推荐 将分析插件作为一个独立的 script，在package.json -&gt; scripts中添加一行&quot;analyzer&quot;: &quot;use_analyzer=true npm run serve&quot;： 12345package.json\"scripts\": &#123; ... \"analyzer\": \"use_analyzer=true npm run serve\"&#125; 在 vue.config.js 中对 webpack 进行配置： 123456789module.exports = &#123; chainWebpack: config =&gt; &#123; if (process.env.use_analyzer) &#123; config .plugin('webpack-bundle-analyzer') .use(require('webpack-bundle-analyzer').BundleAnalyzerPlugin) &#125; &#125;&#125; 这样只会在使用以下命令时才会自动打开浏览器并访问 http://127.0.0.1:8888 1npm run analyzer ¶3、运行即查看 在 vue.config.js 中对 webpack 进行配置： 1234567module.exports = &#123; chainWebpack: config =&gt; &#123; config .plugin('webpack-bundle-analyzer') .use(require('webpack-bundle-analyzer').BundleAnalyzerPlugin) &#125;&#125; 接下运行npm run serve即可，会自动打开浏览器并访问 http://127.0.0.1:8888","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"项目优化","slug":"项目优化","permalink":"https://liuxianyu.cn/tags/项目优化/"}],"author":"liuxy0551"},{"title":"JavaScript 中一些常见的方法","slug":"2019-11-30-js-functions","date":"2019-11-30T13:43:38.000Z","updated":"2019-11-30T13:43:38.000Z","comments":true,"path":"article/js-functions.html","link":"","permalink":"https://liuxianyu.cn/article/js-functions.html","excerpt":"最近在加强 JavaScript 基础的学习，这里整理了一下 JavaScript 中 String 对象和 Array 对象常见的一些方法。","text":"最近在加强 JavaScript 基础的学习，这里整理了一下 JavaScript 中 String 对象和 Array 对象常见的一些方法。 ¶一、String 对象 ¶1、indexOf() 返回索引值 indexOf()方法返回 str 中第一次出现指定值的索引，从 fromIndex 处进行搜索，如果未找到该值，则返回 -1。 1str.indexOf(searchValue[, fromIndex]) ¶2、includes() 返回布尔值 includes()方法用于判断 str 中是否包含另一个字符串，从 fromIndex 处进行搜索，根据情况返回 true 或 false。区分大小写 1str.includes(searchString[, fromIndex]) ¶3、split() 返回 Array split()方法使用指定字符串将目标字符串分割成字符串数组，这个指定的字符串作为分隔符来决定每个拆分的位置，返回目标字符串以分隔符出现位置分隔而成的一个数组。 1str.split([separator[, limit]]) separator：分隔符，可以是一个字符串或者正则表达式 limit：返回值数组的长度 ¶4、replace() 返回新字符串，不改变原字符串 replace()方法用于替换字符串中的某些字符，返回一个部分匹配替换或全部匹配替换的新字符串。 语法： 12str.replace(regexp|substr, newSubStr|function)'abcabc'.replace(/a/g, 'd') // 'dbcdbc' regexp（pattern）：一个RegExp 对象或者其字面量，该正则所匹配的内容全部都会被 replace 第二个参数的返回值替换。 substr（pattern）：一个将被 newSubStr 替换的字符串，仅第一个匹配项会被替换。 newSubStr（replacement）：用于替换掉第一个参数在原字符串中匹配到的字符串。 function（replacement）：一个用来创建新字符串的函数，该函数的返回值将替换第一个参数匹配到的字符串。 ¶5、slice() 返回新字符串，不改变原字符串 slice()方法提取字符串的一部分，并返回一个新的字符串，且不会改动原字符串。 1str.slice(beginIndex[, endIndex]) // [beginIndex, endIndex) ¶6、substring() 返回新字符串 substring()方法返回一个字符串从开始索引直到字符串末尾的一个子集, 或从开始索引到结束索引（不包含结束索引）之间的一个子集。 1str.substring(beginIndex[, endIndex]) // [beginIndex, endIndex) endIndex 为负数或 NaN时，则被当作 0 beginIndex 和 endIndex 大于 str.length 时，会被当作 str.length ¶二、Array 对象 ¶1、isArray() 返回布尔值 Array.isArray()用于确定传递的值是否是一个 Array。 123Array.isArray([1, 2, 3]) // trueArray.isArray('foobar') // falseArray.isArray(undefined) // false 当检测 Array 实例时, Array.isArray 优于arr1 instanceof Array，因为 Array.isArray 能检测 iframes。 ¶2、concat() 返回新数组，不改变原数组 concat()方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。 1arr1.concat(arr2, arr3, ...) ¶3、filter() 返回新数组 filter()方法创建一个新数组, 包含了通过测试的所有元素。 12345let arr1 = [12, 5, 8, 130, 44]let arr2 = [12, 54, 18, 130, 44]arr1.filter(i =&gt; i &gt;= 10) // [12, 130, 44]arr2.filter((i, index, array) =&gt; i &gt;= 10) // [12, 130, 44] ¶4、map() 返回新数组 map()方法创建一个新数组，其结果是该数组中的每个元素都调用执行函数后返回的结果。 ¶5、pop() 返回从数组中删除的元素（数组为空时返回 undefined） pop()方法从数组中删除最后一个元素，并返回该元素的值。此方法更改数组的长度。 ¶6、push() 返回数组新的 length push()方法将一个或多个元素添加到数组的末尾，并返回该数组的新长度。此方法更改数组的长度。 ¶7、shift() 返回从数组中删除的元素（数组为空时返回 undefined） shift()方法从数组中删除第一个元素，并返回该元素的值。此方法更改数组的长度。 ¶8、unshift() 返回数组新的 length unshift()方法将一个或多个元素添加到数组的开头，并返回该数组的新长度。此方法更改数组的长度。 ¶9、forEach() 返回 undefined forEach()方法对数组的每个元素执行一次函数。 注意 除了抛出异常以外，无法跳出循环 ¶10、slice() 返回新数组 slice()方法返回一个含有被提取元素的新数组，这个数组是由 beginIndex 和 endIndex 决定的原数组的浅拷贝。原始数组不会被改变。 1arr.slice([beginIndex[, endIndex]]) // [beginIndex, endIndex) 如果 beginIndex 大于数组的长度，则返回空数组 slice(-2) 表示提取数组中的倒数第二个元素到最后一个元素（包含最后一个元素） slice(-2, -1) 表示提取数组中的倒数第二个元素到最后一个元素（不包含最后一个元素） ¶11、splice() 返回被删除元素组成的数组 splice()方法通过删除或替换现有元素或者原地添加新的元素来修改数组，并以数组形式返回被修改的内容。此方法会改变原数组。 1arr.splice(beginIndex, deleteCount, item1, item2, ...) beginIndex 修改开始的位置 deleteCount 要移除的元素个数，可选 item1, item2, … 要添加进数组的元素，可选 ¶12、reverse() 返回颠倒后的数组 reverse()方法将数组中元素的位置颠倒，并返回该数组。此方法会改变原数组。 ¶13、some() 返回布尔值 some()方法测试数组中是不是至少有一个元素通过了测试函数，返回一个 Boolean 类型的值。 注意 若收到一个空数组，此方法在任何情况下都会返回 false ¶14、every() 返回布尔值 every()方法测试数组内的所有元素是否都能通过某个指定函数的测试。 1234567let arr1 = [12, 5, 8, 130, 44]let arr2 = [12, 54, 18, 130, 44]let arr3 = [12, 54, 18, 130, 44]arr1.every(i =&gt; i &gt;= 10) // falsearr2.every(i =&gt; i &gt;= 10) // truearr3.every((i, index, array) =&gt; &#123; return i &gt;= 20 &#125;) // false 注意 若收到一个空数组，此方法在任何情况下都会返回 true ¶15、includes() 返回布尔值 includes()方法用来判断一个数组是否包含一个指定的值。 ¶16、indexOf() 返回索引值 indexOf()方法返回在数组中可以找到给定元素的第一个索引，如果不存在，则返回 -1。 ¶17、join() 返回新字符串 join()方法将一个数组（或一个类数组对象）的所有元素连接成一个字符串并返回这个字符串。 ¶18、flat() 返回新数组 flat()方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。 123456789101112131415let arr1 = [1, 2, [3, 4]]arr1.flat() // [1, 2, 3, 4]let arr2 = [1, 2, [3, 4, [5, 6]]]arr2.flat() // [1, 2, 3, 4, [5, 6]]let arr3 = [1, 2, [3, 4, [5, 6]]]arr3.flat(2) // [1, 2, 3, 4, 5, 6]//使用 Infinity，可展开任意深度的嵌套数组let arr4 = [1, 2, [3, 4, [5, 6, [7, 8, [9, 10]]]]]arr4.flat(Infinity) // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]let arr5 = [1, 2, , 4, 5]arr4.flat() // [1, 2, 4, 5]","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"JavaScript 中的数据类型以及内存分配","slug":"2019-11-30-js-typeof","date":"2019-11-30T12:59:54.000Z","updated":"2019-11-30T12:59:54.000Z","comments":true,"path":"article/js-typeof.html","link":"","permalink":"https://liuxianyu.cn/article/js-typeof.html","excerpt":"最近在加强 JavaScript 基础的学习，这里整理了一下 JavaScript 中的数据类型以及内存分配。","text":"最近在加强 JavaScript 基础的学习，这里整理了一下 JavaScript 中的数据类型以及内存分配。 ¶一、数据类型 ¶1、简单类型 简单类型又叫做基本数据类型或者值类型，在存储时变量中存储的是值本身。 String, Number, Boolean, undefined, null（null 为空对象） ¶2、复杂类型 复杂类型又叫做引用类型，在存储时变量中存储的是地址（引用）。 通过 new 关键字创建的对象（系统对象、自定义对象），如：Object、Array、Date 等 ¶二、堆和栈 ¶1、栈（操作系统，stack） 由操作系统自动分配释放存放函数的参数值、局部变量的值等。其操作方式类似于数据结构中的栈，简单数据类型存放到栈里面。 ¶2、堆（操作系统， heap） 存储复杂类型（对象），一般由程序员分配和释放，若程序员不释放，由垃圾回收机制回收释放，复杂数据类型存放到堆里面。 复杂数据类型首先在栈里面存放地址，十六进制表示，这个地址指向堆里面的数据，真正的对象实例存放在堆空间中。 注意 JavaScript 中没有堆栈的概念，通过堆栈的方式，可以更好地理解代码的执行方式","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"JavaScript 中的循环","slug":"2019-11-29-js-xunhuan","date":"2019-11-29T15:26:39.000Z","updated":"2019-11-29T15:26:39.000Z","comments":true,"path":"article/js-xunhuan.html","link":"","permalink":"https://liuxianyu.cn/article/js-xunhuan.html","excerpt":"最近在加强 JavaScript 基础的学习，这里整理了一下 JavaScript 中的循环，包括：for、while、do while三种循环和continue、break两个关键字。","text":"最近在加强 JavaScript 基础的学习，这里整理了一下 JavaScript 中的循环，包括：for、while、do while三种循环和continue、break两个关键字。 ¶一、for 循环 for 循环可以重复执行某些相同的代码 for 循环通过计数器可以重复执行些许不同的代码 for 循环可以重复执行某些操作，比如算术运算符加法操作 双重 for 循环，外层循环一次，内存 for 循环全部执行 for 循环是循环条件和数字直接相关的循环 ¶二、while 循环 while语句可以在条件表达式为真的前提下，循环执行指定的一段代码，直到条件表达式不为真时结束循环。 123while (条件表达式) &#123; // 循环体代码&#125; 执行思路： 先执行条件表达式，如果为 true，则执行循环体代码；如果为 false，则退出循环，执行后续代码。 循环体代码执行一次后，程序会继续判断执行条件表达式，如果条件表达式结果仍为 true，则继续执行循环体代码，直到条件表达式的结果为 false，整个循环过程才会结束。 举例： 12345let num = 1while (num &lt;= 100) &#123; console.log(num) num ++ // 要进行计数器的更新，防止出现死循环&#125; ¶三、do while 循环 do while语句是 while 语句的一个变体，该循环会先执行一次代码块，然后对条件表达式进行判断，如果条件表达式的结果为 true，就会重复执行循环体，否则退出循环。 123do &#123; // 循环体代码&#125; while (条件表达式) 执行思路： 先执行一次循环体代码 再执行条件表达式，如果条件表达式结果为 true，则继续执行循环体代码，如果条件表达式结果为 false，则退出循环，执行后续代码。 举例： 12345let num = 1do &#123; console.log(num) num ++ // 要进行计数器的更新，防止出现死循环&#125; while (i &lt;= 100) ¶四、continue continue关键字用于立即跳出本次循环，继续下一个循环（本次循环体中 continue 之后的代码就会少执行一次） 举例：求 1 ~ 100 之间，除了能被 7 整除之外的整数和 123456789let sum = 0for (let i = 0; i &lt;= 100; i ++) &#123; if (i % 7 === 0) &#123; continue &#125; sum += i&#125;console.log(sum) // 4315 ¶五、break break关键字用于立即跳出整个循环（本次循环结束） 举例：求 1 ~ 100 之间，除了能被 7 整除之外的整数和 123456789let sum = 0for (let i = 0; i &lt;= 10; i ++) &#123; if (i === 4) &#123; break &#125; sum += i&#125;console.log(sum) // 6, 1 + 2 + 3 = 6","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"WebStorm 行注释的位置问题","slug":"2019-11-28-webstorm-html-line","date":"2019-11-28T11:40:21.000Z","updated":"2019-11-28T11:40:21.000Z","comments":true,"path":"article/webstorm-html-line.html","link":"","permalink":"https://liuxianyu.cn/article/webstorm-html-line.html","excerpt":"WebStorm 中快捷键cmd + /行注释，//会跑到该行的顶格处，记录一下如何设置可以恢复正常。","text":"WebStorm 中快捷键cmd + /行注释，//会跑到该行的顶格处，记录一下如何设置可以恢复正常。 进入 WebStorm -&gt; Preferences -&gt; Editor -&gt; Code Style -&gt; HTML -&gt; Code Generation，将 Line comment at first column 和 Block comment at first column 前的勾选全部取消，解决问题。 修改前： 期望、修改后：","categories":[{"name":"开发工具","slug":"开发工具","permalink":"https://liuxianyu.cn/categories/开发工具/"},{"name":"WebStorm","slug":"开发工具/WebStorm","permalink":"https://liuxianyu.cn/categories/开发工具/WebStorm/"}],"tags":[{"name":"WebStorm","slug":"WebStorm","permalink":"https://liuxianyu.cn/tags/WebStorm/"}],"author":"liuxy0551"},{"title":"使用 certbot 在 Cent OS 中给 nginx 配置 https","slug":"2019-11-15-CentOS-nginx-https","date":"2019-11-15T17:08:08.000Z","updated":"2019-11-15T17:08:08.000Z","comments":true,"path":"article/centos-nginx-https.html","link":"","permalink":"https://liuxianyu.cn/article/centos-nginx-https.html","excerpt":"免费的 SSL 证书可以通过阿里云获取，也可以通过以下操作安装。这里只记录使用 certbot 在 CentOS 中给 nginx 配置 https：","text":"免费的 SSL 证书可以通过阿里云获取，也可以通过以下操作安装。这里只记录使用 certbot 在 CentOS 中给 nginx 配置 https： 先去 Certbot 官网 https://certbot.eff.org/，选择 nginx ，再选择 CentOS/RHEL 7，意思是在什么系统上使用什么 HTTP 服务器 ¶1、查看服务器实例 1sudo cat /sys/devices/virtual/dmi/id/product_uuid 如果没有 dmi 文件夹，就进行安装： 1sudo yum -y install dmidecode 如果 UUID 是ec2开头，则需要运行以下两行指令： 12sudo yum -y install yum-utilssudo yum-config-manager --enable rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional ¶2、安装 Certbot 1sudo yum install -y certbot python2-certbot-nginx ¶3、获取并安装 SSL 证书 1sudo certbot --nginx 报错如上，参考资料：Certbot :ImportError: No module named 'requests.packages.urllib3，执行以下指令： 1sudo pip install --upgrade --force-reinstall 'requests==2.6.0' urllib3 提示输入以下指令升级pip，可以不搭理。 1sudo pip install --upgrade pip 接下来重新运行sudo certbot --nginx： 1sudo certbot --nginx 按照提示依次输入： - 输入邮箱，用于接收紧急续订和安全通知邮件 - 输入 A，阅读并同意条款 - 输入 N，邮箱接收相关推广邮件，不需要 - 输入数字，选择部署的域名，多个域名用,隔开 - 输入数字，选择是否将 http 重定向到 https。1、无需重定向，2、重定向 ¶4、确定 Certbot 正常运行 在浏览器输入域名，在 URL 栏确认是否有 🔒 图标 ¶5、设置自动续订 1echo \"0 0,12 * * * root python -c 'import random; import time; time.sleep(random.random() * 3600)' &amp;&amp; certbot renew\" | sudo tee -a /etc/crontab &gt; /dev/null 可查看续订设置： 1cat /etc/crontab","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"Cent OS","slug":"Linux/Cent-OS","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/"},{"name":"https-SSL","slug":"Linux/Cent-OS/https-SSL","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/https-SSL/"}],"tags":[{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"},{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/tags/nginx/"},{"name":"https-SSL","slug":"https-SSL","permalink":"https://liuxianyu.cn/tags/https-SSL/"}],"author":"liuxy0551"},{"title":"JavaScript 中的 Array","slug":"2019-11-13-js-array","date":"2019-11-13T09:56:49.000Z","updated":"2019-11-13T09:56:49.000Z","comments":true,"path":"article/js-array.html","link":"","permalink":"https://liuxianyu.cn/article/js-array.html","excerpt":"最近在加强 JavaScript 基础的学习，这里整理一下 Array，主要是一些数组方法。","text":"最近在加强 JavaScript 基础的学习，这里整理一下 Array，主要是一些数组方法。 ¶一、扁平化多维数组 这个知识点是在一次面试中被问到的，没答上来，这里作下记录。 ¶1、Array.flat(n) Array.flat(n) 方法会按照一个可指定的深度（n，默认值为 1）递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。 123456789101112let arr1 = [1, 2, [3, 4]]arr1.flat() // [1, 2, 3, 4]let arr2 = [1, 2, [3, 4, [5, 6]]]arr2.flat() // [1, 2, 3, 4, [5, 6]]let arr3 = [1, 2, [3, 4, [5, 6]]]arr3.flat(2) // [1, 2, 3, 4, 5, 6]//使用 Infinity，可展开任意深度的嵌套数组let arr4 = [1, 2, [3, 4, [5, 6, [7, 8, [9, 10]]]]]arr4.flat(Infinity) // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 也可以利用递归和 concat 方法实现扁平数组： 123456789function flatten(arr) &#123; while(arr.some(item =&gt; Array.isArray(item))) &#123; arr = [].concat(...arr) &#125; return arr&#125;flatten([1, [2, 3]]) // [1, 2, 3]flatten([1, [2, 3, [4, 5]]) // [1, 2, 3, 4, 5] ¶2、Array.toString() 1234//使用 Array.toString() 可以将数组转为字符串，再去除`,`即可得到数组let arr5 = [1, 2, [3, 4, [5, 6, [7, 8, [9, 10]]]]]arr5.toString() // '1, 2, 3, 4, 5, 6, 7, 8, 9, 10'arr5.toString().split(',') // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] ¶3、更多实现方法见 Array.prototype.flat() ¶二、数组去重 ¶1、Array.from、Set Array.from 可以将类数组转化为数组。Set 是 ES6 语法新出的一种定义不重复数组的数据类型。… 是扩展运算符，将 set 里面的值转化为字符串。 123let list = [1, 2, 3, 3, 4, 4]Array.from(new Set(list)) // [1, 2, 3, 4][...new Set(list)] // [1, 2, 3, 4] ¶2、用map存储数据，循环数组进行比对 1234567891011121314distinct(list) &#123; let map = &#123;&#125; let result = [] for (let i of list) &#123; if (!(i in map)) &#123; map[i] = 1 result.push(i) &#125; &#125; console.log(result) // [1, 2, 3, 4]&#125;this.distinct([1, 2, 3, 3, 4, 4]) ¶三、数组排序 ¶1、Array.sort sort 是 Array 内置的排序方法，参数为一个函数。默认排序顺序是在将元素转换为字符串，然后比较它们的 UTF-16 代码单元值序列时构建的。由于它取决于具体实现，因此无法保证排序的时间和空间复杂性。 1234let list = [2, 3, 1, 4]list.sort() // [1, 2, 3, 4] 默认是升序list.sort((a, b) =&gt; a - b) // [1, 2, 3, 4] 升序list.sort((a, b) =&gt; b - a) // [4, 3, 2, 1] 降序 ¶2、冒泡排序 参考另一篇随笔：JS 中的冒泡排序 12345678910111213let list = [2, 3, 1, 1, 4] for (let i = 0 ; i &lt; list.length - 1; i ++) &#123; for (let j = 0; j &lt; list.length - i - 1; j ++) &#123; if (list[j] &gt; list[j + 1]) &#123; let tmp = list[j] list[j] = list[j + 1] list[j + 1] = tmp &#125; &#125;&#125;console.log(list) // [1, 1, 2, 3, 4] ¶3、选择排序 1234567891011selectSort(list) &#123; for (let i = 0; i &lt; list.length; i ++) &#123; for (let j = i; j &lt; list.length; j ++) &#123; if (list[i] &gt; list[j]) &#123; [list[i], list[j]] = [list[j], list[i]] &#125; &#125; &#125;&#125;this.selectSort([2, 3, 1, 4]) // [1, 2, 3, 4] ¶三、数组的最大值 ¶1、Math.max() Math.max() 是 Math 对象内置的方法，参数是字符串。 12Math.max(...[2, 3, 1, 4]) // 4Math.max.apply(...[2, 3, 1, 4]) // 4 ¶2、先排序再取最大值 ¶四、合并数值 ¶1、简洁写法 123456[1, 2, 3, 4].concat([5, 6]) // [1, 2, 3, 4, 5, 6][...[1, 2, 3, 4], ...[5, 6]] // [1, 2, 3, 4, 5, 6]let list1 = [1, 2, 3, 4]list1.push(...[5, 6])console.log(list1) // [1, 2, 3, 4, 5, 6] ¶2、map、push 123let list2 = [1, 2, 3, 4][5, 6].map(i =&gt; &#123; list2.push(i) &#125;)console.log(list2) // [1, 2, 3, 4, 5, 6] ¶五、判断是否包含值 ¶1、includes、indexOf、find、findIndex 1234[1, 2, 3, 4].includes(4) // true[1, 2, 3, 4].indexOf(4) // 3，存在则返回起始位置的索引，不存在则返回 -1[1, 2, 3, 4].find(i =&gt; i === 4) // 4，如果数组中不包含则返回 undefined[1, 2, 3, 4].findIndex(i =&gt; i === 4) // 3，存在则返回起始位置的索引，不存在则返回 -1 ¶2、some 1[1, 2, 3, 4].some(i =&gt; &#123; return i === 4 &#125;) // true，如果不包含则返回 false ¶六、过滤数组 ¶1、filter 1[1, 2, 3, 4].filter(i =&gt; i &gt; 2) // [3, 4]","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"函数的防抖和节流","slug":"2019-11-12-function-debounce-throttle","date":"2019-11-12T21:23:22.000Z","updated":"2019-11-12T21:23:22.000Z","comments":true,"path":"article/function-debounce-throttle.html","link":"","permalink":"https://liuxianyu.cn/article/function-debounce-throttle.html","excerpt":"最近在加强 JavaScript 基础的学习，这里整理一下函数的防抖（debounce）和节流（throttle）。","text":"最近在加强 JavaScript 基础的学习，这里整理一下函数的防抖（debounce）和节流（throttle）。 类型 概念 应用 防抖 触发事件后在 n 秒内函数只能执行一次并添加计时器，如果在 n 秒内又触发了事件，则会重新重置计时器 input 的输入建议等 节流 n 秒内触发事件仅执行一次函数 大段输入内容时记录输入历史 ¶一、防抖 - debounce 非立即执行版：触发事件后函数不会立即执行，而是在 n 秒后执行，如果在 n 秒内又触发了事件，则会重新计算函数执行时间。 立即执行版：触发事件后函数会立即执行，然后 n 秒内不触发事件才能继续执行函数的效果。 123456789101112131415161718192021222324252627/** * @desc 函数防抖 * @param func 函数 * @param wait 延迟执行毫秒数 * @param immediate true 表示立即执行，false 表示非立即执行 */function debounce(func, wait, immediate) &#123; let timeout return function() &#123; let context = this let args = arguments if (timeout) clearTimeout(timeout) if (immediate) &#123; var callNow = !timeout timeout = setTimeout(() =&gt; &#123; timeout = null &#125;, wait) if (callNow) func.apply(context, args) &#125; else &#123; timeout = setTimeout(function()&#123; func.apply(context, args) &#125;, wait) &#125; &#125;&#125; ¶二、节流 - throttle 123456789101112131415161718192021222324252627282930313233/** * @desc 函数节流 * @param func 函数 * @param wait 延迟执行毫秒数 * @param type 1 表示时间戳版，2 表示定时器版 */function throttle(func, wait, type) &#123; if (type === 1) &#123; let previous = 0 &#125; else if (type === 2) &#123; let timeout &#125; return function() &#123; let context = this let args = arguments if (type === 1) &#123; let now = Date.now() if (now - previous &gt; wait) &#123; func.apply(context, args) previous = now &#125; &#125; else if ( type === 2) &#123; if (!timeout) &#123; timeout = setTimeout(() =&gt; &#123; timeout = null func.apply(context, args) &#125;, wait) &#125; &#125; &#125;&#125; ¶参考资料 1、函数防抖和节流 2、JavaScript专题之跟着 underscore 学防抖 3、JavaScript专题之跟着 underscore 学节流","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"Vue 项目中借助 crypto-js 实现 AES 加密","slug":"2019-11-11-vue-crypto-js-aes","date":"2019-11-11T22:23:08.000Z","updated":"2019-11-11T22:23:08.000Z","comments":true,"path":"article/vue-crypto-js-aes.html","link":"","permalink":"https://liuxianyu.cn/article/vue-crypto-js-aes.html","excerpt":"公司项目需要上架钉钉应用市场，上架要求中包含了接口请求进行加密，这里记录一下最终采用的方案 —— AES","text":"公司项目需要上架钉钉应用市场，上架要求中包含了接口请求进行加密，这里记录一下最终采用的方案 —— AES ¶一、crypto-js 参考：https://www.npmjs.com/package/crypto-js ¶二、自行封装 1234567891011121314151617181920212223import CryptoJS from 'crypto-js'// 秘钥const keyStr = 'wise_job'export default &#123; // 加密 encrypt (word) &#123; let encryptedAES = CryptoJS.AES.encrypt(word, keyStr).toString() // base64 字符串 // this.decrypt(encryptedAES) return encodeURIComponent(encryptedAES) &#125;, // 解密 decrypt (encryptedAES) &#123; let bytes = CryptoJS.AES.decrypt(encryptedAES, keyStr) let str = bytes.toString(CryptoJS.enc.Utf8) str &amp;&amp; console.log(JSON.parse(str)) return str ? JSON.parse(str) : &#123;&#125; &#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"加密解密","slug":"前端/加密解密","permalink":"https://liuxianyu.cn/categories/前端/加密解密/"},{"name":"AES","slug":"前端/加密解密/AES","permalink":"https://liuxianyu.cn/categories/前端/加密解密/AES/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"加密解密","slug":"加密解密","permalink":"https://liuxianyu.cn/tags/加密解密/"}],"author":"liuxy0551"},{"title":"JavaScript 中的 call、apply、bind","slug":"2019-11-10-js-call-apply-bind","date":"2019-11-10T20:10:42.000Z","updated":"2019-11-10T20:10:42.000Z","comments":true,"path":"article/js-call-apply-bind.html","link":"","permalink":"https://liuxianyu.cn/article/js-call-apply-bind.html","excerpt":"最近在加强 JavaScript 基础的学习，这里整理一下 call、apply、bind。","text":"最近在加强 JavaScript 基础的学习，这里整理一下 call、apply、bind。 ¶一、call、apply 的定义 call 和 apply 可以调用函数，改变this指向实现继承和借用别的对象的方法： 1、Object.call(新this对象, 实参1, 实参2, 实参3…) 2、Object.apply(新this对象, [实参1, 实参2, 实参3…]) ¶二、call、apply 的用法 ¶1、间接调用函数，改变函数作用域的this指向 12345function foo() &#123; console.log(this)&#125;foo.apply('这里是 apply 改变的 this 值') // 这里是 apply 改变的 this 值foo.call('这里是 call 改变的 this 值') // 这里是 call 改变的 this 值 实质上是 call 将 foo 中this的指向改为 bar，并调用了该函数。call 和 apply 对应的第一个参数就是this，如果不传或者传 null、undefined 时，this指向window。 ¶2、劫持其他对象的方法 实现方法见上一个用法举例中的代码。 123456789101112var foo = &#123; name: '张三', logName: function() &#123; console.log(this.name) &#125;&#125;var bar = &#123; name: '李四'&#125;foo.logName.call(bar) // 李四 ¶3、两个函数实现继承 12345678910111213function Animal(name) &#123; this.name = name this.showName = function() &#123; consloe.log(this.name) &#125;&#125;function Cat(name) &#123; Animal.call(this, name)&#125;var cat = new Cat('Black Cat')cat.showName() // Black Cat ¶4、为类数组（arguments、nodeList）添加数组方法，如 push、filter、pop 等： 123456function argumentsFunc() &#123; Array.prototype.push.call(arguments, '王五') console.log(arguments) // ['张三', '李四', '王五']&#125;argumentsFunc('张三', '李四') 这里也出现了另一个知识点，即当方法没有定义接收数据的参数，但调用方法时传递了参数，如何在方法内使用传递过来的数据。这里可以使用arguments进行接收，arguments 属于类数组，document.getElementByName(‘className’) 拿到的 nodeList 也是类数组。 ¶5、合并数组 1234let arr1 = [1, 2, 3]let arr2 = [4, 5, 6]Array.prototype.push.apply(arr1, arr2)console.log(arr1) // [1, 2, 3, 4, 5, 6] ¶6、求数组最大值 12let arr3 = [7, 8, 9]console.log(Math.max.apply(null, arr3)) // 9 ¶7、判断字符类型 123Object.prototype.toString.call(&#123;&#125;) // '[object Object]'Object.prototype.toString.call([]) // '[object Array]'Object.prototype.toString.call('') // '[object String]' ¶三、bind bind 以后 fooNewBind 重新绑定了方法内部的this指向，此时不会调用方法，不兼容 IE8。 12345678910111213var name = '李四'var foo = &#123; name: '张三', logName: function(age) &#123; console.log(this.name, age) &#125;&#125;var fooNew = foo.logNamevar fooNewBind = foo.logName.bind(foo)fooNew(10) // 李四 10fooNewBind(11) // 张三 11 此时如果bind换成 call 或者 apply 的话，就需要再加上age参数，且会调用方法。 ¶四、三者异同 同：都是改变函数的this指向，都可接收参数 异：bind 和 call 是接收单个参数，apply 是接收数组","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"JavaScript 中的 const、var、let","slug":"2019-11-08-js-const-var-let","date":"2019-11-08T09:41:46.000Z","updated":"2020-10-21T10:34:54.000Z","comments":true,"path":"article/js-const-var-let.html","link":"","permalink":"https://liuxianyu.cn/article/js-const-var-let.html","excerpt":"ES6 新增了两个重要的关键字：const 和 let，加上之前的 var 有了三个变量的声明方式，整理并记录一下。","text":"ES6 新增了两个重要的关键字：const 和 let，加上之前的 var 有了三个变量的声明方式，整理并记录一下。 ¶一、const const 声明一个只读的变量，而且必须初始化。声明后，变量的值就不可以修改。 123const a = 2; // 正确const b; // 错误a += 1; // 错误 ¶二、var var 无块级作用域，容易造成全局变量污染。定义的变量可以修改，如果不初始化会输出undefined，不会报错。 123456var a = 2; // 正确var a; // 正确change () &#123; a = 4; console.log(a); // 输出 4&#125; ¶三、let let 有块级作用域，可以理解为带有块级作用域的 var。函数内部使用 let 定义变量后，对函数外部无影响。 123456let a = 2;console.log(a); // 输出 2change () &#123; let a = 4; console.log(a); // 输出 4&#125; ¶四、const、var、let 的比较 ¶1、const 和 let 的相同点 二者都是块级作用域 都不能和所在作用域内的其他变量或函数拥有相同的名称 ¶2、const 和 let 的不同点 const 声明的变量必须初始化，而 let 声明的变量不用 const 声明的变量不能通过再次修改，也不能再次声明。而 let 声明的变量可以修改。 ¶3、var 声明的变量会挂载到 window 上，const 和 let 声明的变量不会 ¶五、const 的本质 const 声明的变量不可再次修改，但并非是常量，它声明了一个常量引用一个值。使用 const 声明的对象或数组，其实是可变的。下面的代码并不会报错： 123const car = &#123; type: 'Fiat', model: '500', color: 'white' &#125;; // 创建常量对象car.color = 'red'; // 修改属性car.owner = 'Johnson'; // 添加属性 但是我们不能对常量对象重新赋值： 12const car = &#123; type: 'Fiat', model: '500', color: 'white' &#125;;car = &#123; type: 'Volvo', model: 'EX60', color: 'red' &#125;; // 错误 const 声明的数组同理，能以下标去修改数组，也能通过 push 方法添加元素，但是不能重新赋值。","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"Vue 项目中实现 RSA 加密","slug":"2019-11-07-Vue-RSA","date":"2019-11-07T10:53:08.000Z","updated":"2019-11-07T10:53:08.000Z","comments":true,"path":"article/vue-rsa.html","link":"","permalink":"https://liuxianyu.cn/article/vue-rsa.html","excerpt":"Vue 项目中实现 RSA 加密主要是使用第三方插件，这里推荐使用 jsencrypt 和 encryptlong","text":"Vue 项目中实现 RSA 加密主要是使用第三方插件，这里推荐使用 jsencrypt 和 encryptlong ¶一、jsencrypt jsencrypt在处理一些较短文本的加密时比较好使，如 get 请求参数的加密。 1npm i jsencrypt -S 1234567891011import &#123; JSEncrypt &#125; from 'jsencrypt'export default &#123; rsaData (data) &#123; const PUBLIC_KEY = 'your rsa public key' let jsencrypt = new JSEncrypt() jsencrypt.setPublicKey(PUBLIC_KEY) let result = jsencrypt.encrypt(data) return result &#125;&#125; 如果遇到 post 且参数较多时，就会报错jsencrypt.js Message too long for RSA，这个时候就需要encryptlong登场了。 ¶二、encryptlong encryptlong是基于jsencrypt扩展的长文本分段加解密功能。 1npm i encryptlong -S 12345678910111213141516171819import &#123; JSEncrypt &#125; from 'encryptlong'export default &#123; encrypt (data) &#123; const PUBLIC_KEY = 'your rsa public key' let encryptor = new JSEncrypt() encryptor.setPublicKey(PUBLIC_KEY) const rsaData = encryptor.encryptLong(data) this.decrypt(rsaData) return rsaData &#125;, // 解密 - PRIVATE_KEY - 验证 // @param rsaData String decrypt(rsaData) &#123; const PRIVATE_KEY = 'your rsa private key' let decryptor = new JSEncrypt() decryptor.setPrivateKey(PRIVATE_KEY) &#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"加密解密","slug":"前端/加密解密","permalink":"https://liuxianyu.cn/categories/前端/加密解密/"},{"name":"RSA","slug":"前端/加密解密/RSA","permalink":"https://liuxianyu.cn/categories/前端/加密解密/RSA/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"加密解密","slug":"加密解密","permalink":"https://liuxianyu.cn/tags/加密解密/"}],"author":"liuxy0551"},{"title":"Cent OS 基础环境搭建","slug":"2019-11-05-cent-os-base","date":"2019-11-05T09:52:45.000Z","updated":"2019-11-05T09:52:45.000Z","comments":true,"path":"article/cent-os-base.html","link":"","permalink":"https://liuxianyu.cn/article/cent-os-base.html","excerpt":"趁着双十一买了服务器和域名，这里记录一下 Cent OS 服务器基础环境的搭建。","text":"趁着双十一买了服务器和域名，这里记录一下 Cent OS 服务器基础环境的搭建。 ¶一、 添加 deploy 用户 购买服务器后在实例详情 -&gt; 基本信息 -&gt; 更多 -&gt; 重置实例密码，重启服务器后就可以使用ssh root@47.65.55.62来连接服务器了。 1、创建用户，默认生成 用户组 和 用户名 相同；将 deploy 加入 root 组 12adduser deployusermod -a -G root deploy 2、修改 deploy 的密码 1passwd deploy 3、切换 sudo 时候无需密码 1vim /etc/sudoers 找到 root ALL=(ALL:ALL) ALL，在这行下面增加以下代码，NOPASSWD 表示切换 sudo 时候无需输入 root 密码 1deploy ALL=(ALL) NOPASSWD: ALL ¶二、 添加本机的 SSH 公钥到服务器 以后连接服务器不用每次都输入用户名和密码 1、在本地生成公私钥对 1ssh-keygen -t rsa 2、本地执行以下命令并输入对应密码完成自动写入到远程服务器的~/.ssh/authorized_keys文件，没有公钥可通过ssh-keygen -t rsa一路回车生成公钥 1ssh-copy-id deploy@47.65.55.62 或 1ssh-copy-id -i .ssh/id_rsa_liuxy0551 deploy@47.65.55.62 3、windows 执行以下操作 1type $env:USERPROFILE\\.ssh\\id_rsa.pub | ssh &#123;user-name&#125;@&#123;user-ip&#125; \"cat &gt;&gt; .ssh/authorized_keys\" deploy 用户可能没有 .ssh 文件夹，执行以下命令： 1su deploy 1234mkdir ~/.sshchmod 700 ~/.sshtouch ~/.ssh/authorized_keyschmod 600 ~/.ssh/authorized_keys 4、再使用ssh deploy@47.65.55.62连接服务器就可以免密登录了 注意 如果还不能免密登录，就进行第 3 步设置权限 authorized_keys 权限一定要为600 5、【可选】在远程服务器配置相应的权限： 123chmod 700 /home/deploychmod 700 /home/deploy/.sshchmod 600 /home/deploy/.ssh/authorized_keys chmod 777 -R /mnt将 mnt 目录下所有文件都给予 777 权限 ¶三、安装 git，vim、wget、lsof -y 代表需要输入 y 的地方自动输入 12yum install git -ygit --version 1yum install vim wget lsof -y ¶四、安装 nginx ¶（一）、安装与常见命令 1、安装 nginx 并查看版本号，安装完成后就启动 nginx 查看是否有问题 123yum install nginx -ynginx -vsystemctl start nginx 2、nginx 常用命令 1systemctl start/stop/reload/restart/status nginx 重新加载 nginx 配置 1nginx -s reload ¶（二）、多配置文件 这个服务器之后可能会部署很多学习的项目，为了避免混乱，准备每个项目单独配置。默认配置文件为：/etc/nginx/nginx.conf。 1、如果没有域名且想要使用 80 端口，需要将 nginx 默认配置中的 server 删除，注意保留文件中的include指向。 2、在/etc/nginx/conf.d文件夹下创建配置文件，以.conf结尾，配置内容可以参考百度或 Nginx - Vue单页面应用配置(Vue部署) 1vim /etc/nginx/conf.d/hexo-blog.conf 123456789101112131415161718192021server &#123; listen 80; server_name liuxianyu.cn; root /mnt/projects/hexo-blog/blog; index index.html; location ^~ /static|img|js|css/ &#123; gzip_static on; expires max; add_header Cache-Control public; &#125; location / &#123; try_files $uri $uri/ /index.html; &#125; location ~* \\.(css|js|gif|jpe?g|png)$ &#123; expires 50d; access_log off; add_header Pragma public; add_header Cache-Control &quot;public&quot;; &#125;&#125; 启动 nginx，并设置开机自启 12systemctl start nginxsystemctl enable nginx 注意 配置安全组规则, 这是个大坑。80 端口没打开的时候，无法通过 ip 直接访问，同事说 2018 年 80 端口还是默认打开的，欺负新人 ¶五、安装 node 1、选择下载目录（为什么选择这个目录下载？）： 1cd /usr/local/ 2、下载源文件 1wget https://nodejs.org/dist/v14.21.1/node-v14.21.1-linux-x64.tar.gz 3、解压源文件 1tar zxvf node-v14.21.1-linux-x64.tar.gz 4、重命名文件夹 1mv node-v14.21.1-linux-x64 nodejs14 5、修改配置文件 1vim /etc/profile 6、在当前文件的最后一行加上以下内容： 123 # nodeexport NODE_HOME=/usr/local/nodejs14export PATH=$NODE_HOME/bin:$PATH 7、更新配置文件 1source /etc/profile 8、查看版本号 12node -vnpm -v ¶六、其他安装 1npm i nrm pm2 yarn pnpm -g ¶七、服务器生成 ssh key 服务器拉取一些私有仓库的 git 代码时无需输入用户名密码 1ssh-keygen -t rsa -b 4096 -C \"liuxy0551@qq.com\" ¶八、写在后面 因为是第一次在服务器上操作，很多操作都是尝试着进行的，而我这个人又有点强迫症，所以在很多不太合适的操作过后我都会重置一下服务器。 操作步骤为：阿里云控制台 -&gt; 云服务器 ECS -&gt; 选择实例 -&gt; 实例详情 -&gt; 右上角 停止实例 -&gt; 左侧 本实例磁盘 -&gt; 重新初始化磁盘。 但是下次再连接服务器的时候就会报错了WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!，根据错误提示编辑对应的文件，删除服务器的记录即可。 1vim ~/.ssh/known_hosts","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"Cent OS","slug":"Linux/Cent-OS","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/tags/Linux/"},{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"}],"author":"liuxy0551"},{"title":"JavaScript 中的异步编程","slug":"2019-10-19-js-cb-promise-async-await","date":"2019-10-19T20:30:28.000Z","updated":"2020-10-21T14:21:54.000Z","comments":true,"path":"article/js-cb-promise-async-await.html","link":"","permalink":"https://liuxianyu.cn/article/js-cb-promise-async-await.html","excerpt":"烂笔头记录一下 JavaScript 中的异步编程。","text":"烂笔头记录一下 JavaScript 中的异步编程。 异步编程的方法有： 回调函数 Promise async/await ¶1、回调函数 回调函数在复杂场景下会影响代码的可读性和执行效率。 ¶2、Promise Promise 是 es6 异步编程的一种方案，有三种状态：pending(挂起)、fullfilled(成功)、rejected(拒绝)，状态改变后不可逆，通过 then 方法来实现异步调用后的逻辑，支持链式调用。对应的状态变化有两种情况： pending -&gt; fullfilled (resolved 解决) pending -&gt; rejected (rejected 拒绝) ¶3、async、await async、await 是 es7 用来实现异步编程的，语法是在 function 关键词前加上async，代表是异步函数，await只能在async函数(异步方法)里使用，因为await访问本身就会造成程序停止阻塞，await的阻塞功能，可以把异步方法改成同步。async可以将任何函数转换为 Promise，await可以用在任何返回 Promise 的函数之前，并且会暂停在这里，直到 Promise 返回结果才往下进行。 12345678async function getData () &#123; return '这是一个数据'&#125;!async function () &#123; let p = await getData() console.log(p)&#125;() async、await 基本做到了用同步代码的风格实现异步逻辑，让代码更简洁。","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"JS 中的冒泡排序","slug":"2019-10-02-js-bubble-sort","date":"2019-10-02T16:48:19.000Z","updated":"2019-10-02T16:48:19.000Z","comments":true,"path":"article/js-bubble-sort.html","link":"","permalink":"https://liuxianyu.cn/article/js-bubble-sort.html","excerpt":"记录一下使用 JavaScript 实现的冒泡排序算法，实际操作可查看 http://my-vue.liuxianyu.cn/#/bubble。","text":"记录一下使用 JavaScript 实现的冒泡排序算法，实际操作可查看 http://my-vue.liuxianyu.cn/#/bubble。 ¶一、算法原理 1、比较两个相邻的元素，将值较大的元素交换到后面 2、每一对相邻元素都进行相同操作 3、针对所有的元素重复上述两步，除了最后一个元素 4、持续每次对越来越少的元素重复上述步骤，直到没有任何一对相邻元素需要比较 ¶二、算法思路 依次比较相邻的两个数，将比较小的数放在前面，比较大的数放在后面 第一次比较：首先比较第一个数和第二个数，将较小的数放在前面，较大的数放在后面； 第二次比较：比较第二个数和第三个数，将较小的数放在前面，较大的数放在后面； … 如此继续，直到比较到最后两个数，将较小的数放在前面，较大的数放在后面； 在上面一趟比较完成后，最后一个数一定是数组中最大的一个数，所以在第二趟比较时，最后一个数不参与比较； 在第二趟比较完成后，倒数第二个数也一定是数组倒数第二大数，所以在第三趟比较时，倒数第二个数不参与比较； 依次类推，每一趟比较次数依次减少 n 个数进行冒泡排序，总共要进行 n - 1 次排序，每趟进行 n - 1 次比较 ¶三、算法描述 123456789101112131415161718 // 冒泡排序 bubbleSort (list) &#123; // 需要进行 list.length 次比较 for (let i = 0; i &lt; list.length - 1; i++) &#123; // 第 i 趟比较 for (let j = 0; j &lt; list.length - i - 1; j++) &#123; // 开始进行比较，如果 list[i] &gt; list[i + 1]，则交换位置 if (list[j] &gt; list[j + 1]) &#123; let temp = list[j] list[j] = list[j + 1] list[j + 1] = temp &#125; &#125; &#125; return list &#125;&#125; ¶四、算法比较： 排序算法 平均时间复杂度 冒泡排序 O(n2) 选择排序 O(n2) 插入排序 O(n2) 希尔排序 O(n1.5) 快速排序 O(N*logN) 归并排序 O(N*logN) 堆排序 O(N*logN) 基数排序 O(d(n+r))","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"},{"name":"算法","slug":"JavaScript/算法","permalink":"https://liuxianyu.cn/categories/JavaScript/算法/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"},{"name":"算法","slug":"算法","permalink":"https://liuxianyu.cn/tags/算法/"}],"author":"liuxy0551"},{"title":"JS 中把对象转成 String","slug":"2019-09-24-JS-Object-String","date":"2019-09-24T19:07:15.000Z","updated":"2019-11-07T10:53:08.000Z","comments":true,"path":"article/js-object-string.html","link":"","permalink":"https://liuxianyu.cn/article/js-object-string.html","excerpt":"最近公司项目在钉钉应用市场上线时，钉钉要求请求的数据需要加密（尤其是不允许暴露各类 id），保障数据安全。因为是上线周期内才提出的加密，所以由前端加密、后端解密来完成需求。后端希望 GET 请求?后的所有内容按正常请求时的格式进行加密，即加密getResume?page=1&amp;pageSize=10&amp;jobId=2，加密后的请求为getResume?data=密文。目前在做 GET 请求的参数加密，实现思路是 axios 请求拦截把 params 对象转成字符串，记录一下两种实现方式。","text":"最近公司项目在钉钉应用市场上线时，钉钉要求请求的数据需要加密（尤其是不允许暴露各类 id），保障数据安全。因为是上线周期内才提出的加密，所以由前端加密、后端解密来完成需求。后端希望 GET 请求?后的所有内容按正常请求时的格式进行加密，即加密getResume?page=1&amp;pageSize=10&amp;jobId=2，加密后的请求为getResume?data=密文。目前在做 GET 请求的参数加密，实现思路是 axios 请求拦截把 params 对象转成字符串，记录一下两种实现方式。 ¶一、URLSearchParams URLSearchParams 接口定义了一些实用的方法来处理 URL 的查询字符串。 123let params = &#123; page: 1, pageSize: 10, jobId: 2 &#125;let str = new URLSearchParams(params).toString()console.log(str) // page=1&amp;pageSize=10&amp;jobId=2 注意 1、当 params = null 时，输出 null= 2、当 params = undefined || {} 时，输出空字符串 ¶二、Object.keys 和 map 12345let params = &#123; page: 1, pageSize: 10, jobId: 2 &#125;let keyList = Object.keys(params) // [\"page\", \"pageSize\", \"jobId\"]let valueList = keyList.map((i) =&gt; &#123; return i + '=' + params[i] &#125;)let valueList1 = keyList.map((i) =&gt; &#123; return params[i] &#125;) // [1, 10, 2]console.log(valueList.join('&amp;')) // page=1&amp;pageSize=10&amp;jobId=2 注意 1、当 params = {} 时，keyList、valueList、valueList1 均输出[] 2、params 不允许为 null 或 undefined，否则 keyList 即会报错 3、以上代码可简写为： 123456let params = &#123; page: 1, pageSize: 10, jobId: 2 &#125;let valueList = Object.keys(params).map((i) =&gt; &#123; return i + '=' + params[i]&#125;)console.log(valueList) // [\"page=1\", \"pageSize=10\", \"jobId=2\"]console.log(valueList.join('&amp;')) // page=1&amp;pageSize=10&amp;jobId=2 ¶三、路径 string 转为对象 有没有问号结果都是一样的。 12const str = Object.fromEntries(new URLSearchParams('?date=30&amp;job=aaaa&amp;status=8'))console.log(str); // &#123;date: '30', job: 'aaaa', status: '8'&#125; ¶四、加密方法 参考另一篇随笔：Vue 项目中实现 RSA 加密","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"form 表单通过正则表达式校验联系方式","slug":"2019-09-16-Telephone-Mobile-Check","date":"2019-09-16T16:02:15.000Z","updated":"2019-09-16T16:02:15.000Z","comments":true,"path":"article/telephone-mobile-check.html","link":"","permalink":"https://liuxianyu.cn/article/telephone-mobile-check.html","excerpt":"最近公司项目中有个表单提交时需要校验输入的联系方式是电话号码或者手机号，通过正则表达式校验，记录一下。","text":"最近公司项目中有个表单提交时需要校验输入的联系方式是电话号码或者手机号，通过正则表达式校验，记录一下。 ¶一、HTML 12345&lt;el-form :model=\"form\" ref=\"formRef\"&gt; &lt;el-form-item prop=\"phone\" :rules=\"[$validators.checkTelephone()]\"&gt; &lt;el-input placeholder=\"请输入联系方式\" v-model=\"form.phone\"&gt;&lt;/el-input&gt; &lt;/el-form-item&gt;&lt;/el-form&gt; ¶二、正则表达式 123456789101112131415161718192021222324252627// 联系方式校验 电话和手机号checkTelephone(options) &#123; // 联系方式校验 电话和手机号 function checkTelephone(rule, value, callback) &#123; if (!value) &#123; callback('联系方式不能为空'); // 校验不通过 return false &#125; else &#123; const isPhone = /^([0-9]&#123;3,4&#125;-)?[0-9]&#123;7,8&#125;$/; // 0571-86295197 const isPhone01 = /^([0-9]&#123;3,4&#125;)?[0-9]&#123;7,8&#125;$/; // 0571-86295197 const isPhone02 = /^\\d&#123;3,4&#125;-\\d&#123;3,4&#125;-\\d&#123;3,4&#125;$/; // 4001-550-520 // const isPhone02 = /^[0-9]&#123;3,4&#125;-[0-9]&#123;2,3&#125;-[0-9]&#123;2,3&#125;$/; // 4001-550-520 // const isPhone02 = /^([0-9]&#123;3,4&#125;-)?([0-9]&#123;3,4&#125;-)?[0-9]&#123;3,4&#125;$/; // 4001-550-520 const isMob=/^1[0-9]&#123;10&#125;$/; // const phone02 = /^0\\d&#123;2,3&#125;-?\\d&#123;7,8&#125;$/; const valuePhone = value.trim(); if (isMob.test(valuePhone) || isPhone.test(valuePhone) || isPhone01.test(valuePhone) || isPhone02.test(valuePhone)) &#123; // 正则验证 callback() // 校验通过 return true &#125; else &#123; callback('请输入正确的联系方式') // 校验不通过 return false &#125; &#125; &#125; return Object.assign(&#123; validator: checkTelephone, message: '请输入正确的联系方式', trigger: 'blur' &#125;, options)&#125; ¶参考资料 1、正则 （手机号，座机， 密码8-16位字母与数字校验）","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"正则表达式","slug":"前端/正则表达式","permalink":"https://liuxianyu.cn/categories/前端/正则表达式/"}],"tags":[{"name":"正则表达式","slug":"正则表达式","permalink":"https://liuxianyu.cn/tags/正则表达式/"}],"author":"liuxy0551"},{"title":"Vue 项目中生成类似 GitHub 的随机头像","slug":"2019-09-16-Random-Avatar-MD5","date":"2019-09-16T15:42:39.000Z","updated":"2019-09-16T15:42:39.000Z","comments":true,"path":"article/random-avatar-md5.html","link":"","permalink":"https://liuxianyu.cn/article/random-avatar-md5.html","excerpt":"最近个人项目中有头像需求，就想起 GitHub 的随机头像，通过 identicon.js 和 blueimp-md5 两个第三方库实现了，记录一下。","text":"最近个人项目中有头像需求，就想起 GitHub 的随机头像，通过 identicon.js 和 blueimp-md5 两个第三方库实现了，记录一下。 ¶一、实现效果 ¶二、封装组件 - avatar.vue 123456789101112131415161718192021222324252627&lt;template&gt; &lt;img class=&quot;avatar&quot; :src=&quot;url&quot;&gt;&lt;/template&gt;&lt;script&gt; import Identicon from &apos;identicon.js&apos; import md5 from &apos;blueimp-md5&apos; export default &#123; props: &#123; num: [Number] &#125;, computed: &#123; url() &#123; return &apos;data:image/png;base64,&apos; + new Identicon(md5(this.num || 0), 420).toString() &#125; &#125; &#125;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt; .avatar &#123; width: 40px; height: 40px; border-radius: 50%; &#125;&lt;/style&gt; ¶参考资料 1、identicon.js 2、JavaScript-MD5","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"随机头像","slug":"前端/Vue/随机头像","permalink":"https://liuxianyu.cn/categories/前端/Vue/随机头像/"}],"tags":[{"name":"随机头像","slug":"随机头像","permalink":"https://liuxianyu.cn/tags/随机头像/"},{"name":"MD5","slug":"MD5","permalink":"https://liuxianyu.cn/tags/MD5/"}],"author":"liuxy0551"},{"title":"HTML + CSS 伪元素实现同心圆","slug":"2019-09-16-CSS-Concentric-Circles","date":"2019-09-16T13:36:30.000Z","updated":"2019-09-16T13:36:30.000Z","comments":true,"path":"article/css-concentric-circles.html","link":"","permalink":"https://liuxianyu.cn/article/css-concentric-circles.html","excerpt":"最近工作中涉及到一个同心圆样式的绘制，记录一下通过一个 div 实现的方法。","text":"最近工作中涉及到一个同心圆样式的绘制，记录一下通过一个 div 实现的方法。 ¶一、实现效果 ¶二、HTML 1&lt;div class=\"radio active\"&gt;&lt;/div&gt; ¶三、CSS 1234567891011121314151617181920.radio &#123; width: 16px; height: 16px; border: 2px #DBE0E6 solid; border-radius: 50%; &amp;.active &#123; border: 2px #53A2F7 solid; position: relative; &amp;:before &#123; content: ''; width: 6px; height: 6px; border-radius: 50%; background: #53A2F7; position: absolute; top: 3px; left: 3px; &#125; &#125;&#125; 注意 content 属性与 :before 及 :after 伪元素配合使用，插入生成的内容，必须有 content 属性，否则中间的圆不显示","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"CSS","slug":"前端/CSS","permalink":"https://liuxianyu.cn/categories/前端/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://liuxianyu.cn/tags/CSS/"}],"author":"liuxy0551"},{"title":"Vue 编程之路（四）——子组件更新父组件的数据","slug":"2019-09-07-Child-Update-Parent","date":"2019-09-07T23:36:30.000Z","updated":"2019-09-07T23:36:30.000Z","comments":true,"path":"article/child-update-parent.html","link":"","permalink":"https://liuxianyu.cn/article/child-update-parent.html","excerpt":"最近遇见了子组件更新父组件数据的需求，总结一下使用的方法以及一些区别","text":"最近遇见了子组件更新父组件数据的需求，总结一下使用的方法以及一些区别 ¶一、sync 修饰符推荐 1、组附件调用子组件传值时加上 sync 修饰符 1&lt;InputSearch :show.sync=&quot;show&quot;&gt;&lt;/InputSearch&gt; 2、子组件中可以这样更新父组件的值 1this.$emit('update:show', false) 注意 要定义对应的变量去传值，如：show，不可以直接传 true 之类的实际值 ¶二、this.$parent 1、不使用修饰符，通过 this.$parent 进行改变 1this.$parent.show = false ¶三、sync 修饰符和 this.$parent 的区别 两种方法的关键区别在于： 1、第一种方法是显式的操作数据，而第二种是隐式的操作数据，隐式容易导致逻辑混乱； 2、第二种方法更新父组件的数据对于父组件来说是完全被动的，父组件本身并不知情，很容易在父组件毫不知情的情况下被某个子组件更新了数据； 3、Vue 的单向数据流理念中，一个组件的状态只能由组件自身和父组件改变，子组件只能提交事件并任由其父组件处理，这个机制保证组件对自身的状态总是充分知情，这样才能保障代码逻辑的健壮性。 推荐 推荐使用 sync 修饰符","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"父子组件","slug":"前端/Vue/父子组件","permalink":"https://liuxianyu.cn/categories/前端/Vue/父子组件/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"父子组件","slug":"父子组件","permalink":"https://liuxianyu.cn/tags/父子组件/"}],"author":"liuxy0551"},{"title":"在 VMware Fusion 中安装 Cent OS 7.6 版本的虚拟机","slug":"2019-08-16-VMware-Linux","date":"2019-08-16T22:59:48.000Z","updated":"2019-08-16T22:59:48.000Z","comments":true,"path":"article/vmware-linux.html","link":"","permalink":"https://liuxianyu.cn/article/vmware-linux.html","excerpt":"今天突然想在 Mac OS 上感受一下虚拟机的乐趣。尝试了 VirtualBox（安装夜神模拟器时不知道怎么就同时安装了）、Parallels Desktop、VMware Fusion 之后，发现还是 VMware Fusion 更有以前在 Windows 上使用虚拟机的熟悉感，所以以下内容基于 VMware Fusion。","text":"今天突然想在 Mac OS 上感受一下虚拟机的乐趣。尝试了 VirtualBox（安装夜神模拟器时不知道怎么就同时安装了）、Parallels Desktop、VMware Fusion 之后，发现还是 VMware Fusion 更有以前在 Windows 上使用虚拟机的熟悉感，所以以下内容基于 VMware Fusion。 ¶一、 下载 Linux 镜像 1、Cent OS：https://www.centos.org 下载页面 在下载页面选择 DVD 进入镜像选择页面，第一个是华为云上的镜像，我在杭州，所以我选择了第二个浙大的镜像。其实华为云的更快点：http://mirrors.huaweicloud.com/centos/7.6.1810/isos/x86_64/CentOS-7-x86_64-DVD-1810.iso 2、Ubuntu：https://ubuntu.com 华为云上的多版本镜像地址http://mirrors.huaweicloud.com/repository/ubuntu-releases/16.04/ 也可以在 下载页面 滚动到 China 的部分，选择合适的镜像地址 ¶二、 几种虚拟机软件给我的感受 1、VirtualBox 准备再感受一下虚拟机的时候，想起来上次安装夜神模拟器模拟安卓的时候，给我安装了一个 VirtualBox，所以先拿它试一试。但是页面 UI 感觉不是很好看（其实我第一时间想到的就是和 Easy UI 类似的风格） pass 2、Parallels Desktop 同事推荐的，之前也在另一个同事的电脑上感受过安装的 Windows 虚拟机，确实看起来不错，但是我使用虚拟机的过程基本都是依赖 VMware，所以用起来不是很习惯，最后还是用起了 VMware。在网上看到 Parallels Desktop 也可以做安卓模拟器，准备后期更一篇相关的随笔，这个软件先保留在电脑里 3、VMware Fusion 和我在 Windows 上使用的 VMware Workstation 风格基本一致，新建虚拟机的步骤也差不多，不再赘述，可参考以前的一篇随笔 在 VMware 中安装 MacOS High Sierra 10.13。软件需要收费，自行解决 ¶三、 安装 Cent OS 7.6 1、安装 GNOME 版本，多图 ¶四、基础配置 ¶1、ifconfig 如果 ifconfig 报错，在 root 用户下执行： 1yum install net-tools -y 参考：Cent OS 7 最小安装完成后，ifconfig 命令用不了 用户名 root liuxy 密码 123456 1234 IP 192.168.131.137（变化的） ¶2、-bash: vim: 未找到命令 ¶2.1、查看 vim 数据包 1rpm -qa |grep vim ¶2.2、安装 vim 相关文件 123yum install -y vim-minimalyum install -y vim-commonyum install -y vim-enhanced ¶2.3、绝招 如果还是不生效，执行： 1yum install -y vim* 参考：【linux】-bash: vim: 未找到命令 ¶3、将 liuxy 加入 sudo 权限 1vim /etc/sudoers 像如下配置 sudoers 123# User privilege specification root ALL=(ALL:ALL) ALL liuxy ALL=(ALL:ALL) ALL","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"Cent OS","slug":"Linux/Cent-OS","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/"}],"tags":[{"name":"VMware","slug":"VMware","permalink":"https://liuxianyu.cn/tags/VMware/"},{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/tags/Linux/"},{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"}],"author":"liuxy0551"},{"title":"将 Hexo 个人空间放到服务器上","slug":"2019-08-15-Hexo-Server","date":"2019-08-15T17:23:45.000Z","updated":"2019-11-05T09:52:45.000Z","comments":true,"path":"article/hexo-server.html","link":"","permalink":"https://liuxianyu.cn/article/hexo-server.html","excerpt":"最近拿到一个服务器，尝试着把基于 Hexo 搭建的个人空间放到服务器上，用 Nginx 进行转发，顺便再熟悉一下 Linux 下的一些操作，同时会将部署、git 备份、上传服务器等一系列操作自动化。","text":"最近拿到一个服务器，尝试着把基于 Hexo 搭建的个人空间放到服务器上，用 Nginx 进行转发，顺便再熟悉一下 Linux 下的一些操作，同时会将部署、git 备份、上传服务器等一系列操作自动化。 ¶一、 虚拟机练手 1、我根据网上的教程在服务器上部署后，个人站的打开速度提升了很多，借用同事的一句话：5M 带宽的服务器放你一个静态资源怎么会慢？ 2、实现目标后就想着总结一下过程，故在虚拟机上再试一次，同时也是感受一下 Mac OS 系统中虚拟机的玩法 3、我以前在 Windows 上玩的虚拟机是 VMware，这次在 Mac OS 上安装的是 VMware Fusion，基本上新建虚拟机的步骤都差不多，不再赘述，可参考以前的一篇随笔 在 VMware 中安装 MacOS High Sierra 10.13 4、我目前选用的是和服务器一样的 Cent OS，具体操作步骤参考 服务器实践 ¶二、 服务器实践 ¶（一）、服务器基础环境搭建 1、参考 Cent OS 基础环境搭建 ¶（二）、Hexo 的部署 需要进行的操作：创建 deploy 用户、添加本机的 SSH 公钥到服务器、安装 git、安装 nginx 并配置等 1、创建 deploy 用户并设置密码，把 deploy 用户添加到 sudo 用户组中 - 参考 Cent OS 基础环境搭建 - 添加 deploy 用户 2、添加本机的 SSH 公钥到服务器 - 参考 Cent OS 基础环境搭建 - 添加本机的 SSH 到服务器 3、切换到 deploy 用户，安装 git、nginx 参考 Cent OS 基础环境搭建 - 安装 git 参考 Cent OS 基础环境搭建 - 安装 nginx 4、在服务器上新建一个blog文件夹，用来存储hexo d后的静态文件，并授权给 deploy 用户。 123sudo mkdir -p /mnt/projects/hexo-blog/blogcd /mnt/projects/hexo-blogsudo chown -R deploy:deploy blog 5、在hexo-blog目录下初始化一个 git 裸库，服务器上的 git 仓库通常都以.git结尾，并把 git 仓库的 owner 改为 deploy 用户 12sudo git init --bare blog.gitsudo chown -R deploy:deploy blog.git 6、新建一个 post-receive 文件 1sudo vim blog.git/hooks/post-receive 然后在该文件中输入以下内容，表示将分支导出到blog文件夹下。 1git --work-tree=/mnt/projects/hexo-blog/blog --git-dir=/mnt/projects/hexo-blog/blog.git checkout -f 保存退出之后，再执行以下命令，赋予该文件可执行权限。 1sudo chmod +x blog.git/hooks/post-receive 7、修改博客根目录下的_config.yml文件： 1234567deploy: type: git repo: github: https://github.com/liuxy0551/liuxy0551.github.io.git,master coding: https://git.dev.tencent.com/liuxianyu/liuxy0551.coding.me.git,master gitee: git@gitee.com:liuxy0551/liuxy0551.git,master server: deploy@47.65.55.62:/mnt/projects/hexo-blog/blog.git,master 8、在博客根目录下输入以下命令： 123hexo cleanhexo ghexo d 9、配置 nginx 1sudo vim /etc/nginx/conf.d/hexo-blog.conf 细节配置参考 Cent OS 基础环境搭建 - 安装 nginx - 多配置文件，配置完成后启动 nginx 并设置开机自启，然后在浏览器输入域名就可以看见博客的内容了。 12sudo systemctl enable nginxsudo systemctl start nginx ¶参考资料 1、基于CentOS搭建Hexo博客","categories":[{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"Cent OS","slug":"Linux/Cent-OS","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/"}],"tags":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/tags/Blog/"},{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/tags/Linux/"},{"name":"Hexo","slug":"Hexo","permalink":"https://liuxianyu.cn/tags/Hexo/"}],"author":"liuxy0551"},{"title":"Dart 基础知识","slug":"2019-08-15-dart-basic","date":"2019-08-15T11:21:21.000Z","updated":"2019-08-15T11:21:21.000Z","comments":true,"path":"article/dart-basic.html","link":"","permalink":"https://liuxianyu.cn/article/dart-basic.html","excerpt":"最近学习了一下Dart，做一些基础笔记。","text":"最近学习了一下Dart，做一些基础笔记。 我是看 IT 营大地老师的视频 学习的，感觉大地老师讲的很不错，以前 Angular 入门也是看大地老师的视频。再次致谢。 ¶常量 const final 12const PI = 3.1415926;final PI = 3.1415926; ¶String 字符串 isEmpty 1String str = '1+1=$&#123;1+1&#125;'; // 1+1=2 ¶int 整型 12var myNum = int.parse('123');if (myNum.isNaN) &#123; &#125; ¶double 浮点型 12var d1 = double.parse('123');var d2 = double.parse('123.1'); ¶bool true false ¶List 数组 length isEmpty isNotEmpty reversed add addAll([]) indexOf() remove() removeAt(index) fillRange() insert() insertAll() join() slit() forEach() map() any() every() 1234567891011var list1 = [1, 2, 3, 4, 5];print(list1[1]);var list2 = list1.reversed.toList();var list3 = new List();list3.add(1);list3.add(2);// 指定类型 只能存放 String 类型var list4 = new List&lt;String&gt;(); ¶Set 元素不允许重复 12var s = new Set();var list = s.toList(); 转换成数组 ¶Map 字典 keys values isEmpty isNotEmpty addAll() remove(key) containsKey() containsValue() 123456789var person = &#123; \"name\": \"zhangsan\", age: 20, \"work\": [\"程序员\", \"送外卖\"] &#125;;var p = new Map();p['name'] = '张三';p['age'] = 20;p['work'] = [\"程序员\", \"送外卖\"];print(p.keys.toList());print(p.values.toList()); ¶类型判断 is 12345678var str = '123';if (str is String) &#123; print('String');&#125; else if (str is int) &#123; console.log('int')&#125; else &#123; console.log('其他类型')&#125; ¶运算符 + - * / % ~/取整 &gt; &lt; &gt;= &lt;= = == | &amp;&amp; || ??= += -= *= /= %= ~/= ++ -- 123int a = 10;int b ??= a; // b为空的时候将a的值给bprint(b); // 10 ¶三目运算符 ?? 12var a = 22;var c = a ?? 33; ¶if else, switch case 123456789101112131415if () &#123; &#125;else if () &#123; &#125;else () &#123; &#125;switch (gender) &#123; case 'male': break; case 'female': break; default: print('参数错误');&#125;try &#123; &#125;catch (err) &#123; &#125; ¶循环 for while 123456789101112for (int i = 0; i &lt; 10; i++) &#123; print(i); continue;&#125;while ()&#123; break;&#125;do &#123;&#125; while () ¶Function 1234567891011121314151617181920212223242526272829303132void printInfo (String username, int age) &#123; print('hello func'); // return ;&#125;// 可选参数void printInfo (String username, [int age]) &#123; if (age != null) &#123; print('passed age'); &#125;&#125;// 默认参数void printInfo (String username, [int age, String gender = 'male']) &#123; if (age != null) &#123; print('passed age'); &#125;&#125;// 命名参数void printInfo (String username, &#123;int age, String gender = 'male'&#125;) &#123; if (age != null) &#123; print('passed age'); &#125;&#125;// 箭头函数List list = [1,2,3];var newList = list.map((value) =&gt; value * 2);// 自执行函数(()&#123; &#125;)(); ¶Class 类 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263class Person &#123; static var PI = 3.1415926; // Person.PI static void show () &#123; &#125; String name; String city; int _age; // _ 私有方法(类必须提取到一个文件中才有效) String _gender; // 默认构造函数的简写 Person(this.name):_gender='male',_age=18; // 命名构造函数 Person.now () &#123; print('我是命名构造函数'); &#125; // var p1 = Person.setInfo('zhangsan', 18); Person.setInfo (String name, this.city) &#123; print('我是命名构造函数'); &#125; // 工厂构造函数 factory Person (String name) &#123; return new Person._internal(name); &#125; Person._internal(this.name); void printInfo () &#123; print(Person.PI); print(PI); print(this.name); print(name); &#125; // getter setter String get genderValue &#123; return this._gender; &#125; set genderValue(value) &#123; this._gender = value; &#125; // _ 私有方法 _setGender (String gender) &#123; this._gender = gender; &#125; // 操作符重载 String operator +(Person p) &#123; return '$&#123;this.name&#125; &amp; $&#123;p.name&#125;'; &#125;&#125;class Student extends Person &#123; String idNum; Student(String name, this.idNum) : super(name) &#123; &#125; Student(this.idNum, String name, [String city = 'hangzhou']) : super.setInfo(name, city) &#123; &#125; @override void printInfo() &#123; print(this.idNum); // TODO: implement printInfo super.printInfo(); &#125;&#125; ¶is as 12345678Person p = new Person();// 类型判断if (p is Person) &#123; &#125;// 类型转换(p as Person).printInfo();// 连对操作p..name = 'zhangsan'..city = 'hangzhou'; ¶抽象类 12345678910111213141516171819202122232425262728abstract class Animal &#123; eat(); printInfo () &#123; print('抽象类的方法'); &#125;&#125;class Dog implements Animal &#123; @override eat() &#123; // TODO: implement eat return null; &#125; @override printInfo() &#123; // TODO: implement printInfo return null; &#125;&#125;class Cat extends Animal &#123; @override eat() &#123; // TODO: implement eat return null; &#125; // superInfo 可以使用抽象类的方法&#125; ¶多接口 1234567891011121314151617181920abstract class A &#123; &#125;abstract class B &#123; &#125;class C implements A,B &#123; &#125;// mixinsclass A &#123; &#125;class B &#123; &#125;// 作为mixin类不能有继承，且不能有构造函数, 相同方法， 后面会覆盖前面的方法// class C with A,B &#123; &#125;class C extends Person with A,B &#123; C(String name) : super(name) &#123; &#125;&#125;var c = new C; print(c is C); // trueprint(c is Person); // trueprint(c is A); // true print(c is B); // true ¶泛型 1234567891011T getData&lt;T&gt; (T value) &#123; return value;&#125;T getData&lt;int&gt; (T value) &#123; return value;&#125;// eggetData('hello')getData&lt;String&gt; ('hello') ¶系统库、第三方库、自定义库 系统库 123import 'dart:io';import 'dart:math';import 'dart:convert'; 第三方库 pubspec.yaml 添加包及版本号 12dependences: http: ^0.12.0+2 pub get 进行安装，然后就可以使用了 1import 'package:http/http.dart' as http; 自定义库 1import 'lib/Animal.dart'; 类名冲突 12import 'lib/Person1.dart'; // Person import 'lib/Person2.dart'; // Person 部分引入 12import 'lib/myMath' show getAge; // 只引入 getAgeimport 'lib/myMath' hide getName; // getName 不被导入，其他都引入 延时加载（懒加载） deferred as 当使用的时候需要调用 loadLibrary() 来加载 12345import 'package:defered/hello.dart' deferred as hello;greet () async &#123; await hello.loadLibrary(); hello.printGreeting();&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Dart","slug":"前端/Dart","permalink":"https://liuxianyu.cn/categories/前端/Dart/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"https://liuxianyu.cn/tags/Dart/"}],"author":"liuxy0551"},{"title":"Vue 兼容 IE9（含） +","slug":"2019-07-16-vue-ie9+","date":"2019-07-16T15:33:01.000Z","updated":"2019-07-16T15:33:01.000Z","comments":true,"path":"article/vue-ie9+.html","link":"","permalink":"https://liuxianyu.cn/article/vue-ie9+.html","excerpt":"最近有个项目在 IE9 中白屏，整理一下相关的资料。","text":"最近有个项目在 IE9 中白屏，整理一下相关的资料。 ¶1、transpileDependencies 如果项目中使用了第三个组件，请在vue.config.js中添加： 1234module.exports = &#123; // 如下正则代表当前 node_modules/zzp-ui 下的所有文件【如果是 ['zzp-ui'] 则只有引用的一个文件生效】 transpileDependencies: [/zzp-ui/]&#125; ¶2、浏览器内核 建议在 public/index.html head 中添加： 1&lt;meta name=\"renderer\" content=\"webkit|ie-comp|ie-stand\"&gt; 首先强制浏览器使用 webkit 内核（极速内核） 如果浏览器没有 webkit 内核，则按照用户浏览器所支持的最新 IE 版本的 trident 内核渲染页面（IE 兼容内核） 否则按照当前浏览器的标准内核渲染（IE 标准内核） ¶3、IE9 跨域 IE9 默认不支持跨域访问，如果项目使用到跨域且需要兼容 IE9, 可以配置 nginx 等转发网络请求 本地开发如在 IE9 下测试解决跨域可临时使用 proxy，在vue.config.js中配置： 123456789101112module.exports = &#123; devServer: &#123; proxy: &#123; '/api': &#123; target: 'http://api.douban.com', ws: true, changeOrigin: true &#125; &#125;, &#125;, transpileDependencies: [/zzp-ui/]&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"兼容性","slug":"前端/Vue/兼容性","permalink":"https://liuxianyu.cn/categories/前端/Vue/兼容性/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"兼容性","slug":"兼容性","permalink":"https://liuxianyu.cn/tags/兼容性/"}],"author":"liuxy0551"},{"title":"改动第三方库 - git 后仅个人使用","slug":"2019-07-11-Git-Reference","date":"2019-07-11T11:16:15.000Z","updated":"2019-07-11T11:16:15.000Z","comments":true,"path":"article/git-reference.html","link":"","permalink":"https://liuxianyu.cn/article/git-reference.html","excerpt":"这里不提以下需求的具体实现，记录一下如何把第三方开源库按自己的逻辑修改后仅供个人使用。 最近看到一个项目中的需求——在微信 H5 中实现类似抖音的功能，挺有兴趣的，想尝试着看自己能不能实现这样的需求。过程中在 GitHub 上看到有别人封装的库 wechat-h5-video，引入一下后感觉可以实现类似的功能，但是有些地方需要改动，可惜第三方库引入后改动源文件发布后也就还原了。这里不提需求的实现，记录一下如何把第三方开源库按自己的逻辑修改后仅供个人使用。","text":"这里不提以下需求的具体实现，记录一下如何把第三方开源库按自己的逻辑修改后仅供个人使用。 最近看到一个项目中的需求——在微信 H5 中实现类似抖音的功能，挺有兴趣的，想尝试着看自己能不能实现这样的需求。过程中在 GitHub 上看到有别人封装的库 wechat-h5-video，引入一下后感觉可以实现类似的功能，但是有些地方需要改动，可惜第三方库引入后改动源文件发布后也就还原了。这里不提需求的实现，记录一下如何把第三方开源库按自己的逻辑修改后仅供个人使用。 以下申明 原仓库：wechat-h5-video 使用范围：仅用作个人项目代码练习，侵权必删，其他第三方仓库同理 ¶一、 引用第三方库、改动第三方库 1、在项目中按实际需求引用第三方库之后，发现有些地方需要改动，这个时候可以去 node_modules 文件夹中的第三方库直接改动 2、上述操作不利于后续再次利用改动后的第三方库，同时假如 node_modules 文件夹被清除，或者更换电脑写该项目，则改动不同步 ¶二、 git 改动后的第三方库 1、想要解决上述的担忧，可以将第三方库改动后的代码放到 git 仓库中，同时在 package.json 文件中引用 2、因为原作者的 wechat-h5-video 项目是在 GitHub 上，所以我 Fork 了一下这个项目 https://github.com/liuxy0551/wechat-h5-video， 将 Fork 后的代码在本地 clone 并打开，再将之前改动的代码替换掉 clone 的代码，然后上传到 git 仓库 3、在需要引入该第三方库的项目中改动 package.json 文件，将版本号指向 git 仓库的地址，如下图： 注意 使用范围：仅用作个人项目代码练习，侵权必删，其他第三方仓库同理 使用范围：仅用作个人项目代码练习，侵权必删，其他第三方仓库同理 使用范围：仅用作个人项目代码练习，侵权必删，其他第三方仓库同理","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"使用 GitHub Pages 部署静态网页","slug":"2019-06-21-Github-Pages","date":"2019-06-21T13:44:22.000Z","updated":"2019-06-21T13:44:22.000Z","comments":true,"path":"article/github-pages.html","link":"","permalink":"https://liuxianyu.cn/article/github-pages.html","excerpt":"在日常工作中，偶尔会写一些自己的 demo，这些 demo 不需要部署到服务器上，但是需要快速部署来验证思路，而且要方便分享。主要是很多前端并没有服务器，这里记录一下我的方法：GitHub Pages","text":"在日常工作中，偶尔会写一些自己的 demo，这些 demo 不需要部署到服务器上，但是需要快速部署来验证思路，而且要方便分享。主要是很多前端并没有服务器，这里记录一下我的方法：GitHub Pages GitHub Pages 的优点 使用零成本：Github Pages 集成在 Github 中，直接和代码管理绑定在一起，随着代码更新自动重新部署，使用非常方便； 免费域名：免费提供 username.github.io 的域名，免费的静态网站服务器； 无数量限制：Github Pages 没有使用的数量限制，每一个 repository 都可以部署为一个静态网站； 这里介绍一下基于前端框架创建的项目如何部署到 GitHub Pages，这里我拿 Vue 的 webpack 项目举例，包含 vue-cli 2.x 和 vue-cli 3.x。 ¶一、 vue-cli 2.x 下使用 GitHub Pages 1、创建项目 这里我是拿以前的 2.x 项目来测试部署的，想自行创建新项目的话可以参考 https://github.com/vuejs-templates/webpack 2、在 github 上创建一个新的 repository 将本地项目传到 github 上可参考我的另一篇随笔 Git 常用命令（一）—— 将本地仓库与多个远程仓库关联 来看一下项目结构： 这里需要配置的就是 /config/index.js，其中我们需要关注的是 module.exports 的 build 属性，我们将在这里配置 webpack build 时生成文件的路径。 123456789101112131415module.exports = &#123; dev: &#123; ... &#125;, build: &#123; // Template for index.html index: path.resolve(__dirname, &apos;../docs/index.html&apos;), // Paths assetsRoot: path.resolve(__dirname, &apos;../docs&apos;), assetsSubDirectory: &apos;&apos;, assetsPublicPath: &apos;/huobi-trade-admin/&apos;, ... &#125;&#125; 这里将打包后的 dist 文件夹改名为 docs，不要把 docs 加入到.gitignore。 ¶二、 vue-cli 3.x 下使用 GitHub Pages 这里我新建了一个基于 vue-cli 3.x 的项目，可以先看看 vue-cli 3.x 给的文档 https://cli.vuejs.org/zh/guide/deployment.html#github-pages 主要设置两个参数：publicPath和outputDir，其余参数设置可以参考 vue-cli 3.x 中的 vue.config.js。 1234567891011module.exports = &#123; ... devServer: &#123; host: &apos;0.0.0.0&apos;, port: &apos;8080&apos;, disableHostCheck: true, // 解决 127.0.0.1 指向其他域名时出现&quot;Invalid Host header&quot;问题 &#125;, publicPath: process.env.NODE_ENV === &apos;production&apos; ? &apos;/new-school-recruit/&apos; : &apos;/&apos;, outputDir: &apos;docs&apos;, ...&#125; 我部署了一个基于 vue-cli 3.x 的项目 https://liuxy0556.github.io/new-school-recruit，存储库为 https://github.com/liuxy0556/new-school-recruit 注意 如果项目中有请求，请使用 https 如果线上没有 docs 这个文件夹，在 Setting -&gt; Github Pages -&gt; Source 中是无法选择 master branch / docs folder 的，这个时候可以把 dist 文件夹下的文件放到项目根目录，然后在 Setting -&gt; Github Pages -&gt; Source 中选择第一项 master branch，点击给出的 url 就可以查看静态页面了。不推荐，因为每次打包都需要移动文件，或者 dist/index.html 会和根目录的 index.html 冲突。 npm run build打包后然后把整个项目上传到 github 上之后就可以在存储库的 Setting，找到 GitHub Pages 部分，将 Source 选择为 master branch / docs folder （第二项），选择后会自动保存，然后在 Github Pages 部分就会给出 url ，点击即可进入我们的静态页面啦。 ¶三、 自定义 template 在 Vue + Element UI 的技术栈下，有个我觉得很好用的后台管理系统模板 vue-element-admin，我尝试将这两个项目通过 GitHub Pages 练习部署。 vue-element-admin、vue-admin-template","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"},{"name":"github","slug":"git/github","permalink":"https://liuxianyu.cn/categories/git/github/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"},{"name":"github","slug":"github","permalink":"https://liuxianyu.cn/tags/github/"}],"author":"liuxy0551"},{"title":"前端项目跨域问题的几种解决方案","slug":"2019-05-15-Access-Control-Allow-Origin","date":"2019-05-15T17:36:30.000Z","updated":"2019-05-15T17:36:30.000Z","comments":true,"path":"article/access-control-allow-origin.html","link":"","permalink":"https://liuxianyu.cn/article/access-control-allow-origin.html","excerpt":"在前端面试中大几率会提到的问题就是有没有遇到过跨域问题，是如何解决的。这里记录一下我知道的几种解决方案。","text":"在前端面试中大几率会提到的问题就是有没有遇到过跨域问题，是如何解决的。这里记录一下我知道的几种解决方案。 ¶一、什么是跨域 1、浏览器对于 JavaScript 的同源策略的限制 2、域名相同、端口相同、协议相同，这就是同源策略的保护，能有效的阻止跨站攻击 3、具体怎么才是同源，如下： 形式 结果 同一域名，同一文件夹 成功 同一域名，不同文件夹 成功 不同域名，文件夹相同 失败 同一域名，不同端口号 失败 同一域名，不同的协议 失败 ¶二、几种解决方案 ¶1、Jsonp 不推荐 最早的解决方案，利用script标签可以跨域的原理实现。 限制 需要服务的支持 只能发起GET请求 ¶2、CORS (Cross Origin Resource Sharing 跨域资源共享) 推荐 这种方案对于前端同学没什么工作量，和不跨域情况下的写法没有区别，工作量基本都在后端同学那里。每一次请求，浏览器必须先以 OPTIONS 请求方式发送一个预检请求（也不是所有请求都会发送 options ，展开介绍）,通过预检请求从而获知服务器端对跨域请求支持的 HTTP 方法。在确认服务器允许该跨域请求的情况下，再以实际的 HTTP 请求发送真正的请求。HTTP访问控制（CORS） 优点 只要第一次配置好后，之后不管有多少接口和项目，都可以复用 在服务端进行控制是否允许跨域，可自定义规则 开发环境和正式环境都可以使用 支持各种请求方式 ¶3、前端为主的实现 在 dev 开发时可以使用 webpack 的 proxy，参照 文档 基本就会了。但这种方法在生产环境是无法使用的，在生产环境中需要使用 nginx 进行反向代理。不论是 proxy 还是 nginx 的原理都是一样的，通过搭建一个中转服务器来转发请求规避跨域的问题。 ¶4、开发环境通过 node 转发请求 在 dev 开发时还可以通过 node 进行请求转发","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"跨域","slug":"前端/跨域","permalink":"https://liuxianyu.cn/categories/前端/跨域/"}],"tags":[{"name":"跨域","slug":"跨域","permalink":"https://liuxianyu.cn/tags/跨域/"}],"author":"liuxy0551"},{"title":"前端开发中的 vscode","slug":"2019-04-27-vscode-config","date":"2019-04-27T16:46:26.000Z","updated":"2019-04-27T16:46:26.000Z","comments":true,"path":"article/vscode-config.html","link":"","permalink":"https://liuxianyu.cn/article/vscode-config.html","excerpt":"一直使用的是 WebStorm，比较重，尝试一下轻量的 vscode，记录一下配置和插件。","text":"一直使用的是 WebStorm，比较重，尝试一下轻量的 vscode，记录一下配置和插件。 ¶一、配置文件 链接: https://pan.baidu.com/s/1qPeuAwM8TUW8UA6yED0PfQ 密码:2171 ¶二、插件列表 序号 插件名 用处 1 Auto Close Tag 自动闭合 HTML/XML 标签 2 Auto Rename Tag 自动完成另一侧标签的同步修改 3 Bracket Pair Colorizer 给括号加上不同的颜色，便于区分不同的区块，使用者可以定义不同括号类型和不同颜色 4 Chinese (Simplified) Language 简体中文 5 Color Highlight 颜色高亮 6 Color Picker 取色器 7 CSS Peek 使用此插件，你可以追踪至样式表中 CSS 类和 ids 定义的地方。当你在 HTML 文件中右键单击选择器时，选择“ Go to Definition 和 Peek definition ”选项，它便会给你发送样式设置的 CSS 代码。 8 eslint 格式化插件 9 filesize 在底部状态栏显示当前文件大小，点击后还可以看到详细创建、修改时间 10 goto node modules 快速定位 node 模块 11 HTML CSS Support 智能提示 CSS 类名以及 id 12 Image preview 图片预览。（支持 html、css 中图片资源预览） 13 JavaScript (ES6) code snippets ES6 语法智能提示，以及快速输入，不仅仅支持.js，还支持.ts，.jsx，.tsx，.html，.vue，省去了配置其支持各种包含 js 代码文件的时间 14 Node.js Modules Intellisense 提供 JavaScript 和 TypeScript 导入声明时的自动补全 15 npm 支持运行文件中定义的 npm 脚本，并根据中定义的依赖项验证已安装的模块 package.json。 16 npm Intellisense 用于在 import 语句中自动填充 npm 模块 17 Path Intellisense 自动提示文件路径，支持各种快速引入文件 18 Prettier 格式化代码 19 Relative Path 相对路径 20 Swig(.tpl) 支持 hexo 中的 swig 文件 21 Vetur Vue 多功能集成插件，包括：语法高亮，智能提示，emmet，错误提示，格式化，自动补全，debugger。vscode 官方钦定 Vue 插件，Vue 开发者必备。 22 vscode-fileheader 文件开头注释 ctrl + shift + i ，（/* \\n * @Author: {author} \\n * @Date: {createTime} \\n */） 23 vscode-icons-mac 类 Finder 文件夹图标 24 Vue Peek 可跳转自定义组件","categories":[{"name":"开发工具","slug":"开发工具","permalink":"https://liuxianyu.cn/categories/开发工具/"},{"name":"vscode","slug":"开发工具/vscode","permalink":"https://liuxianyu.cn/categories/开发工具/vscode/"}],"tags":[{"name":"vscode","slug":"vscode","permalink":"https://liuxianyu.cn/tags/vscode/"}],"author":"liuxy0551"},{"title":"Vue 和 WePY 中过滤器写法","slug":"2019-04-10-Vue-WePY-filter","date":"2019-04-10T20:29:30.000Z","updated":"2019-04-10T20:29:30.000Z","comments":true,"path":"article/vue-wepy-filter.html","link":"","permalink":"https://liuxianyu.cn/article/vue-wepy-filter.html","excerpt":"","text":"现有前端框架中普遍有 filter 的使用，最近在写一个小程序，需要显示金额，常规保留两位小数，记录一下处理方法及前端框架中的普遍用法。 小程序是基于腾讯官方 WePY 框架来实现的，但是由于小程序技术生态比较闭合，导致很多前端框架积累出的成果都没有实现。filter 可以理解为管道加工处理，接收一组数据，经过各种不同类型的管道加工，产出新的数据，但是又不会影响原有数据，最终展示给用户。 ¶一、现有前端框架的 filter 在后端同学没有返回适合显示的数据或者不方便处理数据时，可以在前端使用过滤器处理，上述对时间和金额进行处理，使用 | 作为管道符，传递参数进行序列化。date 的过滤写法可参考 date.js 。 ¶二、小程序中过滤器的使用 上图是小程序对金额的处理效果（基于 WePY），可参考 微信小程序 WXS 文档。 在 template 中引入 money.wxs 文件，并传入数据进行转换，页面代码可参考 detail.wpy 可参考： 官方文档 - WXS 语法参考","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"},{"name":"wepy","slug":"wepy","permalink":"https://liuxianyu.cn/tags/wepy/"}],"author":"liuxy0551"},{"title":"Element UI 日期选择器时间选择范围限制","slug":"2019-04-02-element-ui-date-picker","date":"2019-04-02T20:29:30.000Z","updated":"2019-04-02T20:29:30.000Z","comments":true,"path":"article/element-ui-date-picker.html","link":"","permalink":"https://liuxianyu.cn/article/element-ui-date-picker.html","excerpt":"最近后台管理系统中的项目遇到了选择时间时需要加以限制的问题，记录一下。","text":"最近后台管理系统中的项目遇到了选择时间时需要加以限制的问题，记录一下。 DatePicker 组件代码： 123456&lt;el-date-picker v-model=&quot;time&quot; type=&quot;date&quot; placeholder=&quot;选择日期&quot; :picker-options=&quot;pickerOptions&quot;&gt;&lt;/el-date-picker&gt; ¶一、选择今天及今天以后的日期 12345678910data() &#123; return &#123; time: &apos;&apos;, pickerOptions: &#123; disabledDate(time) &#123; return time.getTime() &lt; Date.now() - 8.64e7; &#125; &#125; &#125;&#125; ¶二、选择今天及今天以前的日期 12345678910data() &#123; return &#123; time: &apos;&apos;, pickerOptions: &#123; disabledDate(time) &#123; return time.getTime() &gt; Date.now() - 8.64e6 &#125; &#125; &#125;&#125; ¶三、选择今天以后的日期（不含今天） 12345678910data() &#123; return &#123; time: &apos;&apos;, pickerOptions: &#123; disabledDate(time) &#123; return time.getTime() &lt; Date.now(); &#125; &#125; &#125;&#125; ¶四、选择三个月之前到今天的日期 12345678910111213data() &#123; return &#123; time: &apos;&apos;, pickerOptions: &#123; disabledDate(time) &#123; let curDate = (new Date()).getTime(); let three = 90 * 24 * 3600 * 1000; let threeMonths = curDate - three; return time.getTime() &gt; Date.now() || time.getTime() &lt; threeMonths; &#125; &#125; &#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Element UI","slug":"前端/Vue/Element-UI","permalink":"https://liuxianyu.cn/categories/前端/Vue/Element-UI/"}],"tags":[{"name":"Element UI","slug":"Element-UI","permalink":"https://liuxianyu.cn/tags/Element-UI/"}],"author":"liuxy0551"},{"title":"JavaScript 实现 Base64 的加密和解密","slug":"2019-04-01-js-base64","date":"2019-04-01T20:29:30.000Z","updated":"2019-04-01T20:29:30.000Z","comments":true,"path":"article/js-base64.html","link":"","permalink":"https://liuxianyu.cn/article/js-base64.html","excerpt":"最近公司项目中需要解密一下后端同学经过 Base64 加密的分享 id，顺便记录一下加密的写法。","text":"最近公司项目中需要解密一下后端同学经过 Base64 加密的分享 id，顺便记录一下加密的写法。 ¶一、Base64 的加密 12345678// base64的加密b64EncodeUnicode(str) &#123; return btoa(encodeURIComponent(str).replace(/%([0-9A-F]&#123;2&#125;)/g, function(match, p1) &#123; return String.fromCharCode(&apos;0x&apos; + p1); &#125;))&#125;console.log(this.b64EncodeUnicode(&apos;base64的加密解密&apos;)) // YmFzZTY055qE5Yqg5a+G6Kej5a+G ¶二、Base64 的解密 12345678// base64的解密b64DecodeUnicode(str) &#123; return decodeURIComponent(atob(str).split(&apos;&apos;).map(function(c) &#123; return &apos;%&apos; + (&apos;00&apos; + c.charCodeAt(0).toString(16)).slice(-2); &#125;).join(&apos;&apos;));&#125;console.log(this.b64DecodeUnicode(&apos;YmFzZTY055qE5Yqg5a+G6Kej5a+G&apos;)) // base64的加密解密","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"加密解密","slug":"前端/加密解密","permalink":"https://liuxianyu.cn/categories/前端/加密解密/"},{"name":"Base64","slug":"前端/加密解密/Base64","permalink":"https://liuxianyu.cn/categories/前端/加密解密/Base64/"}],"tags":[{"name":"加密解密","slug":"加密解密","permalink":"https://liuxianyu.cn/tags/加密解密/"}],"author":"liuxy0551"},{"title":"Vue 项目中使用 ECharts 来绘制世界地图和中国地图","slug":"2019-03-19-Vue-ECharts","date":"2019-03-19T20:29:30.000Z","updated":"2019-03-19T20:29:30.000Z","comments":true,"path":"article/vue-echarts.html","link":"","permalink":"https://liuxianyu.cn/article/vue-echarts.html","excerpt":"最近公司项目中需要使用 ECharts 来展示世界地图和中国地图，记录一下。","text":"最近公司项目中需要使用 ECharts 来展示世界地图和中国地图，记录一下。 ¶一、实现效果 ¶二、引入组件及说明 1、v-charts：基于 Vue2.0 和 ECharts 封装的图表组件 官方文档 Github 2、可参考 ECharts 官网 的文档 3、可多参考 ECharts 的配置项文档 来进行颜色、文字等样式的改动 4、import ‘…/…/…/…/node_modules/echarts/map/js/china.js’ 引入 ECharts 自带的 China、world 等文件时，注意引入的路径 ¶三、世界地图的组件代码（已省略部分国家数据，可在代码文件中复制） 世界 - 代码文件 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155&lt;template&gt; &lt;div class=&quot;echarts-box&quot;&gt; &lt;div class=&quot;title-box&quot;&gt; &lt;img class=&quot;label&quot; src=&quot;~assets/imgs/label2.png&quot; alt=&quot;&quot;&gt; &lt;div class=&quot;title&quot;&gt;校友世界分布&lt;/div&gt; &lt;/div&gt; &lt;v-chart class=&quot;echarts&quot; :options=&quot;polar&quot; @dblclick=&quot;dblClick&quot; @click=&quot;doClick&quot;/&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import ECharts from &apos;vue-echarts&apos; import &apos;../../../../node_modules/echarts/map/js/world.js&apos; export default &#123; name: &apos;DailyActiveChart&apos;, components: &#123; ECharts &#125;, data () &#123; return &#123; polar: &#123; dataRange: &#123; show: true, min: 0, max: 1000000, text: [&apos;High&apos;, &apos;Low&apos;], realtime: true, calculable: true, color: [&apos;#7CF9D0&apos;, &apos;#7CC0FE&apos;, &apos;#DEF6FF&apos;] &#125;, tooltip: &#123; trigger: &apos;item&apos; &#125;, geo: &#123; map: &apos;world&apos;, label: &#123; emphasis: &#123; show: false &#125; &#125;, roam: false, silent: true, itemStyle: &#123; normal: &#123; areaColor: &apos;#37376e&apos;, borderColor: &apos;#000&apos; &#125;, emphasis: &#123; areaColor: &apos;#3E98FE&apos; &#125; &#125; &#125;, series: [&#123; name: &apos;校友人数&apos;, type: &apos;map&apos;, mapType: &apos;world&apos;, itemStyle: &#123; normal: &#123; borderWidth: 0.5, borderColor: &apos;#A9A9A9&apos;, areaStyle: &#123; color: &apos;#37376e&apos; &#125; &#125;, emphasis: &#123; areaColor: &apos;#3E98FE&apos;, borderColor: &apos;#fff&apos;, borderWidth: 0 &#125; &#125;, mapLocation: &#123; y: 100 &#125;, data: [&#123; name: &apos;Afghanistan&apos;, value: 28397.812 &#125;, &#123; name: &apos;Angola&apos;, value: 19549.124 &#125;, &#123; name: &apos;Albania&apos;, value: 3150.143 &#125;, &#123; name: &apos;United Arab Emirates&apos;, value: 8441.537 &#125;, &#123; name: &apos;Yemen&apos;, value: 22763.008 &#125;, &#123; name: &apos;South Africa&apos;, value: 51452.352 &#125;, &#123; name: &apos;Zambia&apos;, value: 13216.985 &#125;, &#123; name: &apos;Zimbabwe&apos;, value: 13076.978 &#125; ], symbolSize: 12, label: &#123; normal: &#123; show: false &#125;, emphasis: &#123; show: false &#125; &#125; &#125;] &#125; &#125; &#125;, methods: &#123; // 双击事件 dblClick (v) &#123; console.log(v) &#125;, // 单击事件 doClick (v) &#123; console.log(v) &#125; &#125; &#125;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt; .echarts-box &#123; margin: 20px 0; padding: 20px; border-radius: 5px; background-color: #fff; .title-box &#123; display: flex; .label &#123; width: 25px; height: 25px; margin-right: 10px; &#125; .title &#123; color: #4C4C4C; font-size: 18px; &#125; &#125; .echarts &#123; width: 100%; height: 600px; &#125; &#125;&lt;/style&gt; ¶四、中国地图的组件代码（已省略部分省份数据，可在代码文件中复制） 中国 - 代码文件 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115&lt;template&gt; &lt;div class=&quot;echarts-box&quot;&gt; &lt;v-chart class=&quot;echarts&quot; :options=&quot;polar&quot; @dblclick=&quot;dblClick&quot; @click=&quot;doClick&quot;/&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import ECharts from &apos;vue-echarts&apos; import &apos;../../../../node_modules/echarts/map/js/china.js&apos; export default &#123; name: &apos;DailyActiveChart&apos;, components: &#123; ECharts &#125;, data () &#123; return &#123; polar: &#123; title: &#123; text: &apos;校友中国分布地图&apos; &#125;, tooltip: &#123;&#125;, // 鼠标移到图里面的浮动提示框 dataRange: &#123; show: true, min: 0, max: 1000, text: [&apos;High&apos;, &apos;Low&apos;], realtime: true, calculable: true &#125;, geo: &#123; // 这个是重点配置区 map: &apos;china&apos;, // 表示中国地图 roam: true, label: &#123; normal: &#123; show: true, // 是否显示对应地名 textStyle: &#123; color: &apos;rgba(0,0,0,0.4)&apos; &#125; &#125; &#125;, itemStyle: &#123; normal: &#123; borderColor: &apos;rgba(0, 0, 0, 0.2)&apos; &#125;, emphasis: &#123; areaColor: null, shadowOffsetX: 0, shadowOffsetY: 0, shadowBlur: 20, borderWidth: 0, shadowColor: &apos;rgba(0, 0, 0, 0.5)&apos; &#125; &#125; &#125;, series: [&#123; type: &apos;scatter&apos;, coordinateSystem: &apos;geo&apos; // 对应上方配置 &#125;, &#123; name: &apos;启动次数&apos;, // 浮动框的标题 type: &apos;map&apos;, geoIndex: 0, data: [&#123; name: &apos;北京&apos;, value: 599 &#125;, &#123; name: &apos;上海&apos;, value: 142 &#125;, &#123; name: &apos;黑龙江&apos;, value: 44 &#125;, &#123; name: &apos;深圳&apos;, value: 92 &#125;, &#123; name: &apos;湖北&apos;, value: 810 &#125;, &#123; name: &apos;四川&apos;, value: 453 &#125;] // 这里就是数据，即数组可以单独放在外面也可以直接写 &#125;] &#125; &#125; &#125;, methods: &#123; // 双击事件 dblClick (v) &#123; console.log(v) &#125;, // 单击事件 doClick (v) &#123; console.log(v) &#125; &#125;, mounted () &#123; this.polar.series[1].data.push(&#123; name: &apos;浙江&apos;, value: 324 &#125;) &#125; &#125;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt; .echarts-box &#123; margin: 20px 0; padding: 20px; border-radius: 5px; background-color: #fff; .echarts &#123; width: 100%; height: 600px; &#125; &#125;&lt;/style&gt;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"ECharts","slug":"前端/Vue/ECharts","permalink":"https://liuxianyu.cn/categories/前端/Vue/ECharts/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"ECharts","slug":"ECharts","permalink":"https://liuxianyu.cn/tags/ECharts/"}],"author":"liuxy0551"},{"title":"Vue 移动端项目的一些 UI 框架","slug":"2019-02-14-Vue-Mobile-UI","date":"2019-02-14T20:29:30.000Z","updated":"2019-02-14T20:29:30.000Z","comments":true,"path":"article/vue-mobile-ui.html","link":"","permalink":"https://liuxianyu.cn/article/vue-mobile-ui.html","excerpt":"公司基于 Vue 的移动端项目基本都是引入 Mint UI，但是目前 Mint UI 在 Github 上已一年多无人更新维护，很多 Issues也没有得到及时的回复处理。基于上述因素，准备在新项目的 UI 选型上开始考虑选择其他维护积极的 project。这里记录一下遇到的一些个人觉得不错的 UI 选择。","text":"公司基于 Vue 的移动端项目基本都是引入 Mint UI，但是目前 Mint UI 在 Github 上已一年多无人更新维护，很多 Issues也没有得到及时的回复处理。基于上述因素，准备在新项目的 UI 选型上开始考虑选择其他维护积极的 project。这里记录一下遇到的一些个人觉得不错的 UI 选择。 1、Vant —— 轻量、可靠的移动端 Vue 组件库，由有赞维护 star 7.5k 中文文档 Github 地址 2、Mint UI —— 纪念一下在很多项目中使用到的 Mint UI star 13.4k 中文文档 Github 地址 在线预览 3、Muse UI —— 是一个在我看来比较美观的 UI 框架 star 7.1k 中文文档 Github 地址 4、Vonic —— 是一个基于 Vue 和 ionic CSS 的 UI 框架 star 3.0k 用于快速构建移动端单页应用，因为实习时写 Angular 搭配过 ionic，所以对这个 UI 框架有更多熟悉的感觉 中文文档 Github 地址 在线预览 5、VUX —— 是一个移动端 UI 组件库，样式基于WeUI star 15.1k 中文文档 Github 地址 在线预览 6、MUI —— 最接近原生APP体验的高性能前端框架 star 10.9k 中文文档 Github 地址 在线预览 7、Cube UI —— 是基于 Vue.js 实现的精致移动端组件库，由滴滴团队实现 star 5.4k 中文文档 Github 地址 目前只接触过前五种 UI 框架，希望在后续的学习中能够接触更多简洁、美观的 UI 框架。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"UI 库","slug":"前端/Vue/UI-库","permalink":"https://liuxianyu.cn/categories/前端/Vue/UI-库/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"自定义滚动条样式","slug":"2019-02-03-scroll-bar","date":"2019-02-03T13:57:46.000Z","updated":"2019-02-03T13:57:46.000Z","comments":true,"path":"article/scroll-bar.html","link":"","permalink":"https://liuxianyu.cn/article/scroll-bar.html","excerpt":"记录一下自定义滚动条样式的代码。","text":"记录一下自定义滚动条样式的代码。 123456789101112131415::-webkit-scrollbar &#123; width: 8px; height: 8px;&#125;::-webkit-scrollbar-thumb &#123; background-color: #d0d0d0; height: 50px; outline-offset: -2px; outline: 0 solid #fff; -webkit-border-radius: 4px; border: 0 solid #fff;&#125;::-webkit-scrollbar-track-piece &#123; background-color: #f1f1f1;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"HTML","slug":"前端/HTML","permalink":"https://liuxianyu.cn/categories/前端/HTML/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"https://liuxianyu.cn/tags/HTML/"}],"author":"liuxy0551"},{"title":"JavaScript 中 == 和 === 的区别","slug":"2019-01-14-js-equal","date":"2019-01-14T20:29:30.000Z","updated":"2019-01-14T20:29:30.000Z","comments":true,"path":"article/js-equal.html","link":"","permalink":"https://liuxianyu.cn/article/js-equal.html","excerpt":"刚开始接触前端的时候一直不太懂 JavaScript 中 == 和 === 的区别，查找资料后记录一下自己的理解。","text":"刚开始接触前端的时候一直不太懂 JavaScript 中 == 和 === 的区别，查找资料后记录一下自己的理解。 ¶一、简单理解 == 代表相同，=== 代表严格相同。 当进行双等号比较的时候，先检查两个操作数的数据类型，如果相同，则进行 === 比较； 如果不同，则进行一次类型转换，转换成相同类型后再进行比较。 而 === 比较时，如果类型不同，直接输出 false。 ¶二、比较过程 双等号==： （1）如果两个值类型相同，再进行三个等号(===)的比较 （2）如果两个值类型不同，也有可能相等，需根据以下规则进行类型转换在比较： 1）如果一个是 null，一个是 undefined，那么相等 2）如果一个是字符串，一个是数值，把字符串转换成数值之后再进行比较 三等号===: （1）如果类型不同，就一定不相等 （2）如果两个都是数值，并且是同一个值，那么相等；如果其中至少一个是 NaN，那么不相等。（判断一个值是否是 NaN，只能使用 isNaN( ) 来判断） （3）如果两个都是字符串，每个位置的字符都一样，那么相等，否则不相等。 （4）如果两个值都是 true，或是 false，那么相等 （5）如果两个值都引用同一个对象或是函数，那么相等，否则不相等 （6）如果两个值都是 null，或是 undefined，那么相等","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"}],"author":"liuxy0551"},{"title":"Vue 项目实现微信自定义分享","slug":"2018-12-18-vue-wx-share","date":"2018-12-18T20:29:30.000Z","updated":"2018-12-18T20:29:30.000Z","comments":true,"path":"article/vue-wx-share.html","link":"","permalink":"https://liuxianyu.cn/article/vue-wx-share.html","excerpt":"最近公司项目中有在微信中自定义分享的需要，遇到的问题记录一下。","text":"最近公司项目中有在微信中自定义分享的需要，遇到的问题记录一下。 ¶一、实现效果 ¶二、遇到的问题 1、需求：项目需要带参分享，进行好友拆礼盒的类似操作，需要带个参与活动的 id，其实这种分享微信是不太赞成的，这里不论。 2、问题 1：项目本身引入的 js-sdk 是 1.3.3 版本，与微信目前推荐的 1.4.0 版本还有版本差距。 3、问题 2：微信认证 url 之后，设置的分享链接在 ‘#’ 及其之后会被微信去除。 ¶三、解决过程 其实如果早知道第二条第 3 小条的话，也许我就不需要花费很多时间在这个自定义链接上。 1、微信分享中的配置微信 js-sdk，自行查阅 微信 JS-SDK 说明文档。 2、因为项目有多处需要自定义分享，所以我将请求签名和注入权限的方法写到了一个 js 文件中，同时在需要自定义分享的页面加载时调用这些方法。 3、像下图这种基本就是没有完成页面的签名及授权验证，按照微信文档接收后端同学返回的数据即可。 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253wxRegister(link) &#123; let params = &#123; url: link, app_from: window.location.origin.substr(8, window.location.origin.length) &#125;; axios.get(api.get_wxconfig, &#123; params: params &#125;).then((res) =&gt; &#123; if(res.data.status == 200) &#123; wx.config(&#123; debug: false, appId: res.data.data.appId, timestamp: Number(res.data.data.timestamp), nonceStr: res.data.data.noncestr, signature: res.data.data.sign, jsApiList: [&apos;updateAppMessageShareData&apos;, &apos;updateTimelineShareData&apos;, &apos;onMenuShareAppMessage&apos;, &apos;onMenuShareTimeline&apos;, &apos;previewImage&apos;] &#125;); &#125; &#125;).catch((error) =&gt; &#123; console.log(error) &#125;); // 需在用户可能点击分享按钮前就先调用 wx.ready(function() &#123; // 获取微信分享参数 axios.get(api.get_share_params).then(res =&gt; &#123; if(res.data.status == 200) &#123; let params = res.data.data; // 自定义“分享给朋友”及“分享到QQ”按钮的分享内容（1.4.0） if(wx.updateAppMessageShareData) &#123; wx.updateAppMessageShareData(&#123; title: params.title, // 分享标题 desc: params.content, // 分享描述 link: link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致 imgUrl: params.img, // 分享图标 success: function () &#123; // 设置成功 &#125; &#125;); &#125; // 自定义“分享到朋友圈”及“分享到QQ空间”按钮的分享内容（1.4.0） if(wx.updateTimelineShareData) &#123; wx.updateTimelineShareData(&#123; title: params.title, // 分享标题 link: link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致 imgUrl: params.img, // 分享图标 success: function () &#123; // 设置成功 &#125; &#125;); &#125; &#125; &#125;); &#125;);&#125; 4、像下图这种就是困扰我的问题，分享出去的内容除了最关键的自定义链接，其余都正常，这是很伤心的一件事，也是这篇随笔的来源。解决这个问题需要知道这样的信息， 微信公众号中的项目在请求签名和自定义分享链接的时候对于 Vue 的 # 路由不太友好，因为分享出去的自定义链接在 # 之后会被微信去除，了解这点后，我们就可以来着手解决问题了。 5、点击页面中的分享按钮，这个时候将需要分享出去的自定义内容准备好，按照微信文档的格式写就可以。建议在调用微信分享方法前判断是否可用，因为这几个分享接口都是即将废弃的， 下图中白色字体代码是因为当前没有引入 1.4.0 版本的 js 文件。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// 点击分享share () &#123; let options = &#123; title: &apos;魔法礼盒&apos;, desc: &apos;快来帮您的好友拆开魔法礼盒吧&apos;, imgUrl: this.box.prpic &#125;; // 参与魔盒活动(获取分享所需的url参数) - 拿mbjid axios.post(api.join_magicbox + &apos;?token=&apos;+ localStorage.getItem(&apos;token&apos;), &#123; mbaid: this.mbaid &#125;).then(res =&gt; &#123; if(res.data.status == 200) &#123; localStorage.setItem(&apos;mbjid&apos;, res.data.data.mbjid); options.link = window.location.href.split(&apos;#&apos;)[0] + &apos;?mbjid=&apos; + localStorage.getItem(&apos;mbjid&apos;); // options.link = window.location.origin + &apos;/#/pandora?mbjid=&apos; + localStorage.getItem(&apos;mbjid&apos;); // 点击分享 this.show_invite = true; // 倒计时 const TIME_COUNT = 3; let count = TIME_COUNT; let time = setInterval(() =&gt; &#123; if (count &gt; 0 &amp;&amp; count &lt;= TIME_COUNT) &#123; count --; &#125; else &#123; this.show_invite = false; clearInterval(time); &#125; &#125;, 1000); axios.get(api.secret_usid + &apos;?token=&apos; + localStorage.getItem(&apos;token&apos;)).then(res =&gt; &#123; if(res.data.status == 200) &#123; options.link += &apos;&amp;secret_usid=&apos; + res.data.data.secret_usid; &#125; &#125;); // 自定义“分享给朋友”及“分享到QQ”按钮的分享内容（1.4.0） if(wx.updateAppMessageShareData) &#123; wx.updateAppMessageShareData(options); &#125; // 自定义“分享到朋友圈”及“分享到QQ空间”按钮的分享内容（1.4.0） if(wx.updateTimelineShareData) &#123; wx.updateTimelineShareData(options); &#125; // 获取“分享给朋友”按钮点击状态及自定义分享内容接口（即将废弃） if(wx.onMenuShareAppMessage) &#123; wx.onMenuShareAppMessage(options); &#125; // 获取“分享到朋友圈”按钮点击状态及自定义分享内容接口（即将废弃） if(wx.onMenuShareTimeline) &#123; wx.onMenuShareTimeline(options); &#125; &#125; &#125;);&#125; 6、看上面的代码就能看出，我的思路是微信处理 # ，我就避开 # ，将需要分享的参数直接附在 # 之前，我的后端同学在以为是签名 url 出错时，给过替换 # 的提议，都是大同小异的方法。 然后在 APP.vue 文件的初始化方法中查看点击分享到底是跳到什么 url 去了，建议使用 alert，因为 vconsoel 打印过后如果页面重定向后，就看不到打印的信息了。 7、同时分享出去的自定义链接还会被微信加上一些识别流量来源的参数，但是这些参数并不会影响页面的重定向。可是为防止这些参数在分享出去后，在接收处理数据时乱入，故将其直接去除，使用 split。 123?from=singlemessage?from=timeline?from=groupmessage","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信公众号","slug":"前端/微信公众号","permalink":"https://liuxianyu.cn/categories/前端/微信公众号/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"微信公众号","slug":"微信公众号","permalink":"https://liuxianyu.cn/tags/微信公众号/"}],"author":"liuxy0551"},{"title":"Vue Mint-UI Datetime picker 中的起始时间和结束时间","slug":"2018-11-19-data-time-picker","date":"2018-11-19T20:29:30.000Z","updated":"2018-11-19T20:29:30.000Z","comments":true,"path":"article/data-time-picker.html","link":"","permalink":"https://liuxianyu.cn/article/data-time-picker.html","excerpt":"最近公司项目中用到出生日期的功能，使用了 Mint UI 中的 Datetime picker，遇到的问题记录一下。","text":"最近公司项目中用到出生日期的功能，使用了 Mint UI 中的 Datetime picker，遇到的问题记录一下。 ¶Datetime picker 效果 ¶1、官网效果 官网上给出了一些 API 文档，但是 Mint UI 的文档 写的真心不怎么样，这里分享一下 Mint UI 的源码，这里是 Datetime picker 的源码。 既然是选择出生日期，那可选日期当然需要做一些限制，粗略地处理为 1900-01-01 ~ 当前时间。注意到文档中的 startDate 和 endDate 可以控制起止时间，但是没有说明如何使用，源码中也没有例子。如果我们直接设置时间格式的字符串，如 startDate: &quot;1901-01-01&quot;，这样写是会报错的。 根据上图可以看出传入 startDate 的值必须是 Date 类型，所以按下面的写法就可以了： 12startDate: new Date(&quot;1901-01-01&quot;),endDate: new Date() 1234&lt;!--出生日期的picker--&gt;&lt;mt-datetime-picker ref=&quot;birthdayPicker&quot; type=&quot;date&quot; v-model=&quot;user.usbirthday&quot; year-format=&quot;&#123;value&#125; 年&quot; month-format=&quot;&#123;value&#125; 月&quot; date-format=&quot;&#123;value&#125; 日&quot; :startDate=&quot;startDate&quot; :endDate=&quot;endDate&quot; @confirm=&quot;handleChange&quot;&gt;&lt;/mt-datetime-picker&gt; v-model=&quot;user.usbirthday&quot;中的 user.usbirthday 可以设置成 this.user.usbirthday = 1995-01-01。 12345678// 打开date-pickeropenPicker(picker) &#123; this.$refs[picker].open();&#125;,// picker选择的日期改变handleChange(value) &#123; this.birthday = moment(value).format(&apos;YYYY-MM-DD&apos;);&#125; ¶2、实现效果 ¶3、引入 Moment.js 随笔中的代码涉及了 Moment.js，这是一个用来格式化时间的 js 插件，比如下图的时间不便于前端使用，则可以通过 Moment.js 将其转化为 2018-11-19 等格式的时间。 安装方式： npm i moment 中文官网： http://momentjs.cn/ Github： https://github.com/moment/moment/ 然后在 main.js 中添加下面两行代码来引入 Moment.js： 123// 引入moment用来格式化时间import moment from &quot;moment&quot;;Vue.prototype.$moment = moment; 常用格式化： 12345let date = moment(new Date(&quot;1901-01-01&quot;)).format(&quot;YYYY-MM-DD HH:mm:ss&quot;);let now = moment(new Date()).format(&quot;YYYY-MM-DD HH:mm:ss&quot;);console.log(date); // 1901-01-01 08:00:00console.log(now); // 2018-11-19 19:20:06","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Mint UI","slug":"前端/Vue/Mint-UI","permalink":"https://liuxianyu.cn/categories/前端/Vue/Mint-UI/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"Mint UI","slug":"Mint-UI","permalink":"https://liuxianyu.cn/tags/Mint-UI/"}],"author":"liuxy0551"},{"title":"在 macOS 中安装 Jekyll","slug":"2018-11-18-macos-jekyll","date":"2018-11-18T20:29:30.000Z","updated":"2018-11-18T20:29:30.000Z","comments":true,"path":"article/macos-jekyll.html","link":"","permalink":"https://liuxianyu.cn/article/macos-jekyll.html","excerpt":"最近换了 macOS，所以把博客也迁移到了 macOS 上，这里做一些环境的准备，期间遇到了一些在 Windows 上没见过的问题，记录一下。","text":"最近换了 macOS，所以把博客也迁移到了 macOS 上，这里做一些环境的准备，期间遇到了一些在 Windows 上没见过的问题，记录一下。 电脑已经安装好 Git 环境，另外 macOS 自带有 Ruby，RubyGems 也需要，这个是我之前折腾 Consolas 字体时顺带安装的。首先打开 Jekyll 中文文档，按照指令进行环境准备。 1$ gem install jekyll 这一步可能会遇到一些问题： 如上图所说，我对 /Library/Ruby/Gems/2.3.0 这个文件夹没有写权限，指令未完成，那就给文件夹权限呗。 1234$ cd /Library/Ruby/Gems$ sudo chmod -R 777 2.3.0/Password:$ gem install jekyll 注意： 是 cd 到对应文件夹的父目录，然后执行 sudo chmod -R 777 后面跟上文件夹名称，然后输入密码，再执行一次，完成。 接下来进入到博客文件夹，启动服务： 12$ cd *****.github.io$ jekyll serve 此时出现了新的问题： 123Configuration file: /Users/czre/git/blog/_config.yml Deprecation: The &apos;gems&apos; configuration option has been renamed to &apos;plugins&apos;. Please update your config file accordingly.Dependency Error: Yikes! It looks like you don&apos;t have jekyll-paginate or one of its dependencies installed. In order to use Jekyll as currently configured, you&apos;ll need to install this gem. The full error message from Ruby is: &apos;cannot load such file -- jekyll-paginate&apos; If you run into trouble, you can find helpful resources at https://jekyllrb.com/help/! 这是因为没有 jekyll-paginate，使用如下指令安装一下就好了。 1$ gem install jekyll-paginate 另外也有可能出现没有 jekyll-gist 和 jekyll-sitemap 等错误，解决方法同上，这些错误取决于模板所采用的一些服务，需要安装好这些服务。 经过上述步骤，输入以下指令就可以在 http://127.0.0.1:4000/ 或者 http://localhost:4000 见到博客了。 1$ jekyll serve","categories":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/categories/Blog/"},{"name":"Jekyll","slug":"Blog/Jekyll","permalink":"https://liuxianyu.cn/categories/Blog/Jekyll/"}],"tags":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/tags/Blog/"},{"name":"Jekyll","slug":"Jekyll","permalink":"https://liuxianyu.cn/tags/Jekyll/"}],"author":"liuxy0551"},{"title":"Vue Mint-UI 省市区地址三级联动","slug":"2018-11-18-Vue-MintUI-Address","date":"2018-11-18T20:29:30.000Z","updated":"2018-11-18T20:29:30.000Z","comments":true,"path":"article/vue-mintui-address.html","link":"","permalink":"https://liuxianyu.cn/article/vue-mintui-address.html","excerpt":"最近公司项目中用到收货地址的功能，遂采用这种联动的方式","text":"最近公司项目中用到收货地址的功能，遂采用这种联动的方式 ¶一、实现效果 功能的实现参考了部分资料： 1、vue mint-ui 三级地址联动 这篇文章中间联动部分的代码写的不是很好，直接复制是联动不了的。 2、Mint UI Picker 的源码 Mint UI 官网 Picker 二级联动的代码，有一定的参考意义。 3、中国行政区划数据：省份、城市、区县、乡镇，省市区镇三级四级联动 有二、三、四、五级的地名联动，在 README.md 中下载需要的 json 文件即可（打包下载，部分文件无港澳台地区的联动）。 4、pca-code.json 5、这篇随笔的代码：addAddress.vue ¶二、具体实现 ¶1、HTML 部分 12345678910&lt;li class=&quot;m-default-address&quot; @click=&quot;addressPopup = true&quot;&gt; &lt;div&gt; &lt;span class=&quot;m-border&quot;&gt;&lt;/span&gt; &lt;span class=&quot;m-label&quot;&gt;&lt;span class=&quot;m-must&quot;&gt;*&lt;/span&gt; 省市区&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;div class=&quot;m-address-text&quot;&gt;&#123;&#123;addressText&#125;&#125;&lt;/div&gt; &lt;!--&lt;span class=&quot;m-icon-more&quot;&gt;&lt;/span&gt;--&gt; &lt;/div&gt;&lt;/li&gt; 12345678910111213&lt;!--省市区地址三级联动--&gt;&lt;mt-popup class=&quot;m-address-popup&quot; v-model=&quot;addressPopup&quot; position=&quot;bottom&quot;&gt; &lt;div class=&quot;m-popup-btn&quot;&gt; &lt;div @click=&quot;addressPopup = false&quot;&gt;取消&lt;/div&gt; &lt;div @click=&quot;addressDone&quot;&gt;确认&lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;m-popup-btn&quot;&gt; &lt;div&gt;&lt;/div&gt; &lt;div&gt;&#123;&#123;myAddressProvince&#125;&#125;-&#123;&#123;myAddressCity&#125;&#125;-&#123;&#123;myAddressArea&#125;&#125;&lt;/div&gt; &lt;div&gt;&lt;/div&gt; &lt;/div&gt; &lt;mt-picker :slots=&quot;myAddressSlots&quot; value-key=&quot;name&quot; :visibleItemCount=&quot;7&quot; @change=&quot;onMyAddressChange&quot;&gt;&lt;/mt-picker&gt;&lt;/mt-popup&gt; ¶2、JavaScript 部分 123456789101112131415161718192021222324252627282930313233343536373839data() &#123; return &#123; name: &apos;&apos;, user: &#123;&#125;, address: &#123; uadefault: &quot;0&quot; &#125;, addressText: &quot;请选择省-市-区&quot;, addressPopup: false, myAddressSlots: [ &#123; flex: 1, defaultIndex: 1, values: myaddress, //省份数组 className: &apos;slot1&apos;, textAlign: &apos;center&apos; &#125;, &#123; divider: true, content: &apos;-&apos;, className: &apos;slot2&apos; &#125;, &#123; flex: 1, values: [], className: &apos;slot3&apos;, textAlign: &apos;center&apos; &#125;,&#123; divider: true, content: &apos;-&apos;, className: &apos;slot4&apos; &#125;,&#123; flex: 1, values: [], className: &apos;slot5&apos;, textAlign: &apos;center&apos; &#125; ], myAddressProvince: &apos;&apos;, myAddressCity: &apos;&apos;, myAddressArea: &apos;&apos;, &#125;&#125; 1234567891011121314151617181920// 地址三级联动onMyAddressChange(picker, values) &#123; if(values[0]) &#123; // 判断values[0]是否有值 picker.setSlotValues(1, values[0].children); // 将所点击省份拿到的城市list赋值 this.myAddressProvince = values[0].name; if(values[1]) &#123; // 判断values[1]是否有值 picker.setSlotValues(2, values[1].children); // 将所点击城市拿到的区县list赋值 this.myAddressCity = values[1].name; if(values[2]) &#123; // 判断values[2]是否有值 this.myAddressArea = values[2].name; this.address.aaid = values[2].code; &#125; &#125; &#125;&#125;,// 省市区三级联动选择后addressDone() &#123; this.addressText = this.myAddressProvince + &quot;-&quot; + this.myAddressCity + &quot;-&quot; + this.myAddressArea; this.addressPopup = false;&#125; 12345678910created() &#123; common.changeTitle(&apos;添加地址&apos;); this.getUser(); // 获取用户信息 this.$nextTick(() =&gt; &#123; //vue里面全部加载好了再执行的函数 （类似于setTimeout） this.myAddressSlots[0].defaultIndex = 0; // 这里的值需要和 data里面 defaultIndex 的值不一样才能够初始化 //因为我没有看过源码（我猜测是因为数据没有改变，不会触发更新） &#125;);&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Mint UI","slug":"前端/Vue/Mint-UI","permalink":"https://liuxianyu.cn/categories/前端/Vue/Mint-UI/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"Mint UI","slug":"Mint-UI","permalink":"https://liuxianyu.cn/tags/Mint-UI/"}],"author":"liuxy0551"},{"title":"图片大小不固定时在 div 中居中显示","slug":"2018-10-30-image-center-css","date":"2018-10-30T20:29:30.000Z","updated":"2018-10-30T20:29:30.000Z","comments":true,"path":"article/image-center-css.html","link":"","permalink":"https://liuxianyu.cn/article/image-center-css.html","excerpt":"公司的一个商城项目中，需要实现商品详情页顶部图片非正方形时补白且居中，尝试了很多方法，实现后发现其实很简单，记录一下。","text":"公司的一个商城项目中，需要实现商品详情页顶部图片非正方形时补白且居中，尝试了很多方法，实现后发现其实很简单，记录一下。 ¶一、实现效果 项目是移动端的项目，基于 Vue + Mint UI 实现。效果区域使用的是 Mint UI 自带的 swipe 组件，取消了自动播放。 ¶二、具体实现 ¶1、HTML 部分 12345&lt;mt-swipe :auto=&quot;0&quot;&gt; &lt;mt-swipe-item class=&quot;product-swipe&quot; v-for=&quot;item in product_info.images&quot; :key=&quot;item.piid&quot;&gt; &lt;img :src=&quot;item.piurl&quot; class=&quot;product-img&quot;&gt; &lt;/mt-swipe-item&gt;&lt;/mt-swipe&gt; ¶2、CSS 部分 123456789101112131415161718.product-swipe &#123; width: 750px; height: 750px; .product-img &#123; max-width: 750px; max-height: 750px; position: absolute; top: 0; bottom: 0; left: 0; right: 0; margin: auto; &#125;&#125;.mint-swipe &#123; width: 750px; height: 750px;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"CSS","slug":"前端/CSS","permalink":"https://liuxianyu.cn/categories/前端/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://liuxianyu.cn/tags/CSS/"}],"author":"liuxy0551"},{"title":"在 VMware 中安装 MacOS High Sierra 10.13","slug":"2018-10-27-VMware-MacOS","date":"2018-10-27T20:29:30.000Z","updated":"2018-10-27T20:29:30.000Z","comments":true,"path":"article/vmware-macos.html","link":"","permalink":"https://liuxianyu.cn/article/vmware-macos.html","excerpt":"最近抽空把以前在 VMware 中安装 MacOS 的过程回忆了一下，同时在自己电脑上再次安装了一遍，记录一下，随笔图片较多。","text":"最近抽空把以前在 VMware 中安装 MacOS 的过程回忆了一下，同时在自己电脑上再次安装了一遍，记录一下，随笔图片较多。 ¶工具 / 原料 Windows 系统、VMware、unlocker（使得 VMware 可以识别到 MacOS）、MacOS High Sierra 10.13 镜像 ¶方法 / 步骤 ¶1、准备工作 (1) 这篇随笔记录的过程是在 Windows 系统上完成，准备工作需要在 Windows 上安装好 VMware，并下载好所需文件，文件链接已失效。其中文件夹是第二个压缩包解压后的文件，第一个压缩包备用，第三个压缩包就是 MacOS High Sierra 10.13 镜像。 (2) 保证 VMware 运行需要的几个服务已经启动，没设置过这些服务手动启动的可忽略。VMware 在关闭状态时，解压 unlocker-master.zip 文件，进入解压的文件夹，右击 win-install.cmd 文件，以管理员运行，等待运行完成即可。VMware 软件运行时以管理员运行该文件可能会报错，如果没有运行完成的话，可能会在新建虚拟机的时候发现没有 Apple Mac OS X(M) 操作系统选项。 ¶2、新建虚拟机，载入 MacOS 在完成以上准备工作后，就可以开始新建虚拟机载入 MacOS 了，后续步骤以图片为主。 下图中的内存和处理器的分配数量可依主机性能而定，多多益善。 正常情况下，初次开启此虚拟机后会出现如下图的错误，unlocker 的开发者给出了解决方法：找到并打开安装目录下的 XXXX.vmx 文件，使用记事本打开后，在 smc.present = “TRUE” 后添加以下代码后保存，问题即可解决。 1smc.version = &quot;0&quot; 按上图修改安装文件后，再次点击开启此虚拟机，即可开始初次开机时系统的安装过程。 安装时会出现上图中的情况，只有一个磁盘。为了文件管理方便，我将磁盘抹掉并改名，然后将系统安装在新出现的磁盘上。点击继续后就是系统的安装过程，静候佳音。 接下来就是系统的一些基本设置。 ¶3、安装 VMware Tools VMware 中安装 VMware Tools 后，可支持自由拖拽的功能，鼠标也可以在虚拟机与主机之前自由移动（不用再按 Ctrl + Alt），且虚拟机屏幕也可以全屏了，好处多多。 安装完成后重启，会报错 - 系统扩展已被阻止，按照图片顺序设置，允许载入该系统软件。 允许载入后按上述步骤重新安装 VMware Tools。 安装完成后重启，按下图推出“ VMware Tools ”，这样桌面就很干净了。 注意 unlocker 的储存路径不要有中文字符，否则会安装失败，而且没有失败的提示； 有什么问题可以多重启，多百度。 如果系统可以使用，尽量不更新；","categories":[{"name":"VMware","slug":"VMware","permalink":"https://liuxianyu.cn/categories/VMware/"}],"tags":[{"name":"VMware","slug":"VMware","permalink":"https://liuxianyu.cn/tags/VMware/"}],"author":"liuxy0551"},{"title":"Git 常用命令（九）—— git revert 反做 commit","slug":"2018-10-19-Git-Order-I","date":"2018-10-19T11:10:31.000Z","updated":"2020-05-06T21:10:31.000Z","comments":true,"path":"article/git-order-i.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-i.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下git revert 反做某个版本：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下git revert 反做某个版本： ¶一、适用场景： 如果我们想改动之前某个 commit 的提交内容，但是又想保留此 commit 之后的 commit。 ¶二、具体操作： 1、反做 1git revert -n 版本号(..版本号) 2、提交 123git add .git commit -m 'commit message'git push origin develop","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（八）—— 几种撤销操作和覆盖仓库","slug":"2018-10-18-Git-Order-H","date":"2018-10-18T16:52:50.000Z","updated":"2019-12-30T16:52:50.000Z","comments":true,"path":"article/git-order-h.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-h.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下几种撤销操作和覆盖仓库：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下几种撤销操作和覆盖仓库： ¶一、git add 之前撤销文件更改 git checkout --&lt;file&gt;...修改 bug 时，发现尝试的方法不合适，当前所有改动的代码不想要了，可以执行： 1git checkout . ¶二、git add 之后取消暂存文件 git reset HEAD &lt;file&gt;...修改 bug 时，发现改好了，准备提交时发现有个非公共文件不需要提交，但是这个时候已经 git add 暂存文件了，可以执行： 1git reset --hard ¶三、git commit 之后撤回提交 git reset HEAD~&lt;number&gt;修改 bug，提交后发现这次提交的内容是错误的，则应该撤回这次提交，意思就是让 HEAD 这个指针指向其他地方，可以执行： 1git reset HEAD~ ~之后不填则默认为 1，数字代表撤销几次提交。 ¶四、覆盖已经 push 到线上仓库的内容谨慎 偶尔需要在测试服务器多次测试效果，将代码提交到 develop 分支然后通过 Jenkins 打包发布到测试环境，但是这些进行测试的 commit 不太好看，记录一下覆盖的操作： 1234git reset HEAD~git add .git commit -m 'commit message'git push -f origin develop 注意 -f在多人协作时出现是可能会被其他人砍死的","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（七）—— Bug 分支","slug":"2018-10-17-Git-Order-G","date":"2018-10-17T21:02:46.000Z","updated":"2019-12-13T12:30:45.000Z","comments":true,"path":"article/git-order-g.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-g.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下Bug 分支：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下Bug 分支： ¶一、git stash 出现 bug 时可以通过一个新的临时分支来修复，修复后合并分支，然后将这个临时分支删除。在 develop 分支上开发的正嗨的时候，突然发现 master 分支上出现了一个 bug，这个时候很自然地想创建一个临时分支 issue01 来修复 bug，但是 develop 分支上的代码还没有提交。并不是不想提交，而是没开发完成，还没法提交。但是线上 bug 刻不容缓。这个时候git stash就可以登场了： 1、暂存代码： 1git stash 2、切到 master 分支、创建临时分支： 12git checkout mastergit checkout -b issue01 3、修复后提交，切回 master 分支： 123git add .git commit -m 'fix: bug issue01'git checkout master 4、合并并删除临时分支： 12git merge --no-ff -m 'merge issue01 fix bug' issue01git branch -d issue01 两分钟搞定，bug 修复完成了，可以去 develop 分支干活了。 5、恢复暂存的代码，git stash pop恢复代码的同时也会把暂存的内容也删了： 123git checkout developgit stash listgit stash pop stash@&#123;0&#125; ¶二、git cherry-pick 在 master 分支上修复了 bug 后，仔细回忆一下，master 的代码是之前从 develop 分支上合并过去的，所以这个 bug 在 develop 分支上也存在。那在 develop 分支上怎么修复这个 bug 呢？Ctrl C、Ctrl V 再操作一次，提交就可以了？实际上这样操作也可以，但是如果 bug 修复涉及到的文件很多时，这样就有点不优雅了，cherry-pick命令可以很优雅地解决这个问题。 同样的 bug，要在 develop 上修复，只需要把ad52dcf fix: bug issue01这个提交所做的修改复制到 develop 分支。注意：这里只想复制ad52dcf fix: bug issue01这个提交的内容到 develop 分支，而不是要把 master 分支整个 merge 过来。 12git cherry-pick ad52dcfgit push origin develop 不包含 A： 1git cherry-pick A..B 包含 A： 1git cherry-pick A^..B git 自动给 develop 分支做了一次提交，这次提交不同于 master 分支的ad52dcf，因为这两个 commit 只是改动相同，但属于两个不同的 commit。用git cherry-pick，我们就不需要在 develop 分支上手动再把修复 bug 的过程重复一遍。","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（六）—— 从远程仓库中删除文件夹或文件","slug":"2018-10-16-Git-Order-F","date":"2018-10-16T18:12:22.000Z","updated":"2019-12-13T12:26:56.000Z","comments":true,"path":"article/git-order-f.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-f.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下从远程仓库中删除文件夹或文件：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下从远程仓库中删除文件夹或文件： 项目上传到远程仓库时，忘记忽略某个文件夹就 push 了，如：.idea，记录一下删除掉.idea的操作。 1、git 记录中删除.idea文件夹： 1git rm -r --cached .idea 2、将更改记录提交到本地仓库： 1git commit -m 'delete: git .idea' 3、提交到远程仓库： 1git push origin master 本地项目中的.idea文件夹不收操作影响，删除的只是远程仓库中的.idea文件夹，可放心删除，其他文件或文件夹同理。","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（五）—— 删除本地、远程分支","slug":"2018-10-15-Git-Order-E","date":"2018-10-15T18:12:22.000Z","updated":"2019-12-13T12:23:28.000Z","comments":true,"path":"article/git-order-e.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-e.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下删除本地、远程分支：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下删除本地、远程分支： 每次操作后可执行git branch -a查看分支情况： ¶一、删除本地分支 dev： 1git branch -d dev 如果报错：error: The branch ‘dev01’ is not fully merged，可使用git branch -D dev ¶二、删除远程分支 dev 1git push origin --delete dev","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（四）—— 合并分支且保留合并记录","slug":"2018-10-14-Git-Order-D","date":"2018-10-14T18:12:22.000Z","updated":"2019-12-13T12:17:15.000Z","comments":true,"path":"article/git-order-d.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-d.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下合并分支：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下合并分支： ¶一、合并 develop 到 master 项目开发中将自己的代码提交到 develop，发布前将 develop 合并到 master： 1、在 develop 提交代码后，切换到 master 更新代码： 12git checkout mastergit pull origin master 2、合并分支： 1git merge develop 3、提交远程仓库： 1git push origin master ¶二、合并分支且保留合并记录 因为 git 创建、合并、删除分支都非常快，所以 git 鼓励使用分支完成任务，合并后再删除分支，这和直接在 master 分支上工作效果是一样的，但是过程更加安全。 通常合并分支时，如果可以的话，git 会用Fast forward模式，但这种模式下，删除分支后会丢失分支信息。如果想要看出分支信息，可以强制禁用Fast forward模式，git 就会在 merge 时生成一个新的 commit。 1、切换到 master 拉取代码： 12git checkout mastergit pull origin master 2、合并 develop 分支，请注意--no-ff参数，表示禁用Fast forward模式： 1git merge --no-ff -m 'merge develop with no-ff' develop 因为本次合并要创建一个新的 commit，所以加上 -m 参数，把 commit 描述写进去。合并后，可以使用git log查看分支历史。 12345678$ git log* e1e9c68 (HEAD -&gt; master) merge with no-ff|\\ | * f52c633 (dev) add merge|/ * cf810e4 conflict fixed...","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（三）—— 修改上次的 commit","slug":"2018-10-13-Git-Order-C","date":"2018-10-13T18:12:22.000Z","updated":"2019-12-13T12:14:23.000Z","comments":true,"path":"article/git-order-c.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-c.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下修改上次的 commit：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下修改上次的 commit： ¶1、修改内容和上次的 commit 合并 12git add .git commit --amend ¶2、只修改上次的 commit message 1git commit --amend","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（二）—— clone 远程仓库到本地","slug":"2018-10-12-Git-Order-B","date":"2018-10-12T18:12:22.000Z","updated":"2019-12-13T11:30:07.000Z","comments":true,"path":"article/git-order-b.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-b.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下clone 远程仓库到本地：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下clone 远程仓库到本地： ¶一、clone 项目到本地 1、两种 clone 操作 （1）输入以下命令，就会进入主分支。其中 git clone 后的内容为你要下载的项目地址，newLearnGit 是本地目录： 12git clone https://github.com/liuxy0551/learnGit.gitgit clone https://github.com/liuxy0551/learnGit.git newLearnGit （2）clone 指定分支，就会进入指定分支。输入以下命令： 1git clone -b develop https://github.com/liuxy0551/learnGit.git 格式为：git clone -b + 分支名 + 远程仓库地址 2、本地分支和远程分支 命令 说明 git branch -a 查看所有分支列表，包括本地仓库和远程仓库 git checkout dev 切换分支 dev git checkout -b dev 本地仓库创建 dev 分支，同时切换到 dev 分支。只有提交的时候才会在远程仓库创建一个分支 ¶二、切换到指定远程分支 git checkout --track origin/develop 可以缩写为： 1git checkout -t origin/develop 等同于 1git checkout -b develop origin/develop ¶三、创建并跟踪远程分支 git push origin develop --set-upstream 可以缩写为： 1git push origin develop -u","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Git 常用命令（一）—— 将本地仓库与多个远程仓库关联","slug":"2018-10-11-Git-Order-A","date":"2018-10-11T18:12:22.000Z","updated":"2019-12-13T11:26:22.000Z","comments":true,"path":"article/git-order-a.html","link":"","permalink":"https://liuxianyu.cn/article/git-order-a.html","excerpt":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下将本地仓库与多个远程仓库关联：","text":"git 常用命令系列随笔会记录一些用到的常见命令，这里记录一下将本地仓库与多个远程仓库关联： ¶将本地的项目与线上项目关联 这一部分主要作用是将本地项目备份到线上，达到多端操作的目的。以 Github 举例： 1、新建 repository 在 Github 下创建一个新的 repository，取名为 learnGit。 2、创建本地仓库 进入本地文件夹路径，执行以下命令创建本地仓库： 1git init 3、修改 .gitignore 文件 如果没有请手动创建一个，在里面加入忽略更新的内容，如.idea、node_modules等。 4、提交代码/文件 执行以下命令，完成代码/文件在本地的提交： 12git add .git commit -m 'commit message' 5、设置远程仓库 1git remote add origin https://github.com/liuxy0551/learnGit.git 如果出现问题：fatal: remote origin already exists，提示 origin 已存在，执行git remote rm origin删除别名再重复第 5 步即可 一个本地仓库可以同时关联多个远程仓库，依次关联即可： 12git remote add github https://github.com/liuxy0551/learnGit.gitgit remote add gitee https://gitee.com/liuxy0551/learnGit.git origin、github、gitee 均为别名，为了区分远程仓库。关联多个远程仓库的时候依次 push 即可： 12git push github mastergit push gitee master 6、更新远程仓库 12git pull origin mastergit push origin master 7、将本地新建的分支推到远程并和远程分支绑定 1git push origin develop -u 8、将本地的 tag 全部推到远程仓库 1git push origin --tags","categories":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"}],"author":"liuxy0551"},{"title":"Vue 生命周期的理解","slug":"2018-09-25-vue-life-cycle","date":"2018-09-25T20:29:30.000Z","updated":"2018-09-25T20:29:30.000Z","comments":true,"path":"article/vue-life-cycle.html","link":"","permalink":"https://liuxianyu.cn/article/vue-life-cycle.html","excerpt":"我在学习 Vue 的时候，经常会接触到 Vue 的生命周期函数，常见的为 created 和 mounted，所以记录一下每个 Vue 实例在被创建之前都要经过的一系列初始化过程，例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。同时在这个过程中也会运行一些叫做生命周期钩子的函数，这个过程便是 Vue 的生命周期。","text":"我在学习 Vue 的时候，经常会接触到 Vue 的生命周期函数，常见的为 created 和 mounted，所以记录一下每个 Vue 实例在被创建之前都要经过的一系列初始化过程，例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。同时在这个过程中也会运行一些叫做生命周期钩子的函数，这个过程便是 Vue 的生命周期。 ¶一、生命周期图示 上图展示了 Vue 实例的生命周期，官网上的原图，我在学习的时候也没有一下就弄懂这张图说的所有东西，但是随着 Vue 学习的深入，对这张图的兴趣越来越浓。可以看出，在 Vue 生命周期中有很多钩子函数提供给我们在 Vue 生命周期不同时刻进行操作。我们先在图上确认所有的生命周期函数，然后再依次理解。 beforeCreate、created 创建前后 beforeMount、mounted 挂载前后 beforeUpdate、updated 数据更新前后 beforeDestroy、destroyed 页面销毁前后 ¶二、实际运行 复制下面的代码，找一个可以在线运行 js 代码的网站粘贴运行，看看 console 打印的内容，便于理解生命周期的实际流程。 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;vue生命周期学习&lt;/title&gt; &lt;script src=&quot;https://cdn.bootcss.com/vue/2.4.2/vue.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;h1&gt;&#123;&#123;message&#125;&#125;&lt;/h1&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; var vm = new Vue(&#123; el: &apos;#app&apos;, data: &#123; message: &apos;Vue的生命周期&apos; &#125;, beforeCreate: function() &#123; console.group(&apos;------beforeCreate创建前状态------&apos;); console.log(&quot;%c%s&quot;, &quot;color:red&quot; , &quot;el : &quot; + this.$el); //undefined console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data : &quot; + this.$data); //undefined console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message) &#125;, created: function() &#123; console.group(&apos;------created创建完毕状态------&apos;); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el : &quot; + this.$el); //undefined console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data : &quot; + this.$data); //已被初始化 console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); //已被初始化 &#125;, beforeMount: function() &#123; console.group(&apos;------beforeMount挂载前状态------&apos;); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el : &quot; + (this.$el)); //已被初始化 console.log(this.$el); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data : &quot; + this.$data); //已被初始化 console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); //已被初始化 &#125;, mounted: function() &#123; console.group(&apos;------mounted 挂载结束状态------&apos;); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el : &quot; + this.$el); //已被初始化 console.log(this.$el); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data : &quot; + this.$data); //已被初始化 console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); //已被初始化 &#125;, beforeUpdate: function () &#123; console.group(&apos;beforeUpdate 更新前状态===============》&apos;); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el : &quot; + this.$el); console.log(this.$el); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data : &quot; + this.$data); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); &#125;, updated: function () &#123; console.group(&apos;updated 更新完成状态===============》&apos;); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el : &quot; + this.$el); console.log(this.$el); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data : &quot; + this.$data); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); &#125;, beforeDestroy: function () &#123; console.group(&apos;beforeDestroy 销毁前状态===============》&apos;); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el : &quot; + this.$el); console.log(this.$el); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data : &quot; + this.$data); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); &#125;, destroyed: function () &#123; console.group(&apos;destroyed 销毁完成状态===============》&apos;); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el : &quot; + this.$el); console.log(this.$el); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data : &quot; + this.$data); console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message) &#125; &#125;)&lt;/script&gt;&lt;/html&gt; 运行后打开调试查看 console 打印的内容，可以看到： 这样可以较为清晰地看到一个 Vue 示例在创建过程中调用的几个生命周期钩子函数。 ¶三、钩子函数解析 Vue 实例有一个完整的生命周期，也就是从开始创建、初始化数据、编译模板、挂载 Dom、渲染 → 更新 → 渲染、销毁等一系列过程，我们称这是 Vue 的生命周期，通俗说就是 Vue 实例从创建到销毁的过程。每一个组件或者实例都会经历一个完整的生命周期，总共分为三个阶段：初始化、运行中、销毁。 1、beforeCreate 和 created： 在这两个生命周期之间，进行初始化事件，进行数据的观测，可以看到在 created 的时候数据已经和 data 属性进行绑定（放在 data 中的属性当值发生改变的同时，视图也会改变）； 2、beforeMount： 接下来开始找实例或者组件对应的模板，编译模板为虚拟 Dom 放入到渲染函数中准备渲染，然后执行 beforeMount 钩子函数，在这个函数中虚拟 Dom 已经创建完成，马上就要渲染，在这里也可以更改数据，不会触发 updated，在这里可以在渲染前最后一次更改数据的机会，不会触发其他的钩子函数，一般可以在这里做初始数据的获取； 3、mounted： 接下来开始渲染，渲染出真实 Dom，然后执行 mounted 钩子函数，此时组件已经出现在页面中，数据、真实 Dom 都已经处理好了,事件都已经挂载好了，可以在这里操作真实 Dom 等事情； 4、beforeUpdate 和 updated： 当 Vue 发现 data 中的数据发生了改变，会触发对应组件的重新渲染，先后调用 beforeUpdate 和 updated 钩子函数； 5、beforeDestroy： 在实例销毁之前使用，在这一步，实例仍然完全可用； 6、destroyed： 在 Vue 实例销毁后调用，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。 只需要记住在 Vue 的生命周期里有哪些钩子函数，它们分别是在什么情况下会被调用，以及其中的一些原理即可。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"生命周期","slug":"前端/Vue/生命周期","permalink":"https://liuxianyu.cn/categories/前端/Vue/生命周期/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"生命周期","slug":"生命周期","permalink":"https://liuxianyu.cn/tags/生命周期/"}],"author":"liuxy0551"},{"title":"移动端调试神器 - vConsole","slug":"2018-09-07-Mobile-vConsole","date":"2018-09-07T10:31:05.000Z","updated":"2020-03-30T11:43:50.000Z","comments":true,"path":"article/mobile-vConsole.html","link":"","permalink":"https://liuxianyu.cn/article/mobile-vConsole.html","excerpt":"移动端进行真机调试时，可以使用vConsole查看部分调试信息，功能基本够用。记录一下使用方法。","text":"移动端进行真机调试时，可以使用vConsole查看部分调试信息，功能基本够用。记录一下使用方法。 ¶一、vConsole - js 控制 ¶1、文档 github、中文文档、使用教程 ¶2、安装 1npm i vconsole -D ¶3、简单使用 在main.js中写道： 123import VConsole from 'vconsole'const vConsole = new VConsole()Vue.use(vConsole) ¶4、灵活使用 推荐 生产环境可能出现一些调试问题，除去抓包的方法外，可以使用 vConsole：写一个vConsole.js文件，在App.vue中使用。 1234567891011121314151617181920212223242526// vConsole.jsexport default &#123; vConsole: null, // 打开 vConsole open () &#123; let ids = [148, 488] // 书明，刘易 let userInfo = JSON.parse(localStorage.getItem('userInfo')) let isPC = localStorage.getItem('isPC') === 'true' // PC 端打开页面时不需要打开 vConsole if (isPC) &#123; return &#125; if (process.env.NODE_ENV === 'production') &#123; if (!/test/.test(process.env.VUE_APP_BASE_URL)) &#123; // 正式服 if (!ids.includes(userInfo &amp;&amp; userInfo.id)) &#123; // 正式服不包含测试和开发则不打开 return &#125; &#125; &#125; let VConsole = require('vconsole/dist/vconsole.min.js') this.vConsole = new VConsole() &#125;&#125; 12345678// App.vueimport vConsole from \"@/utils/vConsole\"export default &#123; mounted() &#123; vConsole.open() &#125;&#125; ¶二、webpack 版插件 ¶1、安装 1npm i vconsole-webpack-plugin -D ¶2、使用 Vue CLI 3 中可以在vue.config.js中设置： 12345678910111213// 引入 vConsole 插件const vConsole = require('vconsole-webpack-plugin')module.exports = &#123; configureWebpack: &#123; plugins: [ new vConsole(&#123; filter: [], // 需要过滤的入口文件 enable: process.env.NODE_ENV === 'development' // 生产环境不打开 &#125;) ] &#125;&#125; 注意 修改vue.config.js文件需要重启项目 ¶三、通过 CDN 引入 1&lt;script src=\"http://wise-job.oss-cn-zhangjiakou.aliyuncs.com/webjs/libs/vConsole/vconsole.3.3.4.min.js\"&gt;&lt;/script&gt;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"vConsole","slug":"前端/vConsole","permalink":"https://liuxianyu.cn/categories/前端/vConsole/"}],"tags":[{"name":"vConsole","slug":"vConsole","permalink":"https://liuxianyu.cn/tags/vConsole/"}],"author":"liuxy0551"},{"title":"微信小游戏跳坑之旅 —— 使用白鹭引擎开发之创建项目","slug":"2018-08-22-egret-red-hat","date":"2018-08-22T20:29:30.000Z","updated":"2018-08-22T20:29:30.000Z","comments":true,"path":"article/egret-red-hat.html","link":"","permalink":"https://liuxianyu.cn/article/egret-red-hat.html","excerpt":"最近花了两周时间在微信小游戏里踩坑，觉得挺有意思的，在这里分享一下开发的过程，点此可查看项目 RedHat。首先介绍一下基础：小游戏 官网教程 、腾讯课堂的课程： 白鹭教育 - 成语大挑战小游戏开发（视频中的资料链接：https://pan.baidu.com/s/1kkrCUwn0hikPLVg11PPFAA 密码：3gtt）、B站的教程：使用白鹭引擎快速开发微信小游戏最全指南。这个小游戏是一个跳跃类游戏，基于白鹭（Egret）引擎开发，选用该引擎的原因是目前其对小游戏的开发支持较好，可以少踩些坑。上张图展示一下，下图为首页：","text":"最近花了两周时间在微信小游戏里踩坑，觉得挺有意思的，在这里分享一下开发的过程，点此可查看项目 RedHat。首先介绍一下基础：小游戏 官网教程 、腾讯课堂的课程： 白鹭教育 - 成语大挑战小游戏开发（视频中的资料链接：https://pan.baidu.com/s/1kkrCUwn0hikPLVg11PPFAA 密码：3gtt）、B站的教程：使用白鹭引擎快速开发微信小游戏最全指南。这个小游戏是一个跳跃类游戏，基于白鹭（Egret）引擎开发，选用该引擎的原因是目前其对小游戏的开发支持较好，可以少踩些坑。上张图展示一下，下图为首页： ¶一、安装 Egret launcher 下载 Egret launcher 后安装，然后在引擎页选择安装 5.1.2 以上版本，推荐最新版本；在工具页下载 Egret Wing 3 ，这是一个编辑器，可以很方便地编辑 exml 格式的文件，更方便地布局页面。 等待引擎及 Egret Wing 3 安装好后即可进入项目页创建新的项目了。 ¶二、创建新项目，熟悉 Egret Wing 3 ¶1、创建项目 在项目页点击 创建项目 ，然后输入项目名称和项目存放的路径，因为这个项目用到的是 EUI ，所有创建的是一个 EUI 项目，引擎版本选择刚刚下载的那个版本即可。 选择扩展库 建议勾选上 game 游戏库，也可以在开发的时候在添加到项目中，egret.setTimeOut 方法需要 game 游戏库的支持；第六个的 tween 缓动动画库是游戏中的物体缓动的必需库文件。舞台尺寸默认， 小游戏不支持 showAll 的缩放模式，需要更改，然后点击 创建 。 ¶2、发布编译项目 依据下图进行该项目的的发布设置，选中 微信小游戏 并 设为默认发布 ；然后填入自己的 AppID，在注册微信公众平台的时候一定要注意，在微信公众平台的 设置 &gt; 基本设置 &gt; 服务类目 中第一个 大类一定要选择 游戏 ，否则在编译项目后会提示无app.json，看过小游戏官网教程的话就知道小游戏加载的是 game.json ；填上项目名称后点击 确定 ，等待发布编译，之后操作下图中的第六步，打开 Egret Wing 3，然后在该编辑器中进行编写代码。 ¶3、熟悉 Egret Wing 3 打开项目后可自行查看各个文件，感受一下每个文件是什么作用。其中 egretProperties.json 是一个很重要的文件，打开的时候确认 current 的值，如果是 web 的话，点击调试按钮的时候会弹出 H5 页面查看小游戏的效果，更改为 wxgame 即可在点击调试按钮的时候直接打开微信开发者工具进行预览，下图左上角的箭头即指向调试按钮。前面提到的勾选 game 库，如果后期添加的话，需要在 egretProperties.json 中按红框的格式添加，然后在终端输入 egret build -e 进行加载。 src 文件夹下的 Platform.ts 是 Egret 引擎和微信小游戏之间的桥接文件，主要功能是使用小游戏的 API ，Main.ts 文件是在该项目中加载 Platform.ts 文件。同时，为了避免混淆，在 src 文件夹下新建 game 文件夹用于存放自己的游戏文件，右击game 文件夹选择 新建模板文件 &gt; 新建 EUI 组件 ，输入类名后，修改 皮肤默认路径 ，也放到 resource 的 game 文件夹下，避免混淆。 可以对照我放在 Github 上的源码，每个新建的 EUI 组件全部采用单例模式编写，利于后期调用被其他组件调用该组件中的方法。下图中的红框即是快速布局功能区。 ¶三、Egret 中重要的 API 因为 Egret 不止是针对微信小游戏的引擎，所以其官网资料体系比较大，对小游戏有用的主要是以下几个： 开发者中心 &gt; 文档 &gt; Egret Engine 2D、Egret 扩展库 、 Egret API 、Egret 教学示例 、Egret 交流社区 。 其中在这个项目中比较重要的几个点分别为： 滚动控制容器 、setTimeOut 、缓动动画及其 wait 延迟方法 、碰撞检测 、缓动动画的暂停与恢复 、通过深度值获取子对象来设置参数（深度管理） 、Timer定时器（后期剔除）等，在 GamePage.ts 中可查看具体用法。 因为发布需要软著登记，所有暂时不发布了，先玩玩单机版的吧。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"微信小游戏","slug":"前端/微信小游戏","permalink":"https://liuxianyu.cn/categories/前端/微信小游戏/"}],"tags":[{"name":"Egret","slug":"Egret","permalink":"https://liuxianyu.cn/tags/Egret/"},{"name":"微信小游戏","slug":"微信小游戏","permalink":"https://liuxianyu.cn/tags/微信小游戏/"}],"author":"liuxy0551"},{"title":"Vue 中实现验证码倒计时功能","slug":"2018-08-19-code-setInterval","date":"2018-08-19T20:29:30.000Z","updated":"2018-08-19T20:29:30.000Z","comments":true,"path":"article/code-setInterval.html","link":"","permalink":"https://liuxianyu.cn/article/code-setInterval.html","excerpt":"公司项目中有根据手机号获取验证码的环节，倒计时的实现还是比较有趣的，记录一下。","text":"公司项目中有根据手机号获取验证码的环节，倒计时的实现还是比较有趣的，记录一下。 ¶实现效果 ¶具体实现 ¶1、HTML 部分 123456789101112131415161718&lt;li&gt; &lt;div&gt; &lt;span&gt;手机号&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;text&quot; class=&quot;m-edit-input&quot; v-model=&quot;ustelphone&quot;&gt; &lt;/div&gt;&lt;/li&gt;&lt;li&gt; &lt;div&gt; &lt;span&gt;验证码&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;text&quot; class=&quot;m-edit-input-s&quot; v-model=&quot;identifyingcode&quot; maxlength=&quot;6&quot;&gt; &lt;span class=&quot;m-get-code active&quot; v-if=&quot;!getCode&quot; @click=&quot;getInforcode&quot;&gt;获取验证码&lt;/span&gt; &lt;span class=&quot;m-get-code&quot; v-if=&quot;getCode&quot;&gt;&#123;&#123; count &#125;&#125; 秒后再次获取&lt;/span&gt; &lt;/div&gt;&lt;/li&gt; ¶2、JS 部分 12345678data() &#123; return &#123; getCode: false, // 是否已获取验证码 ustelphone: &apos;&apos;, // 手机号码 timer: null, // 倒计时 count: &quot;&quot; // 倒计时 &#125;&#125; 12345678910111213141516171819202122232425// 获取验证码getInforcode() &#123; if(!this.ustelphone)&#123; Toast(&quot;请先输入手机号码&quot;); return false; &#125; // 倒计时60秒 const TIME_COUNT = 10; if (!this.timer) &#123; this.count = TIME_COUNT; this.getCode = true; this.timer = setInterval(() =&gt; &#123; if (this.count &gt; 0 &amp;&amp; this.count &lt;= TIME_COUNT) &#123; this.count --; &#125; else &#123; this.getCode = false; clearInterval(this.timer); this.timer = null; &#125; &#125;, 1000); &#125; axios.get(api.get_inforcode + &quot;?ustelphone=&quot; + this.ustelphone).then(res =&gt; &#123; Toast(res.data.message); &#125;);&#125; ¶3、CSS 部分 12345678910111213.m-get-code&#123; display: inline-block; padding: 4px 15px; border-radius: 10px; background-color: #CCCCCC; color: #fff; box-shadow:0 3px 6px rgba(0,0,0,0.16); font-size: 21px; line-height: 40px; &amp;.active&#123; background-color: @mainColor; &#125;&#125;","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"倒计时","slug":"倒计时","permalink":"https://liuxianyu.cn/tags/倒计时/"}],"author":"liuxy0551"},{"title":"Vue 编程之路（三）—— Vue 中子组件在父组件的 v-for 循环里，父组件调取子组件的事件","slug":"2018-07-30-v-for-father-children","date":"2018-07-30T18:12:22.000Z","updated":"2018-07-30T18:12:22.000Z","comments":true,"path":"article/v-for-father-children.html","link":"","permalink":"https://liuxianyu.cn/article/v-for-father-children.html","excerpt":"最近公司的一个项目中使用 Vue 2.x + Element UI 实现一个后台管理系统的前端部分，属于商城类型。","text":"最近公司的一个项目中使用 Vue 2.x + Element UI 实现一个后台管理系统的前端部分，属于商城类型。 ¶一、前期思路： 其中在“所有订单”页面，UI 给的设计页面如下： UI 理解：每个 Tab 点击后展现的页面都是这样的管理表格，所以这一部分表格写成组件。一开始采用的写法是下面这样的： 上图，前期实现。写完觉得代码很繁复，我在实现状态标识 + 对应的数量时，也发现上述写法不利于将 label 绑定为动态数值，转换思路和后端老哥沟通后改造了接口，返回数据的时候添加一下各个状态及其对应的数量。 ¶二、最终的实现思路： 基于简化代码的思想，决定将这些 tabs 用循环的方式展现出来，写法如下： 上图，定义的 tabList。 因为要显示相应的数量，从接口中拿数据后与 tabList 进行拼接，不过给各位的参考意义不大，处理如下： 下图将体现解决方法的核心，那就是带上对应的数组下标，即何时调用： 我采用的逻辑是点击不同的 Tab 标签，携带不同的参数去请求数据，上图显示在返回的数据 order 有变化时，将变化后的 order 传值给子组件的 getOrderList 方法进行处理。这个时候就要解答标题了，因为 tabs 是循环出来的， console.log(this.$refs.child) 将显示类似下图： 可以看出已经成了一个数组，这时候就需要我们加上下标再去调用相应的 tab 子组件方法，如下图，确定 tabList 的 index： ¶三、写在最后 1、为何不像 Vue 编程之路（一）——父子组件之间的数据传递 中介绍的直接传值？ 直接传值在前期写法中尝试过，那时连请求数据都是在子组件中进行，所以有很多莫名其妙的 bug，比如每次请求数据后会再请求一次全部状态的数据，导致显示异常，转换思路后在父组件请求数据，按 Tab 标签分发对应的数据，这就需要将 Tab 标签的数据传入子组件的方法进行处理。 2、子组件在父组件中进行 v-for 循环前，因为 this.$refs.child 还不是数组，所以可以直接点出子组件的方法，这也是调用子组件方法的实现方案。 特殊点就是子组件在父组件中进行 v-for 循环后， this.$refs.child 会变成一个数组，这时候再调用子组件的方法就要带上数组的下标了，这个下标如何来，可以参考这篇随笔第二部分的实现思路。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"父子组件","slug":"父子组件","permalink":"https://liuxianyu.cn/tags/父子组件/"}],"author":"liuxy0551"},{"title":"Vue 编程之路（二）——跳转页面传值","slug":"2018-07-27-transmit-value","date":"2018-07-27T18:29:43.000Z","updated":"2018-07-27T18:29:43.000Z","comments":true,"path":"article/transmit-value.html","link":"","permalink":"https://liuxianyu.cn/article/transmit-value.html","excerpt":"最近公司的一个项目中使用 Vue 2.0 + element UI 实现一个后台管理系统的前端部分，属于商城类型。其中我负责的部分有一项需要跳转页面，由于跳转前的页面是多个组件构成的，所以在跳转页面的时候，并不适合用传统的 href，于是使用路由进行传值。在这里分享一下开发的过程。 如何引入路由，可查看官方文档：https://router.vuejs.org/zh/installation.html，也可自行搜索。","text":"最近公司的一个项目中使用 Vue 2.0 + element UI 实现一个后台管理系统的前端部分，属于商城类型。其中我负责的部分有一项需要跳转页面，由于跳转前的页面是多个组件构成的，所以在跳转页面的时候，并不适合用传统的 href，于是使用路由进行传值。在这里分享一下开发的过程。 如何引入路由，可查看官方文档：https://router.vuejs.org/zh/installation.html，也可自行搜索。 ¶一、我采用的实现方法 上图，跳转前的页面。给每一行的按钮绑定点击事件，并将每一行的数据携带上。 上图，按钮的点击事件。首先创建 props ，然后在 props 中创建对应的属性名，之后即可在 template 中使用接收到的对象。 上图，跳转前的页面所对应的响应事件。其中 path 所对应的 ‘/order/orderDetails’ 我已经在 src/router/index.js 中注册声明，如下图： 上图，在 src/router/index.js 中注册声明。 点击“订单详情”按钮后，页面跳转，此时的 URL 为： 上图，接收页接收数据。此时刷新页面，数据依然存在，因为 URL 没有改变，接收页直接从 URL 截取参数去接口中拿数据，故刷新页面不会影响接收页的数据。可以看到，这边是把需要的参数写入 URL 了，然后在接收页接收数据： ¶二、介绍一下先前采用的方法 拿着整个订单对象用路由传，实际上能传成功，但是会在刷新页面后拿不到数据，观察 URL 发现显示的是 Object ，可能是刷新后解析问题导致拿不到数据。 具体的采用可参照官方文档：https://router.vuejs.org/zh/guide/essentials/navigation.html，我当时也是照着文档写的，获取参数可以用 this.$route.query。 ¶三、其他方法 其实跳转页面传值的方法有很多，就我所听过的就还有以下方法，不过我没有实验过，有兴趣的可以自行尝试： ¶1、使用 router-link 也会在刷新页面后丢失数据 1&lt;router-link :to=&quot;&#123; name: &apos;user&apos;, params: &#123; userId: 123 &#125;&#125;&quot;&gt;User&lt;/router-link&gt; ¶2、通过 parent, children 等方法调取用层级关系的组件内的数据和方法 通过下面的方法调用，虽然用起来比较灵活，但是容易造成代码耦合性高，导致后期维护困难。 12this.$parent.$data.id // 获取父元素data中的idthis.$children.$data.id // 获取父元素data中的id ¶3、通过 eventBus 传递数据 使用前可以在全局定义一个 eventBus 1window.eventBus = new Vue(); 在需要传递参数的组件中，定义一个 emit 发送需要传递的值，键名可以自己定义（可以为对象） 1eventBus.$emit(&apos;eventBusName&apos;, id); 在需要接受参数的组件重，用 on 接受该值（或对象） 123eventBus.$on(&apos;eventBusName&apos;, function(val) &#123; console.log(val)&#125;); 最后记住要在 beforeDestroy() 中关闭这个 eventBus 1eventBus.$off(&apos;eventBusName&apos;); ¶4、借道 sessionStorage / localStorage localStorage 与 sessionStorage 存储的必需是字符串，而获取的交互数据是 Object，所以我们一般要把 JSON 格式的字符串转成字符。 12JSON.stringify(); // 将Json对象转为字符串。JSON.parse(); // 将字符串转为json格式。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"}],"author":"liuxy0551"},{"title":"Vue 编程之路（一）——父子组件之间的数据传递","slug":"2018-07-26-data-father-child","date":"2018-07-26T20:29:30.000Z","updated":"2018-07-26T20:29:30.000Z","comments":true,"path":"article/data-father-child.html","link":"","permalink":"https://liuxianyu.cn/article/data-father-child.html","excerpt":"最近公司的一个项目中使用 Vue 2.0 + element UI 实现一个后台管理系统的前端部分，属于商城类型。其中部分页面是数据管理页，所以有很多可以复用的表格，故引入自定义组件。","text":"最近公司的一个项目中使用 Vue 2.0 + element UI 实现一个后台管理系统的前端部分，属于商城类型。其中部分页面是数据管理页，所以有很多可以复用的表格，故引入自定义组件。 ¶一、父组件向子组件传值 上图，这边实现的是从父组件向子组件动态传值，传的是一个对象。在子组件上动态绑定要传入的对象，如果是静态数据（如：“Hello World!”）则无需属性名前的冒号，并且需要在 components 中声明。 上图，首先创建 props ，然后在 props 中创建对应的属性名，之后即可在 template 中使用接收到的对象。 总结一下： 父组件向子组件传对象（值）成功 1、在父组件中注册并引用子组件 2、使用子组件时在子组件上添加一个属性，并绑定上数据 3、在子组件中创建 props ，在 props 中创建相同的属性名，用来接收数据 4、把接收到的数据在子组件中使用 ¶二、子组件向父组件传值 首先在子组件创建一个按钮，给这个按钮绑定一个点击事件。上图是子组件中又调用了其他的组件（分页组件），我这边是子组件把页码传递给父组件，父组件拿着页码去请求数据，原理和按钮绑定点击事件是相同的道理。 然后在方法中添加以下代码： 123pageChange(v)&#123; this.$emit(&apos;toPage&apos;, v)&#125; 在父组件的子组件标签中监听该事件并添加一个响应事件来处理数据。点击分页组件上的页码按钮或点击创建的按钮，在响应事件中使用数据，可观察到传值成功。 总结一下： 子组件向父组件传值成功 1、子组件中需要发出该自定义事件，可以是按钮的点击事件，也可以是其他方式 2、将需要传的值放在 $emit 第二个参数的位置，这个参数会被传给父组件中的响应方法 3、需要在父组件中使用子组件并在子组件标签上绑定对事件的监听 在通信中，无论是子组件向父组件传值还是父组件向子组件传值，他们都有一个共同点就是有中间介质，子向父的介质是自定义事件，父向子的介质是 props 中的属性。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"父子组件","slug":"父子组件","permalink":"https://liuxianyu.cn/tags/父子组件/"}],"author":"liuxy0551"},{"title":"在 apizza 中使用 Mock 来模拟接口数据","slug":"2018-07-10-apizza-mock","date":"2018-07-10T21:39:30.000Z","updated":"2018-07-10T21:39:30.000Z","comments":true,"path":"article/apizza-mock.html","link":"","permalink":"https://liuxianyu.cn/article/apizza-mock.html","excerpt":"作为一个前端开发人员，经常需要和接口文档打交道，公司使用的是 apizza，在 Chrome 中安装插件后功能提升明显。","text":"作为一个前端开发人员，经常需要和接口文档打交道，公司使用的是 apizza，在 Chrome 中安装插件后功能提升明显。 ¶apizza apizza 简单来说就是一个 API 管理工具，也可以称之为多人在线协作的接口调试工具。在 Chrome 中安装 apizza 的插件后可以使用免费版的全部功能。可以通过 apizza官网 右上角的 插件安装 获取 Chrome 插件。也可以点击链接获取压缩包再安装：https://pan.baidu.com/s/1LkXXNtxKj2oF1_g8MmScCg 提取码：ayau。 使用方法可以参考一下这篇来自 ouxiaoxian 的博客 apizza的使用方法。 ¶Mock.js Mock.js 简而言之就是一个生成随机数据的工具。单纯使用的话可以直接进入 Mock.js 官网 顶部的 示例 标签查看使用方法，页面支持试验方法。 如果又兴趣查看源码的话可以从 Mock.js 官网 进入查看。 ¶如何使用 apizza mock apizza mock 是基于 Mock.js 开发的。具体文档可以 参见 Mock.js 详细文档 或者查看 Mock.js 的 示例。 apizza 上如何使用 mock 1、新建接口 2、填写 mock 在线地址 3、编写 mock 数据模板 4、点击预览按钮查看 mock 响应 5、保存后，即可去代码中使用 mock 在线地址了 还可以去 apizza 的 使用帮助页 查看更多使用方法。","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Mock","slug":"前端/Mock","permalink":"https://liuxianyu.cn/categories/前端/Mock/"}],"tags":[{"name":"Mock","slug":"Mock","permalink":"https://liuxianyu.cn/tags/Mock/"}],"author":"liuxy0551"},{"title":"Oracle 11g 数据库备份涉及的部分记忆点","slug":"2018-04-10-oracle11g-PLSQL-emptytable","date":"2018-04-10T21:39:30.000Z","updated":"2018-04-10T21:39:30.000Z","comments":true,"path":"article/oracle11g-PLSQL-emptytable.html","link":"","permalink":"https://liuxianyu.cn/article/oracle11g-PLSQL-emptytable.html","excerpt":"在开发中有一个项目，其中有 32 个表，含有 10 个空表（没有数据），开发过程恰逢自己电脑换系统和新配一台工作电脑，在备份数据库时，感觉有部分记忆点值得记录一下。","text":"在开发中有一个项目，其中有 32 个表，含有 10 个空表（没有数据），开发过程恰逢自己电脑换系统和新配一台工作电脑，在备份数据库时，感觉有部分记忆点值得记录一下。 ¶一、导出、导入数据文件（可用于数据备份，或者不同地点间的数据库同步） 1、使用 PLSQL 12 中自带的 工具——导出表 ，单击第一个表，按住 Shift 键单击最后一个表即可将所有表全部选定，选定导出目录，填写输出文件名称，保存，数据多的时候可以在弹出的窗口中看见导出过程。（这时候可以发现有部分表提示“导出失败，某某表不存在”，查看这些表后发现这些表都有一个共同的特征：无数据，解决办法可跳至第三段） 2、在新电脑中使用 PLSQL 12 中的 工具——导入表，选中刚刚的导出文件，导入数据即可。 ¶二、想象中的导出、导入数据文件 ¶以下为缺少表空间的错误： 1、在原先正常的电脑上使用 PL SQL 12 导出 32 个表，为 .dmp 格式文件，并在新电脑进行导入表的操作 2、弹出一个窗口后秒关，尝试通过截图快捷键截图查看，以失败告终，请教项目组上的数据库老师后知道了这是缺少表空间的缘故，之后 就是各种恶补表空间知识。 3、在 PLSQL 中新建 SQL 窗口，键入以下语句并执行： 1234567CREATE TABLESPACE OPLOGGINGDATAFILE &apos;D:\\Oracle\\product\\11.2.0\\OP.DBF&apos;SIZE 50MAUTOEXTEND ONNEXT 32M MAXSIZE UNLIMITEDEXTENT MANAGEMENT LOCAL; 其中第三行语句含有表空间的存放位置，建议放在 Oracle 的安装目录里面，防止误删除。OP 为表空间名字，其他行语句想了解的可自行百度具体含义。删除已经使用的表空间会使得对应的用户无法登录使用，我是重装 Oracle 解决的，就是这么低技术含量，幸好是没有什么重要数据。可以删除表空间后再删除这个 .DBF 文件，删除语句如下： 1DROP TABLESPACE OP; ¶三、解决空表不导出的方法 1、在数据导出的时候，无法导出空表，提示错误“EXP-00011：table 不存在”。 产生原因：Oracle 11g 默认创建一个表时不分配 segment，只有在插入数据时才会产生（当然也可以强制分配），以节省磁盘空间。 2、解决方法： (1)第一种：在空表中插入一条数据然后再对插入的数据进行删除，便可以进行数据导出（我的那几个表添加假数据很难，如果表少的话可以手动执行，对于多个表的情况可以采用语句进行批量操作的）。 (2)第二种：可以使用手工为空表分配 Extent 的方式，来解决导出之前建立的空表的问题。在 PLSQL 中新建 SQL 窗口，键入以下语句并执行： 1SELECT &apos;ALTER TABLE &apos;||TABLE_NAME||&apos; ALLOCATE EXTENT;&apos; FROM USER_TABLES WHERE SEGMENT_CREATED=&apos;NO&apos;; 可以通过语句导出查询结果，执行导出的语句即可（表数量少的话可以复制粘贴执行查询结果）。 1234567set heading off;set echo off;set feedback off;set termout on;spool D:\\Oracle\\product\\11.2.0\\allocate.sql;SELECT &apos;ALTER TABLE &apos;||TABLE_NAME||&apos; ALLOCATE EXTENT;&apos; FROM USER_TABLES WHERE SEGMENT_CREATED=&apos;NO&apos;;spool off; 导出后执行导出的语句： 1@ D:\\Oracle\\product\\11.2.0\\allocate.sql; (3)第三种：设置deferred_segment_creation 参数，该参数值默认是TRUE，当改为FALSE时，无论是空表还是非空表，都分配segment。 （这种方法我没有试过，你可以自行尝试） 1SELECT &apos;ALTER TABLE &apos;||TABLE_NAME||&apos; ALLOCATE EXTENT;&apos; FROM USER_TABLES WHERE NUM_ROWS=0; 实测上面百度到的这句指令不显示空表结果，你可以自己试一试。 下面这个语句可在 TNS 连接不上时导入表： 1imp scott/tiger@localhost:1521/orcl full=y file= E:\\my.dmp ignore=y; 1、写这篇随笔的时候发现在 Atom 中选中单词，按住 Ctrl 后按 K， 再按 U，即可将选中的单词大写 2、白天的技巧：Eclipse 中查看方法在哪里被调用了——选中方法，直接Ctrl + Shift + G 或者 Ctrl + Alt + H","categories":[{"name":"数据库","slug":"数据库","permalink":"https://liuxianyu.cn/categories/数据库/"},{"name":"Oracle","slug":"数据库/Oracle","permalink":"https://liuxianyu.cn/categories/数据库/Oracle/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://liuxianyu.cn/tags/Oracle/"}],"author":"liuxy0551"},{"title":"Ionic 3 + AngularJS 4.x + Cordova 混合开发项目小战","slug":"2018-03-05-ionic3-angular4.x-cordova","date":"2018-03-05T20:29:30.000Z","updated":"2018-01-29T20:29:30.000Z","comments":true,"path":"article/ionic3-angular4.x-cordova.html","link":"","permalink":"https://liuxianyu.cn/article/ionic3-angular4.x-cordova.html","excerpt":"在实习过程中因项目组需要，学习了一段时间的混合开发，工银系统新版APP的部分开发工作。主要是利用 Ionic 3 + AngularJS 4.x + Cordova 混合开发这个项目，做的是一些基本工作，记录一下。内容很多，学会的也很多，记录下来的是一些此时觉得比较常用的知识点。","text":"在实习过程中因项目组需要，学习了一段时间的混合开发，工银系统新版APP的部分开发工作。主要是利用 Ionic 3 + AngularJS 4.x + Cordova 混合开发这个项目，做的是一些基本工作，记录一下。内容很多，学会的也很多，记录下来的是一些此时觉得比较常用的知识点。 ¶一、准备工作 1、安装 python； 2、安装编辑器： webstorm（个人推荐）或 VS Code，2 和 3中的具体步骤可自行百度； 3、安装最新版本的 node js，运行命令 node -v 和 npm -v， 来验证一下你正在运行的是 node 6.9.x 和 npm 3.x.x 以上的版本。 ¶二、了解 AngularJS ¶全局安装 Angular CLI 脚手架工具(只需要安装一次) 安装 cnpm，npm 可能安装失败，建议先用 npm 安装一下，cnpm 用淘宝镜像安装 （https://npm.taobao.org/ )，指令： 1npm i -g cnpm --registry=https://registry.npm.taobao.org 使用 cnpm 安装脚手架： 1npm i -g @angular/cli 然后就可以新建项目了，进入刚才创建的项目里面启动服务: 1234ng new my-appcd my-appnpm ing serve --open ¶三、ionic 3 全局安装 ionic 3 和 cordova，指令： 1npm i -g cordova ionic 新建带 tabs 的项目并启动服务（或 menu）： 1234ionic start ionicDemo02 tabscd ionicDemo02npm iionic serve ionic 3 新建组件的命令：ionic g page 组件名，如： 1ionic g page exam-online ¶四、打包项目 这里只介绍我比较熟悉的 Android 打包，需要安装 Android SDK（可参考 轻松搞定 Android 开发环境的搭建 中安装 Android SDK 的部分），我安装的是 Android 8.0.0（API 26），与下文中的 gradle 4.1 版本相对应。点此下载 gradle-4.1-all.zip 密码：yt35。将这个压缩包解压，添加 bin 文件夹路径至环境变量 Path。 添加打包平台（Android）的命令： 1ionic cordova platform add android 修改 E:\\AppDemo\\Ionic2\\cplease\\platforms\\android\\cordova\\lib\\builders\\GradleBuilder.js 中的第250行，将行末改为指向本地的 gradle-4.1-all.zip 文件，改为&quot;…/gradle-4.1-all.zip&quot;。 打包成 apk 文件（生成一个 debug 包，无签名）的命令： 1ionic cordova build android --prod 打包成 apk 文件的命令（比上一个打包出来的占用空间大）： 1ionic cordova build android 打包后的文件位置（自行对应这个文件夹下的 apk 文件）： 1E:\\AppDemo\\Ionic2\\cplease\\platforms\\android\\app\\build\\outputs\\apk\\debug 以下为部分真机测试时的截图","categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Angular","slug":"前端/Angular","permalink":"https://liuxianyu.cn/categories/前端/Angular/"}],"tags":[{"name":"Angular","slug":"Angular","permalink":"https://liuxianyu.cn/tags/Angular/"}],"author":"liuxy0551"},{"title":"mysql 清空具有外键约束的表中 id 自增长报 1701 解决方法","slug":"2018-01-29-MySQL-1701","date":"2018-01-29T14:39:16.000Z","updated":"2018-01-29T14:39:16.000Z","comments":true,"path":"article/mysql-1701.html","link":"","permalink":"https://liuxianyu.cn/article/mysql-1701.html","excerpt":"开发中遇到测试数据清空时，发现 tbl_dept 表自增长的 id 是 tbl_emp 表的外键，使用 TRUNCATE TABLE tbl_dept;语句会报错。","text":"开发中遇到测试数据清空时，发现 tbl_dept 表自增长的 id 是 tbl_emp 表的外键，使用 TRUNCATE TABLE tbl_dept;语句会报错。 ¶1、错误信息如下： 12345671 queries executed, 0 success, 1 errors, 0 warnings查询：truncate table tbl_dept错误代码： 1701Cannot truncate a table referenced in a foreign key constraint (`ssm_crud`.`tbl_emp`, CONSTRAINT `fk_emp_dept` FOREIGN KEY (`d_id`) REFERENCES `ssm_crud`.`tbl_dept` (`dept_id`))执行耗时 : 0 sec传送时间 : 0 sec总耗时 : 0.001 sec ¶2、解决方法 SQL 窗口执行以下语句即可： 123SET FOREIGN_KEY_CHECKS=0;TRUNCATE TABLE `tbl_dept`;SET FOREIGN_KEY_CHECKS=1; 转载自 mysql 清空具有外键约束的表时报 ERROR 1701(42000)的解决","categories":[{"name":"数据库","slug":"数据库","permalink":"https://liuxianyu.cn/categories/数据库/"},{"name":"mysql","slug":"数据库/mysql","permalink":"https://liuxianyu.cn/categories/数据库/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://liuxianyu.cn/tags/mysql/"}],"author":"liuxy0551"},{"title":"如何快速开启和关闭 Oracle 所需的服务","slug":"2017-11-23-oracle-service","date":"2017-11-23T21:32:46.000Z","updated":"2017-11-23T21:32:46.000Z","comments":true,"path":"article/oracle-service.html","link":"","permalink":"https://liuxianyu.cn/article/oracle-service.html","excerpt":"个人在学习 Oracle 时，安装好后会在系统中添加七个 Oracle 开头的服务，后文介绍。但这七个服务在启动后都很占资源，所以在我们不使用 Oracle 的时候，就可以将这些服务关闭。这就是这篇经验解决的问题——快速开启或关闭 Oracle 所需的服务。","text":"个人在学习 Oracle 时，安装好后会在系统中添加七个 Oracle 开头的服务，后文介绍。但这七个服务在启动后都很占资源，所以在我们不使用 Oracle 的时候，就可以将这些服务关闭。这就是这篇经验解决的问题——快速开启或关闭 Oracle 所需的服务。 ¶工具 / 原料 Windows 系统、Oracle 11g、PLSQL Developer 12（等第三方数据库管理工具） ¶方法 / 步骤 ¶1、更改服务启动类型 安装好 Oracle 11g 和第三方工具 PLSQL Developer 12 后，右击我的电脑 -&gt; 服务或者控制面板 -&gt; 管理工具 -&gt; 服务，找到 Oracle 开头的七个或六个服务，将这些服务的启动类型全部改成手动。 ¶2、理解服务含义 成功安装 Oracle 11g 后，共有七个服务，这七个服务的含义可以参照 这篇百度知道理解，内容如下： ¶3、新建.bat文件 所以当我们使用 PLSQL Developer 12 等第三方可视化界面时，只需要启动 OracleServiceORCL 和 OracleOraDb11g_home1TNSListener 两个服务即可。新建一个文本文件，打开后复制粘贴下述文本，保存后将文件后缀名改为“bat”。 12345678910111213141516171819202122232425262728293031323334353637383940@echo offfor /f &quot;skip=3 tokens=4&quot; %%i in (&apos;sc query &quot;OracleServiceORCL&quot;&apos;) do set &quot;zt=%%i&quot; &amp;goto :next:nextif /i &quot;%zt%&quot;==&quot;RUNNING&quot; ( echo 1.服务OracleServiceORCL正在运行) else ( echo 1.服务OracleServiceORCL已停止)for /f &quot;skip=3 tokens=4&quot; %%i in (&apos;sc query &quot;OracleOraDb11g_home1TNSListener&quot;&apos;) do set &quot;zt=%%i&quot; &amp;goto :next:nextif /i &quot;%zt%&quot;==&quot;RUNNING&quot; ( echo 2.服务OracleOraDb11g_home1TNSListener正在运行) else ( echo 2.服务OracleOraDb11g_home1TNSListener已停止)choice /c:12 /m &quot;启动/停止Oracle服务[1启动,2停止]&quot;if errorlevel 2 goto twoif errorlevel 1 goto one:oneecho 正在启用服务...net start &quot;OracleServiceORCL&quot;net start &quot;OracleOraDb11g_home1TNSListener&quot;echo 服务OracleServiceORCL、OracleOraDb11g_home1TNSListener 启动成功！choice /c:12 /m &quot; 是否启动PLSQL Developer 12 ？[1是,2否]&quot;if errorlevel 2 exitif errorlevel 1 start &quot;&quot; &quot;E:\\PLSQL Developer 12\\plsqldev.exe&quot;&gt;nul:twoecho 正在禁用服务...net stop &quot;OracleServiceORCL&quot;net stop &quot;OracleOraDb11g_home1TNSListener&quot;echo 服务OracleServiceORCL、OracleOraDb11g_home1TNSListener 禁用成功！echo 可按任意键退出...timeout 3exit 注意 上图中矩形方框中是 PLSQL 的安装位置，椭圆形标注的是服务名，与系统中的服务名要一致。 ¶4、美观步骤 将上述文本文件改名为“PLSQL Developer 12.bat”，将文件剪切到 PLSQL Developer 12 的安装目录（随意哪个目录），然后“发送到 -&gt; 桌面快捷方式”右击桌面上该快捷方式 -&gt; 属性 -&gt; 更改图标 -&gt; 浏览，进入 PLSQL 安装目录，选择 plsqldev.exe，一路确认，将快捷方式改名为“PLSQL Developer 12”。 ¶5、启动与停止服务 打开快捷方式，根据提示选择，关闭服务后，两个服务已经停止。同理，启动服务按提示进行即可。使用后可前往“服务”查看服务是否已启动或停止。 上文提到的部分文件： 链接：http://pan.baidu.com/s/1hr5J3JA 密码：x705","categories":[{"name":"数据库","slug":"数据库","permalink":"https://liuxianyu.cn/categories/数据库/"},{"name":"Oracle","slug":"数据库/Oracle","permalink":"https://liuxianyu.cn/categories/数据库/Oracle/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://liuxianyu.cn/tags/Oracle/"}],"author":"liuxy0551"},{"title":"勒索（比特币）病毒的预防","slug":"2017-05-13-lesuobingdu","date":"2017-05-13T12:10:54.000Z","updated":"2017-05-13T12:10:54.000Z","comments":true,"path":"article/lesuobingdu.html","link":"","permalink":"https://liuxianyu.cn/article/lesuobingdu.html","excerpt":"最近看到很多关于 ONION 和 WNCRY 勒索病毒攻击的信息，其中绝大多数是使用校园网的学生，但不仅仅是学生，也不仅仅在最近发生。中毒后被要求在规定时间内支付比特币等赎金才能解密恢复文件，对个人资料和经济造成严重损失。","text":"最近看到很多关于 ONION 和 WNCRY 勒索病毒攻击的信息，其中绝大多数是使用校园网的学生，但不仅仅是学生，也不仅仅在最近发生。中毒后被要求在规定时间内支付比特币等赎金才能解密恢复文件，对个人资料和经济造成严重损失。 ¶1、工具 360 安全卫士、360NSA 武器库免疫工具 ¶2、勒索病毒全球爆发 根据网络安全机构通报，这是不法分子利用 NSA 黑客武器库泄漏的“永恒之蓝”发起的病毒攻击事件。“永恒之蓝”会扫描开放 445 文件共享端口的 Windows 机器，无需用户任何操作，只要开机上网，不法分子就能在电脑和服务器中植入勒索软件、远程控制木马、虚拟货币挖矿机等恶意程序。 由于以前国内多次爆发利用 445 端口传播的蠕虫，运营商对个人用户已封掉 445 端口，但是教育网并没有此限制，仍然存在大量暴露 445 端口的机器。据有关机构统计，目前国内平均每天有 5000 多台机器遭到 NSA“永恒之蓝”黑客武器的远程攻击，教育网是受攻击的重灾区。 目前微软已发布补丁 MS17-010 修复了“永恒之蓝”攻击的系统漏洞，请尽快为电脑安装此补丁；对于 XP、2003 等微软已不再提供安全更新的机器，推荐使用“NSA武器库免疫工具”检测系统是否存在漏洞，并关闭受到漏洞影响的端口，可以避免遭到勒索软件等病毒的侵害。 ——黑客凯文的微博 ¶3、未中毒的电脑 1、未中毒的电脑考虑多次、多种途径备份重要资料，做好云盘和移动硬盘等的备份，尤其是校园网内的毕业季学生； 2、点击 微软补丁MS17-010O 给电脑安装最新补丁，XP 及以下版本忽略； 3、点击 360NSA武器库免疫工具 下载“360NSA 武器库免疫工具”，不保证完全好用。使用方法：下载完成拔除网线后开机，开机后不要联网，确认 360 安全卫士运行正常，打开 360 安全卫士的“反勒索服务”，再使用“360NSA 武器库免疫工具”检测电脑； 4、关闭 445、135 等危险端口，具体操作参考 对应的百度经验； 5、不要访问可疑网站、不打开可疑邮件和文件。 ¶4、已中毒的电脑 1、不要给赎金，赎金很贵并且交了之后未必给你恢复； 2、报警，在上一步骤中的“360 反勒索”中点击“申请服务”； 3、胆大心大且无所谓资料想练手的网友可以参考这篇文章：360安全卫士发布“纵情文件修复”病毒解密工具 4、实在看不懂的可以把网掐了。 1、电脑中毒后尽量不要自行尝试解密，高强度不对称加密方式不是谁都能反向破解的； 2、日常生活中注意防毒，预防为主。","categories":[{"name":"大学","slug":"大学","permalink":"https://liuxianyu.cn/categories/大学/"}],"tags":[{"name":"勒索病毒","slug":"勒索病毒","permalink":"https://liuxianyu.cn/tags/勒索病毒/"}],"author":"liuxy0551"},{"title":"Arduino + ESP8266 + DHT11 传输数据到网络调试助手","slug":"2017-05-10-arduino-ESP8266-DHT11","date":"2017-05-09T22:20:40.000Z","updated":"2017-05-09T22:20:40.000Z","comments":true,"path":"article/arduino-ESP8266-DHT11.html","link":"","permalink":"https://liuxianyu.cn/article/arduino-ESP8266-DHT11.html","excerpt":"在课程设计的学习过程中，有一个部分是使用 Arduino 平台，利用 ESP8266 传输 DHT11 的温湿度数据到网络调试助手，实验成功后便拿来分享了。","text":"在课程设计的学习过程中，有一个部分是使用 Arduino 平台，利用 ESP8266 传输 DHT11 的温湿度数据到网络调试助手，实验成功后便拿来分享了。 ¶工具 / 原料 硬件：Arduino Uno, ESP8266, DHT11 软件：Arduino IDE1.7.8, USR-TCP232-Test-V1.3 代码文件：ESP8266_DHT11.ino 此随笔涉及的文件：链接: https://pan.baidu.com/s/1dMRsvG 密码: f4q6 ¶方法 / 步骤 ¶一、电路连线 1、DHT11 和 Arduino：vcc 连 3.3V，DATA 连 A0，GND 连 GND； 2、ESP8266 和 Arduino：TX 连 0, RX 连 1, EN（CH_PD）和 3V3 连 3.3v, GND 连 GND。 ¶二、编译上传代码 使用 Arduino IDE1.7.8 打开 ESP8266_DHT11.ino 文件，编译并上传到 Arduino 板子上。 注意：编译成功后拔掉 ESP8266 的 TX 和 RX 线（或 Arduino 上的 0 和 1 口），再上传，否则会报错：上传时占用输入输出口！上传成功后记得再连好。 ¶三、数据传输 电脑连上 WiFi，再打开 USR-TCP232-Test-V1.3 串口转网络调试助手，本篇经验只使用右侧的网络调试助手。 1、网络设置区域的协议类型选择“TCP Server”；本地 ip 地址栏通常会在连接上 WiFi 后打开软件时自动更新； 本地端口号为“8080”，可改。 2、设置好后点击“开始监听”按钮，重启 Arduino 板子，等待十秒以内网络调试助手连接对象区域会出现 ESP8266 的 IP，此时代表 已经连接上，等待网络数据接收区域显示内容后，在 DHT11 温湿度模块上哈几口气验证数据，数据正常变化实验即完成。 如果网盘链接挂了可以在百度文库下载或复制 Arduino + ESP8266 + DHT11 传输数据到网络调试助手 文本文件，其余软件可自行百度下载。 1、电脑和 ESP8266 连接同一 WiFi，即局域网内完成实验； 2、编译成功后拔掉 ESP8266 的 TX 和 RX 线（或 Arduino 上的 0 和 1 口），再上传，否则会报错：上传时占用输入输出口！上传成功后记得再连好。","categories":[{"name":"大学","slug":"大学","permalink":"https://liuxianyu.cn/categories/大学/"},{"name":"Arduino","slug":"大学/Arduino","permalink":"https://liuxianyu.cn/categories/大学/Arduino/"},{"name":"DHT11","slug":"大学/Arduino/DHT11","permalink":"https://liuxianyu.cn/categories/大学/Arduino/DHT11/"}],"tags":[{"name":"Arduino","slug":"Arduino","permalink":"https://liuxianyu.cn/tags/Arduino/"}],"author":"liuxy0551"},{"title":"ESP8266 通过 Arduino 自动发送数据到网络调试助手","slug":"2017-05-09-arduino-ESP8266","date":"2017-05-09T20:31:29.000Z","updated":"2017-05-09T20:31:29.000Z","comments":true,"path":"article/arduino-ESP8266.html","link":"","permalink":"https://liuxianyu.cn/article/arduino-ESP8266.html","excerpt":"在课程设计的学习过程中，有一个部分是使用 ESP8266-WiFi 模块通过 Arduino 平台自动发送数据到网络调试助手，现在拿来分享。","text":"在课程设计的学习过程中，有一个部分是使用 ESP8266-WiFi 模块通过 Arduino 平台自动发送数据到网络调试助手，现在拿来分享。 ¶工具 / 原料 硬件：Arduino Uno，ESP8266 软件：Arduino IDE1.7.8，USR-TCP232-Test-V1.3 代码文件：ESP8266auto.ino 此随笔涉及的文件：链接: https://pan.baidu.com/s/1dMRsvG 密码: f4q6 ¶方法 / 步骤 ¶一、电路连线 ESP8266 和 Arduino：TX 连 8，RX 连 9，EN（CH_PD）和 3V3 连 3.3V，GND 连 GND。 ¶二、编译上传代码 使用 Arduino IDE1.7.8 打开 ESP8266auto.ino 文件，编译并上传到 Arduino 板子上。 ¶三、数据传输 电脑连上 WiFi，再打开 USR-TCP232-Test-V1.3 串口转网络调试助手，本篇经验只使用右侧的网络调试助手。 1、网络设置区域的协议类型选择“TCP Server”；本地 ip 地址栏通常会在连接上 WiFi 后打开软件时自动更新；本地端口号为“8080”，可改。 2、设置好后点击“开始监听”按钮，重启 Arduino 板子，等待一分钟左右网络调试助手连接对象区域会出现 ESP8266 的 IP，此时代表已经连接上，等待网络数据接收区域显示内容后，数据正常变化实验即完成。 如果网盘链接挂了可以在百度文库下载或复制 ESP8266通过Arduino自动发送数据代码 文本文件，其余软件可自行百度下载。 1、连接到网络调试助手的时间较长，耐心等待； 2、电脑和ESP8266连接同一WiFi，即局域网内完成实验; 3、可以用手机开热点，这样可以看到ESP8266是否连接上WiFi。","categories":[{"name":"大学","slug":"大学","permalink":"https://liuxianyu.cn/categories/大学/"},{"name":"Arduino","slug":"大学/Arduino","permalink":"https://liuxianyu.cn/categories/大学/Arduino/"},{"name":"ESP8266","slug":"大学/Arduino/ESP8266","permalink":"https://liuxianyu.cn/categories/大学/Arduino/ESP8266/"}],"tags":[{"name":"Arduino","slug":"Arduino","permalink":"https://liuxianyu.cn/tags/Arduino/"}],"author":"liuxy0551"},{"title":"轻松搞定 Android 开发环境的搭建","slug":"2017-03-30-AndroidIDE","date":"2017-03-30T17:54:30.000Z","updated":"2018-04-20T20:21:09.000Z","comments":true,"path":"article/Android-IDE.html","link":"","permalink":"https://liuxianyu.cn/article/Android-IDE.html","excerpt":"在Windows下安装Android的开发环境虽说不简单但也算不上复杂，本篇经验写给同为小白的朋友们，随笔步骤经作者测试正确可行，希望对准备进入Android开发的你有所帮助。","text":"在Windows下安装Android的开发环境虽说不简单但也算不上复杂，本篇经验写给同为小白的朋友们，随笔步骤经作者测试正确可行，希望对准备进入Android开发的你有所帮助。 ¶一、JDK 的安装与环境变量的配置 选择 Oracle公司官网 下载对应版本的 JDK 或者直接选择百度“JDK”下载。安装时 jre 尽量和 jdk 的文件夹分开，安装完成后出现两个文件夹 jdk 和 jre，接下来我们需要设置三个系统变量，右击 我的电脑 -&gt; 属性 -&gt; 高级系统设置 -&gt; 系统设置 -&gt; 环境变量 -&gt; 系统变量，三个系统变量分别是： 变量名 变量值 备注 JAVA_HOME E:\\java\\jdk1.8.0_121 变量值为JDK在你电脑上的安装路径 CLASSPATH .;%JAVA_HOME%\\lib;%JAVA_HOME%\\lib\\tools.jar 注意变量值字符串前面有一个&quot;.&quot;表示当前目录 Path ;%JAVA_HOME%\\bin;%JAVA_HOME%\\jre\\bin; Path属性已存在，可直接编辑，在原来变量后追加即可 变量值中如果已经有内容，用 ; 隔开； 测试是否安装配置成功：Win + R，输入 cmd，按 Enter 继续，输入 javac，按 Enter，出现相关内容即证明安装配置成功。 ¶二、下载安装 Eclipse Eclipse 是一种 Java 应用程序及 Android 开发的 IDE（集成开发环境），不需要安装，下载后解压，剪切 eclipse 文件夹到你想安装的地方，打开时设置你的工作目录即日后各种项目的存放位置，此时已完成了普通 Java 应用程序的开发环境准备。本篇经验下载的是 Eclipse IDE for Java EE Developers 版本，点击 DOWNLOAD 下载，然后等待浏览器下载。 ¶三、下载安装 Android SDK ¶1、下载 我们要使用 Eclipse 来开发 Android 应用程序，那么需要下载 Android SDK 和在 Eclipse 中安装 ADT 插件，这个插件能让 Eclipse 和 Android SDK 关联起来。 打开 http://developer.android.com/sdk/index.html（没有梯子打不开）可下载 Android SDK。或者从下面两个网站下载 http://www.androiddevtools.cn/ http://tools.android-studio.org/index.php/sdk/ ¶2、安装 下载完成后双击“installer_r24.4.1-windows.exe”，选择解压文件夹，完成后双击“SDK Manager”，加载可安装的安卓版本。下面是我的一些安装选项，仅供参考： 1、建议使用旧手机测试程序，旧手机是什么版本就勾选什么版本，无需多装其他版本，不宜贪多; 2、选好后点击安装，同意，开始安装，这一步非常耗时也经常出现安装失败的情况，安装失败的安装包重新勾选再安装。 ¶3、安装 ADT（离线安装） 官网各版本下载链接：（本篇经验使用的是 ADT-23.0.6） https://dl.google.com/android/ADT-23.0.6.zip https://dl.google.com/android/ADT-23.0.4.zip https://dl.google.com/android/ADT-23.0.3.zip https://dl.google.com/android/ADT-23.0.2.zip https://dl.google.com/android/ADT-23.0.0.zip 启动 Eclipse，Help -&gt; Install New Software，点击 Add… 按钮，名称可以用 ADT，然后点击 Archive 选择 ADT 的压缩包，点击 OK 选择要安装的工具，下一步。安装完成重启 Eclipse。可不进行：在 Eclipse 中点击 Window -&gt; Preferences…，选择 Android：配置好你的 SDK 路径，则会出现刚才在 SDK 中安装的各平台包。 到这里，Windows 系统上的 Android 开发环境就搭建完成了。在 Eclipse 中打开 File -&gt; New -&gt; Project 新建一个项目的时候，就可以看到建立 Android 项目的选项。测试运行程序可以连接 USB 线使用真机（需打开开发者模式中的 USB 调试功能），也可以使用此时已安装好的 Android SDK and AVD Manager 来创建虚拟设备。 下面的步骤可能已经不需要了：因为国内有墙，有时候会出现加载安卓版本失败的情况。从万能的百度搜索上，找到了解决这个问题的方法： ¶(1).更改 host 文件 在 C:\\Windows\\System32\\drivers\\etc 目录下，用记事本打开“hosts”文件，将下面两行信息加到 hosts 文件的末尾，保存退出。 12203.208.46.146 dl.google.com 203.208.46.146 dl-ssl.google.com ¶(2).将 SDK Manage 上的 https 请求更改成 http 请求 打开 SDK Manager，Tools -&gt; Options，勾选 Force https://…sources to be fetched using http://… ，如图。退出重新打开 SDK Manager，一般情况下就可以正常加载了。 安装多个安卓版本会十分耗时，耐心等待； 建议安装测试设备对应的安卓版本或其他目标版本，多个版本很占用空间，不宜贪多。","categories":[{"name":"大学","slug":"大学","permalink":"https://liuxianyu.cn/categories/大学/"},{"name":"Android","slug":"大学/Android","permalink":"https://liuxianyu.cn/categories/大学/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://liuxianyu.cn/tags/Android/"}],"author":"liuxy0551"},{"title":"Jekyll 搭建个人博客【转载】","slug":"2016-10-14-Jekyll 搭建个人博客","date":"2016-10-14T17:54:30.000Z","updated":"2016-10-14T17:54:30.000Z","comments":true,"path":"article/jekyll-tutorials.html","link":"","permalink":"https://liuxianyu.cn/article/jekyll-tutorials.html","excerpt":"","text":"¶原作者leopard Jekyll 是一个简单的博客形态的静态站点生产机器。它有一个模版目录，其中包含原始文本格式的文档，通过 Markdown （或者 Textile） 以及 Liquid 转化成一个完整的可发布的静态网站，你可以发布在任何你喜爱的服务器上。Jekyll 也可以运行在 GitHub Page 上，也就是说，你可以使用 GitHub 的服务来搭建你的项目页面、博客或者网站，而且是完全免费的。 使用 Jekyll 搭建博客之前要确认下本机环境，Git 环境（用于部署到远端）、Ruby 环境（Jekyll 是基于 Ruby 开发的）、包管理器 RubyGems如果你是 Mac 用户，你就需要安装 Xcode 和 Command-Line Tools了。下载方式 Preferences → Downloads → Components。 Jekyll 是一个免费的简单静态网页生成工具，可以配合第三方服务例如： Disqus（评论）、多说(评论) 以及分享 等等扩展功能，Jekyll 可以直接部署在 Github（国外） 或 Coding（国内） 上，可以绑定自己的域名。Jekyll中文文档、Jekyll英文文档、Jekyll主题列表。 ¶Jekyll 环境配置 1234gem install jekylljekyll new myBlogcd myBlogjekyll serve 在浏览器里输入： http://localhost:4000，就可以看到你的博客效果了。 so easy ! ¶目录结构 Jekyll 的核心其实是一个文本转换引擎。它的概念其实就是： 你用你最喜欢的标记语言来写文章，可以是 Markdown，也可以是 Textile,或者就是简单的 HTML, 然后 Jekyll 就会帮你套入一个或一系列的布局中。在整个过程中你可以设置URL路径, 你的文本在布局中的显示样式等等。这些都可以通过纯文本编辑来实现，最终生成的静态页面就是你的成品了。 一个基本的 Jekyll 网站的目录结构一般是像这样的： 1234567891011121314151617181920.├── _config.yml├── _includes| ├── footer.html| └── header.html├── _layouts| ├── default.html| ├── post.html| └── page.html├── _posts| └── 2016-10-08-welcome-to-jekyll.markdown├── _sass| ├── _base.scss| ├── _layout.scss| └── _syntax-highlighting.scss├── about.md├── css| └── main.scss├── feed.xml└── index.html 这些目录结构以及具体的作用可以参考 官网文档。进入 _config.yml 里面，修改成你想看到的信息，重新 jekyll server ，刷新浏览器就可以看到你刚刚修改的信息了。到此，博客初步搭建算是完成了， ¶博客部署到远端 我这里讲的是部署到 Github Page 创建一个 github 账号，然后创建一个跟你账户名一样的仓库，如我的 github 账户名叫 leopardpan，我的 github 仓库名就叫 leopardpan.github.io，创建好了之后，把刚才建立的 myBlog 项目 push 到 username.github.io仓库里去（username指的是你的github用户名），检查你远端仓库已经跟你本地 myBlog 同步了，然后你在浏览器里输入 username.github.io ，就可以访问你的博客了。 ¶编写文章 所有的文章都是 _posts 目录下面，文章格式为 mardown 格式，文章文件名可以是 .mardown 或者 .md。编写一篇新文章很简单，你可以直接从 _posts/ 目录下复制一份出来 2016-10-16-welcome-to-jekyll副本.markdown ，修改名字为 2016-10-16-article1.markdown ，注意：文章名的格式前面必须为 2016-10-16- ，日期可以修改，但必须为 年-月-日- 格式，后面的 article1 是整个文章的连接 URL，如果文章名为中文，那么文章的连接URL就会变成这样的：http://baixin.io/2015/08/搭�/ ， 所以建议文章名最好是英文的或者阿拉伯数字。 双击 2016-10-16-article1.markdown 打开 12345678---layout: posttitle: &quot;Welcome to Jekyll!&quot;date: 2016-10-16 11:29:08 +0800categories: jekyll update---正文... title: 显示的文章名， 如：title: 我的第一篇文章 date: 显示的文章发布日期，如：date: 2016-10-16 categories: tag标签的分类，如：categories: 随笔 注意：文章头部格式必须为上面的，… 就是文章的正文内容。 我写文章使用的是 Sublime Text2 编辑器，如果你对 markdown 语法不熟悉的话，可以看看作业部落的教程 ¶使用我的博客模板 虽然博客部署完成了，你会发现博客太简单不是你想要的，如果你喜欢我的模板的话，可以使用我的模板。首先你要获取的我博客，Github项目地址，你可以直接点击下载博客，进去leopardpan.github.io/ 目录下， 使用命令部署本地服务 1$ jekyll server ¶如果你本机没配置过任何jekyll的环境，可能会报错 12345678/Users/xxxxxxxx/.rvm/rubies/ruby-2.2.2/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require&apos;: cannot load such file -- bundler (LoadError) from /Users/xxxxxxxx/.rvm/rubies/ruby-2.2.2/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require&apos; from /Users/xxxxxxxx/.rvm/gems/ruby-2.2.2/gems/jekyll-3.3.0/lib/jekyll/plugin_manager.rb:34:in `require_from_bundler&apos; from /Users/xxxxxxxx/.rvm/gems/ruby-2.2.2/gems/jekyll-3.3.0/exe/jekyll:9:in `&lt;top (required)&gt;&apos; from /Users/xxxxxxxx/.rvm/gems/ruby-2.2.2/bin/jekyll:23:in `load&apos; from /Users/xxxxxxxx/.rvm/gems/ruby-2.2.2/bin/jekyll:23:in `&lt;main&gt;&apos; from /Users/xxxxxxxx/.rvm/gems/ruby-2.2.2/bin/ruby_executable_hooks:15:in `eval&apos; from /Users/xxxxxxxx/.rvm/gems/ruby-2.2.2/bin/ruby_executable_hooks:15:in `&lt;main&gt;&apos; 原因： 没有安装 bundler ，执行安装 bundler 命令 1$ gem install bundler 提示： 123456Fetching: bundler-1.13.5.gem (100%)Successfully installed bundler-1.13.5Parsing documentation for bundler-1.13.5Installing ri documentation for bundler-1.13.5Done installing documentation for bundler after 5 seconds1 gem installed 再次执行 $ jekyll server ，提示 12Could not find proper version of jekyll (3.1.1) in any of the sourcesRun `bundle install` to install missing gems. 跟着提示运行命令： 1$ bundle install 这个时候你可能会发现 bundle install 运行卡主不动了。如果很长时间都没任何提示的话，你可以尝试修改 gem 的 source： 123456$ gem sources --remove https://rubygems.org/$ gem sources -a http://ruby.taobao.org/$ gem sources -l*** CURRENT SOURCES ***http://ruby.taobao.org 再次执行命令 $ bundle install，发现开始有动静了 12345678Fetching gem metadata from https://rubygems.org/...........Fetching version metadata from https://rubygems.org/..Fetching dependency metadata from https://rubygems.org/.。。。Installing jekyll-watch 1.3.1Installing jekyll 3.1.1Bundle complete! 3 Gemfile dependencies, 17 gems now installed.Use `bundle show [gemname]` to see where a bundled gem is installed. bundler安装完成，后再次启动本地服务 1$ jekyll server 继续报错： 123Configuration file: /Users/tendcloud-Caroline/Desktop/leopardpan.github.io/_config.yml Dependency Error: Yikes! It looks like you don&apos;t have jekyll-sitemap or one of its dependencies installed. In order to use Jekyll as currently configured, you&apos;ll need to install this gem. The full error message from Ruby is: &apos;cannot load such file -- jekyll-sitemap&apos; If you run into trouble, you can find helpful resources at http://jekyllrb.com/help/!jekyll 3.1.1 | Error: jekyll-sitemap 表示 当前的 jekyll 版本是 3.1.1 ，无法使用 jekyll-sitemap，解决方法有两个： 1、打开当前目录下的 _config.yml 文件，把 gems: [jekyll-paginate,jekyll-sitemap] 换成 gems: [jekyll-paginate] ，也就是去掉jekyll-sitemap。 2、升级 jekyll 版本，我当前的是 jekyll 3.1.2 。 修改完成后保存配置，再次执行： 1$ jekyll server 提示： 12345678910Configuration file: /Users/baixinpan/Desktop/OpenSource/Mine/Page-Blog/leopardpan.github.io-github/_config.yml Source: /Users/baixinpan/Desktop/OpenSource/Mine/Page-Blog/leopardpan.github.io-github Destination: /Users/baixinpan/Desktop/OpenSource/Mine/Page-Blog/leopardpan.github.io-github/_site Incremental build: disabled. Enable with --incremental Generating... done in 0.901 seconds. Auto-regeneration: enabled for &apos;/Users/baixinpan/Desktop/OpenSource/Mine/Page-Blog/leopardpan.github.io-github&apos;Configuration file: /Users/baixinpan/Desktop/OpenSource/Mine/Page-Blog/leopardpan.github.io-github/_config.yml Server address: http://127.0.0.1:4000/ Server running... press ctrl-c to stop. 表示本地服务部署成功。在浏览器输入 127.0.0.1:4000 ， 就可以看到baixin.io博客效果了。 ¶修改成你自己的博客 如果你想使用我的模板请把 _posts/ 目录下的文章都去掉。 修改 _config.yml 文件里面的内容为你自己的。 然后使用 git push 到你自己的仓库里面去，检查你远端仓库，在浏览器输入 username.github.io 就会发现，你有一个漂亮的主题模板了。 ¶【 如果想修改博客样式却不知道怎么修改，可以直接在评论里给我提问 】 ¶为什么要是用 Jekyll 使用了 Jekyll 你会发现如果你想使用多台电脑发博客都很方便，只要把远端 github 仓库里的博客 clone 下来，写文章后再提交就可以了，Hexo 由于远端提交的是静态网页，所有无法直接写 Markdown 的文章。后面会继续介绍，在我的博客基础上，如何修改成你自己喜欢的 Style，欢迎继续关注我博客的更新。 ¶Q&amp;A 问题：最近很多朋友使用我的模板报警告：The CNAME baixin.io is already taken 解决：把CNAME里面的baixin.io修改成你自己的域名，如果你暂时没有域名，CNAME里面就什么都不用谢。（之前没人反馈过这个问题，应该是github page最近才最的限制。）","categories":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/categories/Blog/"},{"name":"Jekyll","slug":"Blog/Jekyll","permalink":"https://liuxianyu.cn/categories/Blog/Jekyll/"}],"tags":[{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/tags/Blog/"},{"name":"Jekyll","slug":"Jekyll","permalink":"https://liuxianyu.cn/tags/Jekyll/"}],"author":"liuxy0551"}],"categories":[{"name":"前端","slug":"前端","permalink":"https://liuxianyu.cn/categories/前端/"},{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/categories/Linux/"},{"name":"mysql","slug":"mysql","permalink":"https://liuxianyu.cn/categories/mysql/"},{"name":"npm","slug":"npm","permalink":"https://liuxianyu.cn/categories/npm/"},{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/categories/Blog/"},{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/categories/Cent-OS/"},{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/categories/Docker/"},{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/categories/git/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/categories/node/"},{"name":"Redis","slug":"node/Redis","permalink":"https://liuxianyu.cn/categories/node/Redis/"},{"name":"HTML","slug":"HTML","permalink":"https://liuxianyu.cn/categories/HTML/"},{"name":"微信小程序","slug":"前端/微信小程序","permalink":"https://liuxianyu.cn/categories/前端/微信小程序/"},{"name":"Sequelize","slug":"node/Sequelize","permalink":"https://liuxianyu.cn/categories/node/Sequelize/"},{"name":"Serverless","slug":"Serverless","permalink":"https://liuxianyu.cn/categories/Serverless/"},{"name":"Cent OS","slug":"Linux/Cent-OS","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/categories/JavaScript/"},{"name":"Vue","slug":"前端/Vue","permalink":"https://liuxianyu.cn/categories/前端/Vue/"},{"name":"Sass","slug":"前端/Vue/Sass","permalink":"https://liuxianyu.cn/categories/前端/Vue/Sass/"},{"name":"钉钉","slug":"前端/钉钉","permalink":"https://liuxianyu.cn/categories/前端/钉钉/"},{"name":"开发工具","slug":"开发工具","permalink":"https://liuxianyu.cn/categories/开发工具/"},{"name":"WebStorm","slug":"开发工具/WebStorm","permalink":"https://liuxianyu.cn/categories/开发工具/WebStorm/"},{"name":"数据库","slug":"数据库","permalink":"https://liuxianyu.cn/categories/数据库/"},{"name":"SQL 语句","slug":"数据库/SQL-语句","permalink":"https://liuxianyu.cn/categories/数据库/SQL-语句/"},{"name":"mysql","slug":"数据库/mysql","permalink":"https://liuxianyu.cn/categories/数据库/mysql/"},{"name":"pm2","slug":"node/pm2","permalink":"https://liuxianyu.cn/categories/node/pm2/"},{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/categories/nginx/"},{"name":"https-SSL","slug":"nginx/https-SSL","permalink":"https://liuxianyu.cn/categories/nginx/https-SSL/"},{"name":"微信公众号","slug":"前端/微信公众号","permalink":"https://liuxianyu.cn/categories/前端/微信公众号/"},{"name":"Koa2","slug":"node/Koa2","permalink":"https://liuxianyu.cn/categories/node/Koa2/"},{"name":"nuxt","slug":"前端/nuxt","permalink":"https://liuxianyu.cn/categories/前端/nuxt/"},{"name":"mysql","slug":"node/mysql","permalink":"https://liuxianyu.cn/categories/node/mysql/"},{"name":"爬虫","slug":"node/爬虫","permalink":"https://liuxianyu.cn/categories/node/爬虫/"},{"name":"脚手架","slug":"前端/Vue/脚手架","permalink":"https://liuxianyu.cn/categories/前端/Vue/脚手架/"},{"name":"Vuex","slug":"前端/Vue/Vuex","permalink":"https://liuxianyu.cn/categories/前端/Vue/Vuex/"},{"name":"webpack","slug":"前端/webpack","permalink":"https://liuxianyu.cn/categories/前端/webpack/"},{"name":"自动化部署","slug":"前端/Vue/自动化部署","permalink":"https://liuxianyu.cn/categories/前端/Vue/自动化部署/"},{"name":"CDN","slug":"前端/Vue/CDN","permalink":"https://liuxianyu.cn/categories/前端/Vue/CDN/"},{"name":"埋点","slug":"前端/Vue/埋点","permalink":"https://liuxianyu.cn/categories/前端/Vue/埋点/"},{"name":"PhotoShop","slug":"PhotoShop","permalink":"https://liuxianyu.cn/categories/PhotoShop/"},{"name":"Vue","slug":"nginx/Vue","permalink":"https://liuxianyu.cn/categories/nginx/Vue/"},{"name":"微信","slug":"前端/微信","permalink":"https://liuxianyu.cn/categories/前端/微信/"},{"name":"ngrok","slug":"ngrok","permalink":"https://liuxianyu.cn/categories/ngrok/"},{"name":"HTML","slug":"前端/HTML","permalink":"https://liuxianyu.cn/categories/前端/HTML/"},{"name":"Mac OS","slug":"Mac-OS","permalink":"https://liuxianyu.cn/categories/Mac-OS/"},{"name":"版本管理","slug":"node/版本管理","permalink":"https://liuxianyu.cn/categories/node/版本管理/"},{"name":"vscode","slug":"开发工具/vscode","permalink":"https://liuxianyu.cn/categories/开发工具/vscode/"},{"name":"eslint","slug":"前端/eslint","permalink":"https://liuxianyu.cn/categories/前端/eslint/"},{"name":"高德地图","slug":"高德地图","permalink":"https://liuxianyu.cn/categories/高德地图/"},{"name":"Hosts","slug":"Hosts","permalink":"https://liuxianyu.cn/categories/Hosts/"},{"name":"钉钉小程序","slug":"前端/钉钉小程序","permalink":"https://liuxianyu.cn/categories/前端/钉钉小程序/"},{"name":"CSS","slug":"前端/CSS","permalink":"https://liuxianyu.cn/categories/前端/CSS/"},{"name":"UOS","slug":"Linux/UOS","permalink":"https://liuxianyu.cn/categories/Linux/UOS/"},{"name":"路由懒加载","slug":"前端/Vue/路由懒加载","permalink":"https://liuxianyu.cn/categories/前端/Vue/路由懒加载/"},{"name":"Element UI","slug":"前端/Vue/Element-UI","permalink":"https://liuxianyu.cn/categories/前端/Vue/Element-UI/"},{"name":"Lodash","slug":"前端/Vue/Lodash","permalink":"https://liuxianyu.cn/categories/前端/Vue/Lodash/"},{"name":"Vant","slug":"前端/Vue/Vant","permalink":"https://liuxianyu.cn/categories/前端/Vue/Vant/"},{"name":"https-SSL","slug":"Linux/Cent-OS/https-SSL","permalink":"https://liuxianyu.cn/categories/Linux/Cent-OS/https-SSL/"},{"name":"加密解密","slug":"前端/加密解密","permalink":"https://liuxianyu.cn/categories/前端/加密解密/"},{"name":"AES","slug":"前端/加密解密/AES","permalink":"https://liuxianyu.cn/categories/前端/加密解密/AES/"},{"name":"RSA","slug":"前端/加密解密/RSA","permalink":"https://liuxianyu.cn/categories/前端/加密解密/RSA/"},{"name":"算法","slug":"JavaScript/算法","permalink":"https://liuxianyu.cn/categories/JavaScript/算法/"},{"name":"正则表达式","slug":"前端/正则表达式","permalink":"https://liuxianyu.cn/categories/前端/正则表达式/"},{"name":"随机头像","slug":"前端/Vue/随机头像","permalink":"https://liuxianyu.cn/categories/前端/Vue/随机头像/"},{"name":"父子组件","slug":"前端/Vue/父子组件","permalink":"https://liuxianyu.cn/categories/前端/Vue/父子组件/"},{"name":"Dart","slug":"前端/Dart","permalink":"https://liuxianyu.cn/categories/前端/Dart/"},{"name":"兼容性","slug":"前端/Vue/兼容性","permalink":"https://liuxianyu.cn/categories/前端/Vue/兼容性/"},{"name":"github","slug":"git/github","permalink":"https://liuxianyu.cn/categories/git/github/"},{"name":"跨域","slug":"前端/跨域","permalink":"https://liuxianyu.cn/categories/前端/跨域/"},{"name":"Base64","slug":"前端/加密解密/Base64","permalink":"https://liuxianyu.cn/categories/前端/加密解密/Base64/"},{"name":"ECharts","slug":"前端/Vue/ECharts","permalink":"https://liuxianyu.cn/categories/前端/Vue/ECharts/"},{"name":"UI 库","slug":"前端/Vue/UI-库","permalink":"https://liuxianyu.cn/categories/前端/Vue/UI-库/"},{"name":"Mint UI","slug":"前端/Vue/Mint-UI","permalink":"https://liuxianyu.cn/categories/前端/Vue/Mint-UI/"},{"name":"Jekyll","slug":"Blog/Jekyll","permalink":"https://liuxianyu.cn/categories/Blog/Jekyll/"},{"name":"VMware","slug":"VMware","permalink":"https://liuxianyu.cn/categories/VMware/"},{"name":"生命周期","slug":"前端/Vue/生命周期","permalink":"https://liuxianyu.cn/categories/前端/Vue/生命周期/"},{"name":"vConsole","slug":"前端/vConsole","permalink":"https://liuxianyu.cn/categories/前端/vConsole/"},{"name":"微信小游戏","slug":"前端/微信小游戏","permalink":"https://liuxianyu.cn/categories/前端/微信小游戏/"},{"name":"Mock","slug":"前端/Mock","permalink":"https://liuxianyu.cn/categories/前端/Mock/"},{"name":"Oracle","slug":"数据库/Oracle","permalink":"https://liuxianyu.cn/categories/数据库/Oracle/"},{"name":"Angular","slug":"前端/Angular","permalink":"https://liuxianyu.cn/categories/前端/Angular/"},{"name":"大学","slug":"大学","permalink":"https://liuxianyu.cn/categories/大学/"},{"name":"Arduino","slug":"大学/Arduino","permalink":"https://liuxianyu.cn/categories/大学/Arduino/"},{"name":"DHT11","slug":"大学/Arduino/DHT11","permalink":"https://liuxianyu.cn/categories/大学/Arduino/DHT11/"},{"name":"ESP8266","slug":"大学/Arduino/ESP8266","permalink":"https://liuxianyu.cn/categories/大学/Arduino/ESP8266/"},{"name":"Android","slug":"大学/Android","permalink":"https://liuxianyu.cn/categories/大学/Android/"}],"tags":[{"name":"AntD","slug":"AntD","permalink":"https://liuxianyu.cn/tags/AntD/"},{"name":"Linux","slug":"Linux","permalink":"https://liuxianyu.cn/tags/Linux/"},{"name":"mysql","slug":"mysql","permalink":"https://liuxianyu.cn/tags/mysql/"},{"name":"npm","slug":"npm","permalink":"https://liuxianyu.cn/tags/npm/"},{"name":"Blog","slug":"Blog","permalink":"https://liuxianyu.cn/tags/Blog/"},{"name":"Cent OS","slug":"Cent-OS","permalink":"https://liuxianyu.cn/tags/Cent-OS/"},{"name":"Docker","slug":"Docker","permalink":"https://liuxianyu.cn/tags/Docker/"},{"name":"git","slug":"git","permalink":"https://liuxianyu.cn/tags/git/"},{"name":"eslint","slug":"eslint","permalink":"https://liuxianyu.cn/tags/eslint/"},{"name":"Lerna","slug":"Lerna","permalink":"https://liuxianyu.cn/tags/Lerna/"},{"name":"node","slug":"node","permalink":"https://liuxianyu.cn/tags/node/"},{"name":"Redis","slug":"Redis","permalink":"https://liuxianyu.cn/tags/Redis/"},{"name":"HTML","slug":"HTML","permalink":"https://liuxianyu.cn/tags/HTML/"},{"name":"微信小程序","slug":"微信小程序","permalink":"https://liuxianyu.cn/tags/微信小程序/"},{"name":"Sequelize","slug":"Sequelize","permalink":"https://liuxianyu.cn/tags/Sequelize/"},{"name":"加密解密","slug":"加密解密","permalink":"https://liuxianyu.cn/tags/加密解密/"},{"name":"canvas","slug":"canvas","permalink":"https://liuxianyu.cn/tags/canvas/"},{"name":"函数计算","slug":"函数计算","permalink":"https://liuxianyu.cn/tags/函数计算/"},{"name":"Serverless","slug":"Serverless","permalink":"https://liuxianyu.cn/tags/Serverless/"},{"name":"Gotty","slug":"Gotty","permalink":"https://liuxianyu.cn/tags/Gotty/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://liuxianyu.cn/tags/JavaScript/"},{"name":"CSS","slug":"CSS","permalink":"https://liuxianyu.cn/tags/CSS/"},{"name":"Vue","slug":"Vue","permalink":"https://liuxianyu.cn/tags/Vue/"},{"name":"钉钉","slug":"钉钉","permalink":"https://liuxianyu.cn/tags/钉钉/"},{"name":"WebStorm","slug":"WebStorm","permalink":"https://liuxianyu.cn/tags/WebStorm/"},{"name":"记账啦","slug":"记账啦","permalink":"https://liuxianyu.cn/tags/记账啦/"},{"name":"SQL 语句","slug":"SQL-语句","permalink":"https://liuxianyu.cn/tags/SQL-语句/"},{"name":"pm2","slug":"pm2","permalink":"https://liuxianyu.cn/tags/pm2/"},{"name":"nginx","slug":"nginx","permalink":"https://liuxianyu.cn/tags/nginx/"},{"name":"https-SSL","slug":"https-SSL","permalink":"https://liuxianyu.cn/tags/https-SSL/"},{"name":"微信公众号","slug":"微信公众号","permalink":"https://liuxianyu.cn/tags/微信公众号/"},{"name":"Koa2","slug":"Koa2","permalink":"https://liuxianyu.cn/tags/Koa2/"},{"name":"导出pdf","slug":"导出pdf","permalink":"https://liuxianyu.cn/tags/导出pdf/"},{"name":"LaTeX","slug":"LaTeX","permalink":"https://liuxianyu.cn/tags/LaTeX/"},{"name":"yUML","slug":"yUML","permalink":"https://liuxianyu.cn/tags/yUML/"},{"name":"nuxt","slug":"nuxt","permalink":"https://liuxianyu.cn/tags/nuxt/"},{"name":"图片懒加载","slug":"图片懒加载","permalink":"https://liuxianyu.cn/tags/图片懒加载/"},{"name":"脚手架","slug":"脚手架","permalink":"https://liuxianyu.cn/tags/脚手架/"},{"name":"webpack","slug":"webpack","permalink":"https://liuxianyu.cn/tags/webpack/"},{"name":"自动化部署","slug":"自动化部署","permalink":"https://liuxianyu.cn/tags/自动化部署/"},{"name":"Element UI","slug":"Element-UI","permalink":"https://liuxianyu.cn/tags/Element-UI/"},{"name":"CDN","slug":"CDN","permalink":"https://liuxianyu.cn/tags/CDN/"},{"name":"埋点","slug":"埋点","permalink":"https://liuxianyu.cn/tags/埋点/"},{"name":"PhotoShop","slug":"PhotoShop","permalink":"https://liuxianyu.cn/tags/PhotoShop/"},{"name":"项目优化","slug":"项目优化","permalink":"https://liuxianyu.cn/tags/项目优化/"},{"name":"微信","slug":"微信","permalink":"https://liuxianyu.cn/tags/微信/"},{"name":"ngrok","slug":"ngrok","permalink":"https://liuxianyu.cn/tags/ngrok/"},{"name":"github","slug":"github","permalink":"https://liuxianyu.cn/tags/github/"},{"name":"Mac OS","slug":"Mac-OS","permalink":"https://liuxianyu.cn/tags/Mac-OS/"},{"name":"vscode","slug":"vscode","permalink":"https://liuxianyu.cn/tags/vscode/"},{"name":"高德地图","slug":"高德地图","permalink":"https://liuxianyu.cn/tags/高德地图/"},{"name":"Hosts","slug":"Hosts","permalink":"https://liuxianyu.cn/tags/Hosts/"},{"name":"wepy","slug":"wepy","permalink":"https://liuxianyu.cn/tags/wepy/"},{"name":"钉钉小程序","slug":"钉钉小程序","permalink":"https://liuxianyu.cn/tags/钉钉小程序/"},{"name":"VMware","slug":"VMware","permalink":"https://liuxianyu.cn/tags/VMware/"},{"name":"UOS","slug":"UOS","permalink":"https://liuxianyu.cn/tags/UOS/"},{"name":"Lodash","slug":"Lodash","permalink":"https://liuxianyu.cn/tags/Lodash/"},{"name":"Vant","slug":"Vant","permalink":"https://liuxianyu.cn/tags/Vant/"},{"name":"算法","slug":"算法","permalink":"https://liuxianyu.cn/tags/算法/"},{"name":"正则表达式","slug":"正则表达式","permalink":"https://liuxianyu.cn/tags/正则表达式/"},{"name":"随机头像","slug":"随机头像","permalink":"https://liuxianyu.cn/tags/随机头像/"},{"name":"MD5","slug":"MD5","permalink":"https://liuxianyu.cn/tags/MD5/"},{"name":"父子组件","slug":"父子组件","permalink":"https://liuxianyu.cn/tags/父子组件/"},{"name":"Hexo","slug":"Hexo","permalink":"https://liuxianyu.cn/tags/Hexo/"},{"name":"Dart","slug":"Dart","permalink":"https://liuxianyu.cn/tags/Dart/"},{"name":"兼容性","slug":"兼容性","permalink":"https://liuxianyu.cn/tags/兼容性/"},{"name":"跨域","slug":"跨域","permalink":"https://liuxianyu.cn/tags/跨域/"},{"name":"ECharts","slug":"ECharts","permalink":"https://liuxianyu.cn/tags/ECharts/"},{"name":"Mint UI","slug":"Mint-UI","permalink":"https://liuxianyu.cn/tags/Mint-UI/"},{"name":"Jekyll","slug":"Jekyll","permalink":"https://liuxianyu.cn/tags/Jekyll/"},{"name":"生命周期","slug":"生命周期","permalink":"https://liuxianyu.cn/tags/生命周期/"},{"name":"vConsole","slug":"vConsole","permalink":"https://liuxianyu.cn/tags/vConsole/"},{"name":"Egret","slug":"Egret","permalink":"https://liuxianyu.cn/tags/Egret/"},{"name":"微信小游戏","slug":"微信小游戏","permalink":"https://liuxianyu.cn/tags/微信小游戏/"},{"name":"倒计时","slug":"倒计时","permalink":"https://liuxianyu.cn/tags/倒计时/"},{"name":"Mock","slug":"Mock","permalink":"https://liuxianyu.cn/tags/Mock/"},{"name":"Oracle","slug":"Oracle","permalink":"https://liuxianyu.cn/tags/Oracle/"},{"name":"Angular","slug":"Angular","permalink":"https://liuxianyu.cn/tags/Angular/"},{"name":"勒索病毒","slug":"勒索病毒","permalink":"https://liuxianyu.cn/tags/勒索病毒/"},{"name":"Arduino","slug":"Arduino","permalink":"https://liuxianyu.cn/tags/Arduino/"},{"name":"Android","slug":"Android","permalink":"https://liuxianyu.cn/tags/Android/"}]}